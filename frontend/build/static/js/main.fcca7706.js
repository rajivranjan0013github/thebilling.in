/*! For license information please see main.fcca7706.js.LICENSE.txt */
(()=>{var e={730:(e,t,r)=>{"use strict";var n=r(43),a=r(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,r,n,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){x[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];x[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){x[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){x[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){x[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){x[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){x[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){x[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){x[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function y(e,t,r,n){var a=x.hasOwnProperty(t)?x[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!u.call(m,e)||!u.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,g);x[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,g);x[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,g);x[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){x[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),x.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){x[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var O,F=Object.assign;function L(e){if(void 0===O)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=n.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?L(e):""}function z(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case N:return"Portal";case C:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return V(e(t))}catch(r){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=W(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var r=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function X(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=$(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){Q(e,t);var r=$(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&K(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+$(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:$(r)}}function se(e,t){var r=$(t.value),n=$(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function xe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=pe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(fe).forEach((function(e){me.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,je=null,Se=null;function Ce(e){if(e=ya(e)){if("function"!==typeof Ne)throw Error(s(280));var t=e.stateNode;t&&(t=wa(t),Ne(e.stateNode,e.type,t))}}function ke(e){je?Se?Se.push(e):Se=[e]:je=e}function Ee(){if(je){var e=je,t=Se;if(Se=je=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Te(e,t){return e(t)}function De(){}var Ae=!1;function Pe(e,t,r){if(Ae)return e(t,r);Ae=!0;try{return Te(e,t,r)}finally{Ae=!1,(null!==je||null!==Se)&&(De(),Ee())}}function _e(e,t){var r=e.stateNode;if(null===r)return null;var n=wa(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Re=!1;if(d)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(de){Re=!1}function Me(e,t,r,n,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Oe=!1,Fe=null,Le=!1,Be=null,Ue={onError:function(e){Oe=!0,Fe=e}};function ze(e,t,r,n,a,s,i,o,l){Oe=!1,Fe=null,Me.apply(Ue,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ve(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return $e(a),e;if(i===n)return $e(a),t;i=i.sibling}throw Error(s(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,Ke=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Xe=a.unstable_requestPaint,Qe=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~a;0!==o?n=ut(o):0!==(s&=i)&&(n=ut(s))}else 0!==(i=r&~a)?n=ut(i):0!==s&&(n=ut(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-it(t)),n|=e[r],t&=~a;return n}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function xt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function gt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Nt,jt,St,Ct,kt=!1,Et=[],Tt=null,Dt=null,At=null,Pt=new Map,_t=new Map,Rt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_t.delete(t.pointerId)}}function Ot(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=ya(t))&&Nt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ft(e){var t=ga(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=He(r)))return e.blockedOn=t,void Ct(e.priority,(function(){jt(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ya(r))&&Nt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Bt(e,t,r){Lt(e)&&r.delete(t)}function Ut(){kt=!1,null!==Tt&&Lt(Tt)&&(Tt=null),null!==Dt&&Lt(Dt)&&(Dt=null),null!==At&&Lt(At)&&(At=null),Pt.forEach(Bt),_t.forEach(Bt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return zt(t,e)}if(0<Et.length){zt(Et[0],e);for(var r=1;r<Et.length;r++){var n=Et[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Dt&&zt(Dt,e),null!==At&&zt(At,e),Pt.forEach(t),_t.forEach(t),r=0;r<Rt.length;r++)(n=Rt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Rt.length&&null===(r=Rt[0]).blockedOn;)Ft(r),null===r.blockedOn&&Rt.shift()}var Ht=b.ReactCurrentBatchConfig,$t=!0;function Wt(e,t,r,n){var a=yt,s=Ht.transition;Ht.transition=null;try{yt=1,Gt(e,t,r,n)}finally{yt=a,Ht.transition=s}}function qt(e,t,r,n){var a=yt,s=Ht.transition;Ht.transition=null;try{yt=4,Gt(e,t,r,n)}finally{yt=a,Ht.transition=s}}function Gt(e,t,r,n){if($t){var a=Yt(e,t,r,n);if(null===a)$n(e,t,n,Kt,r),Mt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Tt=Ot(Tt,e,t,r,n,a),!0;case"dragenter":return Dt=Ot(Dt,e,t,r,n,a),!0;case"mouseover":return At=Ot(At,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return Pt.set(s,Ot(Pt.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,_t.set(s,Ot(_t.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Mt(e,n),4&t&&-1<It.indexOf(e)){for(;null!==a;){var s=ya(a);if(null!==s&&wt(s),null===(s=Yt(e,t,r,n))&&$n(e,t,n,Kt,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else $n(e,t,n,null,r)}}var Kt=null;function Yt(e,t,r,n){if(Kt=null,null!==(e=ga(e=we(n))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Jt,n=r.length,a="value"in Qt?Qt.value:Qt.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,s){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,ir,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(lr),dr=F({},lr,{view:0,detail:0}),ur=ar(dr),hr=F({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(sr=e.screenX-or.screenX,ir=e.screenY-or.screenY):ir=sr=0,or=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),fr=ar(hr),mr=ar(F({},hr,{dataTransfer:0})),pr=ar(F({},dr,{relatedTarget:0})),xr=ar(F({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),vr=F({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gr=ar(vr),yr=ar(F({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nr[e])&&!!t[e]}function Sr(){return jr}var Cr=F({},dr,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kr=ar(Cr),Er=ar(F({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tr=ar(F({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr})),Dr=ar(F({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ar=F({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=ar(Ar),_r=[9,13,27,32],Rr=d&&"CompositionEvent"in window,Ir=null;d&&"documentMode"in document&&(Ir=document.documentMode);var Mr=d&&"TextEvent"in window&&!Ir,Or=d&&(!Rr||Ir&&8<Ir&&11>=Ir),Fr=String.fromCharCode(32),Lr=!1;function Br(e,t){switch(e){case"keyup":return-1!==_r.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function $r(e,t,r,n){ke(n),0<(t=qn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wr=null,qr=null;function Gr(e){Ln(e,0)}function Kr(e){if(G(ba(e)))return e}function Yr(e,t){if("change"===e)return t}var Xr=!1;if(d){var Qr;if(d){var Jr="oninput"in document;if(!Jr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Jr="function"===typeof Zr.oninput}Qr=Jr}else Qr=!1;Xr=Qr&&(!document.documentMode||9<document.documentMode)}function en(){Wr&&(Wr.detachEvent("onpropertychange",tn),qr=Wr=null)}function tn(e){if("value"===e.propertyName&&Kr(qr)){var t=[];$r(t,qr,e,we(e)),Pe(Gr,t)}}function rn(e,t,r){"focusin"===e?(en(),qr=r,(Wr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kr(qr)}function an(e,t){if("click"===e)return Kr(t)}function sn(e,t){if("input"===e||"change"===e)return Kr(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!u.call(t,a)||!on(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=K((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&un(r.ownerDocument.documentElement,r)){if(null!==n&&fn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=void 0===n.end?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=dn(r,s);var i=dn(r,n);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pn=d&&"documentMode"in document&&11>=document.documentMode,xn=null,vn=null,gn=null,yn=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yn||null==xn||xn!==K(n)||("selectionStart"in(n=xn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},gn&&ln(gn,n)||(gn=n,0<(n=qn(vn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=xn)))}function wn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Nn={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionend:wn("Transition","TransitionEnd")},jn={},Sn={};function Cn(e){if(jn[e])return jn[e];if(!Nn[e])return e;var t,r=Nn[e];for(t in r)if(r.hasOwnProperty(t)&&t in Sn)return jn[e]=r[t];return e}d&&(Sn=document.createElement("div").style,"AnimationEvent"in window||(delete Nn.animationend.animation,delete Nn.animationiteration.animation,delete Nn.animationstart.animation),"TransitionEvent"in window||delete Nn.transitionend.transition);var kn=Cn("animationend"),En=Cn("animationiteration"),Tn=Cn("animationstart"),Dn=Cn("transitionend"),An=new Map,Pn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _n(e,t){An.set(e,t),l(t,[e])}for(var Rn=0;Rn<Pn.length;Rn++){var In=Pn[Rn];_n(In.toLowerCase(),"on"+(In[0].toUpperCase()+In.slice(1)))}_n(kn,"onAnimationEnd"),_n(En,"onAnimationIteration"),_n(Tn,"onAnimationStart"),_n("dblclick","onDoubleClick"),_n("focusin","onFocus"),_n("focusout","onBlur"),_n(Dn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),On=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mn));function Fn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,i,o,l,c){if(ze.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var d=Fe;Oe=!1,Fe=null,Le||(Le=!0,Be=d)}}(n,t,void 0,e),e.currentTarget=null}function Ln(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Fn(a,o,c),s=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Fn(a,o,c),s=l}}}if(Le)throw e=Be,Le=!1,Be=null,e}function Bn(e,t){var r=t[pa];void 0===r&&(r=t[pa]=new Set);var n=e+"__bubble";r.has(n)||(Hn(t,e,2,!1),r.add(n))}function Un(e,t,r){var n=0;t&&(n|=4),Hn(r,e,n,t)}var zn="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[zn]){e[zn]=!0,i.forEach((function(t){"selectionchange"!==t&&(On.has(t)||Un(t,!1,e),Un(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zn]||(t[zn]=!0,Un("selectionchange",!1,t))}}function Hn(e,t,r,n){switch(Xt(t)){case 1:var a=Wt;break;case 4:a=qt;break;default:a=Gt}r=a.bind(null,t,r,e),a=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function $n(e,t,r,n,a){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=n.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ga(o)))return;if(5===(l=i.tag)||6===l){n=s=i;continue e}o=o.parentNode}}n=n.return}Pe((function(){var n=s,a=we(r),i=[];e:{var o=An.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=kr;break;case"focusin":c="focus",l=pr;break;case"focusout":c="blur",l=pr;break;case"beforeblur":case"afterblur":l=pr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tr;break;case kn:case En:case Tn:l=xr;break;case Dn:l=Dr;break;case"scroll":l=ur;break;case"wheel":l=Pr;break;case"copy":case"cut":case"paste":l=gr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Er}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var f,m=n;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=_e(m,h))&&d.push(Wn(m,p,f)))),u)break;m=m.return}0<d.length&&(o=new l(o,c,null,r,a),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!ga(c)&&!c[ma])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?ga(c):null)&&(c!==(u=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(d=fr,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=Er,p="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?o:ba(l),f=null==c?o:ba(c),(o=new d(p,m+"leave",l,r,a)).target=u,o.relatedTarget=f,p=null,ga(a)===n&&((d=new d(h,m+"enter",c,r,a)).target=f,d.relatedTarget=u,p=d),u=p,l&&c)e:{for(h=c,m=0,f=d=l;f;f=Gn(f))m++;for(f=0,p=h;p;p=Gn(p))f++;for(;0<m-f;)d=Gn(d),m--;for(;0<f-m;)h=Gn(h),f--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Gn(d),h=Gn(h)}d=null}else d=null;null!==l&&Kn(i,o,l,d,!1),null!==c&&null!==u&&Kn(i,u,c,d,!0)}if("select"===(l=(o=n?ba(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var x=Yr;else if(Hr(o))if(Xr)x=sn;else{x=nn;var v=rn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(x=an);switch(x&&(x=x(e,n))?$r(i,x,r,a):(v&&v(e,o,n),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=n?ba(n):window,e){case"focusin":(Hr(v)||"true"===v.contentEditable)&&(xn=v,vn=n,gn=null);break;case"focusout":gn=vn=xn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,bn(i,r,a);break;case"selectionchange":if(pn)break;case"keydown":case"keyup":bn(i,r,a)}var g;if(Rr)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zr?Br(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(Or&&"ko"!==r.locale&&(zr||"onCompositionStart"!==y?"onCompositionEnd"===y&&zr&&(g=er()):(Jt="value"in(Qt=a)?Qt.value:Qt.textContent,zr=!0)),0<(v=qn(n,y)).length&&(y=new yr(y,e,null,r,a),i.push({event:y,listeners:v}),g?y.data=g:null!==(g=Ur(r))&&(y.data=g))),(g=Mr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Lr=!0,Fr);case"textInput":return(e=t.data)===Fr&&Lr?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!Rr&&Br(e,t)?(e=er(),Zt=Jt=Qt=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Or&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=qn(n,"onBeforeInput")).length&&(a=new yr("onBeforeInput","beforeinput",null,r,a),i.push({event:a,listeners:n}),a.data=g))}Ln(i,t)}))}function Wn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function qn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=_e(e,r))&&n.unshift(Wn(e,s,a)),null!=(s=_e(e,t))&&n.push(Wn(e,s,a))),e=e.return}return n}function Gn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kn(e,t,r,n,a){for(var s=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=_e(r,s))&&i.unshift(Wn(r,l,o)):a||null!=(l=_e(r,s))&&i.push(Wn(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Yn=/\r\n?/g,Xn=/\u0000|\uFFFD/g;function Qn(e){return("string"===typeof e?e:""+e).replace(Yn,"\n").replace(Xn,"")}function Jn(e,t,r){if(t=Qn(t),Qn(e)!==t&&r)throw Error(s(425))}function Zn(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:na;function oa(e){setTimeout((function(){throw e}))}function la(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void Vt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);Vt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ha="__reactFiber$"+ua,fa="__reactProps$"+ua,ma="__reactContainer$"+ua,pa="__reactEvents$"+ua,xa="__reactListeners$"+ua,va="__reactHandles$"+ua;function ga(e){var t=e[ha];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ma]||r[ha]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=da(e);null!==e;){if(r=e[ha])return r;e=da(e)}return t}r=(e=r).parentNode}return null}function ya(e){return!(e=e[ha]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wa(e){return e[fa]||null}var Na=[],ja=-1;function Sa(e){return{current:e}}function Ca(e){0>ja||(e.current=Na[ja],Na[ja]=null,ja--)}function ka(e,t){ja++,Na[ja]=e.current,e.current=t}var Ea={},Ta=Sa(Ea),Da=Sa(!1),Aa=Ea;function Pa(e,t){var r=e.type.contextTypes;if(!r)return Ea;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in r)s[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function _a(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ra(){Ca(Da),Ca(Ta)}function Ia(e,t,r){if(Ta.current!==Ea)throw Error(s(168));ka(Ta,t),ka(Da,r)}function Ma(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(s(108,H(e)||"Unknown",a));return F({},r,n)}function Oa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Aa=Ta.current,ka(Ta,e),ka(Da,Da.current),!0}function Fa(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=Ma(e,t,Aa),n.__reactInternalMemoizedMergedChildContext=e,Ca(Da),Ca(Ta),ka(Ta,e)):Ca(Da),ka(Da,r)}var La=null,Ba=!1,Ua=!1;function za(e){null===La?La=[e]:La.push(e)}function Va(){if(!Ua&&null!==La){Ua=!0;var e=0,t=yt;try{var r=La;for(yt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}La=null,Ba=!1}catch(a){throw null!==La&&(La=La.slice(e+1)),Ge(Ze,Va),a}finally{yt=t,Ua=!1}}return null}var Ha=[],$a=0,Wa=null,qa=0,Ga=[],Ka=0,Ya=null,Xa=1,Qa="";function Ja(e,t){Ha[$a++]=qa,Ha[$a++]=Wa,Wa=e,qa=t}function Za(e,t,r){Ga[Ka++]=Xa,Ga[Ka++]=Qa,Ga[Ka++]=Ya,Ya=e;var n=Xa;e=Qa;var a=32-it(n)-1;n&=~(1<<a),r+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Xa=1<<32-it(t)+a|r<<a|n,Qa=s+e}else Xa=1<<s|r<<a|n,Qa=e}function es(e){null!==e.return&&(Ja(e,1),Za(e,1,0))}function ts(e){for(;e===Wa;)Wa=Ha[--$a],Ha[$a]=null,qa=Ha[--$a],Ha[$a]=null;for(;e===Ya;)Ya=Ga[--Ka],Ga[Ka]=null,Qa=Ga[--Ka],Ga[Ka]=null,Xa=Ga[--Ka],Ga[Ka]=null}var rs=null,ns=null,as=!1,ss=null;function is(e,t){var r=Pc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function os(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,ns=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ya?{id:Xa,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Pc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,ns=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=ns;if(t){var r=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(r.nextSibling);var n=rs;t&&os(e,t)?is(n,r):(e.flags=-4097&e.flags|2,as=!1,rs=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function us(e){if(e!==rs)return!1;if(!as)return ds(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ns)){if(ls(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ns=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ns=null}}else ns=rs?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=ns;e;)e=ca(e.nextSibling)}function fs(){ns=rs=null,as=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var ps=b.ReactCurrentBatchConfig;function xs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var a=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gs(e){return(0,e._init)(e._payload)}function ys(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Fc(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===j?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===_&&gs(s)===t.type)?((n=a(t,r.props)).ref=xs(e,t,r),n.return=e,n):((n=Ic(r.type,r.key,r.props,null,e.mode,n)).ref=xs(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Lc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function u(e,t,r,n,s){return null===t||7!==t.tag?((t=Mc(r,e.mode,n,s)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Ic(t.type,t.key,t.props,null,e.mode,r)).ref=xs(e,null,t),r.return=e,r;case N:return(t=Lc(t,e.mode,r)).return=e,t;case _:return h(e,(0,t._init)(t._payload),r)}if(te(t)||M(t))return(t=Mc(t,e.mode,r,null)).return=e,t;vs(e,t)}return null}function f(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===a?c(e,t,r,n):null;case N:return r.key===a?d(e,t,r,n):null;case _:return f(e,t,(a=r._init)(r._payload),n)}if(te(r)||M(r))return null!==a?null:u(e,t,r,n,null);vs(e,r)}return null}function m(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case N:return d(t,e=e.get(null===n.key?r:n.key)||null,n,a);case _:return m(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||M(n))return u(t,e=e.get(r)||null,n,a,null);vs(t,n)}return null}function p(a,s,o,l){for(var c=null,d=null,u=s,p=s=0,x=null;null!==u&&p<o.length;p++){u.index>p?(x=u,u=null):x=u.sibling;var v=f(a,u,o[p],l);if(null===v){null===u&&(u=x);break}e&&u&&null===v.alternate&&t(a,u),s=i(v,s,p),null===d?c=v:d.sibling=v,d=v,u=x}if(p===o.length)return r(a,u),as&&Ja(a,p),c;if(null===u){for(;p<o.length;p++)null!==(u=h(a,o[p],l))&&(s=i(u,s,p),null===d?c=u:d.sibling=u,d=u);return as&&Ja(a,p),c}for(u=n(a,u);p<o.length;p++)null!==(x=m(u,a,p,o[p],l))&&(e&&null!==x.alternate&&u.delete(null===x.key?p:x.key),s=i(x,s,p),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach((function(e){return t(a,e)})),as&&Ja(a,p),c}function x(a,o,l,c){var d=M(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,p=o,x=o=0,v=null,g=l.next();null!==p&&!g.done;x++,g=l.next()){p.index>x?(v=p,p=null):v=p.sibling;var y=f(a,p,g.value,c);if(null===y){null===p&&(p=v);break}e&&p&&null===y.alternate&&t(a,p),o=i(y,o,x),null===u?d=y:u.sibling=y,u=y,p=v}if(g.done)return r(a,p),as&&Ja(a,x),d;if(null===p){for(;!g.done;x++,g=l.next())null!==(g=h(a,g.value,c))&&(o=i(g,o,x),null===u?d=g:u.sibling=g,u=g);return as&&Ja(a,x),d}for(p=n(a,p);!g.done;x++,g=l.next())null!==(g=m(p,a,x,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?x:g.key),o=i(g,o,x),null===u?d=g:u.sibling=g,u=g);return e&&p.forEach((function(e){return t(a,e)})),as&&Ja(a,x),d}return function e(n,s,i,l){if("object"===typeof i&&null!==i&&i.type===j&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=s;null!==d;){if(d.key===c){if((c=i.type)===j){if(7===d.tag){r(n,d.sibling),(s=a(d,i.props.children)).return=n,n=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===_&&gs(c)===d.type){r(n,d.sibling),(s=a(d,i.props)).ref=xs(n,d,i),s.return=n,n=s;break e}r(n,d);break}t(n,d),d=d.sibling}i.type===j?((s=Mc(i.props.children,n.mode,l,i.key)).return=n,n=s):((l=Ic(i.type,i.key,i.props,null,n.mode,l)).ref=xs(n,s,i),l.return=n,n=l)}return o(n);case N:e:{for(d=i.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){r(n,s.sibling),(s=a(s,i.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=Lc(i,n.mode,l)).return=n,n=s}return o(n);case _:return e(n,s,(d=i._init)(i._payload),l)}if(te(i))return p(n,s,i,l);if(M(i))return x(n,s,i,l);vs(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(r(n,s.sibling),(s=a(s,i)).return=n,n=s):(r(n,s),(s=Fc(i,n.mode,l)).return=n,n=s),o(n)):r(n,s)}}var bs=ys(!0),ws=ys(!1),Ns=Sa(null),js=null,Ss=null,Cs=null;function ks(){Cs=Ss=js=null}function Es(e){var t=Ns.current;Ca(Ns),e._currentValue=t}function Ts(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ds(e,t){js=e,Cs=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===js)throw Error(s(308));Ss=e,js.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ps=null;function _s(e){null===Ps?Ps=[e]:Ps.push(e)}function Rs(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,_s(t)):(r.next=a.next,a.next=r),t.interleaved=r,Is(e,n)}function Is(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ms=!1;function Os(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Tl)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Is(e,r)}return null===(a=n.interleaved)?(t.next=t,_s(n)):(t.next=a.next,a.next=t),n.interleaved=t,Is(e,r)}function Us(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,gt(e,r)}}function zs(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?a=s=i:s=s.next=i,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Vs(e,t,r,n){var a=e.updateQueue;Ms=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(i=0,d=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=r,p.tag){case 1:if("function"===typeof(m=p.payload)){u=m.call(f,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,u,h):m)||void 0===h)break e;u=F({},u,h);break e;case 2:Ms=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=f,l=u):d=d.next=f,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Ol|=i,e.lanes=i,e.memoizedState=u}}function Hs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(s(191,a));a.call(n)}}}var $s={},Ws=Sa($s),qs=Sa($s),Gs=Sa($s);function Ks(e){if(e===$s)throw Error(s(174));return e}function Ys(e,t){switch(ka(Gs,t),ka(qs,e),ka(Ws,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ca(Ws),ka(Ws,t)}function Xs(){Ca(Ws),Ca(qs),Ca(Gs)}function Qs(e){Ks(Gs.current);var t=Ks(Ws.current),r=le(t,e.type);t!==r&&(ka(qs,e),ka(Ws,r))}function Js(e){qs.current===e&&(Ca(Ws),Ca(qs))}var Zs=Sa(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=b.ReactCurrentDispatcher,ai=b.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function fi(){throw Error(s(321))}function mi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function pi(e,t,r,n,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?Ji:Zi,e=r(n,a),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ni.current=eo,e=r(n,a)}while(di)}if(ni.current=Qi,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function xi(){var e=0!==ui;return ui=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function gi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function yi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=gi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=oi,a=n.baseQueue,i=r.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(null!==a){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((si&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=n):c=c.next=h,ii.lanes|=u,Ol|=u}d=d.next}while(null!==d&&d!==i);null===c?o=n:c.next=l,on(n,t.memoizedState)||(yo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Ol|=i,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wi(e){var t=gi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);on(i,t.memoizedState)||(yo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Ni(){}function ji(e,t){var r=ii,n=gi(),a=t(),i=!on(n.memoizedState,a);if(i&&(n.memoizedState=a,yo=!0),n=n.queue,Mi(ki.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(r.flags|=2048,Ai(9,Ci.bind(null,r,n,a,t),void 0,null),null===Dl)throw Error(s(349));0!==(30&si)||Si(r,t,a)}return a}function Si(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ci(e,t,r,n){t.value=r,t.getSnapshot=n,Ei(t)&&Ti(e)}function ki(e,t,r){return r((function(){Ei(t)&&Ti(e)}))}function Ei(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function Ti(e){var t=Is(e,1);null!==t&&rc(t,e,1,-1)}function Di(e){var t=vi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[t.memoizedState,e]}function Ai(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Pi(){return gi().memoizedState}function _i(e,t,r,n){var a=vi();ii.flags|=e,a.memoizedState=Ai(1|t,r,void 0,void 0===n?null:n)}function Ri(e,t,r,n){var a=gi();n=void 0===n?null:n;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==n&&mi(n,i.deps))return void(a.memoizedState=Ai(t,r,s,n))}ii.flags|=e,a.memoizedState=Ai(1|t,r,s,n)}function Ii(e,t){return _i(8390656,8,e,t)}function Mi(e,t){return Ri(2048,8,e,t)}function Oi(e,t){return Ri(4,2,e,t)}function Fi(e,t){return Ri(4,4,e,t)}function Li(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bi(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ri(4,4,Li.bind(null,t,e),r)}function Ui(){}function zi(e,t){var r=gi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&mi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Vi(e,t){var r=gi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&mi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Hi(e,t,r){return 0===(21&si)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=r):(on(r,t)||(r=pt(),ii.lanes|=r,Ol|=r,e.baseState=!0),t)}function $i(e,t){var r=yt;yt=0!==r&&4>r?r:4,e(!0);var n=ai.transition;ai.transition={};try{e(!1),t()}finally{yt=r,ai.transition=n}}function Wi(){return gi().memoizedState}function qi(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ki(e))Yi(t,r);else if(null!==(r=Rs(e,t,r,n))){rc(r,e,n,ec()),Xi(r,t,n)}}function Gi(e,t,r){var n=tc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ki(e))Yi(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,r);if(a.hasEagerState=!0,a.eagerState=o,on(o,i)){var l=t.interleaved;return null===l?(a.next=a,_s(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Rs(e,t,a,n))&&(rc(r,e,n,a=ec()),Xi(r,t,n))}}function Ki(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Yi(e,t){di=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Xi(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,gt(e,r)}}var Qi={readContext:As,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:!1},Ji={readContext:As,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Ii,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,_i(4194308,4,Li.bind(null,t,e),r)},useLayoutEffect:function(e,t){return _i(4194308,4,e,t)},useInsertionEffect:function(e,t){return _i(4,2,e,t)},useMemo:function(e,t){var r=vi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=vi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=qi.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:Di,useDebugValue:Ui,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=Di(!1),t=e[0];return e=$i.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ii,a=vi();if(as){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===Dl)throw Error(s(349));0!==(30&si)||Si(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Ii(ki.bind(null,n,i,e),[e]),n.flags|=2048,Ai(9,Ci.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=vi(),t=Dl.identifierPrefix;if(as){var r=Qa;t=":"+t+"R"+(r=(Xa&~(1<<32-it(Xa)-1)).toString(32)+r),0<(r=ui++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:As,useCallback:zi,useContext:As,useEffect:Mi,useImperativeHandle:Bi,useInsertionEffect:Oi,useLayoutEffect:Fi,useMemo:Vi,useReducer:bi,useRef:Pi,useState:function(){return bi(yi)},useDebugValue:Ui,useDeferredValue:function(e){return Hi(gi(),oi.memoizedState,e)},useTransition:function(){return[bi(yi)[0],gi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:ji,useId:Wi,unstable_isNewReconciler:!1},eo={readContext:As,useCallback:zi,useContext:As,useEffect:Mi,useImperativeHandle:Bi,useInsertionEffect:Oi,useLayoutEffect:Fi,useMemo:Vi,useReducer:wi,useRef:Pi,useState:function(){return wi(yi)},useDebugValue:Ui,useDeferredValue:function(e){var t=gi();return null===oi?t.memoizedState=e:Hi(t,oi.memoizedState,e)},useTransition:function(){return[wi(yi)[0],gi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:ji,useId:Wi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=F({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:F({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Ls(n,a);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Bs(e,s,a))&&(rc(t,e,a,n),Us(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Ls(n,a);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Bs(e,s,a))&&(rc(t,e,a,n),Us(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),a=Ls(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Bs(e,a,n))&&(rc(t,e,n,r),Us(t,e,n))}};function ao(e,t,r,n,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(a,s))}function so(e,t,r){var n=!1,a=Ea,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(a=_a(t)?Aa:Ta.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?Pa(e,a):Ea),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Os(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=As(s):(s=_a(t)?Aa:Ta.current,a.context=Pa(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&no.enqueueReplaceState(a,a.state,null),Vs(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",n=t;do{r+=z(n),n=n.return}while(n);var a=r}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,r){(r=Ls(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){$l||($l=!0,Wl=n),uo(0,t)},r}function mo(e,t,r){(r=Ls(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof n&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function po(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ho;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Cc.bind(null,e,t,r),t.then(e,e))}function xo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ls(-1,1)).tag=2,Bs(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var go=b.ReactCurrentOwner,yo=!1;function bo(e,t,r,n){t.child=null===e?ws(t,null,r,n):bs(t,e.child,r,n)}function wo(e,t,r,n,a){r=r.render;var s=t.ref;return Ds(t,a),n=pi(e,t,r,n,s,a),r=xi(),null===e||yo?(as&&r&&es(t),t.flags|=1,bo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$o(e,t,a))}function No(e,t,r,n,a){if(null===e){var s=r.type;return"function"!==typeof s||_c(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ic(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,jo(e,t,s,n,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(i,n)&&e.ref===t.ref)return $o(e,t,a)}return t.flags|=1,(e=Rc(s,n)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(yo=!1,t.pendingProps=n=s,0===(e.lanes&a))return t.lanes=e.lanes,$o(e,t,a);0!==(131072&e.flags)&&(yo=!0)}}return ko(e,t,r,n,a)}function So(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ka(Rl,_l),_l|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ka(Rl,_l),_l|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,ka(Rl,_l),_l|=n}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,ka(Rl,_l),_l|=n;return bo(e,t,a,r),t.child}function Co(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ko(e,t,r,n,a){var s=_a(r)?Aa:Ta.current;return s=Pa(t,s),Ds(t,a),r=pi(e,t,r,n,s,a),n=xi(),null===e||yo?(as&&n&&es(t),t.flags|=1,bo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$o(e,t,a))}function Eo(e,t,r,n,a){if(_a(r)){var s=!0;Oa(t)}else s=!1;if(Ds(t,a),null===t.stateNode)Ho(e,t),so(t,r,n),oo(t,r,n,a),n=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=As(c):c=Pa(t,c=_a(r)?Aa:Ta.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==n||l!==c)&&io(t,i,n,c),Ms=!1;var h=t.memoizedState;i.state=h,Vs(t,n,i,a),l=t.memoizedState,o!==n||h!==l||Da.current||Ms?("function"===typeof d&&(ro(t,r,d,n),l=t.memoizedState),(o=Ms||ao(t,r,o,n,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Fs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=r.contextType)&&null!==l?l=As(l):l=Pa(t,l=_a(r)?Aa:Ta.current);var f=r.getDerivedStateFromProps;(d="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,n,l),Ms=!1,h=t.memoizedState,i.state=h,Vs(t,n,i,a);var m=t.memoizedState;o!==u||h!==m||Da.current||Ms?("function"===typeof f&&(ro(t,r,f,n),m=t.memoizedState),(c=Ms||ao(t,r,c,n,h,m,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),i.props=n,i.state=m,i.context=l,n=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return To(e,t,r,n,s,a)}function To(e,t,r,n,a,s){Co(e,t);var i=0!==(128&t.flags);if(!n&&!i)return a&&Fa(t,r,!1),$o(e,t,s);n=t.stateNode,go.current=t;var o=i&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=n.state,a&&Fa(t,r,!0),t.child}function Do(e){var t=e.stateNode;t.pendingContext?Ia(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(0,t.context,!1),Ys(e,t.containerInfo)}function Ao(e,t,r,n,a){return fs(),ms(a),t.flags|=256,bo(e,t,r,n),t.child}var Po,_o,Ro,Io,Mo={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,r){var n,a=t.pendingProps,i=Zs.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),ka(Zs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,a,0,null),e=Mc(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(r),t.memoizedState=Mo,e):Lo(t,l));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,r,n,a,i,o){if(r)return 256&t.flags?(t.flags&=-257,Bo(e,t,o,n=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Oc({mode:"visible",children:n.children},a,0,null),(i=Mc(i,a,o,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=Mo,i);if(0===(1&t.mode))return Bo(e,t,o,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var l=n.dgst;return n=l,Bo(e,t,o,n=co(i=Error(s(419)),n,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(n=Dl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Is(e,a),rc(n,e,a,-1))}return pc(),Bo(e,t,o,n=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ns=ca(a.nextSibling),rs=t,as=!0,ss=null,null!==e&&(Ga[Ka++]=Xa,Ga[Ka++]=Qa,Ga[Ka++]=Ya,Xa=e.id,Qa=e.overflow,Ya=t),t=Lo(t,n.children),t.flags|=4096,t)}(e,t,l,a,n,i,r);if(o){o=a.fallback,l=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?o=Rc(n,o):(o=Mc(o,l,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Mo,a}return e=(o=e.child).sibling,a=Rc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Lo(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bo(e,t,r,n){return null!==n&&ms(n),bs(t,e.child,null,r),(e=Lo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ts(e.return,t,r)}function zo(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function Vo(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(bo(e,t,n.children,r),0!==(2&(n=Zs.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,r,t);else if(19===e.tag)Uo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ka(Zs,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),zo(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}zo(t,!0,r,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $o(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Rc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Rc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Wo(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Go(e,t,r){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return _a(t.type)&&Ra(),qo(t),null;case 3:return n=t.stateNode,Xs(),Ca(Da),Ca(Ta),ri(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),_o(e,t),qo(t),null;case 5:Js(t);var a=Ks(Gs.current);if(r=t.type,null!==e&&null!=t.stateNode)Ro(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return qo(t),null}if(e=Ks(Ws.current),us(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ha]=t,n[fa]=i,e=0!==(1&t.mode),r){case"dialog":Bn("cancel",n),Bn("close",n);break;case"iframe":case"object":case"embed":Bn("load",n);break;case"video":case"audio":for(a=0;a<Mn.length;a++)Bn(Mn[a],n);break;case"source":Bn("error",n);break;case"img":case"image":case"link":Bn("error",n),Bn("load",n);break;case"details":Bn("toggle",n);break;case"input":X(n,i),Bn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Bn("invalid",n);break;case"textarea":ae(n,i),Bn("invalid",n)}for(var l in ge(r,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&Jn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Jn(n.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bn("scroll",n)}switch(r){case"input":q(n),Z(n,i,!0);break;case"textarea":q(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=Zn)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[ha]=t,e[fa]=n,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(r,n),r){case"dialog":Bn("cancel",e),Bn("close",e),a=n;break;case"iframe":case"object":case"embed":Bn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Mn.length;a++)Bn(Mn[a],e);a=n;break;case"source":Bn("error",e),a=n;break;case"img":case"image":case"link":Bn("error",e),Bn("load",e),a=n;break;case"details":Bn("toggle",e),a=n;break;case"input":X(e,n),a=Y(e,n),Bn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=F({},n,{value:void 0}),Bn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),Bn("invalid",e)}for(i in ge(r,a),c=a)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?xe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Bn("scroll",e):null!=d&&y(e,i,d,l))}switch(r){case"input":q(e),Z(e,n,!1);break;case"textarea":q(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+$(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?re(e,!!n.multiple,i,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Io(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(r=Ks(Gs.current),Ks(Ws.current),us(t)){if(n=t.stateNode,r=t.memoizedProps,n[ha]=t,(i=n.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Jn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jn(n.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ha]=t,t.stateNode=n}return qo(t),null;case 13:if(Ca(Zs),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,i=!1;else if(i=us(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ha]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Il&&(Il=3):pc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Xs(),_o(e,t),null===e&&Vn(t.stateNode.containerInfo),qo(t),null;case 10:return Es(t.type._context),qo(t),null;case 19:if(Ca(Zs),null===(i=t.memoizedState))return qo(t),null;if(n=0!==(128&t.flags),null===(l=i.rendering))if(n)Wo(i,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Wo(i,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(i=r).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ka(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>Vl&&(t.flags|=128,n=!0,Wo(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Wo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return qo(t),null}else 2*Qe()-i.renderingStartTime>Vl&&1073741824!==r&&(t.flags|=128,n=!0,Wo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=i.last)?r.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,r=Zs.current,ka(Zs,n?1&r|2:1&r),t):(qo(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&_l)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ko(e,t){switch(ts(t),t.tag){case 1:return _a(t.type)&&Ra(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Ca(Da),Ca(Ta),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Ca(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ca(Zs),null;case 4:return Xs(),null;case 10:return Es(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Po=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},_o=function(){},Ro=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ks(Ws.current);var s,i=null;switch(r){case"input":a=Y(e,a),n=Y(e,n),i=[];break;case"select":a=F({},a,{value:void 0}),n=F({},n,{value:void 0}),i=[];break;case"textarea":a=ne(e,a),n=ne(e,n),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=Zn)}for(d in ge(r,n),r=null,a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=null!=a?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Bn("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Io=function(e,t,r,n){r!==n&&(t.flags|=4)};var Yo=!1,Xo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Sc(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){Sc(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,r,s)}a=a.next}while(a!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function al(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[pa],delete t[xa],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)fl(e,t,r),r=r.sibling}function fl(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,r)}catch(o){}switch(r.tag){case 5:Xo||Zo(r,t);case 6:var n=dl,a=ul;dl=null,hl(e,t,r),ul=a,null!==(dl=n)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?la(e.parentNode,r):1===e.nodeType&&la(e,r),Vt(e)):la(dl,r.stateNode));break;case 4:n=dl,a=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=n,ul=a;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(r,t,i),a=a.next}while(a!==n)}hl(e,t,r);break;case 1:if(!Xo&&(Zo(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Sc(r,t,o)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Xo=(n=Xo)||null!==r.memoizedState,hl(e,t,r),Xo=n):hl(e,t,r);break;default:hl(e,t,r)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Qo),t.forEach((function(t){var n=Tc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function pl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));fl(i,o,a),dl=null,ul=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){Sc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),vl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(x){Sc(e,e.return,x)}try{rl(5,e,e.return)}catch(x){Sc(e,e.return,x)}}break;case 1:pl(t,e),vl(e),512&n&&null!==r&&Zo(r,r.return);break;case 5:if(pl(t,e),vl(e),512&n&&null!==r&&Zo(r,r.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(x){Sc(e,e.return,x)}}if(4&n&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Q(a,i),ye(l,o);var d=ye(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?xe(a,h):"dangerouslySetInnerHTML"===u?ue(a,h):"children"===u?he(a,h):y(a,u,h,d)}switch(l){case"input":J(a,i);break;case"textarea":se(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?re(a,!!i.multiple,m,!1):f!==!!i.multiple&&(null!=i.defaultValue?re(a,!!i.multiple,i.defaultValue,!0):re(a,!!i.multiple,i.multiple?[]:"",!1))}a[fa]=i}catch(x){Sc(e,e.return,x)}}break;case 6:if(pl(t,e),vl(e),4&n){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){Sc(e,e.return,x)}}break;case 3:if(pl(t,e),vl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(x){Sc(e,e.return,x)}break;case 4:default:pl(t,e),vl(e);break;case 13:pl(t,e),vl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(zl=Qe())),4&n&&ml(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Xo=(d=Xo)||u,pl(t,e),Xo=d):pl(t,e),vl(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Jo=e,u=e.child;null!==u;){for(h=Jo=u;null!==Jo;){switch(m=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:Zo(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){n=f,r=f.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(x){Sc(n,r,x)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==m?(m.return=f,Jo=m):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{a=h.stateNode,d?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(x){Sc(e,e.return,x)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){Sc(e,e.return,x)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),vl(e),4&n&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(il(r)){var n=r;break e}r=r.return}throw Error(s(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(he(a,""),n.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=n.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e,t,r){Jo=e,yl(e,t,r)}function yl(e,t,r){for(var n=0!==(1&e.mode);null!==Jo;){var a=Jo,s=a.child;if(22===a.tag&&n){var i=null!==a.memoizedState||Yo;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Yo;var c=Xo;if(Yo=i,(Xo=l)&&!c)for(Jo=a;null!==Jo;)l=(i=Jo).child,22===i.tag&&null!==i.memoizedState?Nl(a):null!==l?(l.return=i,Jo=l):Nl(a);for(;null!==s;)Jo=s,yl(s,t,r),s=s.sibling;Jo=a,Yo=o,Xo=c}bl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Jo=s):bl(e)}}function bl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Xo)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Hs(t,i,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Hs(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(s(163))}Xo||512&t.flags&&al(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Jo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Jo=r;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Jo=r;break}Jo=t.return}}function Nl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){Sc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(l){Sc(t,a,l)}}var s=t.return;try{al(t)}catch(l){Sc(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Sc(t,i,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var jl,Sl=Math.ceil,Cl=b.ReactCurrentDispatcher,kl=b.ReactCurrentOwner,El=b.ReactCurrentBatchConfig,Tl=0,Dl=null,Al=null,Pl=0,_l=0,Rl=Sa(0),Il=0,Ml=null,Ol=0,Fl=0,Ll=0,Bl=null,Ul=null,zl=0,Vl=1/0,Hl=null,$l=!1,Wl=null,ql=null,Gl=!1,Kl=null,Yl=0,Xl=0,Ql=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Tl)?Qe():-1!==Jl?Jl:Jl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Pl?Pl&-Pl:null!==ps.transition?(0===Zl&&(Zl=pt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,r,n){if(50<Xl)throw Xl=0,Ql=null,Error(s(185));vt(e,r,n),0!==(2&Tl)&&e===Dl||(e===Dl&&(0===(2&Tl)&&(Fl|=r),4===Il&&oc(e,Pl)),nc(e,n),1===r&&0===Tl&&0===(1&t.mode)&&(Vl=Qe()+500,Ba&&Va()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&r)&&0===(o&n)||(a[i]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=ht(e,e===Dl?Pl:0);if(0===n)null!==r&&Ke(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ke(r),1===t)0===e.tag?function(e){Ba=!0,za(e)}(lc.bind(null,e)):za(lc.bind(null,e)),ia((function(){0===(6&Tl)&&Va()})),r=null;else{switch(bt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Dc(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Jl=-1,Zl=0,0!==(6&Tl))throw Error(s(327));var r=e.callbackNode;if(Nc()&&e.callbackNode!==r)return null;var n=ht(e,e===Dl?Pl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=xc(e,n);else{t=n;var a=Tl;Tl|=2;var i=mc();for(Dl===e&&Pl===t||(Hl=null,Vl=Qe()+500,hc(e,t));;)try{gc();break}catch(l){fc(e,l)}ks(),Cl.current=i,Tl=a,null!==Al?t=0:(Dl=null,Pl=0,t=Il)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(n=a,t=sc(e,a))),1===t)throw r=Ml,hc(e,0),oc(e,n),nc(e,Qe()),r;if(6===t)oc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!on(s(),a))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=xc(e,n))&&(0!==(i=mt(e))&&(n=i,t=sc(e,i))),1===t))throw r=Ml,hc(e,0),oc(e,n),nc(e,Qe()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Ul,Hl);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=zl+500-Qe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(wc.bind(null,e,Ul,Hl),t);break}wc(e,Ul,Hl);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-it(n);i=1<<o,(o=t[o])>a&&(a=o),n&=~i}if(n=a,10<(n=(120>(n=Qe()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sl(n/1960))-n)){e.timeoutHandle=na(wc.bind(null,e,Ul,Hl),n);break}wc(e,Ul,Hl);break;default:throw Error(s(329))}}}return nc(e,Qe()),e.callbackNode===r?ac.bind(null,e):null}function sc(e,t){var r=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=Ul,Ul=r,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Ll,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&Tl))throw Error(s(327));Nc();var t=ht(e,0);if(0===(1&t))return nc(e,Qe()),null;var r=xc(e,t);if(0!==e.tag&&2===r){var n=mt(e);0!==n&&(t=n,r=sc(e,n))}if(1===r)throw r=Ml,hc(e,0),oc(e,t),nc(e,Qe()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Hl),nc(e,Qe()),null}function cc(e,t){var r=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=r)&&(Vl=Qe()+500,Ba&&Va())}}function dc(e){null!==Kl&&0===Kl.tag&&0===(6&Tl)&&Nc();var t=Tl;Tl|=1;var r=El.transition,n=yt;try{if(El.transition=null,yt=1,e)return e()}finally{yt=n,El.transition=r,0===(6&(Tl=t))&&Va()}}function uc(){_l=Rl.current,Ca(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Al)for(r=Al.return;null!==r;){var n=r;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Ra();break;case 3:Xs(),Ca(Da),Ca(Ta),ri();break;case 5:Js(n);break;case 4:Xs();break;case 13:case 19:Ca(Zs);break;case 10:Es(n.type._context);break;case 22:case 23:uc()}r=r.return}if(Dl=e,Al=e=Rc(e.current,null),Pl=_l=t,Il=0,Ml=null,Ll=Fl=Ol=0,Ul=Bl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(n=(r=Ps[t]).interleaved)){r.interleaved=null;var a=n.next,s=r.pending;if(null!==s){var i=s.next;s.next=a,n.next=i}r.pending=n}Ps=null}return e}function fc(e,t){for(;;){var r=Al;try{if(ks(),ni.current=Qi,ci){for(var n=ii.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}ci=!1}if(si=0,li=oi=ii=null,di=!1,ui=0,kl.current=null,null===r||null===r.return){Il=1,Ml=t,Al=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=xo(o);if(null!==m){m.flags&=-257,vo(m,o,l,0,t),1&m.mode&&po(i,d,t),c=d;var p=(t=m).updateQueue;if(null===p){var x=new Set;x.add(c),t.updateQueue=x}else p.add(c);break e}if(0===(1&t)){po(i,d,t),pc();break e}c=Error(s(426))}else if(as&&1&l.mode){var v=xo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ms(lo(c,l));break e}}i=c=lo(c,l),4!==Il&&(Il=2),null===Bl?Bl=[i]:Bl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,zs(i,fo(0,c,t));break e;case 1:l=c;var g=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof g.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===ql||!ql.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,zs(i,mo(i,l,t));break e}}i=i.return}while(null!==i)}bc(r)}catch(b){t=b,Al===r&&null!==r&&(Al=r=r.return);continue}break}}function mc(){var e=Cl.current;return Cl.current=Qi,null===e?Qi:e}function pc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Dl||0===(268435455&Ol)&&0===(268435455&Fl)||oc(Dl,Pl)}function xc(e,t){var r=Tl;Tl|=2;var n=mc();for(Dl===e&&Pl===t||(Hl=null,hc(e,t));;)try{vc();break}catch(a){fc(e,a)}if(ks(),Tl=r,Cl.current=n,null!==Al)throw Error(s(261));return Dl=null,Pl=0,Il}function vc(){for(;null!==Al;)yc(Al)}function gc(){for(;null!==Al&&!Ye();)yc(Al)}function yc(e){var t=jl(e.alternate,e,_l);e.memoizedProps=e.pendingProps,null===t?bc(e):Al=t,kl.current=null}function bc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Go(r,t,_l)))return void(Al=r)}else{if(null!==(r=Ko(r,t)))return r.flags&=32767,void(Al=r);if(null===e)return Il=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Il&&(Il=5)}function wc(e,t,r){var n=yt,a=El.transition;try{El.transition=null,yt=1,function(e,t,r,n){do{Nc()}while(null!==Kl);if(0!==(6&Tl))throw Error(s(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-it(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}(e,i),e===Dl&&(Al=Dl=null,Pl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Gl||(Gl=!0,Dc(tt,(function(){return Nc(),null}))),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=El.transition,El.transition=null;var o=yt;yt=1;var l=Tl;Tl|=4,kl.current=null,function(e,t){if(ea=$t,fn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(w){r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var m;h!==r||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++d===a&&(l=o),f===i&&++u===n&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},$t=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var x=p.memoizedProps,v=p.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?x:to(t.type,x),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}p=tl,tl=!1}(e,r),xl(r,e),mn(ta),$t=!!ea,ta=ea=null,e.current=r,gl(r,e,a),Xe(),Tl=l,yt=o,El.transition=i}else e.current=r;if(Gl&&(Gl=!1,Kl=e,Yl=a),i=e.pendingLanes,0===i&&(ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Qe()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if($l)throw $l=!1,e=Wl,Wl=null,e;0!==(1&Yl)&&0!==e.tag&&Nc(),i=e.pendingLanes,0!==(1&i)?e===Ql?Xl++:(Xl=0,Ql=e):Xl=0,Va()}(e,t,r,n)}finally{El.transition=a,yt=n}return null}function Nc(){if(null!==Kl){var e=bt(Yl),t=El.transition,r=yt;try{if(El.transition=null,yt=16>e?16:e,null===Kl)var n=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Tl))throw Error(s(331));var a=Tl;for(Tl|=4,Jo=e.current;null!==Jo;){var i=Jo,o=i.child;if(0!==(16&Jo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Jo=d;null!==Jo;){var u=Jo;switch(u.tag){case 0:case 11:case 15:rl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Jo=h;else for(;null!==Jo;){var f=(u=Jo).sibling,m=u.return;if(sl(u),u===d){Jo=null;break}if(null!==f){f.return=m,Jo=f;break}Jo=m}}}var p=i.alternate;if(null!==p){var x=p.child;if(null!==x){p.child=null;do{var v=x.sibling;x.sibling=null,x=v}while(null!==x)}}Jo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(i=Jo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var g=i.sibling;if(null!==g){g.return=i.return,Jo=g;break e}Jo=i.return}}var y=e.current;for(Jo=y;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=y;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(N){Sc(l,l.return,N)}if(l===o){Jo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Jo=w;break e}Jo=l.return}}if(Tl=a,Va(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(N){}n=!0}return n}finally{yt=r,El.transition=t}}return!1}function jc(e,t,r){e=Bs(e,t=fo(0,t=lo(r,t),1),1),t=ec(),null!==e&&(vt(e,1,t),nc(e,t))}function Sc(e,t,r){if(3===e.tag)jc(e,e,r);else for(;null!==t;){if(3===t.tag){jc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===ql||!ql.has(n))){t=Bs(t,e=mo(t,e=lo(r,e),1),1),e=ec(),null!==t&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function Cc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Dl===e&&(Pl&r)===r&&(4===Il||3===Il&&(130023424&Pl)===Pl&&500>Qe()-zl?hc(e,0):Ll|=r),nc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Is(e,t))&&(vt(e,t,r),nc(e,r))}function Ec(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),kc(e,r)}function Tc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),kc(e,r)}function Dc(e,t){return Ge(e,t)}function Ac(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,r,n){return new Ac(e,t,r,n)}function _c(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var r=e.alternate;return null===r?((r=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ic(e,t,r,n,a,i){var o=2;if(n=e,"function"===typeof e)_c(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case j:return Mc(r.children,a,i,t);case S:o=8,a|=8;break;case C:return(e=Pc(12,r,t,2|a)).elementType=C,e.lanes=i,e;case D:return(e=Pc(13,r,t,a)).elementType=D,e.lanes=i,e;case A:return(e=Pc(19,r,t,a)).elementType=A,e.lanes=i,e;case R:return Oc(r,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:o=10;break e;case E:o=9;break e;case T:o=11;break e;case P:o=14;break e;case _:o=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(o,r,t,a)).elementType=e,t.type=n,t.lanes=i,t}function Mc(e,t,r,n){return(e=Pc(7,e,n,t)).lanes=r,e}function Oc(e,t,r,n){return(e=Pc(22,e,n,t)).elementType=R,e.lanes=r,e.stateNode={isHidden:!1},e}function Fc(e,t,r){return(e=Pc(6,e,null,t)).lanes=r,e}function Lc(e,t,r){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uc(e,t,r,n,a,s,i,o,l){return e=new Bc(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Os(s),e}function zc(e){if(!e)return Ea;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_a(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(_a(r))return Ma(e,r,t)}return t}function Vc(e,t,r,n,a,s,i,o,l){return(e=Uc(r,n,!0,e,0,s,0,o,l)).context=zc(null),r=e.current,(s=Ls(n=ec(),a=tc(r))).callback=void 0!==t&&null!==t?t:null,Bs(r,s,a),e.current.lanes=a,vt(e,a,n),nc(e,n),e}function Hc(e,t,r,n){var a=t.current,s=ec(),i=tc(a);return r=zc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ls(s,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Bs(a,t,i))&&(rc(e,a,i,s),Us(e,a,i)),i}function $c(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function qc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}jl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Da.current)yo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return yo=!1,function(e,t,r){switch(t.tag){case 3:Do(t),fs();break;case 5:Qs(t);break;case 1:_a(t.type)&&Oa(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ka(Ns,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(ka(Zs,1&Zs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Fo(e,t,r):(ka(Zs,1&Zs.current),null!==(e=$o(e,t,r))?e.sibling:null);ka(Zs,1&Zs.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Vo(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),ka(Zs,Zs.current),n)break;return null;case 22:case 23:return t.lanes=0,So(e,t,r)}return $o(e,t,r)}(e,t,r);yo=0!==(131072&e.flags)}else yo=!1,as&&0!==(1048576&t.flags)&&Za(t,qa,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ho(e,t),e=t.pendingProps;var a=Pa(t,Ta.current);Ds(t,r),a=pi(null,t,n,e,a,r);var i=xi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_a(n)?(i=!0,Oa(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Os(t),a.updater=no,t.stateNode=a,a._reactInternals=t,oo(t,n,e,r),t=To(null,t,n,!0,i,r)):(t.tag=0,as&&i&&es(t),bo(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return _c(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(n),e=to(n,e),a){case 0:t=ko(null,t,n,e,r);break e;case 1:t=Eo(null,t,n,e,r);break e;case 11:t=wo(null,t,n,e,r);break e;case 14:t=No(null,t,n,to(n.type,e),r);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,ko(e,t,n,a=t.elementType===n?a:to(n,a),r);case 1:return n=t.type,a=t.pendingProps,Eo(e,t,n,a=t.elementType===n?a:to(n,a),r);case 3:e:{if(Do(t),null===e)throw Error(s(387));n=t.pendingProps,a=(i=t.memoizedState).element,Fs(e,t),Vs(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ao(e,t,n,r,a=lo(Error(s(423)),t));break e}if(n!==a){t=Ao(e,t,n,r,a=lo(Error(s(424)),t));break e}for(ns=ca(t.stateNode.containerInfo.firstChild),rs=t,as=!0,ss=null,r=ws(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fs(),n===a){t=$o(e,t,r);break e}bo(e,t,n,r)}t=t.child}return t;case 5:return Qs(t),null===e&&cs(t),n=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,ra(n,a)?o=null:null!==i&&ra(n,i)&&(t.flags|=32),Co(e,t),bo(e,t,o,r),t.child;case 6:return null===e&&cs(t),null;case 13:return Fo(e,t,r);case 4:return Ys(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=bs(t,null,n,r):bo(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,wo(e,t,n,a=t.elementType===n?a:to(n,a),r);case 7:return bo(e,t,t.pendingProps,r),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,ka(Ns,n._currentValue),n._currentValue=o,null!==i)if(on(i.value,o)){if(i.children===a.children&&!Da.current){t=$o(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=Ls(-1,r&-r)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Ts(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Ts(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ds(t,r),n=n(a=As(a)),t.flags|=1,bo(e,t,n,r),t.child;case 14:return a=to(n=t.type,t.pendingProps),No(e,t,n,a=to(n.type,a),r);case 15:return jo(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:to(n,a),Ho(e,t),t.tag=1,_a(n)?(e=!0,Oa(t)):e=!1,Ds(t,r),so(t,n,a),oo(t,n,a,r),To(null,t,n,!0,e,r);case 19:return Vo(e,t,r);case 22:return So(e,t,r)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=$c(i);o.call(e)}}Hc(t,i,e,a)}else i=function(e,t,r,n,a){if(a){if("function"===typeof n){var s=n;n=function(){var e=$c(i);s.call(e)}}var i=Vc(t,n,e,0,null,!1,0,"",Jc);return e._reactRootContainer=i,e[ma]=i.current,Vn(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var o=n;n=function(){var e=$c(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[ma]=l.current,Vn(8===e.nodeType?e.parentNode:e),dc((function(){Hc(t,l,r,n)})),l}(r,t,e,a,n);return $c(i)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Hc(null,e,null,null)})),t[ma]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Rt.length&&0!==t&&t<Rt[r].priority;r++);Rt.splice(r,0,e),0===r&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(gt(t,1|r),nc(t,Qe()),0===(6&Tl)&&(Vl=Qe()+500,Va()))}break;case 13:dc((function(){var t=Is(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}})),qc(e,1)}},Nt=function(e){if(13===e.tag){var t=Is(e,134217728);if(null!==t)rc(t,e,134217728,ec());qc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),r=Is(e,t);if(null!==r)rc(r,e,t,ec());qc(e,t)}},St=function(){return yt},Ct=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}},Ne=function(e,t,r){switch(t){case"input":if(J(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=wa(n);if(!a)throw Error(s(90));G(n),J(n,a)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Te=cc,De=dc;var ed={usingClientEntryPoint:!1,Events:[ya,ba,wa,ke,Ee,cc]},td={findFiberByHostInstance:ga,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{at=nd.inject(rd),st=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var r=!1,n="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,n,a),e[ma]=t.current,Vn(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Qc(t))throw Error(s(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Xc(e))throw Error(s(405));var n=null!=r&&r.hydratedSources||null,a=!1,i="",o=Gc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Vc(t,null,e,1,null!=r?r:null,a,0,i,o),e[ma]=t.current,Vn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Yc(t)},t.render=function(e,t,r){if(!Qc(t))throw Error(s(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ma]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Qc(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,r)=>{"use strict";var n=r(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)},141:function(e,t,r){var n,a;"undefined"!=typeof self&&self,e.exports=(n=r(43),a=r(950),function(){"use strict";var e={328:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.PrintContextConsumer=t.PrintContext=void 0;var n=r(496),a=Object.prototype.hasOwnProperty.call(n,"createContext");t.PrintContext=a?n.createContext({}):null,t.PrintContextConsumer=t.PrintContext?t.PrintContext.Consumer:function(){return null}},428:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ReactToPrint=void 0;var n=r(316),a=r(496),s=r(190),i=r(328),o=r(940),l=function(e){function t(){var t=e.apply(this,n.__spreadArray([],n.__read(arguments),!1))||this;return t.startPrint=function(e){var r=t.props,n=r.onAfterPrint,a=r.onPrintError,s=r.print,i=r.documentTitle;setTimeout((function(){var r,o;if(e.contentWindow)if(e.contentWindow.focus(),s)s(e).then((function(){return null==n?void 0:n()})).then((function(){return t.handleRemoveIframe()})).catch((function(e){a?a("print",e):t.logMessages(["An error was thrown by the specified `print` function"])}));else{if(e.contentWindow.print){var l=null!==(o=null===(r=e.contentDocument)||void 0===r?void 0:r.title)&&void 0!==o?o:"",c=e.ownerDocument.title;i&&(e.ownerDocument.title=i,e.contentDocument&&(e.contentDocument.title=i)),e.contentWindow.print(),i&&(e.ownerDocument.title=c,e.contentDocument&&(e.contentDocument.title=l))}else t.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);null==n||n(),t.handleRemoveIframe()}else t.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])}),500)},t.triggerPrint=function(e){var r=t.props,n=r.onBeforePrint,a=r.onPrintError;if(n){var s=n();s&&"function"==typeof s.then?s.then((function(){t.startPrint(e)})).catch((function(e){a&&a("onBeforePrint",e)})):t.startPrint(e)}else t.startPrint(e)},t.handlePrint=function(e){var r=t.props,a=r.bodyClass,i=r.content,o=r.copyStyles,l=r.fonts,c=r.pageStyle,d=r.nonce,u="function"==typeof e?e():null;if(u&&"function"==typeof i&&t.logMessages(['"react-to-print" received a `content` prop and a content param passed the callback return by `useReactToPrint. The `content` prop will be ignored.'],"warning"),u||"function"!=typeof i||(u=i()),void 0!==u)if(null!==u){var h=document.createElement("iframe");h.width="".concat(document.documentElement.clientWidth,"px"),h.height="".concat(document.documentElement.clientHeight,"px"),h.style.position="absolute",h.style.top="-".concat(document.documentElement.clientHeight+100,"px"),h.style.left="-".concat(document.documentElement.clientWidth+100,"px"),h.id="printWindow",h.srcdoc="<!DOCTYPE html>";var f=(0,s.findDOMNode)(u);if(f){var m=f.cloneNode(!0),p=m instanceof Text,x=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),v=p?[]:m.querySelectorAll("img"),g=p?[]:m.querySelectorAll("video"),y=l?l.length:0;t.numResourcesToLoad=x.length+v.length+g.length+y,t.resourcesLoaded=[],t.resourcesErrored=[];var b=function(e,r){t.resourcesLoaded.includes(e)?t.logMessages(["Tried to mark a resource that has already been handled",e],"debug"):(r?(t.logMessages(n.__spreadArray(['"react-to-print" was unable to load a resource but will continue attempting to print the page'],n.__read(r),!1)),t.resourcesErrored.push(e)):t.resourcesLoaded.push(e),t.resourcesLoaded.length+t.resourcesErrored.length===t.numResourcesToLoad&&t.triggerPrint(h))};h.onload=function(){var e,r,s,i;h.onload=null;var u=h.contentDocument||(null===(r=h.contentWindow)||void 0===r?void 0:r.document);if(u){u.body.appendChild(m),l&&((null===(s=h.contentDocument)||void 0===s?void 0:s.fonts)&&(null===(i=h.contentWindow)||void 0===i?void 0:i.FontFace)?l.forEach((function(e){var t=new FontFace(e.family,e.source,{weight:e.weight,style:e.style});h.contentDocument.fonts.add(t),t.loaded.then((function(){b(t)})).catch((function(e){b(t,["Failed loading the font:",t,"Load error:",e])}))})):(l.forEach((function(e){return b(e)})),t.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));var x="function"==typeof c?c():c;if("string"!=typeof x)t.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof x,'". Styles from `pageStyle` will not be applied.')]);else{var y=u.createElement("style");d&&(y.setAttribute("nonce",d),u.head.setAttribute("nonce",d)),y.appendChild(u.createTextNode(x)),u.head.appendChild(y)}if(a&&(e=u.body.classList).add.apply(e,n.__spreadArray([],n.__read(a.split(" ")),!1)),!p){for(var w=p?[]:f.querySelectorAll("canvas"),N=u.querySelectorAll("canvas"),j=0;j<w.length;++j){var S=w[j],C=N[j].getContext("2d");C&&C.drawImage(S,0,0)}var k=function(e){var t=v[e],r=t.getAttribute("src");if(r){var n=new Image;n.onload=function(){return b(t)},n.onerror=function(e,r,n,a,s){return b(t,["Error loading <img>",t,"Error",s])},n.src=r}else b(t,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it. The <img> is:',t])};for(j=0;j<v.length;j++)k(j);var E=function(e){var t=g[e];t.preload="auto";var r=t.getAttribute("poster");if(r){var n=new Image;n.onload=function(){return b(t)},n.onerror=function(e,n,a,s,i){return b(t,["Error loading video poster",r,"for video",t,"Error:",i])},n.src=r}else t.readyState>=2?b(t):(t.onloadeddata=function(){return b(t)},t.onerror=function(e,r,n,a,s){return b(t,["Error loading video",t,"Error",s])},t.onstalled=function(){return b(t,["Loading video stalled, skipping",t])})};for(j=0;j<g.length;j++)E(j);var T="input",D=f.querySelectorAll(T),A=u.querySelectorAll(T);for(j=0;j<D.length;j++)A[j].value=D[j].value;var P="input[type=checkbox],input[type=radio]",_=f.querySelectorAll(P),R=u.querySelectorAll(P);for(j=0;j<_.length;j++)R[j].checked=_[j].checked;var I="select",M=f.querySelectorAll(I),O=u.querySelectorAll(I);for(j=0;j<M.length;j++)O[j].value=M[j].value}if(o)for(var F=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']"),L=function(e,r){var n=F[e];if("style"===n.tagName.toLowerCase()){var a=u.createElement(n.tagName),s=n.sheet;if(s){var i="";try{for(var o=s.cssRules.length,l=0;l<o;++l)"string"==typeof s.cssRules[l].cssText&&(i+="".concat(s.cssRules[l].cssText,"\r\n"))}catch(e){t.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",n],"warning")}a.setAttribute("id","react-to-print-".concat(e)),d&&a.setAttribute("nonce",d),a.appendChild(u.createTextNode(i)),u.head.appendChild(a)}}else if(n.getAttribute("href"))if(n.hasAttribute("disabled"))t.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",n],"warning"),b(n);else{for(var c=u.createElement(n.tagName),h=(l=0,n.attributes.length);l<h;++l){var f=n.attributes[l];f&&c.setAttribute(f.nodeName,f.nodeValue||"")}c.onload=function(){return b(c)},c.onerror=function(e,t,r,n,a){return b(c,["Failed to load",c,"Error:",a])},d&&c.setAttribute("nonce",d),u.head.appendChild(c)}else t.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",n],"warning"),b(n)},B=(j=0,F.length);j<B;++j)L(j)}0!==t.numResourcesToLoad&&o||t.triggerPrint(h)},t.handleRemoveIframe(!0),document.body.appendChild(h)}else t.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else t.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else t.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},t.handleRemoveIframe=function(e){var r=t.props.removeAfterPrint;if(e||r){var n=document.getElementById("printWindow");n&&document.body.removeChild(n)}},t.logMessages=function(e,r){void 0===r&&(r="error"),t.props.suppressErrors||("error"===r?console.error(e):"warning"===r?console.warn(e):"debug"===r&&console.debug(e))},t}return n.__extends(t,e),t.prototype.handleClick=function(e,t){var r=this,n=this.props,a=n.onBeforeGetContent,s=n.onPrintError;if(a){var i=a();i&&"function"==typeof i.then?i.then((function(){return r.handlePrint(t)})).catch((function(e){s&&s("onBeforeGetContent",e)})):this.handlePrint(t)}else this.handlePrint(t)},t.prototype.render=function(){var e=this.props,t=e.children,r=e.trigger;if(r)return a.cloneElement(r(),{onClick:this.handleClick.bind(this)});if(!i.PrintContext)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var n={handlePrint:this.handleClick.bind(this)};return a.createElement(i.PrintContext.Provider,{value:n},t)},t.defaultProps=o.defaultProps,t}(a.Component);t.ReactToPrint=l},940:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=void 0,t.defaultProps={copyStyles:!0,pageStyle:"\n        @page {\n            /* Remove browser default header (title) and footer (url) */\n            margin: 0;\n        }\n        @media print {\n            body {\n                /* Tell browsers to print background colors */\n                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */\n                color-adjust: exact; /* Firefox */\n            }\n        }\n    ",removeAfterPrint:!1,suppressErrors:!1}},892:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.useReactToPrint=void 0;var n=r(316),a=r(496),s=r(428),i=r(940),o=r(860),l=Object.prototype.hasOwnProperty.call(a,"useMemo")&&Object.prototype.hasOwnProperty.call(a,"useCallback");t.useReactToPrint=function(e){if(!l)return e.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var t=a.useMemo((function(){return new s.ReactToPrint(n.__assign(n.__assign({},i.defaultProps),e))}),[e]);return a.useCallback((function(e,r){return(0,o.wrapCallbackWithArgs)(t,t.handleClick,r)(e)}),[t])}},860:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCallbackWithArgs=void 0;var n=r(316);t.wrapCallbackWithArgs=function(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return t.apply(e,n.__spreadArray(n.__spreadArray([],n.__read(a),!1),n.__read(r),!1))}}},496:function(e){e.exports=n},190:function(e){e.exports=a},316:function(e,t,r){r.r(t),r.d(t,{__addDisposableResource:function(){return I},__assign:function(){return s},__asyncDelegator:function(){return C},__asyncGenerator:function(){return S},__asyncValues:function(){return k},__await:function(){return j},__awaiter:function(){return m},__classPrivateFieldGet:function(){return P},__classPrivateFieldIn:function(){return R},__classPrivateFieldSet:function(){return _},__createBinding:function(){return x},__decorate:function(){return o},__disposeResources:function(){return O},__esDecorate:function(){return c},__exportStar:function(){return v},__extends:function(){return a},__generator:function(){return p},__importDefault:function(){return A},__importStar:function(){return D},__makeTemplateObject:function(){return E},__metadata:function(){return f},__param:function(){return l},__propKey:function(){return u},__read:function(){return y},__rest:function(){return i},__runInitializers:function(){return d},__setFunctionName:function(){return h},__spread:function(){return b},__spreadArray:function(){return N},__spreadArrays:function(){return w},__values:function(){return g}});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function o(e,t,r,n){var a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(s<3?a(i):s>3?a(t,r,i):a(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function l(e,t){return function(r,n){t(r,n,e)}}function c(e,t,r,n,a,s){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?n.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),h=!1,f=r.length-1;f>=0;f--){var m={};for(var p in n)m[p]="access"===p?{}:n[p];for(var p in n.access)m.access[p]=n.access[p];m.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(e||null))};var x=(0,r[f])("accessor"===l?{get:u.get,set:u.set}:u[c],m);if("accessor"===l){if(void 0===x)continue;if(null===x||"object"!=typeof x)throw new TypeError("Object expected");(o=i(x.get))&&(u.get=o),(o=i(x.set))&&(u.set=o),(o=i(x.init))&&a.unshift(o)}else(o=i(x))&&("field"===l?a.unshift(o):u[c]=o)}d&&Object.defineProperty(d,n.name,u),h=!0}function d(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function h(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function m(e,t,r,n){return new(r||(r=Promise))((function(a,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,o)}l((n=n.apply(e,t||[])).next())}))}function p(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var x=Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function v(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||x(t,e,r)}function g(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return i}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function w(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,a++)n[a]=s[i];return n}function N(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}function j(e){return this instanceof j?(this.v=e,this):new j(e)}function S(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),s=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){a[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||o(e,t)}))})}function o(e,t){try{(r=a[e](t)).value instanceof j?Promise.resolve(r.value.v).then(l,c):d(s[0][2],r)}catch(e){d(s[0][3],e)}var r}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function C(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,a){t[n]=e[n]?function(t){return(r=!r)?{value:j(e[n](t)),done:!1}:a?a(t):t}:a}}function k(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=g(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,a){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,a,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var T=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function D(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&x(t,e,r);return T(t,e),t}function A(e){return e&&e.__esModule?e:{default:e}}function P(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function _(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r}function R(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function I(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if("function"!=typeof n)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var M="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function O(e){function t(t){e.error=e.hasError?new M(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function r(){for(;e.stack.length;){var n=e.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,(function(e){return t(e),r()}))}catch(e){t(e)}}if(e.hasError)throw e.error}()}t.default={__extends:a,__assign:s,__rest:i,__decorate:o,__param:l,__metadata:f,__awaiter:m,__generator:p,__createBinding:x,__exportStar:v,__values:g,__read:y,__spread:b,__spreadArrays:w,__spreadArray:N,__await:j,__asyncGenerator:S,__asyncDelegator:C,__asyncValues:k,__makeTemplateObject:E,__importStar:D,__importDefault:A,__classPrivateFieldGet:P,__classPrivateFieldSet:_,__classPrivateFieldIn:R,__addDisposableResource:I,__disposeResources:O}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return function(){var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.useReactToPrint=e.ReactToPrint=e.PrintContextConsumer=void 0;var t=r(328);Object.defineProperty(e,"PrintContextConsumer",{enumerable:!0,get:function(){return t.PrintContextConsumer}});var n=r(428);Object.defineProperty(e,"ReactToPrint",{enumerable:!0,get:function(){return n.ReactToPrint}});var a=r(892);Object.defineProperty(e,"useReactToPrint",{enumerable:!0,get:function(){return a.useReactToPrint}});var i=r(428);e.default=i.ReactToPrint}(),s}())},153:(e,t,r)=>{"use strict";var n=r(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,s={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,x={};function v(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||m}function g(){}function y(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=v.prototype;var b=y.prototype=new g;b.constructor=y,p(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,j={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,a)&&!S.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:r,type:e,key:i,ref:o,props:s,_owner:j.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function D(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return i=i(l=e),e=""===s?"."+T(l,0):s,w(i)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),D(i,t,a,"",(function(e){return e}))):null!=i&&(k(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var d=s+T(o=e[c],c);l+=D(o,t,a,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=D(o=o.value,t,a,d=s+T(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,r){if(null==e)return e;var n=[],a=0;return D(e,n,"","",(function(e){return t.call(r,e,a++)})),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var _={current:null},R={transition:null},I={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:R,ReactCurrentOwner:j};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,r){A(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=y,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=M,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=p({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=j.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:r,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return _.current.useCallback(e,t)},t.useContext=function(e){return _.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return _.current.useDeferredValue(e)},t.useEffect=function(e,t){return _.current.useEffect(e,t)},t.useId=function(){return _.current.useId()},t.useImperativeHandle=function(e,t,r){return _.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return _.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.current.useMemo(e,t)},t.useReducer=function(e,t,r){return _.current.useReducer(e,t,r)},t.useRef=function(e){return _.current.useRef(e)},t.useState=function(e){return _.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return _.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return _.current.useTransition()},t.version="18.3.1"},43:(e,t,r)=>{"use strict";e.exports=r(202)},579:(e,t,r)=>{"use strict";e.exports=r(153)},234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,i=a>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,r))c<a&&0>s(d,l)?(e[n]=d,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>s(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,p=!1,x=!1,v="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function w(e){if(x=!1,b(e),!p)if(null!==n(c))p=!0,R(N);else{var t=n(d);null!==t&&I(w,t.startTime-e)}}function N(e,r){p=!1,x&&(x=!1,g(k),k=-1),m=!0;var s=f;try{for(b(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!D());){var i=h.callback;if("function"===typeof i){h.callback=null,f=h.priorityLevel;var o=i(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?h.callback=o:h===n(c)&&a(c),b(r)}else a(c);h=n(c)}if(null!==h)var l=!0;else{var u=n(d);null!==u&&I(w,u.startTime-r),l=!1}return l}finally{h=null,f=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,S=!1,C=null,k=-1,E=5,T=-1;function D(){return!(t.unstable_now()-T<E)}function A(){if(null!==C){var e=t.unstable_now();T=e;var r=!0;try{r=C(!0,e)}finally{r?j():(S=!1,C=null)}}else S=!1}if("function"===typeof y)j=function(){y(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,_=P.port2;P.port1.onmessage=A,j=function(){_.postMessage(null)}}else j=function(){v(A,0)};function R(e){C=e,S||(S=!0,j())}function I(e,r){k=v((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,R(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,r(d,e),null===n(c)&&e===n(d)&&(x?(g(k),k=-1):x=!0,I(w,s-i))):(e.sortIndex=o,r(c,e),p||m||(p=!0,R(N))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},853:(e,t,r)=>{"use strict";e.exports=r(234)},895:(e,t,r)=>{"use strict";var n=r(43);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=n.useSyncExternalStore,i=n.useRef,o=n.useEffect,l=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,d){var u=i(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=l((function(){function e(e){if(!o){if(o=!0,s=e,e=n(e),void 0!==d&&h.hasValue){var t=h.value;if(d(t,e))return i=t}return i=e}if(t=i,a(s,e))return t;var r=n(e);return void 0!==d&&d(t,r)?t:(s=e,i=r)}var s,i,o=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,r,n,d]);var f=s(e,u[0],u[1]);return o((function(){h.hasValue=!0,h.value=f}),[f]),c(f),f}},237:(e,t,r)=>{"use strict";e.exports=r(895)}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var s=Object.create(null);r.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,r.d(s,i),s}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nc=void 0,(()=>{"use strict";var e,t=r(43),n=r.t(t,2),a=r(391);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const i="popstate";function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,r,n){return void 0===r&&(r=null),s({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function h(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function f(t,r,n,a){void 0===a&&(a={});let{window:l=document.defaultView,v5Compat:h=!1}=a,f=l.history,m=e.Pop,p=null,x=v();function v(){return(f.state||{idx:null}).idx}function g(){m=e.Pop;let t=v(),r=null==t?null:t-x;x=t,p&&p({action:m,location:b.location,delta:r})}function y(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,r="string"===typeof e?e:u(e);return r=r.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==x&&(x=0,f.replaceState(s({},f.state,{idx:x}),""));let b={get action(){return m},get location(){return t(l,f)},listen(e){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(i,g),p=e,()=>{l.removeEventListener(i,g),p=null}},createHref:e=>r(l,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,r){m=e.Push;let a=d(b.location,t,r);n&&n(a,t),x=v()+1;let s=c(a,x),i=b.createHref(a);try{f.pushState(s,"",i)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(i)}h&&p&&p({action:m,location:b.location,delta:1})},replace:function(t,r){m=e.Replace;let a=d(b.location,t,r);n&&n(a,t),x=v();let s=c(a,x),i=b.createHref(a);f.replaceState(s,"",i),h&&p&&p({action:m,location:b.location,delta:0})},go:e=>f.go(e)};return b}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function p(e,t,r){return void 0===r&&(r="/"),x(e,t,r,!1)}function x(e,t,r,n){let a=A(("string"===typeof t?h(t):t).pathname||"/",r);if(null==a)return null;let s=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=D(a);i=E(s[o],e,n)}return i}function v(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(o(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let l=M([n,i.relativePath]),c=r.concat(i);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),v(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:k(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of g(e.path))a(e,t,n);else a(e,t)})),t}function g(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return a?[s,""]:[s];let i=g(n.join("/")),o=[];return o.push(...i.map((e=>""===e?s:[s,e].join("/")))),a&&o.push(...i),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const y=/^:[\w-]+$/,b=3,w=2,N=1,j=10,S=-2,C=e=>"*"===e;function k(e,t){let r=e.split("/"),n=r.length;return r.some(C)&&(n+=S),t&&(n+=w),r.filter((e=>!C(e))).reduce(((e,t)=>e+(y.test(t)?b:""===t?N:j)),n)}function E(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,a={},s="/",i=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===s?t:t.slice(s.length)||"/",d=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:M([s,d.pathname]),pathnameBase:O(M([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=M([s,d.pathnameBase]))}return i}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1),c=n.reduce(((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=o[r]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:c,pathname:s,pathnameBase:i,pattern:e}}function D(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function P(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function _(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function R(e,t){let r=_(e);return t?r.map(((e,t)=>t===r.length-1?e.pathname:e.pathnameBase)):r.map((e=>e.pathnameBase))}function I(e,t,r,n){let a;void 0===n&&(n=!1),"string"===typeof e?a=h(e):(a=s({},e),o(!a.pathname||!a.pathname.includes("?"),P("?","pathname","search",a)),o(!a.pathname||!a.pathname.includes("#"),P("#","pathname","hash",a)),o(!a.search||!a.search.includes("#"),P("#","search","hash",a)));let i,l=""===e||""===a.pathname,c=l?"/":a.pathname;if(null==c)i=r;else{let e=t.length-1;if(!n&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:a=""}="string"===typeof e?h(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:F(n),hash:L(a)}}(a,i),u=c&&"/"!==c&&c.endsWith("/"),f=(l||"."===c)&&r.endsWith("/");return d.pathname.endsWith("/")||!u&&!f||(d.pathname+="/"),d}const M=e=>e.join("/").replace(/\/\/+/g,"/"),O=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",L=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const U=["post","put","patch","delete"],z=(new Set(U),["get",...U]);new Set(z),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V.apply(this,arguments)}const H=t.createContext(null);const W=t.createContext(null);const q=t.createContext(null);const G=t.createContext(null);const K=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=t.createContext(null);function X(){return null!=t.useContext(G)}function Q(){return X()||o(!1),t.useContext(G).location}function J(e){t.useContext(q).static||t.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=t.useContext(K);return e?function(){let{router:e}=de(le.UseNavigateStable),r=he(ce.UseNavigateStable),n=t.useRef(!1);J((()=>{n.current=!0}));let a=t.useCallback((function(t,a){void 0===a&&(a={}),n.current&&("number"===typeof t?e.navigate(t):e.navigate(t,V({fromRouteId:r},a)))}),[e,r]);return a}():function(){X()||o(!1);let e=t.useContext(H),{basename:r,future:n,navigator:a}=t.useContext(q),{matches:s}=t.useContext(K),{pathname:i}=Q(),l=JSON.stringify(R(s,n.v7_relativeSplatPath)),c=t.useRef(!1);J((()=>{c.current=!0}));let d=t.useCallback((function(t,n){if(void 0===n&&(n={}),!c.current)return;if("number"===typeof t)return void a.go(t);let s=I(t,JSON.parse(l),i,"path"===n.relative);null==e&&"/"!==r&&(s.pathname="/"===s.pathname?r:M([r,s.pathname])),(n.replace?a.replace:a.push)(s,n.state,n)}),[r,a,l,i,e]);return d}()}function ee(){let{matches:e}=t.useContext(K),r=e[e.length-1];return r?r.params:{}}function te(e,r){let{relative:n}=void 0===r?{}:r,{future:a}=t.useContext(q),{matches:s}=t.useContext(K),{pathname:i}=Q(),o=JSON.stringify(R(s,a.v7_relativeSplatPath));return t.useMemo((()=>I(e,JSON.parse(o),i,"path"===n)),[e,o,i,n])}function re(r,n,a,s){X()||o(!1);let{navigator:i}=t.useContext(q),{matches:l}=t.useContext(K),c=l[l.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let f,m=Q();if(n){var x;let e="string"===typeof n?h(n):n;"/"===u||(null==(x=e.pathname)?void 0:x.startsWith(u))||o(!1),f=e}else f=m;let v=f.pathname||"/",g=v;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=p(r,{pathname:g});let b=oe(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:M([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:M([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,a,s);return n&&b?t.createElement(G.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:e.Pop}},b):b}function ne(){let e=function(){var e;let r=t.useContext(Y),n=ue(ce.UseRouteError),a=he(ce.UseRouteError);if(void 0!==r)return r;return null==(e=n.errors)?void 0:e[a]}(),r=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),n?t.createElement("pre",{style:s},n):null,null)}const ae=t.createElement(ne,null);class se extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(K.Provider,{value:this.props.routeContext},t.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:r,match:n,children:a}=e,s=t.useContext(H);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(K.Provider,{value:r},a)}function oe(e,r,n,a){var s;if(void 0===r&&(r=[]),void 0===n&&(n=null),void 0===a&&(a=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=a)&&i.v7_partialHydration&&0===r.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let l=e,c=null==(s=n)?void 0:s.errors;if(null!=c){let e=l.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||o(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(n&&a&&a.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight(((e,a,s)=>{let i,o=!1,h=null,f=null;n&&(i=c&&a.route.id?c[a.route.id]:void 0,h=a.route.errorElement||ae,d&&(u<0&&0===s?(!function(e,t){t||fe[e]||(fe[e]=!0)}("route-fallback",!1),o=!0,f=null):u===s&&(o=!0,f=a.route.hydrateFallbackElement||null)));let m=r.concat(l.slice(0,s+1)),p=()=>{let r;return r=i?h:o?f:a.route.Component?t.createElement(a.route.Component,null):a.route.element?a.route.element:e,t.createElement(ie,{match:a,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:r})};return n&&(a.route.ErrorBoundary||a.route.errorElement||0===s)?t.createElement(se,{location:n.location,revalidation:n.revalidation,component:h,error:i,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function de(e){let r=t.useContext(H);return r||o(!1),r}function ue(e){let r=t.useContext(W);return r||o(!1),r}function he(e){let r=function(){let e=t.useContext(K);return e||o(!1),e}(),n=r.matches[r.matches.length-1];return n.route.id||o(!1),n.route.id}const fe={};n.startTransition;function me(e){o(!1)}function pe(r){let{basename:n="/",children:a=null,location:s,navigationType:i=e.Pop,navigator:l,static:c=!1,future:d}=r;X()&&o(!1);let u=n.replace(/^\/*/,"/"),f=t.useMemo((()=>({basename:u,navigator:l,static:c,future:V({v7_relativeSplatPath:!1},d)})),[u,d,l,c]);"string"===typeof s&&(s=h(s));let{pathname:m="/",search:p="",hash:x="",state:v=null,key:g="default"}=s,y=t.useMemo((()=>{let e=A(m,u);return null==e?null:{location:{pathname:e,search:p,hash:x,state:v,key:g},navigationType:i}}),[u,m,p,x,v,g,i]);return null==y?null:t.createElement(q.Provider,{value:f},t.createElement(G.Provider,{children:a,value:y}))}function xe(e){let{children:t,location:r}=e;return re(ve(t),r)}new Promise((()=>{}));t.Component;function ve(e,r){void 0===r&&(r=[]);let n=[];return t.Children.forEach(e,((e,a)=>{if(!t.isValidElement(e))return;let s=[...r,a];if(e.type===t.Fragment)return void n.push.apply(n,ve(e.props.children,s));e.type!==me&&o(!1),e.props.index&&e.props.children&&o(!1);let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ve(e.props.children,s)),n.push(i)})),n}var ge=r(950),ye=r.t(ge,2);function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},be.apply(this,arguments)}function we(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function Ne(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map((e=>[r,e])):[[r,n]])}),[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const je=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(ZJ){}new Map;const Se=n.startTransition;ye.flushSync,n.useId;function Ce(e){let{basename:r,children:n,future:a,window:s}=e,i=t.useRef();null==i.current&&(i.current=function(e){return void 0===e&&(e={}),f((function(e,t){let{pathname:r,search:n,hash:a}=e.location;return d("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:u(t)}),null,e)}({window:s,v5Compat:!0}));let o=i.current,[l,c]=t.useState({action:o.action,location:o.location}),{v7_startTransition:h}=a||{},m=t.useCallback((e=>{h&&Se?Se((()=>c(e))):c(e)}),[c,h]);return t.useLayoutEffect((()=>o.listen(m)),[o,m]),t.createElement(pe,{basename:r,children:n,location:l.location,navigationType:l.action,navigator:o,future:a})}const ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=t.forwardRef((function(e,r){let n,{onClick:a,relative:s,reloadDocument:i,replace:l,state:c,target:d,to:h,preventScrollReset:f,viewTransition:m}=e,p=we(e,je),{basename:x}=t.useContext(q),v=!1;if("string"===typeof h&&Ee.test(h)&&(n=h,ke))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),r=A(t.pathname,x);t.origin===e.origin&&null!=r?h=r+t.search+t.hash:v=!0}catch(ZJ){}let g=function(e,r){let{relative:n}=void 0===r?{}:r;X()||o(!1);let{basename:a,navigator:s}=t.useContext(q),{hash:i,pathname:l,search:c}=te(e,{relative:n}),d=l;return"/"!==a&&(d="/"===l?a:M([a,l])),s.createHref({pathname:d,search:c,hash:i})}(h,{relative:s}),y=function(e,r){let{target:n,replace:a,state:s,preventScrollReset:i,relative:o,viewTransition:l}=void 0===r?{}:r,c=Z(),d=Q(),h=te(e,{relative:o});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let r=void 0!==a?a:u(d)===u(h);c(e,{replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l})}}),[d,c,h,a,s,n,e,i,o,l])}(h,{replace:l,state:c,target:d,preventScrollReset:f,relative:s,viewTransition:m});return t.createElement("a",be({},p,{href:n||g,onClick:v||i?a:function(e){a&&a(e),e.defaultPrevented||y(e)},ref:r,target:d}))}));var De,Ae;function Pe(e){let r=t.useRef(Ne(e)),n=t.useRef(!1),a=Q(),s=t.useMemo((()=>function(e,t){let r=Ne(e);return t&&t.forEach(((e,n)=>{r.has(n)||t.getAll(n).forEach((e=>{r.append(n,e)}))})),r}(a.search,n.current?null:r.current)),[a.search]),i=Z(),o=t.useCallback(((e,t)=>{const r=Ne("function"===typeof e?e(s):e);n.current=!0,i("?"+r,t)}),[i,s]);return[s,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(De||(De={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ae||(Ae={}));var _e=r(237),Re=t,Ie=Symbol.for("react-redux-context"),Me="undefined"!==typeof globalThis?globalThis:{};function Oe(){if(!Re.createContext)return{};const e=Me[Ie]??(Me[Ie]=new Map);let t=e.get(Re.createContext);return t||(t=Re.createContext(null),e.set(Re.createContext,t)),t}var Fe=Oe(),Le=()=>{throw new Error("uSES not initialized!")};function Be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;return function(){return Re.useContext(e)}}var Ue=Be(),ze=Le,Ve=(e,t)=>e===t;function He(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;const t=e===Fe?Ue:Be(e),r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:n=Ve,devModeChecks:a={}}="function"===typeof r?{equalityFn:r}:r;const{store:s,subscription:i,getServerState:o,stabilityCheck:l,identityFunctionCheck:c}=t(),d=(Re.useRef(!0),Re.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,a.stabilityCheck])),u=ze(i.addNestedSub,s.getState,o||s.getState,d,n);return Re.useDebugValue(u),u};return Object.assign(r,{withTypes:()=>r}),r}var $e=He();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function We(e){e()}var qe={notify(){},get:()=>[]};function Ge(e,t){let r,n=qe,a=0,s=!1;function i(){c.onStateChange&&c.onStateChange()}function o(){a++,r||(r=t?t.addNestedSub(i):e.subscribe(i),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){We((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){n&&null!==e&&(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function l(){a--,r&&0===a&&(r(),r=void 0,n.clear(),n=qe)}const c={addNestedSub:function(e){o();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:i,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,o())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>n};return c}var Ke=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ye="undefined"!==typeof navigator&&"ReactNative"===navigator.product,Xe=Ke||Ye?Re.useLayoutEffect:Re.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var Qe=function(e){let{store:t,context:r,children:n,serverState:a,stabilityCheck:s="once",identityFunctionCheck:i="once"}=e;const o=Re.useMemo((()=>{const e=Ge(t);return{store:t,subscription:e,getServerState:a?()=>a:void 0,stabilityCheck:s,identityFunctionCheck:i}}),[t,a,s,i]),l=Re.useMemo((()=>t.getState()),[t]);Xe((()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,l]);const c=r||Fe;return Re.createElement(c.Provider,{value:o},n)};function Je(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;const t=e===Fe?Ue:Be(e),r=()=>{const{store:e}=t();return e};return Object.assign(r,{withTypes:()=>r}),r}var Ze=Je();function et(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;const t=e===Fe?Ze:Je(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var tt,rt=et();function nt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}tt=_e.useSyncExternalStoreWithSelector,ze=tt,(e=>{0})(t.useSyncExternalStore);var at=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),st=()=>Math.random().toString(36).substring(7).split("").join("."),it={INIT:`@@redux/INIT${st()}`,REPLACE:`@@redux/REPLACE${st()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${st()}`};function ot(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function lt(e,t,r){if("function"!==typeof e)throw new Error(nt(2));if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(nt(0));if("function"===typeof t&&"undefined"===typeof r&&(r=t,t=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(nt(1));return r(lt)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,l=!1;function c(){i===s&&(i=new Map,s.forEach(((e,t)=>{i.set(t,e)})))}function d(){if(l)throw new Error(nt(3));return a}function u(e){if("function"!==typeof e)throw new Error(nt(4));if(l)throw new Error(nt(5));let t=!0;c();const r=o++;return i.set(r,e),function(){if(t){if(l)throw new Error(nt(6));t=!1,c(),i.delete(r),s=null}}}function h(e){if(!ot(e))throw new Error(nt(7));if("undefined"===typeof e.type)throw new Error(nt(8));if("string"!==typeof e.type)throw new Error(nt(17));if(l)throw new Error(nt(9));try{l=!0,a=n(a,e)}finally{l=!1}return(s=i).forEach((e=>{e()})),e}h({type:it.INIT});return{dispatch:h,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(nt(10));n=e,h({type:it.REPLACE})},[at]:function(){const e=u;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(nt(11));function r(){const e=t;e.next&&e.next(d())}r();return{unsubscribe:e(r)}},[at](){return this}}}}}function ct(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const n=t[s];0,"function"===typeof e[n]&&(r[n]=e[n])}const n=Object.keys(r);let a;try{!function(e){Object.keys(e).forEach((t=>{const r=e[t];if("undefined"===typeof r(void 0,{type:it.INIT}))throw new Error(nt(12));if("undefined"===typeof r(void 0,{type:it.PROBE_UNKNOWN_ACTION()}))throw new Error(nt(13))}))}(r)}catch(ZJ){a=ZJ}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(a)throw a;let s=!1;const i={};for(let a=0;a<n.length;a++){const o=n[a],l=r[o],c=e[o],d=l(c,t);if("undefined"===typeof d){t&&t.type;throw new Error(nt(14))}i[o]=d,s=s||d!==c}return s=s||n.length!==Object.keys(e).length,s?i:e}}function dt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function ut(e){return t=>{let{dispatch:r,getState:n}=t;return t=>a=>"function"===typeof a?a(r,n,e):t(a)}}var ht=ut(),ft=ut,mt=Symbol.for("immer-nothing"),pt=Symbol.for("immer-draftable"),xt=Symbol.for("immer-state");function vt(e){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var gt=Object.getPrototypeOf;function yt(e){return!!e&&!!e[xt]}function bt(e){return!!e&&(Nt(e)||Array.isArray(e)||!!e[pt]||!!e.constructor?.[pt]||Et(e)||Tt(e))}var wt=Object.prototype.constructor.toString();function Nt(e){if(!e||"object"!==typeof e)return!1;const t=gt(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===wt}function jt(e,t){0===St(e)?Reflect.ownKeys(e).forEach((r=>{t(r,e[r],e)})):e.forEach(((r,n)=>t(n,r,e)))}function St(e){const t=e[xt];return t?t.type_:Array.isArray(e)?1:Et(e)?2:Tt(e)?3:0}function Ct(e,t){return 2===St(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kt(e,t,r){const n=St(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function Et(e){return e instanceof Map}function Tt(e){return e instanceof Set}function Dt(e){return e.copy_||e.base_}function At(e,t){if(Et(e))return new Map(e);if(Tt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Nt(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[xt];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],s=t[a];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(gt(e),t)}{const t=gt(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function Pt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Rt(e)||yt(e)||!bt(e)||(St(e)>1&&(e.set=e.add=e.clear=e.delete=_t),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,r]=e;return Pt(r,!0)}))),e}function _t(){vt(2)}function Rt(e){return Object.isFrozen(e)}var It,Mt={};function Ot(e){const t=Mt[e];return t||vt(0),t}function Ft(){return It}function Lt(e,t){t&&(Ot("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Bt(e){Ut(e),e.drafts_.forEach(Vt),e.drafts_=null}function Ut(e){e===It&&(It=e.parent_)}function zt(e){return It={drafts_:[],parent_:It,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Vt(e){const t=e[xt];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Ht(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[xt].modified_&&(Bt(t),vt(4)),bt(e)&&(e=$t(t,e),t.parent_||qt(t,e)),t.patches_&&Ot("Patches").generateReplacementPatches_(r[xt].base_,e,t.patches_,t.inversePatches_)):e=$t(t,r,[]),Bt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==mt?e:void 0}function $t(e,t,r){if(Rt(t))return t;const n=t[xt];if(!n)return jt(t,((a,s)=>Wt(e,n,t,a,s,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return qt(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,s=!1;3===n.type_&&(a=new Set(t),t.clear(),s=!0),jt(a,((a,i)=>Wt(e,n,t,a,i,r,s))),qt(e,t,!1),r&&e.patches_&&Ot("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Wt(e,t,r,n,a,s,i){if(yt(a)){const i=$t(e,a,s&&t&&3!==t.type_&&!Ct(t.assigned_,n)?s.concat(n):void 0);if(kt(r,n,i),!yt(i))return;e.canAutoFreeze_=!1}else i&&r.add(a);if(bt(a)&&!Rt(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;$t(e,a),t&&t.scope_.parent_||"symbol"===typeof n||!Object.prototype.propertyIsEnumerable.call(r,n)||qt(e,a)}}function qt(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Pt(t,r)}var Gt={get(e,t){if(t===xt)return e;const r=Dt(e);if(!Ct(r,t))return function(e,t,r){const n=Xt(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!bt(n)?n:n===Yt(e.base_,t)?(Jt(e),e.copy_[t]=Zt(n,e)):n},has:(e,t)=>t in Dt(e),ownKeys:e=>Reflect.ownKeys(Dt(e)),set(e,t,r){const n=Xt(Dt(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=Yt(Dt(e),t),i=n?.[xt];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(s=n)?0!==a||1/a===1/s:a!==a&&s!==s)&&(void 0!==r||Ct(e.base_,t)))return!0;Jt(e),Qt(e)}var a,s;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Yt(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Jt(e),Qt(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=Dt(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){vt(11)},getPrototypeOf:e=>gt(e.base_),setPrototypeOf(){vt(12)}},Kt={};function Yt(e,t){const r=e[xt];return(r?Dt(r):e)[t]}function Xt(e,t){if(!(t in e))return;let r=gt(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=gt(r)}}function Qt(e){e.modified_||(e.modified_=!0,e.parent_&&Qt(e.parent_))}function Jt(e){e.copy_||(e.copy_=At(e.base_,e.scope_.immer_.useStrictShallowCopy_))}jt(Gt,((e,t)=>{Kt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Kt.deleteProperty=function(e,t){return Kt.set.call(this,e,t,void 0)},Kt.set=function(e,t,r){return Gt.set.call(this,e[0],t,r,e[0])};function Zt(e,t){const r=Et(e)?Ot("MapSet").proxyMap_(e,t):Tt(e)?Ot("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Ft(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=Gt;r&&(a=[n],s=Kt);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}(e,t);return(t?t.scope_:Ft()).drafts_.push(r),r}function er(e){if(!bt(e)||Rt(e))return e;const t=e[xt];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=At(e,t.scope_.immer_.useStrictShallowCopy_)}else r=At(e,!0);return jt(r,((e,t)=>{kt(r,e,er(t))})),t&&(t.finalized_=!1),r}var tr=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"===typeof e&&"function"!==typeof t){const r=t;t=e;const n=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];return n.produce(e,(e=>t.call(this,e,...s)))}}let n;if("function"!==typeof t&&vt(6),void 0!==r&&"function"!==typeof r&&vt(7),bt(e)){const a=zt(this),s=Zt(e,void 0);let i=!0;try{n=t(s),i=!1}finally{i?Bt(a):Ut(a)}return Lt(a,r),Ht(n,a)}if(!e||"object"!==typeof e){if(n=t(e),void 0===n&&(n=e),n===mt&&(n=void 0),this.autoFreeze_&&Pt(n,!0),r){const t=[],a=[];Ot("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}vt(1)},this.produceWithPatches=(e,r)=>{if("function"===typeof e)return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return t.produceWithPatches(r,(t=>e(t,...a)))};let n,a;return[this.produce(e,r,((e,t)=>{n=e,a=t})),n,a]},"boolean"===typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){bt(e)||vt(8),yt(e)&&(e=function(e){yt(e)||vt(10);return er(e)}(e));const t=zt(this),r=Zt(e,void 0);return r[xt].isManual_=!0,Ut(t),r}finishDraft(e,t){const r=e&&e[xt];r&&r.isManual_||vt(9);const{scope_:n}=r;return Lt(n,t),Ht(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=Ot("Patches").applyPatches_;return yt(e)?n(e,t):this.produce(e,(e=>n(e,t)))}},rr=tr.produce;tr.produceWithPatches.bind(tr),tr.setAutoFreeze.bind(tr),tr.setUseStrictShallowCopy.bind(tr),tr.applyPatches.bind(tr),tr.createDraft.bind(tr),tr.finishDraft.bind(tr);var nr="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?dt:dt.apply(null,arguments)},ar=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,e=>e&&"function"===typeof e.match);function sr(e,t){function r(){if(t){let r=t(...arguments);if(!r)throw new Error(Ar(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>function(e){return ot(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,r}var ir=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return 1===r.length&&Array.isArray(r[0])?new e(...r[0].concat(this)):new e(...r.concat(this))}};function or(e){return bt(e)?rr(e,(()=>{})):e}function lr(e,t,r){if(e.has(t)){let n=e.get(t);return r.update&&(n=r.update(n,t,e),e.set(t,n)),n}if(!r.insert)throw new Error(Ar(10));const n=r.insert(t,e);return e.set(t,n),n}var cr="RTK_autoBatch",dr=e=>t=>{setTimeout(t,e)},ur="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:dr(10),hr=e=>function(t){const{autoBatch:r=!0}=t??{};let n=new ir(e);return r&&n.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const r=t(...arguments);let n=!0,a=!1,s=!1;const i=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?ur:"callback"===e.type?e.queueNotification:dr(e.timeout),l=()=>{s=!1,a&&(a=!1,i.forEach((e=>e())))};return Object.assign({},r,{subscribe(e){const t=r.subscribe((()=>n&&e()));return i.add(e),()=>{t(),i.delete(e)}},dispatch(e){try{return n=!e?.meta?.[cr],a=!n,a&&(s||(s=!0,o(l))),r.dispatch(e)}finally{n=!0}}})}}("object"===typeof r?r:void 0)),n};function fr(e){const t={},r=[];let n;const a={addCase(e,r){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Ar(28));if(n in t)throw new Error(Ar(29));return t[n]=r,a},addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(n=e,a)};return e(a),[t,r,n]}var mr=(e,t)=>ar(e)?e.match(t):e(t);function pr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>t.some((t=>mr(t,e)))}var xr=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},vr=["name","message","stack","code"],gr=class{constructor(e,t){this.payload=e,this.meta=t}_type},yr=class{constructor(e,t){this.payload=e,this.meta=t}_type},br=e=>{if("object"===typeof e&&null!==e){const t={};for(const r of vr)"string"===typeof e[r]&&(t[r]=e[r]);return t}return{message:String(e)}},wr=(()=>{function e(e,t,r){const n=sr(e+"/fulfilled",((e,t,r,n)=>({payload:e,meta:{...n||{},arg:r,requestId:t,requestStatus:"fulfilled"}}))),a=sr(e+"/pending",((e,t,r)=>({payload:void 0,meta:{...r||{},arg:t,requestId:e,requestStatus:"pending"}}))),s=sr(e+"/rejected",((e,t,n,a,s)=>({payload:a,error:(r&&r.serializeError||br)(e||"Rejected"),meta:{...s||{},arg:n,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===e?.name,condition:"ConditionError"===e?.name}})));return Object.assign((function(e){return(i,o,l)=>{const c=r?.idGenerator?r.idGenerator(e):xr(),d=new AbortController;let u,h;function f(e){h=e,d.abort()}const m=async function(){let m;try{let s=r?.condition?.(e,{getState:o,extra:l});if(null!==(p=s)&&"object"===typeof p&&"function"===typeof p.then&&(s=await s),!1===s||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const x=new Promise(((e,t)=>{u=()=>{t({name:"AbortError",message:h||"Aborted"})},d.signal.addEventListener("abort",u)}));i(a(c,e,r?.getPendingMeta?.({requestId:c,arg:e},{getState:o,extra:l}))),m=await Promise.race([x,Promise.resolve(t(e,{dispatch:i,getState:o,extra:l,requestId:c,signal:d.signal,abort:f,rejectWithValue:(e,t)=>new gr(e,t),fulfillWithValue:(e,t)=>new yr(e,t)})).then((t=>{if(t instanceof gr)throw t;return t instanceof yr?n(t.payload,c,e,t.meta):n(t,c,e)}))])}catch(x){m=x instanceof gr?s(null,c,e,x.payload,x.meta):s(x,c,e)}finally{u&&d.signal.removeEventListener("abort",u)}var p;return r&&!r.dispatchConditionRejection&&s.match(m)&&m.meta.condition||i(m),m}();return Object.assign(m,{abort:f,requestId:c,arg:e,unwrap:()=>m.then(Nr)})}}),{pending:a,rejected:s,fulfilled:n,settled:pr(s,n),typePrefix:e})}return e.withTypes=()=>e,e})();function Nr(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var jr=Symbol.for("rtk-slice-createasyncthunk");function Sr(e,t){return`${e}/${t}`}function Cr(){let{creators:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e?.asyncThunk?.[jr];return function(e){const{name:r,reducerPath:n=r}=e;if(!r)throw new Error(Ar(11));const a=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(a),i={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Ar(12));if(r in i.sliceCaseReducersByType)throw new Error(Ar(13));return i.sliceCaseReducersByType[r]=t,o},addMatcher:(e,t)=>(i.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(i.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(i.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},r=[],n]="function"===typeof e.extraReducers?fr(e.extraReducers):[e.extraReducers],a={...t,...i.sliceCaseReducersByType};return function(e,t){let r,[n,a,s]=fr(t);if("function"===typeof e)r=()=>or(e());else{const t=or(e);r=()=>t}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1?arguments[1]:void 0,i=[n[t.type],...a.filter((e=>{let{matcher:r}=e;return r(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===i.filter((e=>!!e)).length&&(i=[s]),i.reduce(((e,r)=>{if(r){if(yt(e)){const n=r(e,t);return void 0===n?e:n}if(bt(e))return rr(e,(e=>r(e,t)));{const n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e}),e)}return i.getInitialState=r,i}(e.initialState,(e=>{for(let t in a)e.addCase(t,a[t]);for(let t of i.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)}))}s.forEach((n=>{const s=a[n],i={reducerName:n,type:Sr(r,n),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,r){let n,a,{type:s,reducerName:i,createNotation:o}=e;if("reducer"in t){if(o&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Ar(17));n=t.reducer,a=t.prepare}else n=t;r.addCase(s,n).exposeCaseReducer(i,n).exposeAction(i,a?sr(s,a):sr(s))}(i,s,o):function(e,t,r,n){let{type:a,reducerName:s}=e;if(!n)throw new Error(Ar(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=t,h=n(a,i,u);r.exposeAction(s,h),o&&r.addCase(h.fulfilled,o);l&&r.addCase(h.pending,l);c&&r.addCase(h.rejected,c);d&&r.addMatcher(h.settled,d);r.exposeCaseReducer(s,{fulfilled:o||Tr,pending:l||Tr,rejected:c||Tr,settled:d||Tr})}(i,s,o,t)}));const c=e=>e,d=new Map;let u;function h(e,t){return u||(u=l()),u(e,t)}function f(){return u||(u=l()),u.getInitialState()}function m(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e){let n=e[t];return"undefined"===typeof n&&r&&(n=f()),n}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const n=lr(d,r,{insert:()=>new WeakMap});return lr(n,t,{insert:()=>{const n={};for(const[a,s]of Object.entries(e.selectors??{}))n[a]=kr(s,t,f,r);return n}})}return{reducerPath:t,getSelectors:a,get selectors(){return a(n)},selectSlice:n}}const p={name:r,reducer:h,actions:i.actionCreators,caseReducers:i.sliceCaseReducersByName,getInitialState:f,...m(n),injectInto(e){let{reducerPath:t,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=t??n;return e.inject({reducerPath:a,reducer:h},r),{...p,...m(a,!0)}}};return p}}function kr(e,t,r,n){function a(a){let s=t(a);"undefined"===typeof s&&n&&(s=r());for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return e(s,...o)}return a.unwrapped=e,a}var Er=Cr();function Tr(){}var{assign:Dr}=Object;Symbol.for("rtk-state-proxy-original");function Ar(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Pr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>t.forEach((t=>function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e)))}function _r(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.useCallback(Pr(...r),r)}var Rr=r(579),Ir=t.forwardRef(((e,r)=>{const{children:n,...a}=e,s=t.Children.toArray(n),i=s.find(Fr);if(i){const e=i.props.children,n=s.map((r=>r===i?t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null:r));return(0,Rr.jsx)(Mr,{...a,ref:r,children:t.isValidElement(e)?t.cloneElement(e,void 0,n):null})}return(0,Rr.jsx)(Mr,{...a,ref:r,children:n})}));Ir.displayName="Slot";var Mr=t.forwardRef(((e,r)=>{const{children:n,...a}=e;if(t.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;if(r)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(n);return t.cloneElement(n,{...Lr(a,n.props),ref:r?Pr(r,e):e})}return t.Children.count(n)>1?t.Children.only(null):null}));Mr.displayName="SlotClone";var Or=e=>{let{children:t}=e;return(0,Rr.jsx)(Rr.Fragment,{children:t})};function Fr(e){return t.isValidElement(e)&&e.type===Or}function Lr(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=function(){s(...arguments),a(...arguments)}:a&&(r[n]=a):"style"===n?r[n]={...a,...s}:"className"===n&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}function Br(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Br(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Ur(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Br(e))&&(n&&(n+=" "),n+=t);return n}const zr=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,Vr=Ur,Hr=(e,t)=>r=>{var n;if(null==(null===t||void 0===t?void 0:t.variants))return Vr(e,null===r||void 0===r?void 0:r.class,null===r||void 0===r?void 0:r.className);const{variants:a,defaultVariants:s}=t,i=Object.keys(a).map((e=>{const t=null===r||void 0===r?void 0:r[e],n=null===s||void 0===s?void 0:s[e];if(null===t)return null;const i=zr(t)||zr(n);return a[e][i]})),o=r&&Object.entries(r).reduce(((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e}),{}),l=null===t||void 0===t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce(((e,t)=>{let{class:r,className:n,...a}=t;return Object.entries(a).every((e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...o}[t]):{...s,...o}[t]===r}))?[...e,r,n]:e}),[]);return Vr(e,i,l,null===r||void 0===r?void 0:r.class,null===r||void 0===r?void 0:r.className)};function $r(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=$r(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Wr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=$r(e))&&(n&&(n+=" "),n+=t);return n}const qr=e=>{const t=Xr(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),Gr(r,t)||Yr(e)},getConflictingClassGroupIds:(e,t)=>{const a=r[e]||[];return t&&n[e]?[...a,...n[e]]:a}}},Gr=(e,t)=>{if(0===e.length)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?Gr(e.slice(1),n):void 0;if(a)return a;if(0===t.validators.length)return;const s=e.join("-");return t.validators.find((e=>{let{validator:t}=e;return t(s)}))?.classGroupId},Kr=/^\[(.+)\]$/,Yr=e=>{if(Kr.test(e)){const t=Kr.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Xr=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return en(Object.entries(e.classGroups),r).forEach((e=>{let[r,a]=e;Qr(a,n,r,t)})),n},Qr=(e,t,r,n)=>{e.forEach((e=>{if("string"!==typeof e){if("function"===typeof e)return Zr(e)?void Qr(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach((e=>{let[a,s]=e;Qr(s,Jr(t,a),r,n)}))}else{(""===e?t:Jr(t,e)).classGroupId=r}}))},Jr=(e,t)=>{let r=e;return t.split("-").forEach((e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)})),r},Zr=e=>e.isThemeGetter,en=(e,t)=>t?e.map((e=>{let[r,n]=e;const a=n.map((e=>"string"===typeof e?t+e:"object"===typeof e?Object.fromEntries(Object.entries(e).map((e=>{let[r,n]=e;return[t+r,n]}))):e));return[r,a]})):e,tn=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(a,s)=>{r.set(a,s),t++,t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(a(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):a(e,t)}}},rn=e=>{const{separator:t,experimentalParseClassName:r}=e,n=1===t.length,a=t[0],s=t.length,i=e=>{const r=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===a&&(n||e.slice(u,u+s)===t)){r.push(e.slice(l,u)),l=u+s;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===r.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:r,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return r?e=>r({className:e,parseClassName:i}):i},nn=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach((e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)})),t.push(...r.sort()),t},an=/\s+/;function sn(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=on(e))&&(n&&(n+=" "),n+=t);return n}const on=e=>{if("string"===typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=on(e[n]))&&(r&&(r+=" "),r+=t);return r};function ln(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let a,s,i,o=function(t){const n=r.reduce(((e,t)=>t(e)),e());return a=(e=>({cache:tn(e.cacheSize),parseClassName:rn(e),...qr(e)}))(n),s=a.cache.get,i=a.cache.set,o=l,l(t)};function l(e){const t=s(e);if(t)return t;const r=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,s=[],i=e.trim().split(an);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=r(e);let h=Boolean(u),f=n(h?d.substring(0,u):d);if(!f){if(!h){o=e+(o.length>0?" "+o:o);continue}if(f=n(d),!f){o=e+(o.length>0?" "+o:o);continue}h=!1}const m=nn(t).join(":"),p=c?m+"!":m,x=p+f;if(s.includes(x))continue;s.push(x);const v=a(f,h);for(let r=0;r<v.length;++r){const e=v[r];s.push(p+e)}o=e+(o.length>0?" "+o:o)}return o})(e,a);return i(e,r),r}return function(){return o(sn.apply(null,arguments))}}const cn=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},dn=/^\[(?:([a-z-]+):)?(.+)\]$/i,un=/^\d+\/\d+$/,hn=new Set(["px","full","screen"]),fn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,pn=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,xn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vn=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gn=e=>bn(e)||hn.has(e)||un.test(e),yn=e=>Rn(e,"length",In),bn=e=>Boolean(e)&&!Number.isNaN(Number(e)),wn=e=>Rn(e,"number",bn),Nn=e=>Boolean(e)&&Number.isInteger(Number(e)),jn=e=>e.endsWith("%")&&bn(e.slice(0,-1)),Sn=e=>dn.test(e),Cn=e=>fn.test(e),kn=new Set(["length","size","percentage"]),En=e=>Rn(e,kn,Mn),Tn=e=>Rn(e,"position",Mn),Dn=new Set(["image","url"]),An=e=>Rn(e,Dn,Fn),Pn=e=>Rn(e,"",On),_n=()=>!0,Rn=(e,t,r)=>{const n=dn.exec(e);return!!n&&(n[1]?"string"===typeof t?n[1]===t:t.has(n[1]):r(n[2]))},In=e=>mn.test(e)&&!pn.test(e),Mn=()=>!1,On=e=>xn.test(e),Fn=e=>vn.test(e),Ln=(Symbol.toStringTag,()=>{const e=cn("colors"),t=cn("spacing"),r=cn("blur"),n=cn("brightness"),a=cn("borderColor"),s=cn("borderRadius"),i=cn("borderSpacing"),o=cn("borderWidth"),l=cn("contrast"),c=cn("grayscale"),d=cn("hueRotate"),u=cn("invert"),h=cn("gap"),f=cn("gradientColorStops"),m=cn("gradientColorStopPositions"),p=cn("inset"),x=cn("margin"),v=cn("opacity"),g=cn("padding"),y=cn("saturate"),b=cn("scale"),w=cn("sepia"),N=cn("skew"),j=cn("space"),S=cn("translate"),C=()=>["auto",Sn,t],k=()=>[Sn,t],E=()=>["",gn,yn],T=()=>["auto",bn,Sn],D=()=>["","0",Sn],A=()=>[bn,Sn];return{cacheSize:500,separator:":",theme:{colors:[_n],spacing:[gn,yn],blur:["none","",Cn,Sn],brightness:A(),borderColor:[e],borderRadius:["none","","full",Cn,Sn],borderSpacing:k(),borderWidth:E(),contrast:A(),grayscale:D(),hueRotate:A(),invert:D(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[jn,yn],inset:C(),margin:C(),opacity:A(),padding:k(),saturate:A(),scale:A(),sepia:D(),skew:A(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",Sn]}],container:["container"],columns:[{columns:[Cn]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Sn]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Nn,Sn]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Sn]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Nn,Sn]}],"grid-cols":[{"grid-cols":[_n]}],"col-start-end":[{col:["auto",{span:["full",Nn,Sn]},Sn]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[_n]}],"row-start-end":[{row:["auto",{span:[Nn,Sn]},Sn]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Sn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Sn]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Sn,t]}],"min-w":[{"min-w":[Sn,t,"min","max","fit"]}],"max-w":[{"max-w":[Sn,t,"none","full","min","max","fit","prose",{screen:[Cn]},Cn]}],h:[{h:[Sn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Sn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Sn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Sn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Cn,yn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",wn]}],"font-family":[{font:[_n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Sn]}],"line-clamp":[{"line-clamp":["none",bn,wn]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gn,Sn]}],"list-image":[{"list-image":["none",Sn]}],"list-style-type":[{list:["none","disc","decimal",Sn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gn,yn]}],"underline-offset":[{"underline-offset":["auto",gn,Sn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Sn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Sn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Tn]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",En]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},An]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[gn,Sn]}],"outline-w":[{outline:[gn,yn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[gn,yn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Cn,Pn]}],"shadow-color":[{shadow:[_n]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Cn,Sn]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Sn]}],duration:[{duration:A()}],ease:[{ease:["linear","in","out","in-out",Sn]}],delay:[{delay:A()}],animate:[{animate:["none","spin","ping","pulse","bounce",Sn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Nn,Sn]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Sn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Sn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Sn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[gn,yn,wn]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}),Bn=ln(Ln);function Un(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Bn(Wr(t))}const zn=Hr("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-1 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Vn=t.forwardRef(((e,t)=>{let{className:r,variant:n,size:a,asChild:s=!1,...i}=e;const o=s?Ir:"button";return(0,Rr.jsx)(o,{className:Un(zn({variant:n,size:a,className:r})),ref:t,...i})}));function Hn(e,t){let{checkForDefaultPrevented:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}function $n(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const a=()=>{const r=n.map((e=>t.createContext(e)));return function(n){const a=n?.[e]||r;return t.useMemo((()=>({[`__scope${e}`]:{...n,[e]:a}})),[n,a])}};return a.scopeName=e,[function(r,a){const s=t.createContext(a),i=n.length;n=[...n,a];const o=r=>{const{scope:n,children:a,...o}=r,l=n?.[e]?.[i]||s,c=t.useMemo((()=>o),Object.values(o));return(0,Rr.jsx)(l.Provider,{value:c,children:a})};return o.displayName=r+"Provider",[o,function(n,o){const l=o?.[e]?.[i]||s,c=t.useContext(l);if(c)return c;if(void 0!==a)return a;throw new Error(`\`${n}\` must be used within \`${r}\``)}]},Wn(a,...r)]}function Wn(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const a=r[0];if(1===r.length)return a;const s=()=>{const e=r.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(r){const n=e.reduce(((e,t)=>{let{useScope:n,scopeName:a}=t;return{...e,...n(r)[`__scope${a}`]}}),{});return t.useMemo((()=>({[`__scope${a.scopeName}`]:n})),[n])}};return s.scopeName=a.scopeName,s}Vn.displayName="Button";var qn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,r)=>{const n=t.forwardRef(((e,t)=>{const{asChild:n,...a}=e,s=n?Ir:r;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,Rr.jsx)(s,{...a,ref:t})}));return n.displayName=`Primitive.${r}`,{...e,[r]:n}}),{});function Gn(e,t){e&&ge.flushSync((()=>e.dispatchEvent(t)))}function Kn(e){const r=t.useRef(e);return t.useEffect((()=>{r.current=e})),t.useMemo((()=>function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.current?.(...t)}),[])}var Yn,Xn="dismissableLayer.update",Qn="dismissableLayer.pointerDownOutside",Jn="dismissableLayer.focusOutside",Zn=t.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ea=t.forwardRef(((e,r)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=t.useContext(Zn),[u,h]=t.useState(null),f=u?.ownerDocument??globalThis?.document,[,m]=t.useState({}),p=_r(r,(e=>h(e))),x=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),g=x.indexOf(v),y=u?x.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,w=y>=g,N=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const n=Kn(e),a=t.useRef(!1),s=t.useRef((()=>{}));return t.useEffect((()=>{const e=e=>{if(e.target&&!a.current){let t=function(){na(Qn,n,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(r.removeEventListener("click",s.current),s.current=t,r.addEventListener("click",s.current,{once:!0})):t()}else r.removeEventListener("click",s.current);a.current=!1},t=window.setTimeout((()=>{r.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(t),r.removeEventListener("pointerdown",e),r.removeEventListener("click",s.current)}}),[r,n]),{onPointerDownCapture:()=>a.current=!0}}((e=>{const t=e.target,r=[...d.branches].some((e=>e.contains(t)));w&&!r&&(s?.(e),o?.(e),e.defaultPrevented||l?.())}),f),j=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const n=Kn(e),a=t.useRef(!1);return t.useEffect((()=>{const e=e=>{if(e.target&&!a.current){na(Jn,n,{originalEvent:e},{discrete:!1})}};return r.addEventListener("focusin",e),()=>r.removeEventListener("focusin",e)}),[r,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}((e=>{const t=e.target;[...d.branches].some((e=>e.contains(t)))||(i?.(e),o?.(e),e.defaultPrevented||l?.())}),f);return function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis?.document;const n=Kn(e);t.useEffect((()=>{const e=e=>{"Escape"===e.key&&n(e)};return r.addEventListener("keydown",e,{capture:!0}),()=>r.removeEventListener("keydown",e,{capture:!0})}),[n,r])}((e=>{y===d.layers.size-1&&(a?.(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))}),f),t.useEffect((()=>{if(u)return n&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(Yn=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),ra(),()=>{n&&1===d.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=Yn)}}),[u,f,n,d]),t.useEffect((()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),ra())}),[u,d]),t.useEffect((()=>{const e=()=>m({});return document.addEventListener(Xn,e),()=>document.removeEventListener(Xn,e)}),[]),(0,Rr.jsx)(qn.div,{...c,ref:p,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:Hn(e.onFocusCapture,j.onFocusCapture),onBlurCapture:Hn(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Hn(e.onPointerDownCapture,N.onPointerDownCapture)})}));ea.displayName="DismissableLayer";var ta=t.forwardRef(((e,r)=>{const n=t.useContext(Zn),a=t.useRef(null),s=_r(r,a);return t.useEffect((()=>{const e=a.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}}),[n.branches]),(0,Rr.jsx)(qn.div,{...e,ref:s})}));function ra(){const e=new CustomEvent(Xn);document.dispatchEvent(e)}function na(e,t,r,n){let{discrete:a}=n;const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),a?Gn(s,i):s.dispatchEvent(i)}ta.displayName="DismissableLayerBranch";var aa=ea,sa=ta,ia=0;function oa(){t.useEffect((()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??la()),document.body.insertAdjacentElement("beforeend",e[1]??la()),ia++,()=>{1===ia&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),ia--}}),[])}function la(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ca="focusScope.autoFocusOnMount",da="focusScope.autoFocusOnUnmount",ua={bubbles:!1,cancelable:!0},ha=t.forwardRef(((e,r)=>{const{loop:n=!1,trapped:a=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[l,c]=t.useState(null),d=Kn(s),u=Kn(i),h=t.useRef(null),f=_r(r,(e=>c(e))),m=t.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;t.useEffect((()=>{if(a){let e=function(e){if(m.paused||!l)return;const t=e.target;l.contains(t)?h.current=t:xa(h.current,{select:!0})},t=function(e){if(m.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||xa(h.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&xa(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return l&&n.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}}),[a,l,m.paused]),t.useEffect((()=>{if(l){va.add(m);const t=document.activeElement;if(!l.contains(t)){const r=new CustomEvent(ca,ua);l.addEventListener(ca,d),l.dispatchEvent(r),r.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=document.activeElement;for(const n of e)if(xa(n,{select:t}),document.activeElement!==r)return}((e=fa(l),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&xa(l))}return()=>{l.removeEventListener(ca,d),setTimeout((()=>{const e=new CustomEvent(da,ua);l.addEventListener(da,u),l.dispatchEvent(e),e.defaultPrevented||xa(t??document.body,{select:!0}),l.removeEventListener(da,u),va.remove(m)}),0)}}var e}),[l,d,u,m]);const p=t.useCallback((e=>{if(!n&&!a)return;if(m.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){const t=e.currentTarget,[a,s]=function(e){const t=fa(e),r=ma(t,e),n=ma(t.reverse(),e);return[r,n]}(t);a&&s?e.shiftKey||r!==s?e.shiftKey&&r===a&&(e.preventDefault(),n&&xa(s,{select:!0})):(e.preventDefault(),n&&xa(a,{select:!0})):r===t&&e.preventDefault()}}),[n,a,m.paused]);return(0,Rr.jsx)(qn.div,{tabIndex:-1,...o,ref:f,onKeyDown:p})}));function fa(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ma(e,t){for(const r of e)if(!pa(r,{upTo:t}))return r}function pa(e,t){let{upTo:r}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==r&&e===r)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function xa(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}ha.displayName="FocusScope";var va=function(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=ga(e,t),e.unshift(t)},remove(t){e=ga(e,t),e[0]?.resume()}}}();function ga(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}var ya=Boolean(globalThis?.document)?t.useLayoutEffect:()=>{},ba=n["useId".toString()]||(()=>{}),wa=0;function Na(e){const[r,n]=t.useState(ba());return ya((()=>{e||n((e=>e??String(wa++)))}),[e]),e||(r?`radix-${r}`:"")}const ja=["top","right","bottom","left"],Sa=Math.min,Ca=Math.max,ka=Math.round,Ea=Math.floor,Ta=e=>({x:e,y:e}),Da={left:"right",right:"left",bottom:"top",top:"bottom"},Aa={start:"end",end:"start"};function Pa(e,t,r){return Ca(e,Sa(t,r))}function _a(e,t){return"function"===typeof e?e(t):e}function Ra(e){return e.split("-")[0]}function Ia(e){return e.split("-")[1]}function Ma(e){return"x"===e?"y":"x"}function Oa(e){return"y"===e?"height":"width"}function Fa(e){return["top","bottom"].includes(Ra(e))?"y":"x"}function La(e){return Ma(Fa(e))}function Ba(e){return e.replace(/start|end/g,(e=>Aa[e]))}function Ua(e){return e.replace(/left|right|bottom|top/g,(e=>Da[e]))}function za(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Va(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function Ha(e,t,r){let{reference:n,floating:a}=e;const s=Fa(t),i=La(t),o=Oa(i),l=Ra(t),c="y"===s,d=n.x+n.width/2-a.width/2,u=n.y+n.height/2-a.height/2,h=n[o]/2-a[o]/2;let f;switch(l){case"top":f={x:d,y:n.y-a.height};break;case"bottom":f={x:d,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:u};break;case"left":f={x:n.x-a.width,y:u};break;default:f={x:n.x,y:n.y}}switch(Ia(t)){case"start":f[i]-=h*(r&&c?-1:1);break;case"end":f[i]+=h*(r&&c?-1:1)}return f}async function $a(e,t){var r;void 0===t&&(t={});const{x:n,y:a,platform:s,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:f=0}=_a(t,e),m=za(f),p=o[h?"floating"===u?"reference":"floating":u],x=Va(await s.getClippingRect({element:null==(r=await(null==s.isElement?void 0:s.isElement(p)))||r?p:p.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),v="floating"===u?{x:n,y:a,width:i.floating.width,height:i.floating.height}:i.reference,g=await(null==s.getOffsetParent?void 0:s.getOffsetParent(o.floating)),y=await(null==s.isElement?void 0:s.isElement(g))&&await(null==s.getScale?void 0:s.getScale(g))||{x:1,y:1},b=Va(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:g,strategy:l}):v);return{top:(x.top-b.top+m.top)/y.y,bottom:(b.bottom-x.bottom+m.bottom)/y.y,left:(x.left-b.left+m.left)/y.x,right:(b.right-x.right+m.right)/y.x}}function Wa(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function qa(e){return ja.some((t=>e[t]>=0))}function Ga(){return"undefined"!==typeof window}function Ka(e){return Qa(e)?(e.nodeName||"").toLowerCase():"#document"}function Ya(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Xa(e){var t;return null==(t=(Qa(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Qa(e){return!!Ga()&&(e instanceof Node||e instanceof Ya(e).Node)}function Ja(e){return!!Ga()&&(e instanceof Element||e instanceof Ya(e).Element)}function Za(e){return!!Ga()&&(e instanceof HTMLElement||e instanceof Ya(e).HTMLElement)}function es(e){return!(!Ga()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Ya(e).ShadowRoot)}function ts(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=os(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function rs(e){return["table","td","th"].includes(Ka(e))}function ns(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(ZJ){return!1}}))}function as(e){const t=ss(),r=Ja(e)?os(e):e;return"none"!==r.transform||"none"!==r.perspective||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","perspective","filter"].some((e=>(r.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(r.contain||"").includes(e)))}function ss(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function is(e){return["html","body","#document"].includes(Ka(e))}function os(e){return Ya(e).getComputedStyle(e)}function ls(e){return Ja(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function cs(e){if("html"===Ka(e))return e;const t=e.assignedSlot||e.parentNode||es(e)&&e.host||Xa(e);return es(t)?t.host:t}function ds(e){const t=cs(e);return is(t)?e.ownerDocument?e.ownerDocument.body:e.body:Za(t)&&ts(t)?t:ds(t)}function us(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const a=ds(e),s=a===(null==(n=e.ownerDocument)?void 0:n.body),i=Ya(a);if(s){const e=hs(i);return t.concat(i,i.visualViewport||[],ts(a)?a:[],e&&r?us(e):[])}return t.concat(a,us(a,[],r))}function hs(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function fs(e){const t=os(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Za(e),s=a?e.offsetWidth:r,i=a?e.offsetHeight:n,o=ka(r)!==s||ka(n)!==i;return o&&(r=s,n=i),{width:r,height:n,$:o}}function ms(e){return Ja(e)?e:e.contextElement}function ps(e){const t=ms(e);if(!Za(t))return Ta(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:s}=fs(t);let i=(s?ka(r.width):r.width)/n,o=(s?ka(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}const xs=Ta(0);function vs(e){const t=Ya(e);return ss()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:xs}function gs(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);const a=e.getBoundingClientRect(),s=ms(e);let i=Ta(1);t&&(n?Ja(n)&&(i=ps(n)):i=ps(e));const o=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==Ya(e))&&t}(s,r,n)?vs(s):Ta(0);let l=(a.left+o.x)/i.x,c=(a.top+o.y)/i.y,d=a.width/i.x,u=a.height/i.y;if(s){const e=Ya(s),t=n&&Ja(n)?Ya(n):n;let r=e,a=hs(r);for(;a&&n&&t!==r;){const e=ps(a),t=a.getBoundingClientRect(),n=os(a),s=t.left+(a.clientLeft+parseFloat(n.paddingLeft))*e.x,i=t.top+(a.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=s,c+=i,r=Ya(a),a=hs(r)}}return Va({width:d,height:u,x:l,y:c})}function ys(e,t){const r=ls(e).scrollLeft;return t?t.left+r:gs(Xa(e)).left+r}function bs(e,t,r){let n;if("viewport"===t)n=function(e,t){const r=Ya(e),n=Xa(e),a=r.visualViewport;let s=n.clientWidth,i=n.clientHeight,o=0,l=0;if(a){s=a.width,i=a.height;const e=ss();(!e||e&&"fixed"===t)&&(o=a.offsetLeft,l=a.offsetTop)}return{width:s,height:i,x:o,y:l}}(e,r);else if("document"===t)n=function(e){const t=Xa(e),r=ls(e),n=e.ownerDocument.body,a=Ca(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=Ca(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+ys(e);const o=-r.scrollTop;return"rtl"===os(n).direction&&(i+=Ca(t.clientWidth,n.clientWidth)-a),{width:a,height:s,x:i,y:o}}(Xa(e));else if(Ja(t))n=function(e,t){const r=gs(e,!0,"fixed"===t),n=r.top+e.clientTop,a=r.left+e.clientLeft,s=Za(e)?ps(e):Ta(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:a*s.x,y:n*s.y}}(t,r);else{const r=vs(e);n={...t,x:t.x-r.x,y:t.y-r.y}}return Va(n)}function ws(e,t){const r=cs(e);return!(r===t||!Ja(r)||is(r))&&("fixed"===os(r).position||ws(r,t))}function Ns(e,t,r){const n=Za(t),a=Xa(t),s="fixed"===r,i=gs(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const l=Ta(0);if(n||!n&&!s)if(("body"!==Ka(t)||ts(a))&&(o=ls(t)),n){const e=gs(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else a&&(l.x=ys(a));let c=0,d=0;if(a&&!n&&!s){const e=a.getBoundingClientRect();d=e.top+o.scrollTop,c=e.left+o.scrollLeft-ys(a,e)}return{x:i.left+o.scrollLeft-l.x-c,y:i.top+o.scrollTop-l.y-d,width:i.width,height:i.height}}function js(e){return"static"===os(e).position}function Ss(e,t){if(!Za(e)||"fixed"===os(e).position)return null;if(t)return t(e);let r=e.offsetParent;return Xa(e)===r&&(r=r.ownerDocument.body),r}function Cs(e,t){const r=Ya(e);if(ns(e))return r;if(!Za(e)){let t=cs(e);for(;t&&!is(t);){if(Ja(t)&&!js(t))return t;t=cs(t)}return r}let n=Ss(e,t);for(;n&&rs(n)&&js(n);)n=Ss(n,t);return n&&is(n)&&js(n)&&!as(n)?r:n||function(e){let t=cs(e);for(;Za(t)&&!is(t);){if(as(t))return t;if(ns(t))return null;t=cs(t)}return null}(e)||r}const ks={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const s="fixed"===a,i=Xa(n),o=!!t&&ns(t.floating);if(n===i||o&&s)return r;let l={scrollLeft:0,scrollTop:0},c=Ta(1);const d=Ta(0),u=Za(n);if((u||!u&&!s)&&(("body"!==Ka(n)||ts(i))&&(l=ls(n)),Za(n))){const e=gs(n);c=ps(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x,y:r.y*c.y-l.scrollTop*c.y+d.y}},getDocumentElement:Xa,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const s=[..."clippingAncestors"===r?ns(t)?[]:function(e,t){const r=t.get(e);if(r)return r;let n=us(e,[],!1).filter((e=>Ja(e)&&"body"!==Ka(e))),a=null;const s="fixed"===os(e).position;let i=s?cs(e):e;for(;Ja(i)&&!is(i);){const t=os(i),r=as(i);r||"fixed"!==t.position||(a=null),(s?!r&&!a:!r&&"static"===t.position&&a&&["absolute","fixed"].includes(a.position)||ts(i)&&!r&&ws(e,i))?n=n.filter((e=>e!==i)):a=t,i=cs(i)}return t.set(e,n),n}(t,this._c):[].concat(r),n],i=s[0],o=s.reduce(((e,r)=>{const n=bs(t,r,a);return e.top=Ca(n.top,e.top),e.right=Sa(n.right,e.right),e.bottom=Sa(n.bottom,e.bottom),e.left=Ca(n.left,e.left),e}),bs(t,i,a));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:Cs,getElementRects:async function(e){const t=this.getOffsetParent||Cs,r=this.getDimensions,n=await r(e.floating);return{reference:Ns(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=fs(e);return{width:t,height:r}},getScale:ps,isElement:Ja,isRTL:function(e){return"rtl"===os(e).direction}};function Es(e,t,r,n){void 0===n&&(n={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:i="function"===typeof ResizeObserver,layoutShift:o="function"===typeof IntersectionObserver,animationFrame:l=!1}=n,c=ms(e),d=a||s?[...c?us(c):[],...us(t)]:[];d.forEach((e=>{a&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)}));const u=c&&o?function(e,t){let r,n=null;const a=Xa(e);function s(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),s();const{left:c,top:d,width:u,height:h}=e.getBoundingClientRect();if(o||t(),!u||!h)return;const f={rootMargin:-Ea(d)+"px "+-Ea(a.clientWidth-(c+u))+"px "+-Ea(a.clientHeight-(d+h))+"px "+-Ea(c)+"px",threshold:Ca(0,Sa(1,l))||1};let m=!0;function p(e){const t=e[0].intersectionRatio;if(t!==l){if(!m)return i();t?i(!1,t):r=setTimeout((()=>{i(!1,1e-7)}),1e3)}m=!1}try{n=new IntersectionObserver(p,{...f,root:a.ownerDocument})}catch(ZJ){n=new IntersectionObserver(p,f)}n.observe(e)}(!0),s}(c,r):null;let h,f=-1,m=null;i&&(m=new ResizeObserver((e=>{let[n]=e;n&&n.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame((()=>{var e;null==(e=m)||e.observe(t)}))),r()})),c&&!l&&m.observe(c),m.observe(t));let p=l?gs(e):null;return l&&function t(){const n=gs(e);!p||n.x===p.x&&n.y===p.y&&n.width===p.width&&n.height===p.height||r();p=n,h=requestAnimationFrame(t)}(),r(),()=>{var e;d.forEach((e=>{a&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)})),null==u||u(),null==(e=m)||e.disconnect(),m=null,l&&cancelAnimationFrame(h)}}const Ts=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:s,placement:i,middlewareData:o}=t,l=await async function(e,t){const{placement:r,platform:n,elements:a}=e,s=await(null==n.isRTL?void 0:n.isRTL(a.floating)),i=Ra(r),o=Ia(r),l="y"===Fa(r),c=["left","top"].includes(i)?-1:1,d=s&&l?-1:1,u=_a(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:m}="number"===typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"===typeof m&&(f="end"===o?-1*m:m),l?{x:f*d,y:h*c}:{x:h*c,y:f*d}}(t,e);return i===(null==(r=o.offset)?void 0:r.placement)&&null!=(n=o.arrow)&&n.alignmentOffset?{}:{x:a+l.x,y:s+l.y,data:{...l,placement:i}}}}},Ds=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:o={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=_a(e,t),c={x:r,y:n},d=await $a(t,l),u=Fa(Ra(a)),h=Ma(u);let f=c[h],m=c[u];if(s){const e="y"===h?"bottom":"right";f=Pa(f+d["y"===h?"top":"left"],f,f-d[e])}if(i){const e="y"===u?"bottom":"right";m=Pa(m+d["y"===u?"top":"left"],m,m-d[e])}const p=o.fn({...t,[h]:f,[u]:m});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[h]:s,[u]:i}}}}}},As=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:s,rects:i,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...x}=_a(e,t);if(null!=(r=s.arrow)&&r.alignmentOffset)return{};const v=Ra(a),g=Fa(o),y=Ra(o)===o,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(y||!p?[Ua(o)]:function(e){const t=Ua(e);return[Ba(e),t,Ba(t)]}(o)),N="none"!==m;!h&&N&&w.push(...function(e,t,r,n){const a=Ia(e);let s=function(e,t,r){const n=["left","right"],a=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?s:i;default:return[]}}(Ra(e),"start"===r,n);return a&&(s=s.map((e=>e+"-"+a)),t&&(s=s.concat(s.map(Ba)))),s}(o,p,m,b));const j=[o,...w],S=await $a(t,x),C=[];let k=(null==(n=s.flip)?void 0:n.overflows)||[];if(d&&C.push(S[v]),u){const e=function(e,t,r){void 0===r&&(r=!1);const n=Ia(e),a=La(e),s=Oa(a);let i="x"===a?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=Ua(i)),[i,Ua(i)]}(a,i,b);C.push(S[e[0]],S[e[1]])}if(k=[...k,{placement:a,overflows:C}],!C.every((e=>e<=0))){var E,T;const e=((null==(E=s.flip)?void 0:E.index)||0)+1,t=j[e];if(t)return{data:{index:e,overflows:k},reset:{placement:t}};let r=null==(T=k.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:T.placement;if(!r)switch(f){case"bestFit":{var D;const e=null==(D=k.filter((e=>{if(N){const t=Fa(e.placement);return t===g||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:D[0];e&&(r=e);break}case"initialPlacement":r=o}if(a!==r)return{reset:{placement:r}}}return{}}}},Ps=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:s,platform:i,elements:o}=t,{apply:l=()=>{},...c}=_a(e,t),d=await $a(t,c),u=Ra(a),h=Ia(a),f="y"===Fa(a),{width:m,height:p}=s.floating;let x,v;"top"===u||"bottom"===u?(x=u,v=h===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(v=u,x="end"===h?"top":"bottom");const g=p-d.top-d.bottom,y=m-d.left-d.right,b=Sa(p-d[x],g),w=Sa(m-d[v],y),N=!t.middlewareData.shift;let j=b,S=w;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(S=y),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(j=g),N&&!h){const e=Ca(d.left,0),t=Ca(d.right,0),r=Ca(d.top,0),n=Ca(d.bottom,0);f?S=m-2*(0!==e||0!==t?e+t:Ca(d.left,d.right)):j=p-2*(0!==r||0!==n?r+n:Ca(d.top,d.bottom))}await l({...t,availableWidth:S,availableHeight:j});const C=await i.getDimensions(o.floating);return m!==C.width||p!==C.height?{reset:{rects:!0}}:{}}}},_s=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=_a(e,t);switch(n){case"referenceHidden":{const e=Wa(await $a(t,{...a,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:qa(e)}}}case"escaped":{const e=Wa(await $a(t,{...a,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:qa(e)}}}default:return{}}}}},Rs=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:s,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=_a(e,t)||{};if(null==c)return{};const u=za(d),h={x:r,y:n},f=La(a),m=Oa(f),p=await i.getDimensions(c),x="y"===f,v=x?"top":"left",g=x?"bottom":"right",y=x?"clientHeight":"clientWidth",b=s.reference[m]+s.reference[f]-h[f]-s.floating[m],w=h[f]-s.reference[f],N=await(null==i.getOffsetParent?void 0:i.getOffsetParent(c));let j=N?N[y]:0;j&&await(null==i.isElement?void 0:i.isElement(N))||(j=o.floating[y]||s.floating[m]);const S=b/2-w/2,C=j/2-p[m]/2-1,k=Sa(u[v],C),E=Sa(u[g],C),T=k,D=j-p[m]-E,A=j/2-p[m]/2+S,P=Pa(T,A,D),_=!l.arrow&&null!=Ia(a)&&A!==P&&s.reference[m]/2-(A<T?k:E)-p[m]/2<0,R=_?A<T?A-T:A-D:0;return{[f]:h[f]+R,data:{[f]:P,centerOffset:A-P-R,..._&&{alignmentOffset:R}},reset:_}}}),Is=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:s,middlewareData:i}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=_a(e,t),d={x:r,y:n},u=Fa(a),h=Ma(u);let f=d[h],m=d[u];const p=_a(o,t),x="number"===typeof p?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const e="y"===h?"height":"width",t=s.reference[h]-s.floating[e]+x.mainAxis,r=s.reference[h]+s.reference[e]-x.mainAxis;f<t?f=t:f>r&&(f=r)}if(c){var v,g;const e="y"===h?"width":"height",t=["top","left"].includes(Ra(a)),r=s.reference[u]-s.floating[e]+(t&&(null==(v=i.offset)?void 0:v[u])||0)+(t?0:x.crossAxis),n=s.reference[u]+s.reference[e]+(t?0:(null==(g=i.offset)?void 0:g[u])||0)-(t?x.crossAxis:0);m<r?m=r:m>n&&(m=n)}return{[h]:f,[u]:m}}}},Ms=(e,t,r)=>{const n=new Map,a={platform:ks,...r},s={...a.platform,_c:n};return(async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:s=[],platform:i}=r,o=s.filter(Boolean),l=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:u}=Ha(c,n,l),h=n,f={},m=0;for(let p=0;p<o.length;p++){const{name:r,fn:s}=o[p],{x:x,y:v,data:g,reset:y}=await s({x:d,y:u,initialPlacement:n,placement:h,strategy:a,middlewareData:f,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=x?x:d,u=null!=v?v:u,f={...f,[r]:{...f[r],...g}},y&&m<=50&&(m++,"object"===typeof y&&(y.placement&&(h=y.placement),y.rects&&(c=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:a}):y.rects),({x:d,y:u}=Ha(c,h,l))),p=-1)}return{x:d,y:u,placement:h,strategy:a,middlewareData:f}})(e,t,{...a,platform:s})};var Os="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;function Fs(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;0!==n--;)if(!Fs(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;0!==n--;){const r=a[n];if(("_owner"!==r||!e.$$typeof)&&!Fs(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function Ls(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Bs(e,t){const r=Ls(e);return Math.round(t*r)/r}function Us(e){const r=t.useRef(e);return Os((()=>{r.current=e})),r}const zs=e=>({name:"arrow",options:e,fn(t){const{element:r,padding:n}="function"===typeof e?e(t):e;return r&&(a=r,{}.hasOwnProperty.call(a,"current"))?null!=r.current?Rs({element:r.current,padding:n}).fn(t):{}:r?Rs({element:r,padding:n}).fn(t):{};var a}}),Vs=(e,t)=>({...Ts(e),options:[e,t]}),Hs=(e,t)=>({...Ds(e),options:[e,t]}),$s=(e,t)=>({...Is(e),options:[e,t]}),Ws=(e,t)=>({...As(e),options:[e,t]}),qs=(e,t)=>({...Ps(e),options:[e,t]}),Gs=(e,t)=>({..._s(e),options:[e,t]}),Ks=(e,t)=>({...zs(e),options:[e,t]});var Ys=t.forwardRef(((e,t)=>{const{children:r,width:n=10,height:a=5,...s}=e;return(0,Rr.jsx)(qn.svg,{...s,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,Rr.jsx)("polygon",{points:"0,0 30,0 15,10"})})}));Ys.displayName="Arrow";var Xs=Ys;function Qs(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const a=r[0];if(1===r.length)return a;const s=()=>{const e=r.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(r){const n=e.reduce(((e,t)=>{let{useScope:n,scopeName:a}=t;return{...e,...n(r)[`__scope${a}`]}}),{});return t.useMemo((()=>({[`__scope${a.scopeName}`]:n})),[n])}};return s.scopeName=a.scopeName,s}function Js(e){const[r,n]=t.useState(void 0);return ya((()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let a,s;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,s=t.blockSize}else a=e.offsetWidth,s=e.offsetHeight;n({width:a,height:s})}));return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)}),[e]),r}var Zs="Popper",[ei,ti]=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const a=()=>{const r=n.map((e=>t.createContext(e)));return function(n){const a=n?.[e]||r;return t.useMemo((()=>({[`__scope${e}`]:{...n,[e]:a}})),[n,a])}};return a.scopeName=e,[function(r,a){const s=t.createContext(a),i=n.length;function o(r){const{scope:n,children:a,...o}=r,l=n?.[e][i]||s,c=t.useMemo((()=>o),Object.values(o));return(0,Rr.jsx)(l.Provider,{value:c,children:a})}return n=[...n,a],o.displayName=r+"Provider",[o,function(n,o){const l=o?.[e][i]||s,c=t.useContext(l);if(c)return c;if(void 0!==a)return a;throw new Error(`\`${n}\` must be used within \`${r}\``)}]},Qs(a,...r)]}(Zs),[ri,ni]=ei(Zs),ai=e=>{const{__scopePopper:r,children:n}=e,[a,s]=t.useState(null);return(0,Rr.jsx)(ri,{scope:r,anchor:a,onAnchorChange:s,children:n})};ai.displayName=Zs;var si="PopperAnchor",ii=t.forwardRef(((e,r)=>{const{__scopePopper:n,virtualRef:a,...s}=e,i=ni(si,n),o=t.useRef(null),l=_r(r,o);return t.useEffect((()=>{i.onAnchorChange(a?.current||o.current)})),a?null:(0,Rr.jsx)(qn.div,{...s,ref:l})}));ii.displayName=si;var oi="PopperContent",[li,ci]=ei(oi),di=t.forwardRef(((e,r)=>{const{__scopePopper:n,side:a="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:p,...x}=e,v=ni(oi,n),[g,y]=t.useState(null),b=_r(r,(e=>y(e))),[w,N]=t.useState(null),j=Js(w),S=j?.width??0,C=j?.height??0,k=a+("center"!==i?"-"+i:""),E="number"===typeof u?u:{top:0,right:0,bottom:0,left:0,...u},T=Array.isArray(d)?d:[d],D=T.length>0,A={padding:E,boundary:T.filter(mi),altBoundary:D},{refs:P,floatingStyles:_,placement:R,isPositioned:I,middlewareData:M}=function(e){void 0===e&&(e={});const{placement:r="bottom",strategy:n="absolute",middleware:a=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=t.useState({x:0,y:0,strategy:n,placement:r,middlewareData:{},isPositioned:!1}),[f,m]=t.useState(a);Fs(f,a)||m(a);const[p,x]=t.useState(null),[v,g]=t.useState(null),y=t.useCallback((e=>{e!==j.current&&(j.current=e,x(e))}),[]),b=t.useCallback((e=>{e!==S.current&&(S.current=e,g(e))}),[]),w=i||p,N=o||v,j=t.useRef(null),S=t.useRef(null),C=t.useRef(u),k=null!=c,E=Us(c),T=Us(s),D=Us(d),A=t.useCallback((()=>{if(!j.current||!S.current)return;const e={placement:r,strategy:n,middleware:f};T.current&&(e.platform=T.current),Ms(j.current,S.current,e).then((e=>{const t={...e,isPositioned:!1!==D.current};P.current&&!Fs(C.current,t)&&(C.current=t,ge.flushSync((()=>{h(t)})))}))}),[f,r,n,T,D]);Os((()=>{!1===d&&C.current.isPositioned&&(C.current.isPositioned=!1,h((e=>({...e,isPositioned:!1}))))}),[d]);const P=t.useRef(!1);Os((()=>(P.current=!0,()=>{P.current=!1})),[]),Os((()=>{if(w&&(j.current=w),N&&(S.current=N),w&&N){if(E.current)return E.current(w,N,A);A()}}),[w,N,A,E,k]);const _=t.useMemo((()=>({reference:j,floating:S,setReference:y,setFloating:b})),[y,b]),R=t.useMemo((()=>({reference:w,floating:N})),[w,N]),I=t.useMemo((()=>{const e={position:n,left:0,top:0};if(!R.floating)return e;const t=Bs(R.floating,u.x),r=Bs(R.floating,u.y);return l?{...e,transform:"translate("+t+"px, "+r+"px)",...Ls(R.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,l,R.floating,u.x,u.y]);return t.useMemo((()=>({...u,update:A,refs:_,elements:R,floatingStyles:I})),[u,A,_,R,I])}({strategy:"fixed",placement:k,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Es(...t,{animationFrame:"always"===m})},elements:{reference:v.anchor},middleware:[Vs({mainAxis:s+C,alignmentAxis:o}),c&&Hs({mainAxis:!0,crossAxis:!1,limiter:"partial"===h?$s():void 0,...A}),c&&Ws({...A}),qs({...A,apply:e=>{let{elements:t,rects:r,availableWidth:n,availableHeight:a}=e;const{width:s,height:i}=r.reference,o=t.floating.style;o.setProperty("--radix-popper-available-width",`${n}px`),o.setProperty("--radix-popper-available-height",`${a}px`),o.setProperty("--radix-popper-anchor-width",`${s}px`),o.setProperty("--radix-popper-anchor-height",`${i}px`)}}),w&&Ks({element:w,padding:l}),pi({arrowWidth:S,arrowHeight:C}),f&&Gs({strategy:"referenceHidden",...A})]}),[O,F]=xi(R),L=Kn(p);ya((()=>{I&&L?.()}),[I,L]);const B=M.arrow?.x,U=M.arrow?.y,z=0!==M.arrow?.centerOffset,[V,H]=t.useState();return ya((()=>{g&&H(window.getComputedStyle(g).zIndex)}),[g]),(0,Rr.jsx)("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{..._,transform:I?_.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:V,"--radix-popper-transform-origin":[M.transformOrigin?.x,M.transformOrigin?.y].join(" "),...M.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,Rr.jsx)(li,{scope:n,placedSide:O,onArrowChange:N,arrowX:B,arrowY:U,shouldHideArrow:z,children:(0,Rr.jsx)(qn.div,{"data-side":O,"data-align":F,...x,ref:b,style:{...x.style,animation:I?void 0:"none"}})})})}));di.displayName=oi;var ui="PopperArrow",hi={top:"bottom",right:"left",bottom:"top",left:"right"},fi=t.forwardRef((function(e,t){const{__scopePopper:r,...n}=e,a=ci(ui,r),s=hi[a.placedSide];return(0,Rr.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,Rr.jsx)(Xs,{...n,ref:t,style:{...n.style,display:"block"}})})}));function mi(e){return null!==e}fi.displayName=ui;var pi=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:a}=t,s=0!==a.arrow?.centerOffset,i=s?0:e.arrowWidth,o=s?0:e.arrowHeight,[l,c]=xi(r),d={start:"0%",center:"50%",end:"100%"}[c],u=(a.arrow?.x??0)+i/2,h=(a.arrow?.y??0)+o/2;let f="",m="";return"bottom"===l?(f=s?d:`${u}px`,m=-o+"px"):"top"===l?(f=s?d:`${u}px`,m=`${n.floating.height+o}px`):"right"===l?(f=-o+"px",m=s?d:`${h}px`):"left"===l&&(f=`${n.floating.width+o}px`,m=s?d:`${h}px`),{data:{x:f,y:m}}}});function xi(e){const[t,r="center"]=e.split("-");return[t,r]}var vi=ai,gi=ii,yi=di,bi=fi,wi=t.forwardRef(((e,r)=>{const{container:n,...a}=e,[s,i]=t.useState(!1);ya((()=>i(!0)),[]);const o=n||s&&globalThis?.document?.body;return o?ge.createPortal((0,Rr.jsx)(qn.div,{...a,ref:r}),o):null}));wi.displayName="Portal";var Ni=e=>{const{present:r,children:n}=e,a=function(e){const[r,n]=t.useState(),a=t.useRef({}),s=t.useRef(e),i=t.useRef("none"),o=e?"mounted":"unmounted",[l,c]=function(e,r){return t.useReducer(((e,t)=>r[e][t]??e),e)}(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return t.useEffect((()=>{const e=ji(a.current);i.current="mounted"===l?e:"none"}),[l]),ya((()=>{const t=a.current,r=s.current;if(r!==e){const n=i.current,a=ji(t);if(e)c("MOUNT");else if("none"===a||"none"===t?.display)c("UNMOUNT");else{c(r&&n!==a?"ANIMATION_OUT":"UNMOUNT")}s.current=e}}),[e,c]),ya((()=>{if(r){let e;const t=r.ownerDocument.defaultView??window,n=n=>{const i=ji(a.current).includes(n.animationName);if(n.target===r&&i&&(c("ANIMATION_END"),!s.current)){const n=r.style.animationFillMode;r.style.animationFillMode="forwards",e=t.setTimeout((()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=n)}))}},o=e=>{e.target===r&&(i.current=ji(a.current))};return r.addEventListener("animationstart",o),r.addEventListener("animationcancel",n),r.addEventListener("animationend",n),()=>{t.clearTimeout(e),r.removeEventListener("animationstart",o),r.removeEventListener("animationcancel",n),r.removeEventListener("animationend",n)}}c("ANIMATION_END")}),[r,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:t.useCallback((e=>{e&&(a.current=getComputedStyle(e)),n(e)}),[])}}(r),s="function"===typeof n?n({present:a.isPresent}):t.Children.only(n),i=_r(a.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;if(r)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(s));return"function"===typeof n||a.isPresent?t.cloneElement(s,{ref:i}):null};function ji(e){return e?.animationName||"none"}function Si(e){let{prop:r,defaultProp:n,onChange:a=()=>{}}=e;const[s,i]=function(e){let{defaultProp:r,onChange:n}=e;const a=t.useState(r),[s]=a,i=t.useRef(s),o=Kn(n);return t.useEffect((()=>{i.current!==s&&(o(s),i.current=s)}),[s,i,o]),a}({defaultProp:n,onChange:a}),o=void 0!==r,l=o?r:s,c=Kn(a);return[l,t.useCallback((e=>{if(o){const t="function"===typeof e?e(r):e;t!==r&&c(t)}else i(e)}),[o,r,i,c])]}Ni.displayName="Presence";var Ci=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},ki=new WeakMap,Ei=new WeakMap,Ti={},Di=0,Ai=function(e){return e&&(e.host||Ai(e.parentNode))},Pi=function(e,t,r,n){var a=function(e,t){return t.map((function(t){if(e.contains(t))return t;var r=Ai(t);return r&&e.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);Ti[r]||(Ti[r]=new WeakMap);var s=Ti[r],i=[],o=new Set,l=new Set(a),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};a.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,(function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(n),a=null!==t&&"false"!==t,l=(ki.get(e)||0)+1,c=(s.get(e)||0)+1;ki.set(e,l),s.set(e,c),i.push(e),1===l&&a&&Ei.set(e,!0),1===c&&e.setAttribute(r,"true"),a||e.setAttribute(n,"true")}catch(ZJ){console.error("aria-hidden: cannot operate on ",e,ZJ)}}))};return d(t),o.clear(),Di++,function(){i.forEach((function(e){var t=ki.get(e)-1,a=s.get(e)-1;ki.set(e,t),s.set(e,a),t||(Ei.has(e)||e.removeAttribute(n),Ei.delete(e)),a||e.removeAttribute(r)})),--Di||(ki=new WeakMap,ki=new WeakMap,Ei=new WeakMap,Ti={})}},_i=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=t||Ci(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),Pi(n,a,r,"aria-hidden")):function(){return null}};var Ri=function(){return Ri=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ri.apply(this,arguments)};function Ii(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}Object.create;function Mi(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Oi="right-scroll-bar-position",Fi="width-before-scroll-bar";function Li(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var Bi="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,Ui=new WeakMap;function zi(e,r){var n=function(e,r){var n=(0,t.useState)((function(){return{value:e,callback:r,facade:{get current(){return n.value},set current(e){var t=n.value;t!==e&&(n.value=e,n.callback(e,t))}}}}))[0];return n.callback=r,n.facade}(r||null,(function(t){return e.forEach((function(e){return Li(e,t)}))}));return Bi((function(){var t=Ui.get(n);if(t){var r=new Set(t),a=new Set(e),s=n.current;r.forEach((function(e){a.has(e)||Li(e,null)})),a.forEach((function(e){r.has(e)||Li(e,s)}))}Ui.set(n,e)}),[e]),n}function Vi(e){return e}function Hi(e,t){void 0===t&&(t=Vi);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(e){var a=t(e,n);return r.push(a),function(){r=r.filter((function(e){return e!==a}))}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var a=r;r=[],a.forEach(e),t=r}var s=function(){var r=t;t=[],r.forEach(e)},i=function(){return Promise.resolve().then(s)};i(),r={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),r}}}};return a}var $i=function(e){void 0===e&&(e={});var t=Hi(null);return t.options=Ri({async:!0,ssr:!1},e),t}(),Wi=function(){},qi=t.forwardRef((function(e,r){var n=t.useRef(null),a=t.useState({onScrollCapture:Wi,onWheelCapture:Wi,onTouchMoveCapture:Wi}),s=a[0],i=a[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,m=e.noIsolation,p=e.inert,x=e.allowPinchZoom,v=e.as,g=void 0===v?"div":v,y=e.gapMode,b=Ii(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,N=zi([n,r]),j=Ri(Ri({},b),s);return t.createElement(t.Fragment,null,u&&t.createElement(w,{sideCar:$i,removeScrollBar:d,shards:h,noIsolation:m,inert:p,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:y}),o?t.cloneElement(t.Children.only(l),Ri(Ri({},j),{ref:N})):t.createElement(g,Ri({},j,{className:c,ref:N}),l))}));qi.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},qi.classNames={fullWidth:Fi,zeroRight:Oi};var Gi,Ki=function(e){var r=e.sideCar,n=Ii(e,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=r.read();if(!a)throw new Error("Sidecar medium not found");return t.createElement(a,Ri({},n))};Ki.isSideCarExport=!0;function Yi(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Gi||r.nc;return t&&e.setAttribute("nonce",t),e}var Xi=function(){var e=0,t=null;return{add:function(r){var n,a;0==e&&(t=Yi())&&(a=r,(n=t).styleSheet?n.styleSheet.cssText=a:n.appendChild(document.createTextNode(a)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Qi=function(){var e=function(){var e=Xi();return function(r,n){t.useEffect((function(){return e.add(r),function(){e.remove()}}),[r&&n])}}();return function(t){var r=t.styles,n=t.dynamic;return e(r,n),null}},Ji={left:0,top:0,right:0,gap:0},Zi=function(e){return parseInt(e||"",10)||0},eo=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return Ji;var t=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[Zi(r),Zi(n),Zi(a)]}(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},to=Qi(),ro="data-scroll-locked",no=function(e,t,r,n){var a=e.left,s=e.top,i=e.right,o=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(o,"px ").concat(n,";\n  }\n  body[").concat(ro,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Oi," {\n    right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(Fi," {\n    margin-right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(Oi," .").concat(Oi," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(Fi," .").concat(Fi," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(ro,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},ao=function(){var e=parseInt(document.body.getAttribute(ro)||"0",10);return isFinite(e)?e:0},so=function(e){var r=e.noRelative,n=e.noImportant,a=e.gapMode,s=void 0===a?"margin":a;t.useEffect((function(){return document.body.setAttribute(ro,(ao()+1).toString()),function(){var e=ao()-1;e<=0?document.body.removeAttribute(ro):document.body.setAttribute(ro,e.toString())}}),[]);var i=t.useMemo((function(){return eo(s)}),[s]);return t.createElement(to,{styles:no(i,!r,s,n?"":"!important")})},io=!1;if("undefined"!==typeof window)try{var oo=Object.defineProperty({},"passive",{get:function(){return io=!0,!0}});window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch(eZ){io=!1}var lo=!!io&&{passive:!1},co=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},uo=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!==typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),ho(e,n)){var a=fo(e,n);if(a[1]>a[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},ho=function(e,t){return"v"===e?function(e){return co(e,"overflowY")}(t):function(e){return co(e,"overflowX")}(t)},fo=function(e,t){return"v"===e?[(r=t).scrollTop,r.scrollHeight,r.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var r},mo=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},po=function(e){return[e.deltaX,e.deltaY]},xo=function(e){return e&&"current"in e?e.current:e},vo=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},go=0,yo=[];function bo(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const wo=(No=function(e){var r=t.useRef([]),n=t.useRef([0,0]),a=t.useRef(),s=t.useState(go++)[0],i=t.useState(Qi)[0],o=t.useRef(e);t.useEffect((function(){o.current=e}),[e]),t.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=Mi([e.lockRef.current],(e.shards||[]).map(xo),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(s))})),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(s))}))}}}),[e.inert,e.lockRef.current,e.shards]);var l=t.useCallback((function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var r,s=mo(e),i=n.current,l="deltaX"in e?e.deltaX:i[0]-s[0],c="deltaY"in e?e.deltaY:i[1]-s[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=uo(u,d);if(!h)return!0;if(h?r=u:(r="v"===u?"h":"v",h=uo(u,d)),!h)return!1;if(!a.current&&"changedTouches"in e&&(l||c)&&(a.current=r),!r)return!0;var f=a.current||r;return function(e,t,r,n,a){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=s*n,o=r.target,l=t.contains(o),c=!1,d=i>0,u=0,h=0;do{var f=fo(e,o),m=f[0],p=f[1]-f[2]-s*m;(m||p)&&ho(e,o)&&(u+=p,h+=m),o=o instanceof ShadowRoot?o.host:o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(d&&(a&&Math.abs(u)<1||!a&&i>u)||!d&&(a&&Math.abs(h)<1||!a&&-i>h))&&(c=!0),c}(f,t,e,"h"===f?l:c,!0)}),[]),c=t.useCallback((function(e){var t=e;if(yo.length&&yo[yo.length-1]===i){var n="deltaY"in t?po(t):mo(t),a=r.current.filter((function(e){return e.name===t.type&&(e.target===t.target||t.target===e.shadowParent)&&(r=e.delta,a=n,r[0]===a[0]&&r[1]===a[1]);var r,a}))[0];if(a&&a.should)t.cancelable&&t.preventDefault();else if(!a){var s=(o.current.shards||[]).map(xo).filter(Boolean).filter((function(e){return e.contains(t.target)}));(s.length>0?l(t,s[0]):!o.current.noIsolation)&&t.cancelable&&t.preventDefault()}}}),[]),d=t.useCallback((function(e,t,n,a){var s={name:e,delta:t,target:n,should:a,shadowParent:bo(n)};r.current.push(s),setTimeout((function(){r.current=r.current.filter((function(e){return e!==s}))}),1)}),[]),u=t.useCallback((function(e){n.current=mo(e),a.current=void 0}),[]),h=t.useCallback((function(t){d(t.type,po(t),t.target,l(t,e.lockRef.current))}),[]),f=t.useCallback((function(t){d(t.type,mo(t),t.target,l(t,e.lockRef.current))}),[]);t.useEffect((function(){return yo.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,lo),document.addEventListener("touchmove",c,lo),document.addEventListener("touchstart",u,lo),function(){yo=yo.filter((function(e){return e!==i})),document.removeEventListener("wheel",c,lo),document.removeEventListener("touchmove",c,lo),document.removeEventListener("touchstart",u,lo)}}),[]);var m=e.removeScrollBar,p=e.inert;return t.createElement(t.Fragment,null,p?t.createElement(i,{styles:vo(s)}):null,m?t.createElement(so,{gapMode:e.gapMode}):null)},$i.useMedium(No),Ki);var No,jo=t.forwardRef((function(e,r){return t.createElement(qi,Ri({},e,{ref:r,sideCar:wo}))}));jo.classNames=qi.classNames;const So=jo;var Co="Popover",[ko,Eo]=$n(Co,[ti]),To=ti(),[Do,Ao]=ko(Co),Po=e=>{const{__scopePopover:r,children:n,open:a,defaultOpen:s,onOpenChange:i,modal:o=!1}=e,l=To(r),c=t.useRef(null),[d,u]=t.useState(!1),[h=!1,f]=Si({prop:a,defaultProp:s,onChange:i});return(0,Rr.jsx)(vi,{...l,children:(0,Rr.jsx)(Do,{scope:r,contentId:Na(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:t.useCallback((()=>f((e=>!e))),[f]),hasCustomAnchor:d,onCustomAnchorAdd:t.useCallback((()=>u(!0)),[]),onCustomAnchorRemove:t.useCallback((()=>u(!1)),[]),modal:o,children:n})})};Po.displayName=Co;var _o="PopoverAnchor",Ro=t.forwardRef(((e,r)=>{const{__scopePopover:n,...a}=e,s=Ao(_o,n),i=To(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return t.useEffect((()=>(o(),()=>l())),[o,l]),(0,Rr.jsx)(gi,{...i,...a,ref:r})}));Ro.displayName=_o;var Io="PopoverTrigger",Mo=t.forwardRef(((e,t)=>{const{__scopePopover:r,...n}=e,a=Ao(Io,r),s=To(r),i=_r(t,a.triggerRef),o=(0,Rr.jsx)(qn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Ko(a.open),...n,ref:i,onClick:Hn(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:(0,Rr.jsx)(gi,{asChild:!0,...s,children:o})}));Mo.displayName=Io;var Oo="PopoverPortal",[Fo,Lo]=ko(Oo,{forceMount:void 0}),Bo=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,s=Ao(Oo,t);return(0,Rr.jsx)(Fo,{scope:t,forceMount:r,children:(0,Rr.jsx)(Ni,{present:r||s.open,children:(0,Rr.jsx)(wi,{asChild:!0,container:a,children:n})})})};Bo.displayName=Oo;var Uo="PopoverContent",zo=t.forwardRef(((e,t)=>{const r=Lo(Uo,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,s=Ao(Uo,e.__scopePopover);return(0,Rr.jsx)(Ni,{present:n||s.open,children:s.modal?(0,Rr.jsx)(Vo,{...a,ref:t}):(0,Rr.jsx)(Ho,{...a,ref:t})})}));zo.displayName=Uo;var Vo=t.forwardRef(((e,r)=>{const n=Ao(Uo,e.__scopePopover),a=t.useRef(null),s=_r(r,a),i=t.useRef(!1);return t.useEffect((()=>{const e=a.current;if(e)return _i(e)}),[]),(0,Rr.jsx)(So,{as:Ir,allowPinchZoom:!0,children:(0,Rr.jsx)($o,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Hn(e.onCloseAutoFocus,(e=>{e.preventDefault(),i.current||n.triggerRef.current?.focus()})),onPointerDownOutside:Hn(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;i.current=n}),{checkForDefaultPrevented:!1}),onFocusOutside:Hn(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})})})),Ho=t.forwardRef(((e,r)=>{const n=Ao(Uo,e.__scopePopover),a=t.useRef(!1),s=t.useRef(!1);return(0,Rr.jsx)($o,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||n.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const r=t.target,i=n.triggerRef.current?.contains(r);i&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})})),$o=t.forwardRef(((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...u}=e,h=Ao(Uo,r),f=To(r);return oa(),(0,Rr.jsx)(ha,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:s,children:(0,Rr.jsx)(ea,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:(0,Rr.jsx)(yi,{"data-state":Ko(h.open),role:"dialog",id:h.contentId,...f,...u,ref:t,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),Wo="PopoverClose",qo=t.forwardRef(((e,t)=>{const{__scopePopover:r,...n}=e,a=Ao(Wo,r);return(0,Rr.jsx)(qn.button,{type:"button",...n,ref:t,onClick:Hn(e.onClick,(()=>a.onOpenChange(!1)))})}));qo.displayName=Wo;var Go=t.forwardRef(((e,t)=>{const{__scopePopover:r,...n}=e,a=To(r);return(0,Rr.jsx)(bi,{...a,...n,ref:t})}));function Ko(e){return e?"open":"closed"}Go.displayName="PopoverArrow";var Yo=Bo,Xo=zo;const Qo=Po,Jo=Mo,Zo=t.forwardRef(((e,t)=>{let{className:r,align:n="center",sideOffset:a=4,...s}=e;return(0,Rr.jsx)(Yo,{children:(0,Rr.jsx)(Xo,{ref:t,align:n,sideOffset:a,className:Un("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s})})}));function el(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}Zo.displayName=Xo.displayName;var tl=["color"],rl=(0,t.forwardRef)((function(e,r){var n=e.color,a=void 0===n?"currentColor":n,s=el(e,tl);return(0,t.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),(0,t.createElement)("path",{d:"M4.5 1C4.77614 1 5 1.22386 5 1.5V2H10V1.5C10 1.22386 10.2239 1 10.5 1C10.7761 1 11 1.22386 11 1.5V2H12.5C13.3284 2 14 2.67157 14 3.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V3.5C1 2.67157 1.67157 2 2.5 2H4V1.5C4 1.22386 4.22386 1 4.5 1ZM10 3V3.5C10 3.77614 10.2239 4 10.5 4C10.7761 4 11 3.77614 11 3.5V3H12.5C12.7761 3 13 3.22386 13 3.5V5H2V3.5C2 3.22386 2.22386 3 2.5 3H4V3.5C4 3.77614 4.22386 4 4.5 4C4.77614 4 5 3.77614 5 3.5V3H10ZM2 6V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V6H2ZM7 7.5C7 7.22386 7.22386 7 7.5 7C7.77614 7 8 7.22386 8 7.5C8 7.77614 7.77614 8 7.5 8C7.22386 8 7 7.77614 7 7.5ZM9.5 7C9.22386 7 9 7.22386 9 7.5C9 7.77614 9.22386 8 9.5 8C9.77614 8 10 7.77614 10 7.5C10 7.22386 9.77614 7 9.5 7ZM11 7.5C11 7.22386 11.2239 7 11.5 7C11.7761 7 12 7.22386 12 7.5C12 7.77614 11.7761 8 11.5 8C11.2239 8 11 7.77614 11 7.5ZM11.5 9C11.2239 9 11 9.22386 11 9.5C11 9.77614 11.2239 10 11.5 10C11.7761 10 12 9.77614 12 9.5C12 9.22386 11.7761 9 11.5 9ZM9 9.5C9 9.22386 9.22386 9 9.5 9C9.77614 9 10 9.22386 10 9.5C10 9.77614 9.77614 10 9.5 10C9.22386 10 9 9.77614 9 9.5ZM7.5 9C7.22386 9 7 9.22386 7 9.5C7 9.77614 7.22386 10 7.5 10C7.77614 10 8 9.77614 8 9.5C8 9.22386 7.77614 9 7.5 9ZM5 9.5C5 9.22386 5.22386 9 5.5 9C5.77614 9 6 9.22386 6 9.5C6 9.77614 5.77614 10 5.5 10C5.22386 10 5 9.77614 5 9.5ZM3.5 9C3.22386 9 3 9.22386 3 9.5C3 9.77614 3.22386 10 3.5 10C3.77614 10 4 9.77614 4 9.5C4 9.22386 3.77614 9 3.5 9ZM3 11.5C3 11.2239 3.22386 11 3.5 11C3.77614 11 4 11.2239 4 11.5C4 11.7761 3.77614 12 3.5 12C3.22386 12 3 11.7761 3 11.5ZM5.5 11C5.22386 11 5 11.2239 5 11.5C5 11.7761 5.22386 12 5.5 12C5.77614 12 6 11.7761 6 11.5C6 11.2239 5.77614 11 5.5 11ZM7 11.5C7 11.2239 7.22386 11 7.5 11C7.77614 11 8 11.2239 8 11.5C8 11.7761 7.77614 12 7.5 12C7.22386 12 7 11.7761 7 11.5ZM9.5 11C9.22386 11 9 11.2239 9 11.5C9 11.7761 9.22386 12 9.5 12C9.77614 12 10 11.7761 10 11.5C10 11.2239 9.77614 11 9.5 11Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))})),nl=["color"],al=(0,t.forwardRef)((function(e,r){var n=e.color,a=void 0===n?"currentColor":n,s=el(e,nl);return(0,t.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),(0,t.createElement)("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))})),sl=["color"],il=(0,t.forwardRef)((function(e,r){var n=e.color,a=void 0===n?"currentColor":n,s=el(e,sl);return(0,t.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),(0,t.createElement)("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))})),ol=["color"],ll=(0,t.forwardRef)((function(e,r){var n=e.color,a=void 0===n?"currentColor":n,s=el(e,ol);return(0,t.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),(0,t.createElement)("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))})),cl=["color"],dl=(0,t.forwardRef)((function(e,r){var n=e.color,a=void 0===n?"currentColor":n,s=el(e,cl);return(0,t.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),(0,t.createElement)("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))})),ul=["color"],hl=(0,t.forwardRef)((function(e,r){var n=e.color,a=void 0===n?"currentColor":n,s=el(e,ul);return(0,t.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),(0,t.createElement)("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))})),fl=["color"],ml=(0,t.forwardRef)((function(e,r){var n=e.color,a=void 0===n?"currentColor":n,s=el(e,fl);return(0,t.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),(0,t.createElement)("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))})),pl=["color"],xl=(0,t.forwardRef)((function(e,r){var n=e.color,a=void 0===n?"currentColor":n,s=el(e,pl);return(0,t.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),(0,t.createElement)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))})),vl=["color"],gl=(0,t.forwardRef)((function(e,r){var n=e.color,a=void 0===n?"currentColor":n,s=el(e,vl);return(0,t.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),(0,t.createElement)("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:a}))})),yl=["color"],bl=(0,t.forwardRef)((function(e,r){var n=e.color,a=void 0===n?"currentColor":n,s=el(e,yl);return(0,t.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),(0,t.createElement)("path",{d:"M8.4449 0.608765C8.0183 -0.107015 6.9817 -0.107015 6.55509 0.608766L0.161178 11.3368C-0.275824 12.07 0.252503 13 1.10608 13H13.8939C14.7475 13 15.2758 12.07 14.8388 11.3368L8.4449 0.608765ZM7.4141 1.12073C7.45288 1.05566 7.54712 1.05566 7.5859 1.12073L13.9798 11.8488C14.0196 11.9154 13.9715 12 13.8939 12H1.10608C1.02849 12 0.980454 11.9154 1.02018 11.8488L7.4141 1.12073ZM6.8269 4.48611C6.81221 4.10423 7.11783 3.78663 7.5 3.78663C7.88217 3.78663 8.18778 4.10423 8.1731 4.48612L8.01921 8.48701C8.00848 8.766 7.7792 8.98664 7.5 8.98664C7.2208 8.98664 6.99151 8.766 6.98078 8.48701L6.8269 4.48611ZM8.24989 10.476C8.24989 10.8902 7.9141 11.226 7.49989 11.226C7.08567 11.226 6.74989 10.8902 6.74989 10.476C6.74989 10.0618 7.08567 9.72599 7.49989 9.72599C7.9141 9.72599 8.24989 10.0618 8.24989 10.476Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}));const wl={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Nl(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const jl={date:Nl({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Nl({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Nl({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Sl={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Cl(e){return(t,r)=>{let n;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=r?.width?String(r.width):t;n=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=r?.width?String(r.width):e.defaultWidth;n=e.values[a]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}const kl={ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:Cl({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Cl({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Cl({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Cl({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Cl({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function El(e){return function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const i=s[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(o,(e=>e.test(i))):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(o,(e=>e.test(i)));let c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}const Tl={ordinalNumber:(Dl={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.match(Dl.matchPattern);if(!r)return null;const n=r[0],a=e.match(Dl.parsePattern);if(!a)return null;let s=Dl.valueCallback?Dl.valueCallback(a[0]):a[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(n.length)}}),era:El({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:El({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:El({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:El({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:El({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var Dl;const Al={code:"en-US",formatDistance:(e,t,r)=>{let n;const a=wl[e];return n="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:jl,formatRelative:(e,t,r,n)=>Sl[e],localize:kl,match:Tl,options:{weekStartsOn:0,firstWeekContainsDate:1}};let Pl={};function _l(){return Pl}Math.pow(10,8);const Rl=6048e5;function Il(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new e.constructor(+e):"number"===typeof e||"[object Number]"===t||"string"===typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function Ml(e){const t=Il(e);return t.setHours(0,0,0,0),t}function Ol(e){const t=Il(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Fl(e,t){const r=Ml(e),n=Ml(t),a=+r-Ol(r),s=+n-Ol(n);return Math.round((a-s)/864e5)}function Ll(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Bl(e){const t=Il(e),r=Ll(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Ul(e){const t=Il(e);return Fl(t,Bl(t))+1}function zl(e,t){const r=_l(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Il(e),s=a.getDay(),i=(s<n?7:0)+s-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function Vl(e){return zl(e,{weekStartsOn:1})}function Hl(e){const t=Il(e),r=t.getFullYear(),n=Ll(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=Vl(n),s=Ll(e,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const i=Vl(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function $l(e){const t=Hl(e),r=Ll(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Vl(r)}function Wl(e){const t=Il(e),r=+Vl(t)-+$l(t);return Math.round(r/Rl)+1}function ql(e,t){const r=Il(e),n=r.getFullYear(),a=_l(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=Ll(e,0);i.setFullYear(n+1,0,s),i.setHours(0,0,0,0);const o=zl(i,t),l=Ll(e,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=zl(l,t);return r.getTime()>=o.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}function Gl(e,t){const r=_l(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=ql(e,t),s=Ll(e,0);s.setFullYear(a,0,n),s.setHours(0,0,0,0);return zl(s,t)}function Kl(e,t){const r=Il(e),n=+zl(r,t)-+Gl(r,t);return Math.round(n/Rl)+1}function Yl(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Xl={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Yl("yy"===t?n%100:n,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):Yl(r+1,2)},d:(e,t)=>Yl(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>Yl(e.getHours()%12||12,t.length),H:(e,t)=>Yl(e.getHours(),t.length),m:(e,t)=>Yl(e.getMinutes(),t.length),s:(e,t)=>Yl(e.getSeconds(),t.length),S(e,t){const r=t.length,n=e.getMilliseconds();return Yl(Math.trunc(n*Math.pow(10,r-3)),t.length)}},Ql="midnight",Jl="noon",Zl="morning",ec="afternoon",tc="evening",rc="night",nc={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return r.ordinalNumber(n,{unit:"year"})}return Xl.y(e,t)},Y:function(e,t,r,n){const a=ql(e,n),s=a>0?a:1-a;if("YY"===t){return Yl(s%100,2)}return"Yo"===t?r.ordinalNumber(s,{unit:"year"}):Yl(s,t.length)},R:function(e,t){return Yl(Hl(e),t.length)},u:function(e,t){return Yl(e.getFullYear(),t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Yl(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Yl(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Xl.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Yl(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=Kl(e,n);return"wo"===t?r.ordinalNumber(a,{unit:"week"}):Yl(a,t.length)},I:function(e,t,r){const n=Wl(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):Yl(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):Xl.d(e,t)},D:function(e,t,r){const n=Ul(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):Yl(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Yl(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Yl(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=0===n?7:n;switch(t){case"i":return String(a);case"ii":return Yl(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(a=12===n?Jl:0===n?Ql:n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(a=n>=17?tc:n>=12?ec:n>=4?Zl:rc,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return Xl.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):Xl.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):Yl(n,t.length)},k:function(e,t,r){let n=e.getHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):Yl(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Xl.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Xl.s(e,t)},S:function(e,t){return Xl.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return sc(n);case"XXXX":case"XX":return ic(n);default:return ic(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return sc(n);case"xxxx":case"xx":return ic(n);default:return ic(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ac(n,":");default:return"GMT"+ic(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ac(n,":");default:return"GMT"+ic(n,":")}},t:function(e,t,r){return Yl(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,r){return Yl(e.getTime(),t.length)}};function ac(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),s=n%60;return 0===s?r+String(a):r+String(a)+t+Yl(s,2)}function sc(e,t){if(e%60===0){return(e>0?"-":"+")+Yl(Math.abs(e)/60,2)}return ic(e,t)}function ic(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e>0?"-":"+",n=Math.abs(e);return r+Yl(Math.trunc(n/60),2)+t+Yl(n%60,2)}const oc=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},lc=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},cc={p:lc,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return oc(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",oc(n,t)).replace("{{time}}",lc(a,t))}},dc=/^D+$/,uc=/^Y+$/,hc=["D","DD","YY","YYYY"];function fc(e){return dc.test(e)}function mc(e){return uc.test(e)}function pc(e,t,r){const n=function(e,t,r){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(console.warn(n),hc.includes(e))throw new RangeError(n)}function xc(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function vc(e){if(!xc(e)&&"number"!==typeof e)return!1;const t=Il(e);return!isNaN(Number(t))}const gc=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yc=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bc=/^'([^]*?)'?$/,wc=/''/g,Nc=/[a-zA-Z]/;function jc(e,t,r){const n=_l(),a=r?.locale??n.locale??Al,s=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=Il(e);if(!vc(o))throw new RangeError("Invalid time value");let l=t.match(yc).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,cc[t])(e,a.formatLong)}return e})).join("").match(gc).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Sc(e)};if(nc[t])return{isToken:!0,value:e};if(t.match(Nc))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const c={firstWeekContainsDate:s,weekStartsOn:i,locale:a};return l.map((n=>{if(!n.isToken)return n.value;const s=n.value;(!r?.useAdditionalWeekYearTokens&&mc(s)||!r?.useAdditionalDayOfYearTokens&&fc(s))&&pc(s,t,String(e));return(0,nc[s[0]])(o,s,a.localize,c)})).join("")}function Sc(e){const t=e.match(bc);return t?t[1].replace(wc,"'"):e}function Cc(e){const t=Il(e);return t.setDate(1),t.setHours(0,0,0,0),t}function kc(e){const t=Il(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Ec(e,t){const r=Il(e),n=Il(t);return r.getFullYear()===n.getFullYear()}function Tc(e){const t=Il(e),r=t.getFullYear(),n=t.getMonth(),a=Ll(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function Dc(e,t){const r=Il(e),n=r.getFullYear(),a=r.getDate(),s=Ll(e,0);s.setFullYear(n,t,15),s.setHours(0,0,0,0);const i=Tc(s);return r.setMonth(t,Math.min(a,i)),r}function Ac(e,t){const r=Il(e);return isNaN(+r)?Ll(e,NaN):(r.setFullYear(t),r)}function Pc(e,t){const r=Il(e),n=Il(t);return 12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())}function _c(e,t){const r=Il(e);if(isNaN(t))return Ll(e,NaN);if(!t)return r;const n=r.getDate(),a=Ll(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);return n>=a.getDate()?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}function Rc(e,t){const r=Il(e),n=Il(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Ic(e,t){return+Il(e)<+Il(t)}function Mc(e,t){const r=Il(e);return isNaN(t)?Ll(e,NaN):t?(r.setDate(r.getDate()+t),r):r}function Oc(e,t){return+Ml(e)===+Ml(t)}function Fc(e,t){const r=Il(e),n=Il(t);return r.getTime()>n.getTime()}function Lc(e,t){return Mc(e,-t)}function Bc(e,t){return Mc(e,7*t)}function Uc(e,t){return _c(e,12*t)}function zc(e,t){const r=_l(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Il(e),s=a.getDay(),i=6+(s<n?-7:0)-(s-n);return a.setDate(a.getDate()+i),a.setHours(23,59,59,999),a}function Vc(e){return zc(e,{weekStartsOn:1})}function Hc(e){let t;return e.forEach((function(e){const r=Il(e);(void 0===t||t<r||isNaN(Number(r)))&&(t=r)})),t||new Date(NaN)}function $c(e){let t;return e.forEach((e=>{const r=Il(e);(!t||t>r||isNaN(+r))&&(t=r)})),t||new Date(NaN)}function Wc(e){return Math.trunc(+Il(e)/1e3)}function qc(e,t,r){const n=zl(e,r),a=zl(t,r),s=+n-Ol(n),i=+a-Ol(a);return Math.round((s-i)/Rl)}function Gc(e){const t=Il(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function Kc(e,t){return qc(Gc(e),Cc(e),t)+1}var Yc=function(){return Yc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Yc.apply(this,arguments)};function Xc(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}function Qc(e){return"multiple"===e.mode}function Jc(e){return"range"===e.mode}function Zc(e){return"single"===e.mode}"function"===typeof SuppressedError&&SuppressedError;var ed={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};var td=Object.freeze({__proto__:null,formatCaption:function(e,t){return jc(e,"LLLL y",t)},formatDay:function(e,t){return jc(e,"d",t)},formatMonthCaption:function(e,t){return jc(e,"LLLL",t)},formatWeekNumber:function(e){return"".concat(e)},formatWeekdayName:function(e,t){return jc(e,"cccccc",t)},formatYearCaption:function(e,t){return jc(e,"yyyy",t)}}),rd=Object.freeze({__proto__:null,labelDay:function(e,t,r){return jc(e,"do MMMM (EEEE)",r)},labelMonthDropdown:function(){return"Month: "},labelNext:function(){return"Go to next month"},labelPrevious:function(){return"Go to previous month"},labelWeekNumber:function(e){return"Week n. ".concat(e)},labelWeekday:function(e,t){return jc(e,"cccc",t)},labelYearDropdown:function(){return"Year: "}});function nd(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,s=e.fromDate,i=e.toDate;return n?s=Cc(n):t&&(s=new Date(t,0,1)),a?i=kc(a):r&&(i=new Date(r,11,31)),{fromDate:s?Ml(s):void 0,toDate:i?Ml(i):void 0}}var ad=(0,t.createContext)(void 0);function sd(e){var t,r,n=e.initialProps,a=function(){var e=ed,t=Al,r=new Date;return{captionLayout:"buttons",classNames:e,formatters:td,labels:rd,locale:t,modifiersClassNames:{},modifiers:{},numberOfMonths:1,styles:{},today:r,mode:"default"}}(),s=nd(n),i=s.fromDate,o=s.toDate,l=null!==(t=n.captionLayout)&&void 0!==t?t:a.captionLayout;"buttons"===l||i&&o||(l="buttons"),(Zc(n)||Qc(n)||Jc(n))&&(r=n.onSelect);var c=Yc(Yc(Yc({},a),n),{captionLayout:l,classNames:Yc(Yc({},a.classNames),n.classNames),components:Yc({},n.components),formatters:Yc(Yc({},a.formatters),n.formatters),fromDate:i,labels:Yc(Yc({},a.labels),n.labels),mode:n.mode||a.mode,modifiers:Yc(Yc({},a.modifiers),n.modifiers),modifiersClassNames:Yc(Yc({},a.modifiersClassNames),n.modifiersClassNames),onSelect:r,styles:Yc(Yc({},a.styles),n.styles),toDate:o});return(0,Rr.jsx)(ad.Provider,{value:c,children:e.children})}function id(){var e=(0,t.useContext)(ad);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function od(e){var t=id(),r=t.locale,n=t.classNames,a=t.styles,s=t.formatters.formatCaption;return(0,Rr.jsx)("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:r})})}function ld(e){return(0,Rr.jsx)("svg",Yc({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:(0,Rr.jsx)("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function cd(e){var t,r,n=e.onChange,a=e.value,s=e.children,i=e.caption,o=e.className,l=e.style,c=id(),d=null!==(r=null===(t=c.components)||void 0===t?void 0:t.IconDropdown)&&void 0!==r?r:ld;return(0,Rr.jsxs)("div",{className:o,style:l,children:[(0,Rr.jsx)("span",{className:c.classNames.vhidden,children:e["aria-label"]}),(0,Rr.jsx)("select",{name:e.name,"aria-label":e["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:a,onChange:n,children:s}),(0,Rr.jsxs)("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[i,(0,Rr.jsx)(d,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function dd(e){var t,r=id(),n=r.fromDate,a=r.toDate,s=r.styles,i=r.locale,o=r.formatters.formatMonthCaption,l=r.classNames,c=r.components,d=r.labels.labelMonthDropdown;if(!n)return(0,Rr.jsx)(Rr.Fragment,{});if(!a)return(0,Rr.jsx)(Rr.Fragment,{});var u=[];if(Ec(n,a))for(var h=Cc(n),f=n.getMonth();f<=a.getMonth();f++)u.push(Dc(h,f));else for(h=Cc(new Date),f=0;f<=11;f++)u.push(Dc(h,f));var m=null!==(t=null===c||void 0===c?void 0:c.Dropdown)&&void 0!==t?t:cd;return(0,Rr.jsx)(m,{name:"months","aria-label":d(),className:l.dropdown_month,style:s.dropdown_month,onChange:function(t){var r=Number(t.target.value),n=Dc(Cc(e.displayMonth),r);e.onChange(n)},value:e.displayMonth.getMonth(),caption:o(e.displayMonth,{locale:i}),children:u.map((function(e){return(0,Rr.jsx)("option",{value:e.getMonth(),children:o(e,{locale:i})},e.getMonth())}))})}function ud(e){var t,r=e.displayMonth,n=id(),a=n.fromDate,s=n.toDate,i=n.locale,o=n.styles,l=n.classNames,c=n.components,d=n.formatters.formatYearCaption,u=n.labels.labelYearDropdown,h=[];if(!a)return(0,Rr.jsx)(Rr.Fragment,{});if(!s)return(0,Rr.jsx)(Rr.Fragment,{});for(var f=a.getFullYear(),m=s.getFullYear(),p=f;p<=m;p++)h.push(Ac(Bl(new Date),p));var x=null!==(t=null===c||void 0===c?void 0:c.Dropdown)&&void 0!==t?t:cd;return(0,Rr.jsx)(x,{name:"years","aria-label":u(),className:l.dropdown_year,style:o.dropdown_year,onChange:function(t){var n=Ac(Cc(r),Number(t.target.value));e.onChange(n)},value:r.getFullYear(),caption:d(r,{locale:i}),children:h.map((function(e){return(0,Rr.jsx)("option",{value:e.getFullYear(),children:d(e,{locale:i})},e.getFullYear())}))})}function hd(){var e=id(),r=function(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,s=e.toDate,i=e.fromDate,o=e.numberOfMonths,l=void 0===o?1:o;return s&&Pc(s,a)<0&&(a=_c(s,-1*(l-1))),i&&Pc(a,i)<0&&(a=i),Cc(a)}(e),n=function(e,r){var n=(0,t.useState)(e),a=n[0];return[void 0===r?a:r,n[1]]}(r,e.month),a=n[0],s=n[1];return[a,function(t){var r;if(!e.disableNavigation){var n=Cc(t);s(n),null===(r=e.onMonthChange)||void 0===r||r.call(e,n)}}]}var fd=(0,t.createContext)(void 0);function md(e){var t=id(),r=hd(),n=r[0],a=r[1],s=function(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=Cc(e),s=Pc(Cc(_c(a,n)),a),i=[],o=0;o<s;o++){var l=_c(a,o);i.push(l)}return r&&(i=i.reverse()),i}(n,t),i=function(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,s=void 0===a?1:a,i=n?s:1,o=Cc(e);if(!r)return _c(o,i);if(!(Pc(r,e)<s))return _c(o,i)}}(n,t),o=function(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,s=n?void 0===a?1:a:1,i=Cc(e);if(!r)return _c(i,-s);if(!(Pc(i,r)<=0))return _c(i,-s)}}(n,t),l=function(e){return s.some((function(t){return Rc(e,t)}))},c={currentMonth:n,displayMonths:s,goToMonth:a,goToDate:function(e,r){l(e)||(r&&Ic(e,r)?a(_c(e,1+-1*t.numberOfMonths)):a(e))},previousMonth:o,nextMonth:i,isDateDisplayed:l};return(0,Rr.jsx)(fd.Provider,{value:c,children:e.children})}function pd(){var e=(0,t.useContext)(fd);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function xd(e){var t,r=id(),n=r.classNames,a=r.styles,s=r.components,i=pd().goToMonth,o=function(t){i(_c(t,e.displayIndex?-e.displayIndex:0))},l=null!==(t=null===s||void 0===s?void 0:s.CaptionLabel)&&void 0!==t?t:od,c=(0,Rr.jsx)(l,{id:e.id,displayMonth:e.displayMonth});return(0,Rr.jsxs)("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[(0,Rr.jsx)("div",{className:n.vhidden,children:c}),(0,Rr.jsx)(dd,{onChange:o,displayMonth:e.displayMonth}),(0,Rr.jsx)(ud,{onChange:o,displayMonth:e.displayMonth})]})}function vd(e){return(0,Rr.jsx)("svg",Yc({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:(0,Rr.jsx)("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function gd(e){return(0,Rr.jsx)("svg",Yc({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:(0,Rr.jsx)("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var yd=(0,t.forwardRef)((function(e,t){var r=id(),n=r.classNames,a=r.styles,s=[n.button_reset,n.button];e.className&&s.push(e.className);var i=s.join(" "),o=Yc(Yc({},a.button_reset),a.button);return e.style&&Object.assign(o,e.style),(0,Rr.jsx)("button",Yc({},e,{ref:t,type:"button",className:i,style:o}))}));function bd(e){var t,r,n=id(),a=n.dir,s=n.locale,i=n.classNames,o=n.styles,l=n.labels,c=l.labelPrevious,d=l.labelNext,u=n.components;if(!e.nextMonth&&!e.previousMonth)return(0,Rr.jsx)(Rr.Fragment,{});var h=c(e.previousMonth,{locale:s}),f=[i.nav_button,i.nav_button_previous].join(" "),m=d(e.nextMonth,{locale:s}),p=[i.nav_button,i.nav_button_next].join(" "),x=null!==(t=null===u||void 0===u?void 0:u.IconRight)&&void 0!==t?t:gd,v=null!==(r=null===u||void 0===u?void 0:u.IconLeft)&&void 0!==r?r:vd;return(0,Rr.jsxs)("div",{className:i.nav,style:o.nav,children:[!e.hidePrevious&&(0,Rr.jsx)(yd,{name:"previous-month","aria-label":h,className:f,style:o.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:"rtl"===a?(0,Rr.jsx)(x,{className:i.nav_icon,style:o.nav_icon}):(0,Rr.jsx)(v,{className:i.nav_icon,style:o.nav_icon})}),!e.hideNext&&(0,Rr.jsx)(yd,{name:"next-month","aria-label":m,className:p,style:o.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:"rtl"===a?(0,Rr.jsx)(v,{className:i.nav_icon,style:o.nav_icon}):(0,Rr.jsx)(x,{className:i.nav_icon,style:o.nav_icon})})]})}function wd(e){var t=id().numberOfMonths,r=pd(),n=r.previousMonth,a=r.nextMonth,s=r.goToMonth,i=r.displayMonths,o=i.findIndex((function(t){return Rc(e.displayMonth,t)})),l=0===o,c=o===i.length-1,d=t>1&&(l||!c),u=t>1&&(c||!l);return(0,Rr.jsx)(bd,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:u,nextMonth:a,previousMonth:n,onPreviousClick:function(){n&&s(n)},onNextClick:function(){a&&s(a)}})}function Nd(e){var t,r,n=id(),a=n.classNames,s=n.disableNavigation,i=n.styles,o=n.captionLayout,l=n.components,c=null!==(t=null===l||void 0===l?void 0:l.CaptionLabel)&&void 0!==t?t:od;return r=s?(0,Rr.jsx)(c,{id:e.id,displayMonth:e.displayMonth}):"dropdown"===o?(0,Rr.jsx)(xd,{displayMonth:e.displayMonth,id:e.id}):"dropdown-buttons"===o?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(xd,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),(0,Rr.jsx)(wd,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),(0,Rr.jsx)(wd,{displayMonth:e.displayMonth,id:e.id})]}),(0,Rr.jsx)("div",{className:a.caption,style:i.caption,children:r})}function jd(e){var t=id(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?(0,Rr.jsx)("tfoot",{className:a,style:n.tfoot,children:(0,Rr.jsx)("tr",{children:(0,Rr.jsx)("td",{colSpan:8,children:r})})}):(0,Rr.jsx)(Rr.Fragment,{})}function Sd(){var e=id(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,s=e.weekStartsOn,i=e.ISOWeek,o=e.formatters.formatWeekdayName,l=e.labels.labelWeekday,c=function(e,t,r){for(var n=r?Vl(new Date):zl(new Date,{locale:e,weekStartsOn:t}),a=[],s=0;s<7;s++){var i=Mc(n,s);a.push(i)}return a}(a,s,i);return(0,Rr.jsxs)("tr",{style:r.head_row,className:t.head_row,children:[n&&(0,Rr.jsx)("td",{style:r.head_cell,className:t.head_cell}),c.map((function(e,n){return(0,Rr.jsx)("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":l(e,{locale:a}),children:o(e,{locale:a})},n)}))]})}function Cd(){var e,t=id(),r=t.classNames,n=t.styles,a=t.components,s=null!==(e=null===a||void 0===a?void 0:a.HeadRow)&&void 0!==e?e:Sd;return(0,Rr.jsx)("thead",{style:n.head,className:r.head,children:(0,Rr.jsx)(s,{})})}function kd(e){var t=id(),r=t.locale,n=t.formatters.formatDay;return(0,Rr.jsx)(Rr.Fragment,{children:n(e.date,{locale:r})})}var Ed=(0,t.createContext)(void 0);function Td(e){if(!Qc(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return(0,Rr.jsx)(Ed.Provider,{value:t,children:e.children})}return(0,Rr.jsx)(Dd,{initialProps:e.initialProps,children:e.children})}function Dd(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,s=t.max,i={disabled:[]};n&&i.disabled.push((function(e){var t=s&&n.length>s-1,r=n.some((function(t){return Oc(t,e)}));return Boolean(t&&!r)}));var o={selected:n,onDayClick:function(e,r,i){var o,l;if((null===(o=t.onDayClick)||void 0===o||o.call(t,e,r,i),!Boolean(r.selected&&a&&(null===n||void 0===n?void 0:n.length)===a))&&!Boolean(!r.selected&&s&&(null===n||void 0===n?void 0:n.length)===s)){var c=n?Xc([],n,!0):[];if(r.selected){var d=c.findIndex((function(t){return Oc(e,t)}));c.splice(d,1)}else c.push(e);null===(l=t.onSelect)||void 0===l||l.call(t,c,e,r,i)}},modifiers:i};return(0,Rr.jsx)(Ed.Provider,{value:o,children:r})}function Ad(){var e=(0,t.useContext)(Ed);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}var Pd,_d=(0,t.createContext)(void 0);function Rd(e){if(!Jc(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return(0,Rr.jsx)(_d.Provider,{value:t,children:e.children})}return(0,Rr.jsx)(Id,{initialProps:e.initialProps,children:e.children})}function Id(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},s=a.from,i=a.to,o=t.min,l=t.max,c={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(c.range_start=[s],i?(c.range_end=[i],Oc(s,i)||(c.range_middle=[{after:s,before:i}])):c.range_end=[s]):i&&(c.range_start=[i],c.range_end=[i]),o&&(s&&!i&&c.disabled.push({after:Lc(s,o-1),before:Mc(s,o-1)}),s&&i&&c.disabled.push({after:s,before:Mc(s,o-1)}),!s&&i&&c.disabled.push({after:Lc(i,o-1),before:Mc(i,o-1)})),l){if(s&&!i&&(c.disabled.push({before:Mc(s,1-l)}),c.disabled.push({after:Mc(s,l-1)})),s&&i){var d=l-(Fl(i,s)+1);c.disabled.push({before:Lc(s,d)}),c.disabled.push({after:Mc(i,d)})}!s&&i&&(c.disabled.push({before:Mc(i,1-l)}),c.disabled.push({after:Mc(i,l-1)}))}return(0,Rr.jsx)(_d.Provider,{value:{selected:n,onDayClick:function(e,r,a){var s,i;null===(s=t.onDayClick)||void 0===s||s.call(t,e,r,a);var o=function(e,t){var r=t||{},n=r.from,a=r.to;if(n&&a){if(Oc(a,e)&&Oc(n,e))return;if(Oc(a,e))return{from:a,to:void 0};if(Oc(n,e))return;return Fc(n,e)?{from:e,to:a}:{from:n,to:e}}return a?Fc(e,a)?{from:a,to:e}:{from:e,to:a}:n?Ic(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}(e,n);null===(i=t.onSelect)||void 0===i||i.call(t,o,e,r,a)},modifiers:c},children:r})}function Md(){var e=(0,t.useContext)(_d);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Od(e){return Array.isArray(e)?Xc([],e,!0):void 0!==e?[e]:[]}!function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"}(Pd||(Pd={}));var Fd=Pd.Selected,Ld=Pd.Disabled,Bd=Pd.Hidden,Ud=Pd.Today,zd=Pd.RangeEnd,Vd=Pd.RangeMiddle,Hd=Pd.RangeStart,$d=Pd.Outside;var Wd=(0,t.createContext)(void 0);function qd(e){var t=id(),r=function(e,t,r){var n,a=((n={})[Fd]=Od(e.selected),n[Ld]=Od(e.disabled),n[Bd]=Od(e.hidden),n[Ud]=[e.today],n[zd]=[],n[Vd]=[],n[Hd]=[],n[$d]=[],n);return e.fromDate&&a[Ld].push({before:e.fromDate}),e.toDate&&a[Ld].push({after:e.toDate}),Qc(e)?a[Ld]=a[Ld].concat(t.modifiers[Ld]):Jc(e)&&(a[Ld]=a[Ld].concat(r.modifiers[Ld]),a[Hd]=r.modifiers[Hd],a[Vd]=r.modifiers[Vd],a[zd]=r.modifiers[zd]),a}(t,Ad(),Md()),n=function(e){var t={};return Object.entries(e).forEach((function(e){var r=e[0],n=e[1];t[r]=Od(n)})),t}(t.modifiers),a=Yc(Yc({},r),n);return(0,Rr.jsx)(Wd.Provider,{value:a,children:e.children})}function Gd(){var e=(0,t.useContext)(Wd);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Kd(e,t){return t.some((function(t){if("boolean"===typeof t)return t;if(xc(t))return Oc(e,t);if(function(e){return Array.isArray(e)&&e.every(xc)}(t))return t.includes(e);if(function(e){return Boolean(e&&"object"===typeof e&&"from"in e)}(t))return function(e,t){var r,n=t.from,a=t.to;return n&&a?(Fl(a,n)<0&&(n=(r=[a,n])[0],a=r[1]),Fl(e,n)>=0&&Fl(a,e)>=0):a?Oc(a,e):!!n&&Oc(n,e)}(e,t);if(function(e){return Boolean(e&&"object"===typeof e&&"dayOfWeek"in e)}(t))return t.dayOfWeek.includes(e.getDay());if(function(e){return Boolean(e&&"object"===typeof e&&"before"in e&&"after"in e)}(t)){var r=Fl(t.before,e)>0,n=Fl(t.after,e)<0;return Fc(t.before,t.after)?n&&r:r||n}return function(e){return Boolean(e&&"object"===typeof e&&"after"in e)}(t)?Fl(e,t.after)>0:function(e){return Boolean(e&&"object"===typeof e&&"before"in e)}(t)?Fl(t.before,e)>0:"function"===typeof t&&t(e)}))}function Yd(e,t,r){var n=Object.keys(t).reduce((function(r,n){var a=t[n];return Kd(e,a)&&r.push(n),r}),[]),a={};return n.forEach((function(e){return a[e]=!0})),r&&!Rc(e,r)&&(a.outside=!0),a}function Xd(e,t){var r=t.moveBy,n=t.direction,a=t.context,s=t.modifiers,i=t.retry,o=void 0===i?{count:0,lastFocused:e}:i,l=a.weekStartsOn,c=a.fromDate,d=a.toDate,u=a.locale,h={day:Mc,week:Bc,month:_c,year:Uc,startOfWeek:function(e){return a.ISOWeek?Vl(e):zl(e,{locale:u,weekStartsOn:l})},endOfWeek:function(e){return a.ISOWeek?Vc(e):zc(e,{locale:u,weekStartsOn:l})}}[r](e,"after"===n?1:-1);"before"===n&&c?h=Hc([c,h]):"after"===n&&d&&(h=$c([d,h]));var f=!0;if(s){var m=Yd(h,s);f=!m.disabled&&!m.hidden}return f?h:o.count>365?o.lastFocused:Xd(h,{moveBy:r,direction:n,context:a,modifiers:s,retry:Yc(Yc({},o),{count:o.count+1})})}var Qd=(0,t.createContext)(void 0);function Jd(e){var r=pd(),n=Gd(),a=(0,t.useState)(),s=a[0],i=a[1],o=(0,t.useState)(),l=o[0],c=o[1],d=function(e,t){for(var r,n,a=Cc(e[0]),s=kc(e[e.length-1]),i=a;i<=s;){var o=Yd(i,t);if(o.disabled||o.hidden)i=Mc(i,1);else{if(o.selected)return i;o.today&&!n&&(n=i),r||(r=i),i=Mc(i,1)}}return n||r}(r.displayMonths,n),u=(null!==s&&void 0!==s?s:l&&r.isDateDisplayed(l))?l:d,h=function(e){i(e)},f=id(),m=function(e,t){if(s){var a=Xd(s,{moveBy:e,direction:t,context:f,modifiers:n});Oc(s,a)||(r.goToDate(a,s),h(a))}},p={focusedDay:s,focusTarget:u,blur:function(){c(s),i(void 0)},focus:h,focusDayAfter:function(){return m("day","after")},focusDayBefore:function(){return m("day","before")},focusWeekAfter:function(){return m("week","after")},focusWeekBefore:function(){return m("week","before")},focusMonthBefore:function(){return m("month","before")},focusMonthAfter:function(){return m("month","after")},focusYearBefore:function(){return m("year","before")},focusYearAfter:function(){return m("year","after")},focusStartOfWeek:function(){return m("startOfWeek","before")},focusEndOfWeek:function(){return m("endOfWeek","after")}};return(0,Rr.jsx)(Qd.Provider,{value:p,children:e.children})}function Zd(){var e=(0,t.useContext)(Qd);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}var eu=(0,t.createContext)(void 0);function tu(e){if(!Zc(e.initialProps)){var t={selected:void 0};return(0,Rr.jsx)(eu.Provider,{value:t,children:e.children})}return(0,Rr.jsx)(ru,{initialProps:e.initialProps,children:e.children})}function ru(e){var t=e.initialProps,r=e.children,n={selected:t.selected,onDayClick:function(e,r,n){var a,s,i;null===(a=t.onDayClick)||void 0===a||a.call(t,e,r,n),!r.selected||t.required?null===(i=t.onSelect)||void 0===i||i.call(t,e,e,r,n):null===(s=t.onSelect)||void 0===s||s.call(t,void 0,e,r,n)}};return(0,Rr.jsx)(eu.Provider,{value:n,children:r})}function nu(){var e=(0,t.useContext)(eu);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function au(e,t){var r=[e.classNames.day];return Object.keys(t).forEach((function(t){var n=e.modifiersClassNames[t];if(n)r.push(n);else if(function(e){return Object.values(Pd).includes(e)}(t)){var a=e.classNames["day_".concat(t)];a&&r.push(a)}})),r}function su(e,r,n){var a,s,i,o=id(),l=Zd(),c=function(e,t){return Yd(e,Gd(),t)}(e,r),d=function(e,t){var r=id(),n=nu(),a=Ad(),s=Md(),i=Zd(),o=i.focusDayAfter,l=i.focusDayBefore,c=i.focusWeekAfter,d=i.focusWeekBefore,u=i.blur,h=i.focus,f=i.focusMonthBefore,m=i.focusMonthAfter,p=i.focusYearBefore,x=i.focusYearAfter,v=i.focusStartOfWeek,g=i.focusEndOfWeek,y={onClick:function(i){var o,l,c,d;Zc(r)?null===(o=n.onDayClick)||void 0===o||o.call(n,e,t,i):Qc(r)?null===(l=a.onDayClick)||void 0===l||l.call(a,e,t,i):Jc(r)?null===(c=s.onDayClick)||void 0===c||c.call(s,e,t,i):null===(d=r.onDayClick)||void 0===d||d.call(r,e,t,i)},onFocus:function(n){var a;h(e),null===(a=r.onDayFocus)||void 0===a||a.call(r,e,t,n)},onBlur:function(n){var a;u(),null===(a=r.onDayBlur)||void 0===a||a.call(r,e,t,n)},onKeyDown:function(n){var a;switch(n.key){case"ArrowLeft":n.preventDefault(),n.stopPropagation(),"rtl"===r.dir?o():l();break;case"ArrowRight":n.preventDefault(),n.stopPropagation(),"rtl"===r.dir?l():o();break;case"ArrowDown":n.preventDefault(),n.stopPropagation(),c();break;case"ArrowUp":n.preventDefault(),n.stopPropagation(),d();break;case"PageUp":n.preventDefault(),n.stopPropagation(),n.shiftKey?p():f();break;case"PageDown":n.preventDefault(),n.stopPropagation(),n.shiftKey?x():m();break;case"Home":n.preventDefault(),n.stopPropagation(),v();break;case"End":n.preventDefault(),n.stopPropagation(),g()}null===(a=r.onDayKeyDown)||void 0===a||a.call(r,e,t,n)},onKeyUp:function(n){var a;null===(a=r.onDayKeyUp)||void 0===a||a.call(r,e,t,n)},onMouseEnter:function(n){var a;null===(a=r.onDayMouseEnter)||void 0===a||a.call(r,e,t,n)},onMouseLeave:function(n){var a;null===(a=r.onDayMouseLeave)||void 0===a||a.call(r,e,t,n)},onPointerEnter:function(n){var a;null===(a=r.onDayPointerEnter)||void 0===a||a.call(r,e,t,n)},onPointerLeave:function(n){var a;null===(a=r.onDayPointerLeave)||void 0===a||a.call(r,e,t,n)},onTouchCancel:function(n){var a;null===(a=r.onDayTouchCancel)||void 0===a||a.call(r,e,t,n)},onTouchEnd:function(n){var a;null===(a=r.onDayTouchEnd)||void 0===a||a.call(r,e,t,n)},onTouchMove:function(n){var a;null===(a=r.onDayTouchMove)||void 0===a||a.call(r,e,t,n)},onTouchStart:function(n){var a;null===(a=r.onDayTouchStart)||void 0===a||a.call(r,e,t,n)}};return y}(e,c),u=function(){var e=id(),t=nu(),r=Ad(),n=Md();return Zc(e)?t.selected:Qc(e)?r.selected:Jc(e)?n.selected:void 0}(),h=Boolean(o.onDayClick||"default"!==o.mode);(0,t.useEffect)((function(){var t;c.outside||l.focusedDay&&h&&Oc(l.focusedDay,e)&&(null===(t=n.current)||void 0===t||t.focus())}),[l.focusedDay,e,n,h,c.outside]);var f=au(o,c).join(" "),m=function(e,t){var r=Yc({},e.styles.day);return Object.keys(t).forEach((function(t){var n;r=Yc(Yc({},r),null===(n=e.modifiersStyles)||void 0===n?void 0:n[t])})),r}(o,c),p=Boolean(c.outside&&!o.showOutsideDays||c.hidden),x=null!==(i=null===(s=o.components)||void 0===s?void 0:s.DayContent)&&void 0!==i?i:kd,v={style:m,className:f,children:(0,Rr.jsx)(x,{date:e,displayMonth:r,activeModifiers:c}),role:"gridcell"},g=l.focusTarget&&Oc(l.focusTarget,e)&&!c.outside,y=l.focusedDay&&Oc(l.focusedDay,e),b=Yc(Yc(Yc({},v),((a={disabled:c.disabled,role:"gridcell"})["aria-selected"]=c.selected,a.tabIndex=y||g?0:-1,a)),d);return{isButton:h,isHidden:p,activeModifiers:c,selectedDays:u,buttonProps:b,divProps:v}}function iu(e){var r=(0,t.useRef)(null),n=su(e.date,e.displayMonth,r);return n.isHidden?(0,Rr.jsx)("div",{role:"gridcell"}):n.isButton?(0,Rr.jsx)(yd,Yc({name:"day",ref:r},n.buttonProps)):(0,Rr.jsx)("div",Yc({},n.divProps))}function ou(e){var t=e.number,r=e.dates,n=id(),a=n.onWeekNumberClick,s=n.styles,i=n.classNames,o=n.locale,l=n.labels.labelWeekNumber,c=(0,n.formatters.formatWeekNumber)(Number(t),{locale:o});if(!a)return(0,Rr.jsx)("span",{className:i.weeknumber,style:s.weeknumber,children:c});var d=l(Number(t),{locale:o});return(0,Rr.jsx)(yd,{name:"week-number","aria-label":d,className:i.weeknumber,style:s.weeknumber,onClick:function(e){a(t,r,e)},children:c})}function lu(e){var t,r,n,a=id(),s=a.styles,i=a.classNames,o=a.showWeekNumber,l=a.components,c=null!==(t=null===l||void 0===l?void 0:l.Day)&&void 0!==t?t:iu,d=null!==(r=null===l||void 0===l?void 0:l.WeekNumber)&&void 0!==r?r:ou;return o&&(n=(0,Rr.jsx)("td",{className:i.cell,style:s.cell,children:(0,Rr.jsx)(d,{number:e.weekNumber,dates:e.dates})})),(0,Rr.jsxs)("tr",{className:i.row,style:s.row,children:[n,e.dates.map((function(t){return(0,Rr.jsx)("td",{className:i.cell,style:s.cell,role:"presentation",children:(0,Rr.jsx)(c,{displayMonth:e.displayMonth,date:t})},Wc(t))}))]})}function cu(e,t,r){for(var n=(null===r||void 0===r?void 0:r.ISOWeek)?Vc(t):zc(t,r),a=(null===r||void 0===r?void 0:r.ISOWeek)?Vl(e):zl(e,r),s=Fl(n,a),i=[],o=0;o<=s;o++)i.push(Mc(a,o));return i.reduce((function(e,t){var n=(null===r||void 0===r?void 0:r.ISOWeek)?Wl(t):Kl(t,r),a=e.find((function(e){return e.weekNumber===n}));return a?(a.dates.push(t),e):(e.push({weekNumber:n,dates:[t]}),e)}),[])}function du(e){var t,r,n,a=id(),s=a.locale,i=a.classNames,o=a.styles,l=a.hideHead,c=a.fixedWeeks,d=a.components,u=a.weekStartsOn,h=a.firstWeekContainsDate,f=a.ISOWeek,m=function(e,t){var r=cu(Cc(e),kc(e),t);if(null===t||void 0===t?void 0:t.useFixedWeeks){var n=Kc(e,t);if(n<6){var a=r[r.length-1],s=a.dates[a.dates.length-1],i=Bc(s,6-n),o=cu(Bc(s,1),i,t);r.push.apply(r,o)}}return r}(e.displayMonth,{useFixedWeeks:Boolean(c),ISOWeek:f,locale:s,weekStartsOn:u,firstWeekContainsDate:h}),p=null!==(t=null===d||void 0===d?void 0:d.Head)&&void 0!==t?t:Cd,x=null!==(r=null===d||void 0===d?void 0:d.Row)&&void 0!==r?r:lu,v=null!==(n=null===d||void 0===d?void 0:d.Footer)&&void 0!==n?n:jd;return(0,Rr.jsxs)("table",{id:e.id,className:i.table,style:o.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!l&&(0,Rr.jsx)(p,{}),(0,Rr.jsx)("tbody",{className:i.tbody,style:o.tbody,children:m.map((function(t){return(0,Rr.jsx)(x,{displayMonth:e.displayMonth,dates:t.dates,weekNumber:t.weekNumber},t.weekNumber)}))}),(0,Rr.jsx)(v,{displayMonth:e.displayMonth})]})}var uu="undefined"!==typeof window&&window.document&&window.document.createElement?t.useLayoutEffect:t.useEffect,hu=!1,fu=0;function mu(){return"react-day-picker-".concat(++fu)}function pu(e){var r,n,a=id(),s=a.dir,i=a.classNames,o=a.styles,l=a.components,c=pd().displayMonths,d=function(e){var r,n=null!==e&&void 0!==e?e:hu?mu():null,a=(0,t.useState)(n),s=a[0],i=a[1];return uu((function(){null===s&&i(mu())}),[]),(0,t.useEffect)((function(){!1===hu&&(hu=!0)}),[]),null!==(r=null!==e&&void 0!==e?e:s)&&void 0!==r?r:void 0}(a.id?"".concat(a.id,"-").concat(e.displayIndex):void 0),u=a.id?"".concat(a.id,"-grid-").concat(e.displayIndex):void 0,h=[i.month],f=o.month,m=0===e.displayIndex,p=e.displayIndex===c.length-1,x=!m&&!p;"rtl"===s&&(p=(r=[m,p])[0],m=r[1]),m&&(h.push(i.caption_start),f=Yc(Yc({},f),o.caption_start)),p&&(h.push(i.caption_end),f=Yc(Yc({},f),o.caption_end)),x&&(h.push(i.caption_between),f=Yc(Yc({},f),o.caption_between));var v=null!==(n=null===l||void 0===l?void 0:l.Caption)&&void 0!==n?n:Nd;return(0,Rr.jsxs)("div",{className:h.join(" "),style:f,children:[(0,Rr.jsx)(v,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),(0,Rr.jsx)(du,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function xu(e){var t=id(),r=t.classNames,n=t.styles;return(0,Rr.jsx)("div",{className:r.months,style:n.months,children:e.children})}function vu(e){var r,n,a=e.initialProps,s=id(),i=Zd(),o=pd(),l=(0,t.useState)(!1),c=l[0],d=l[1];(0,t.useEffect)((function(){s.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))}),[s.initialFocus,c,i.focus,i.focusTarget,i]);var u=[s.classNames.root,s.className];s.numberOfMonths>1&&u.push(s.classNames.multiple_months),s.showWeekNumber&&u.push(s.classNames.with_weeknumber);var h=Yc(Yc({},s.styles.root),s.style),f=Object.keys(a).filter((function(e){return e.startsWith("data-")})).reduce((function(e,t){var r;return Yc(Yc({},e),((r={})[t]=a[t],r))}),{}),m=null!==(n=null===(r=a.components)||void 0===r?void 0:r.Months)&&void 0!==n?n:xu;return(0,Rr.jsx)("div",Yc({className:u.join(" "),style:h,dir:s.dir,id:s.id,nonce:a.nonce,title:a.title,lang:a.lang},f,{children:(0,Rr.jsx)(m,{children:o.displayMonths.map((function(e,t){return(0,Rr.jsx)(pu,{displayIndex:t,displayMonth:e},t)}))})}))}function gu(e){var t=e.children,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["children"]);return(0,Rr.jsx)(sd,{initialProps:r,children:(0,Rr.jsx)(md,{children:(0,Rr.jsx)(tu,{initialProps:r,children:(0,Rr.jsx)(Td,{initialProps:r,children:(0,Rr.jsx)(Rd,{initialProps:r,children:(0,Rr.jsx)(qd,{children:(0,Rr.jsx)(Jd,{children:t})})})})})})})}function yu(e){return(0,Rr.jsx)(gu,Yc({},e,{children:(0,Rr.jsx)(vu,{initialProps:e})}))}function bu(e){let{className:t,classNames:r,showOutsideDays:n=!0,...a}=e;return(0,Rr.jsx)(yu,{showOutsideDays:n,className:Un("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Un(zn({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Un("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===a.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Un(zn({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{...t}=e;return(0,Rr.jsx)(dl,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,Rr.jsx)(hl,{className:"h-4 w-4"})}},...a})}function wu(e,t){return _c(e,-t)}bu.displayName="Calendar";const Nu="https://thebilling.in",ju=e=>{let{from:r,to:n,onSelect:a,onSearch:s,onCancel:i}=e;const[o,l]=(0,t.useState)(!1),c=new Date,d=wu(c,1);return(0,Rr.jsx)("div",{className:Un("grid gap-2"),children:(0,Rr.jsxs)(Qo,{open:o,onOpenChange:l,children:[(0,Rr.jsx)(Jo,{asChild:!0,children:(0,Rr.jsxs)(Vn,{id:"date",variant:"outline",className:Un("w-[300px] justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[(0,Rr.jsx)(rl,{className:"mr-2 h-4 w-4"}),r?n?(0,Rr.jsxs)(Rr.Fragment,{children:[jc(r,"LLL dd, y")," - ",jc(n,"LLL dd, y")]}):jc(r,"LLL dd, y"):(0,Rr.jsx)("span",{children:"Pick a date range"})]})}),(0,Rr.jsxs)(Zo,{className:"w-auto p-0",align:"start",children:[(0,Rr.jsx)(bu,{initialFocus:!0,mode:"range",defaultMonth:d,selected:{from:r,to:n},onSelect:a,numberOfMonths:2,disabled:e=>Ic(c,e),toDate:c}),(0,Rr.jsxs)("div",{className:"flex justify-end gap-2 p-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>{i(),l(!1)},children:"Cancel"}),(0,Rr.jsx)(Vn,{size:"sm",onClick:()=>{s(),l(!1)},children:"Search"})]})]})]})})},Su=e=>{const t=new Date;let r,n;switch(e){case"Today":r=new Date(t.setHours(0,0,0,0)),n=new Date(t.setHours(23,59,59,999));break;case"Yesterday":r=new Date(t.setDate(t.getDate()-1)),r.setHours(0,0,0,0),n=new Date(r),n.setHours(23,59,59,999);break;case"This Week":r=new Date(t.setDate(t.getDate()-t.getDay())),r.setHours(0,0,0,0),n=new Date(t.setDate(r.getDate()+6)),n.setHours(23,59,59,999);break;case"This Month":r=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+1,0),n.setHours(23,59,59,999);break;case"Last 7 Days":r=new Date(t.setDate(t.getDate()-6)),r.setHours(0,0,0,0),n=new Date,n.setHours(23,59,59,999);break;default:r=new Date(t.setDate(t.getDate()-30)),n=new Date}return{from:r,to:n}};const Cu=e=>{const t=Number(e);return Math.round(100*t)/100},ku=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)return"-";const r=Math.floor(Number(e)/Number(t)),n=e%Number(t);return n?`${r} packs, ${n} units`:`${r} packs`},Eu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)return 0;return{packs:Math.floor(Number(e)/Number(t)),loose:e%Number(t)}},Tu=[{medicine_form:"Tablet",short_medicine_form:"Tab",form_primary_pack:10},{medicine_form:"Syrup",short_medicine_form:null,form_primary_pack:1},{medicine_form:"Capsule",short_medicine_form:"Cap",form_primary_pack:10},{medicine_form:"Injection",short_medicine_form:null,form_primary_pack:1},{medicine_form:"Cream",short_medicine_form:null,form_primary_pack:1},{medicine_form:"Drops",short_medicine_form:"Drop",form_primary_pack:1},{medicine_form:"Powder",short_medicine_form:null,form_primary_pack:1},{medicine_form:"Paint",short_medicine_form:null,form_primary_pack:1},{medicine_form:"Gel",short_medicine_form:null,form_primary_pack:1},{medicine_form:"Suspension",short_medicine_form:"Susp",form_primary_pack:1},{medicine_form:"Liquid",short_medicine_form:null,form_primary_pack:1},{medicine_form:"Lotion",short_medicine_form:null,form_primary_pack:1},{medicine_form:"Ointment",short_medicine_form:"Oint",form_primary_pack:1},{medicine_form:"Oil",short_medicine_form:null,form_primary_pack:1},{medicine_form:"Solution",short_medicine_form:"Sol",form_primary_pack:1}],Du=wr("staff/fetchStaffMembers",(async(e,t)=>{let{rejectWithValue:r}=t;try{const e=await fetch(`${Nu}/api/staff`,{headers:{"Content-Type":"application/json"},credentials:"include"});if(500===e.status)throw new Error("Server error: 500 Internal Server Error");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(n){return r(n.message)}})),Au=wr("staff/createStaffMember",(async(e,t)=>{let{rejectWithValue:r}=t;try{const t=await fetch(`${Nu}/api/staff`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(500===t.status)throw new Error("Server error: 500 Internal Server Error");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return(await t.json()).staff}catch(n){return r(n.message)}})),Pu=wr("staff/updateStaffMember",(async(e,t)=>{let{id:r,data:n}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${Nu}/api/staff/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)});if(500===e.status)throw new Error("Server error: 500 Internal Server Error");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(s){return a(s.message)}})),_u=Er({name:"staff",initialState:{staffMembers:[],doctors:[],status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(Du.pending,(e=>{e.status="loading"})).addCase(Du.fulfilled,((e,t)=>{var r;e.status="succeeded",e.staffMembers=t.payload,e.doctors=null===(r=e.staffMembers)||void 0===r?void 0:r.filter((e=>"doctor"===e.role))})).addCase(Du.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(Au.pending,(e=>{e.status="loading"})).addCase(Au.fulfilled,((e,t)=>{e.status="succeeded",e.staffMembers.push(t.payload)})).addCase(Au.rejected,((e,t)=>{e.status="failed",e.error=t.payload})).addCase(Pu.pending,(e=>{e.status="loading"})).addCase(Pu.fulfilled,((e,t)=>{e.status="succeeded";const r=e.staffMembers.findIndex((e=>e._id===t.payload._id));-1!==r&&(e.staffMembers[r]=t.payload),e.doctors=e.staffMembers.filter((e=>"doctor"===e.role))})).addCase(Pu.rejected,((e,t)=>{e.status="failed",e.error=t.payload}))}}),{getDoctors:Ru}=_u.actions,Iu=_u.reducer,Mu=Er({name:"loader",initialState:{isLoading:!0,isCollapsed:!1},reducers:{setLoading:(e,t)=>{e.isLoading=t.payload},setIsCollapsed:(e,t)=>{e.isCollapsed=t.payload}}}),{setLoading:Ou,setIsCollapsed:Fu}=Mu.actions,Lu=Mu.reducer,Bu=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{useGlobalLoader:n=!0,...a}=r;return wr(e,(async(e,r)=>{n&&r.dispatch(Ou(!0));try{return await t(e,r)}finally{n&&r.dispatch(Ou(!1))}}),a)},Uu=Bu("user/loginUser",(async(e,t)=>{let{rejectWithValue:r}=t;try{const t=await fetch(`${Nu}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Login failed")}return await t.json()}catch(n){return r(n.message)}}),{useGlobalLoader:!0}),zu=Bu("user/fetchUserData",(async(e,t)=>{let{rejectWithValue:r}=t;try{const e=await fetch(`${Nu}/api/staff/me`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(500===e.status)throw new Error("Server error: 500 Internal Server Error");if(!e.ok)throw new Error("Failed to fetch user data");return await e.json()}catch(n){return r(n.message)}}),{useGlobalLoader:!0}),Vu=Er({name:"user",initialState:{userData:null,status:"idle",error:null,isAuthenticated:!1,loginStatus:"idle",loginError:null},reducers:{clearUserData:e=>{e.userData=null,e.status="idle",e.error=null,e.isAuthenticated=!1,e.loginStatus="idle",e.loginError=null}},extraReducers:e=>{e.addCase(Uu.pending,(e=>{e.loginStatus="loading",e.loginError=null})).addCase(Uu.fulfilled,(e=>{e.loginStatus="succeeded",e.isAuthenticated=!0})).addCase(Uu.rejected,((e,t)=>{e.loginStatus="failed",e.loginError=t.payload,e.isAuthenticated=!1})).addCase(zu.pending,(e=>{e.status="loading"})).addCase(zu.fulfilled,((e,t)=>{e.status="succeeded",e.userData=t.payload,e.isAuthenticated=!0})).addCase(zu.rejected,((e,t)=>{e.status="failed",e.error=t.payload,e.isAuthenticated=!1}))}}),{clearUserData:Hu}=Vu.actions,$u=Vu.reducer,Wu=Bu("orders/fetchOrders",(async()=>{const e=await fetch(`${Nu}/api/orders`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch orders");return e.json()}),{useGlobalLoader:!0}),qu=Bu("orders/createOrder",(async e=>{const t=await fetch(`${Nu}/api/orders/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to create order");return t.json()}),{useGlobalLoader:!0}),Gu=Bu("suppliers/fetchSuppliers",(async()=>{const e=await fetch(`${Nu}/api/orders/suppliers`,{headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to fetch suppliers");return await e.json()}),{useGlobalLoader:!0}),Ku=Bu("suppliers/fetchSupplierDetails",(async e=>{const t=await fetch(`${Nu}/api/orders/supplier/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch supplier details");return t.json()}),{useGlobalLoader:!0}),Yu=Bu("items/fetchItems",(async()=>{const e=await fetch(`${Nu}/api/orders/items`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch items");return e.json()}),{useGlobalLoader:!0}),Xu=Bu("pharmacy/fetchSalesBills",(async()=>{const e=await fetch(`${Nu}/api/pharmacy/sales-bills`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch sales bills");return e.json()}),{useGlobalLoader:!0}),Qu=Bu("pharmacy/createSalesBill",(async e=>{const t=await fetch(`${Nu}/api/pharmacy/create-sales-bill`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to create sales bill");return t.json()}),{useGlobalLoader:!0}),Ju=Bu("pharmacy/updateInventoryItem",(async e=>{let{inventoryId:t,updateData:r}=e;const n=await fetch(`${Nu}/api/pharmacy/inventory/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"});if(!n.ok)throw new Error("Failed to update inventory item");return n.json()}),{useGlobalLoader:!0}),Zu=Bu("pharmacy/createInventoryItem",(async e=>{const t=await fetch(`${Nu}/api/inventory/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to create inventory item");return t.json()}),{useGlobalLoader:!0}),eh=Bu("pharmacy/deleteInventoryItem",(async e=>{if(!(await fetch(`${Nu}/api/pharmacy/inventory/${e}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete inventory item");return e}),{useGlobalLoader:!0}),th=Bu("pharmacy/fetchDashboardData",(async e=>{let{startDate:t,endDate:r,range:n}=e;const a=new URLSearchParams({startDate:t,endDate:r}),s=await fetch(`${Nu}/api/pharmacy/dashboard-data?${a}`,{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch pharmacy dashboard data");return s.json()}),{useGlobalLoader:!0}),rh=Bu("pharmacy/fetchPharmacyInfo",(async()=>{const e=await fetch(`${Nu}/api/pharmacies/getPharmacy`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch pharmacy data");const t=await e.json();if(t.logo){const e=await fetch(t.logo),r=await e.blob(),n=URL.createObjectURL(r);t.logoUsable=n}return t}),{useGlobalLoading:!0}),nh=Bu("pharmacy/updatePharmacyInfo",(async e=>{const t=await fetch(`${Nu}/api/pharmacies/${e.pharmacyId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update pharmacy data");return t.json()}),{useGlobalLoading:!0}),ah=Er({name:"pharmacy",initialState:{orders:[],suppliers:[],selectedSupplier:null,items:[],ordersStatus:"idle",suppliersStatus:"idle",supplierDetailsStatus:"idle",itemsStatus:"idle",createOrderStatus:"idle",error:null,salesBills:[],salesBillsStatus:"idle",createSalesBillStatus:"idle",updateInventoryStatus:"idle",createInventoryItemStatus:"idle",deleteInventoryItemStatus:"idle",dashboardData:[],dashboardDataStatus:"idle",dashboardRange:"idle",pharmacyInfo:null,pharmacyInfoStatus:"idle",updateStatus:"idle"},reducers:{clearSelectedSupplier:e=>{e.selectedSupplier=null,e.supplierDetailsStatus="idle"}},extraReducers:e=>{e.addCase(Wu.pending,(e=>{e.ordersStatus="loading"})).addCase(Wu.fulfilled,((e,t)=>{e.ordersStatus="succeeded",e.orders=t.payload})).addCase(Wu.rejected,((e,t)=>{e.ordersStatus="failed",e.error=t.error.message})).addCase(qu.pending,(e=>{e.createOrderStatus="loading"})).addCase(qu.fulfilled,((e,t)=>{e.createOrderStatus="succeeded"})).addCase(qu.rejected,((e,t)=>{e.createOrderStatus="failed",e.error=t.error.message})).addCase(Gu.pending,(e=>{e.suppliersStatus="loading"})).addCase(Gu.fulfilled,((e,t)=>{e.suppliersStatus="succeeded",e.suppliers=t.payload})).addCase(Gu.rejected,((e,t)=>{e.suppliersStatus="failed",e.error=t.error.message})).addCase(Ku.pending,(e=>{e.supplierDetailsStatus="loading"})).addCase(Ku.fulfilled,((e,t)=>{e.supplierDetailsStatus="succeeded",e.selectedSupplier=t.payload})).addCase(Ku.rejected,((e,t)=>{e.supplierDetailsStatus="failed",e.error=t.error.message})).addCase(Yu.pending,(e=>{e.itemsStatus="loading"})).addCase(Yu.fulfilled,((e,t)=>{e.itemsStatus="succeeded",e.items=t.payload})).addCase(Yu.rejected,((e,t)=>{e.itemsStatus="failed",e.error=t.error.message})).addCase(Xu.pending,(e=>{e.salesBillsStatus="loading"})).addCase(Xu.fulfilled,((e,t)=>{e.salesBillsStatus="succeeded",e.salesBills=t.payload})).addCase(Xu.rejected,((e,t)=>{e.salesBillsStatus="failed",e.error=t.error.message})).addCase(Qu.pending,(e=>{e.createSalesBillStatus="loading"})).addCase(Qu.fulfilled,((e,t)=>{e.createSalesBillStatus="succeeded",e.salesBills.unshift(t.payload)})).addCase(Qu.rejected,((e,t)=>{e.createSalesBillStatus="failed",e.error=t.error.message})).addCase(Ju.pending,(e=>{e.updateInventoryStatus="loading"})).addCase(Ju.fulfilled,((e,t)=>{e.updateInventoryStatus="succeeded";const r=e.items.findIndex((e=>e._id===t.payload._id));-1!==r&&(e.items[r]=t.payload)})).addCase(Ju.rejected,((e,t)=>{e.updateInventoryStatus="failed",e.error=t.error.message})).addCase(Zu.pending,(e=>{e.createInventoryItemStatus="loading"})).addCase(Zu.fulfilled,((e,t)=>{e.createInventoryItemStatus="succeeded",e.items.unshift(t.payload)})).addCase(Zu.rejected,((e,t)=>{e.createInventoryItemStatus="failed",e.error=t.error.message})).addCase(eh.pending,(e=>{e.deleteInventoryItemStatus="loading"})).addCase(eh.fulfilled,((e,t)=>{e.deleteInventoryItemStatus="succeeded",e.items=e.items.filter((e=>e._id!==t.payload))})).addCase(eh.rejected,((e,t)=>{e.deleteInventoryItemStatus="failed",e.error=t.error.message})).addCase(th.pending,(e=>{e.dashboardDataStatus="loading"})).addCase(th.fulfilled,((e,t)=>{e.dashboardDataStatus="succeeded",e.dashboardData=t.payload})).addCase(th.rejected,((e,t)=>{e.dashboardDataStatus="failed",e.error=t.error.message})).addCase(rh.pending,(e=>{e.pharmacyInfoStatus="loading"})).addCase(rh.fulfilled,((e,t)=>{e.pharmacyInfoStatus="succeeded",e.pharmacyInfo=t.payload})).addCase(rh.rejected,((e,t)=>{e.pharmacyInfoStatus="failed",e.error=t.error.message})).addCase(nh.pending,(e=>{e.updateStatus="loading"})).addCase(nh.fulfilled,((e,t)=>{e.updateStatus="succeeded",e.pharmacyInfo=t.payload.pharmacy})).addCase(nh.rejected,((e,t)=>{e.updateStatus="failed",e.error=t.error.message}))}}),{clearSelectedSupplier:sh}=ah.actions,ih=ah.reducer,oh=Bu("expenses/createExpense",(async(e,t)=>{let{rejectWithValue:r}=t;try{const t=await fetch(`${Nu}/api/expenses/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok){return r(await t.json())}return await t.json()}catch(n){return r(n.message)}}),{useGlobalLoader:!0}),lh=Bu("expenses/updateExpense",(async(e,t)=>{let{rejectWithValue:r}=t;try{const t=await fetch(`${Nu}/api/expenses/update/${e._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok){return r(await t.json())}return await t.json()}catch(n){return r(n.message)}}),{useGlobalLoader:!0}),ch=Bu("expenses/payExpense",(async(e,t)=>{let{id:r,paymentData:n}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${Nu}/api/expenses/${r}/pay`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"});if(!e.ok){return a(await e.json())}return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),dh=Bu("expenses/deleteExpense",(async(e,t)=>{let{rejectWithValue:r}=t;try{const t=await fetch(`${Nu}/api/expenses/${e}`,{method:"DELETE",credentials:"include"});if(!t.ok){return r(await t.json())}return e}catch(n){return r(n.message)}}),{useGlobalLoader:!0}),uh=Bu("expenses/fetchExpenses",(async(e,t)=>{let{rejectWithValue:r}=t;try{const e=await fetch(`${Nu}/api/expenses`,{method:"GET",credentials:"include"});if(!e.ok){return r(await e.json())}return await e.json()}catch(n){return r(n.message)}}),{useGlobalLoader:!0}),hh=Er({name:"expenses",initialState:{expenses:[],expensesStatus:"idle",createExpenseStatus:"idle",updateExpenseStatus:"idle",payExpenseStatus:"idle",deleteExpenseStatus:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(oh.pending,(e=>{e.createExpenseStatus="loading",e.error=null})).addCase(oh.fulfilled,((e,t)=>{e.createExpenseStatus="succeeded",e.expenses.unshift(t.payload)})).addCase(oh.rejected,((e,t)=>{e.createExpenseStatus="failed",e.error=t.payload})).addCase(lh.pending,(e=>{e.updateExpenseStatus="loading",e.error=null})).addCase(lh.fulfilled,((e,t)=>{e.updateExpenseStatus="succeeded";const r=e.expenses.findIndex((e=>e._id===t.payload._id));-1!==r&&(e.expenses[r]=t.payload)})).addCase(lh.rejected,((e,t)=>{e.updateExpenseStatus="failed",e.error=t.payload})).addCase(ch.pending,(e=>{e.payExpenseStatus="loading",e.error=null})).addCase(ch.fulfilled,((e,t)=>{e.payExpenseStatus="succeeded";const r=e.expenses.findIndex((e=>e._id===t.payload._id));-1!==r&&(e.expenses[r]=t.payload)})).addCase(ch.rejected,((e,t)=>{e.payExpenseStatus="failed",e.error=t.payload})).addCase(dh.pending,(e=>{e.deleteExpenseStatus="loading",e.error=null})).addCase(dh.fulfilled,((e,t)=>{e.deleteExpenseStatus="succeeded",e.expenses=e.expenses.filter((e=>e._id!==t.payload))})).addCase(dh.rejected,((e,t)=>{e.deleteExpenseStatus="failed",e.error=t.payload})).addCase(uh.pending,(e=>{e.expensesStatus="loading",e.error=null})).addCase(uh.fulfilled,((e,t)=>{e.expensesStatus="succeeded",e.expenses=t.payload})).addCase(uh.rejected,((e,t)=>{e.expensesStatus="failed",e.error=t.payload}))}}),fh=hh.reducer,mh=Bu("distributor/createDistributor",(async(e,t)=>{let{rejectWithValue:r}=t;try{const t=await fetch(`${Nu}/api/distributor/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to create distributor");return await t.json()}catch(n){return r(n.message)}}),{useGlobalLoader:!0}),ph=Bu("distributor/fetchDistributors",(async(e,t)=>{let{rejectWithValue:r}=t;try{const e=await fetch(`${Nu}/api/distributor`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch distributors");return await e.json()}catch(n){return r(n.message)}})),xh=Bu("distributor/fetchLedgerEntries",(async(e,t)=>{let{rejectWithValue:r}=t;const n=await fetch(`${Nu}/api/distributor/ledger/${e}`,{credentials:"include"});return n.ok?await n.json():r("Failed to fetch ledger entries")})),vh=Bu("distributor/fetchDistributorDetails",(async(e,t)=>{let{rejectWithValue:r}=t;try{const t=await fetch(`${Nu}/api/distributor/details/${e}`,{credentials:"include"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch distributor details")}return await t.json()}catch(n){return r(n.message)}})),gh=Bu("distributor/fetchDistributorInvoices",(async(e,t)=>{let{rejectWithValue:r}=t;try{const t=await fetch(`${Nu}/api/distributor/invoices/${e}`,{credentials:"include"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch distributor invoices")}return await t.json()}catch(n){return r(n.message)}})),yh=Bu("distributor/fetchDistributorPayments",(async(e,t)=>{let{rejectWithValue:r}=t;try{const t=await fetch(`${Nu}/api/distributor/payments/${e}`,{credentials:"include"});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch distributor payments")}return await t.json()}catch(n){return r(n.message)}})),bh=Bu("distributor/updateDistributor",(async(e,t)=>{let{id:r,distributorData:n}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${Nu}/api/distributor/update/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"});if(!e.ok)throw new Error("Failed to update distributor");return await e.json()}catch(s){return a(s.message)}}),{useGlobalLoader:!0}),wh=Bu("distributor/deleteDistributor",(async(e,t)=>{let{rejectWithValue:r}=t;const n=await fetch(`${Nu}/api/distributor/delete/${e}`,{method:"DELETE",credentials:"include"});if(!n.ok)throw new Error("Failed to delete distributor");return await n.json()})),Nh=Er({name:"distributor",initialState:{distributors:[],createDistributorStatus:"idle",updateDistributorStatus:"idle",deleteDistributorStatus:"idle",fetchStatus:"idle",error:null,currentDistributor:{details:null,invoices:[],payments:[],status:"idle",invoicesStatus:"idle",paymentsStatus:"idle",tabName:"profile",scrollIndex:"",deleteDistributorStatus:"idle"}},reducers:{setTabName:(e,t)=>{e.currentDistributor.tabName=t.payload},setDistributorStatusIdle:e=>{e.createDistributorStatus="idle",e.fetchStatus="idle",e.currentDistributor.status="idle",e.error=null}},extraReducers:e=>{e.addCase(mh.pending,(e=>{e.createDistributorStatus="loading"})).addCase(mh.fulfilled,((e,t)=>{e.createDistributorStatus="succeeded",e.distributors.push(t.payload)})).addCase(mh.rejected,((e,t)=>{e.createDistributorStatus="failed",e.error=t.payload.message})).addCase(ph.pending,(e=>{e.fetchStatus="loading"})).addCase(ph.fulfilled,((e,t)=>{e.fetchStatus="succeeded",e.distributors=t.payload})).addCase(ph.rejected,((e,t)=>{e.fetchStatus="failed",e.error=t.payload})).addCase(vh.pending,(e=>{e.currentDistributor.status="loading",e.error=null})).addCase(vh.fulfilled,((e,t)=>{var r;e.currentDistributor.status="succeeded",e.currentDistributor.details=t.payload.details,(null===(r=e.currentDistributor.details)||void 0===r?void 0:r._id)!==t.meta.arg&&(e.currentDistributor.invoices=[],e.currentDistributor.payments=[],e.currentDistributor.invoicesStatus="idle",e.currentDistributor.paymentsStatus="idle")})).addCase(vh.rejected,((e,t)=>{e.currentDistributor.status="failed",e.error=t.payload})).addCase(gh.pending,(e=>{e.currentDistributor.invoicesStatus="loading"})).addCase(gh.fulfilled,((e,t)=>{e.currentDistributor.invoicesStatus="succeeded",e.currentDistributor.invoices=t.payload})).addCase(gh.rejected,((e,t)=>{e.currentDistributor.invoicesStatus="failed",e.error=t.payload})).addCase(yh.pending,(e=>{e.currentDistributor.paymentsStatus="loading"})).addCase(yh.fulfilled,((e,t)=>{e.currentDistributor.paymentsStatus="succeeded",e.currentDistributor.payments=t.payload})).addCase(yh.rejected,((e,t)=>{e.currentDistributor.paymentsStatus="failed",e.error=t.payload})).addCase(bh.pending,(e=>{e.updateDistributorStatus="loading"})).addCase(bh.fulfilled,((e,t)=>{var r;e.updateDistributorStatus="succeeded";const n=e.distributors.findIndex((e=>e._id===t.payload._id));-1!==n&&(e.distributors[n]=t.payload),(null===(r=e.currentDistributor.details)||void 0===r?void 0:r._id)===t.payload._id&&(e.currentDistributor.details=t.payload)})).addCase(bh.rejected,((e,t)=>{e.updateDistributorStatus="failed",e.error=t.payload})).addCase(wh.pending,(e=>{e.currentDistributor.deleteDistributorStatus="loading"})).addCase(wh.fulfilled,((e,t)=>{e.currentDistributor.deleteDistributorStatus="succeeded",e.distributors=e.distributors.filter((e=>e._id!==t.meta.arg))})).addCase(wh.rejected,((e,t)=>{e.currentDistributor.deleteDistributorStatus="failed",e.error=t.payload}))}}),{setTabName:jh,setDistributorStatusIdle:Sh}=Nh.actions,Ch=Nh.reducer,kh=Bu("accounts/fetchAccounts",(async()=>{const e=await fetch(`${Nu}/api/accounts`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch accounts");return await e.json()}),{useGlobalLoader:!0}),Eh=Bu("accounts/addAccount",(async e=>{const t=await fetch(`${Nu}/api/accounts`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to add account");return await t.json()}),{useGlobalLoader:!0}),Th=Bu("accounts/updateAccount",(async e=>{let{id:t,data:r}=e;const n=await fetch(`${Nu}/api/accounts/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});if(!n.ok)throw new Error("Failed to update account");return await n.json()}),{useGlobalLoader:!0}),Dh=Bu("accounts/updateBalance",(async e=>{let{id:t,amount:r,type:n}=e;const a=await fetch(`${Nu}/api/accounts/${t}/update-balance`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({amount:r,type:n})});if(!a.ok)throw new Error("Failed to update balance");return await a.json()})),Ah=Bu("accounts/fetchTransactions",(async e=>{let{accountId:t,page:r=1}=e;const n=await fetch(`${Nu}/api/accounts/transactions?accountId=${t}&page=${r}`,{credentials:"include"});if(!n.ok)throw new Error("Failed to fetch transactions");return await n.json()})),Ph=Er({name:"accounts",initialState:{accounts:[],transactions:[],pagination:{total:0,pages:0,currentPage:1,limit:30},error:null,selectedAccount:null,fetchStatus:"idle",createAccountStatus:"idle",updateAccountStatus:"idle",updateBalanceStatus:"idle",transactionsStatus:"idle"},reducers:{setAccountsStatusIdle:e=>{e.fetchStatus="idle",e.createAccountStatus="idle",e.updateAccountStatus="idle",e.updateBalanceStatus="idle",e.transactionsStatus="idle"}},extraReducers:e=>{e.addCase(kh.pending,(e=>{e.fetchStatus="loading",e.error=null})).addCase(kh.fulfilled,((e,t)=>{e.fetchStatus="succeeded",e.accounts=t.payload})).addCase(kh.rejected,((e,t)=>{e.fetchStatus="failed",e.error=t.payload})).addCase(Eh.pending,(e=>{e.createAccountStatus="loading",e.error=null})).addCase(Eh.fulfilled,((e,t)=>{e.createAccountStatus="succeeded",e.accounts.unshift(t.payload)})).addCase(Eh.rejected,((e,t)=>{e.createAccountStatus="failed",e.error=t.payload})).addCase(Th.pending,(e=>{e.updateAccountStatus="loading",e.error=null})).addCase(Th.fulfilled,((e,t)=>{e.updateAccountStatus="succeeded";const r=e.accounts.findIndex((e=>e._id===t.payload._id));-1!==r&&(e.accounts[r]=t.payload)})).addCase(Th.rejected,((e,t)=>{e.updateAccountStatus="failed",e.error=t.payload})).addCase(Dh.pending,(e=>{e.updateBalanceStatus="loading",e.error=null})).addCase(Dh.fulfilled,((e,t)=>{e.updateBalanceStatus="succeeded";const r=e.accounts.findIndex((e=>e._id===t.payload._id));-1!==r&&(e.accounts[r]=t.payload)})).addCase(Dh.rejected,((e,t)=>{e.updateBalanceStatus="failed",e.error=t.payload})).addCase(Ah.pending,(e=>{e.transactionsStatus="loading",e.error=null})).addCase(Ah.fulfilled,((e,t)=>{e.transactionsStatus="succeeded",e.transactions=t.payload.transactions,e.pagination=t.payload.pagination})).addCase(Ah.rejected,((e,t)=>{e.transactionsStatus="failed",e.error=t.payload}))}}),{setAccountsStatusIdle:_h}=Ph.actions,Rh=Ph.reducer,Ih=Bu("inventory/manageInventory",(async e=>{const t=await fetch(`${Nu}/api/inventory/manage-inventory`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to create new item");return t.json()}),{useGlobalLoader:!0}),Mh=Bu("inventory/fetchItems",(async()=>{const e=await fetch(`${Nu}/api/inventory`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch items");return e.json()}),{useGlobalLoader:!0}),Oh=Er({name:"inventory",initialState:{items:[],itemsStatus:"idle",manageItemStatus:"idle",error:null},reducers:{setItemStatusIdle:e=>{e.itemsStatus="idle",e.manageItemStatus="idle",e.items=[],e.error=null}},extraReducers:e=>{e.addCase(Mh.pending,(e=>{e.itemsStatus="loading"})).addCase(Mh.fulfilled,((e,t)=>{e.itemsStatus="succeeded",e.items=t.payload})).addCase(Mh.rejected,((e,t)=>{e.itemsStatus="failed",e.error=t.error.message})).addCase(Ih.pending,(e=>{e.manageItemStatus="loading"})).addCase(Ih.fulfilled,((e,t)=>{e.manageItemStatus="succeeded";const r=e.items.findIndex((e=>e._id===t.payload._id));-1!==r?e.items[r]=t.payload:e.items.unshift(t.payload)})).addCase(Ih.rejected,((e,t)=>{e.manageItemStatus="failed",e.error=t.error.message}))}}),{setItemStatusIdle:Fh}=Oh.actions,Lh=Oh.reducer,Bh=wr("customers/fetchCustomers",(async function(){let{page:e=1,searchQuery:t="",searchType:r="name"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=new URLSearchParams({page:e.toString(),...t&&{search:t,searchType:r}}),a=await fetch(`${Nu}/api/customers?${n}`,{credentials:"include"});if(!a.ok)throw new Error("Failed to fetch customers");return a.json()})),Uh=wr("customers/fetchCustomerDetails",(async e=>{const t=await fetch(`${Nu}/api/customers/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch customer details");return t.json()})),zh=wr("customers/addCustomer",(async e=>{const t=await fetch(`${Nu}/api/customers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to add customer");return t.json()})),Vh=wr("customers/updateCustomer",(async e=>{let{id:t,customerData:r}=e;const n=await fetch(`${Nu}/api/customers/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"});if(!n.ok)throw new Error("Failed to update customer");return n.json()})),Hh=wr("customers/deleteCustomer",(async e=>{if(!(await fetch(`${Nu}/api/customers/${e}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete customer");return e})),$h=wr("customers/fetchLedgerEntries",(async e=>{const t=await fetch(`${Nu}/api/customers/ledger/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch ledger entries");return t.json()})),Wh=Er({name:"customers",initialState:{customers:[],status:"idle",error:null,currentCustomer:{details:null,invoices:[],payments:[],returns:[],status:"idle",tabName:"profile",ledgerEntries:[],ledgerStatus:"idle",deleteCustomerStatus:"idle"},pagination:{currentPage:1,totalPages:1,totalCount:0},search:{query:"",type:"name"}},reducers:{setTabName:(e,t)=>{e.currentCustomer.tabName=t.payload},setCustomerStatusIdle:e=>{e.status="idle",e.currentCustomer.status="idle",e.error=null},setSearch:(e,t)=>{e.search=t.payload,e.pagination.currentPage=1}},extraReducers:e=>{e.addCase(Bh.pending,(e=>{e.status="loading"})).addCase(Bh.fulfilled,((e,t)=>{e.status="succeeded",e.customers=t.payload.customers,e.pagination={currentPage:t.payload.currentPage,totalPages:t.payload.totalPages,totalCount:t.payload.totalCount}})).addCase(Bh.rejected,((e,t)=>{e.status="failed",e.error=t.error.message})).addCase(Uh.pending,(e=>{e.currentCustomer.status="loading"})).addCase(Uh.fulfilled,((e,t)=>{e.currentCustomer.status="succeeded",e.currentCustomer.details=t.payload,e.currentCustomer.invoices=t.payload.invoices||[],e.currentCustomer.payments=t.payload.payments||[],e.currentCustomer.returns=t.payload.returns||[]})).addCase(Uh.rejected,((e,t)=>{e.currentCustomer.status="failed",e.error=t.error.message})).addCase(zh.fulfilled,((e,t)=>{e.customers.push(t.payload)})).addCase(Vh.fulfilled,((e,t)=>{const r=e.customers.findIndex((e=>e._id===t.payload._id));-1!==r&&(e.customers[r]=t.payload)})).addCase(Hh.pending,(e=>{e.currentCustomer.deleteCustomerStatus="loading"})).addCase(Hh.fulfilled,((e,t)=>{e.currentCustomer.deleteCustomerStatus="succeeded",e.customers=e.customers.filter((e=>e._id!==t.payload))})).addCase(Hh.rejected,((e,t)=>{e.currentCustomer.deleteCustomerStatus="failed",e.error=t.error.message})).addCase($h.pending,(e=>{e.currentCustomer.ledgerStatus="loading"})).addCase($h.fulfilled,((e,t)=>{e.currentCustomer.ledgerStatus="succeeded",e.currentCustomer.ledgerEntries=t.payload})).addCase($h.rejected,((e,t)=>{e.currentCustomer.ledgerStatus="failed",e.error=t.error.message}))}}),{setTabName:qh,setCustomerStatusIdle:Gh,setSearch:Kh}=Wh.actions,Yh=Wh.reducer,Xh=Bu("bill/createBill",(async(e,t)=>{let{dispatch:r}=t;try{const t=await fetch(`${Nu}/api/sales`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to create bill");const n=await t.json();return await r(_h()),await r(Gh()),await r(Fh()),n}catch(n){throw new Error("Failed to create bill")}}),{useGlobalLoader:!0}),Qh=Bu("bill/deleteSaleInvoice",(async(e,t)=>{let{dispatch:r}=t;if(!(await fetch(`${Nu}/api/sales/invoice/${e}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete sale invoice");return await r(_h()),await r(Gh()),await r(Fh()),e}),{useGlobalLoader:!0}),Jh=Bu("bill/fetchBills",(async function(){let{startDate:e,endDate:t,filter:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=`${Nu}/api/sales`;const a=new URLSearchParams;e&&a.append("startDate",e),t&&a.append("endDate",t),r&&a.append("filter",r);const s=a.toString();s&&(n+=`?${s}`);const i=await fetch(n,{credentials:"include"});if(!i.ok)throw new Error("Failed to fetch bills");return i.json()})),Zh=Bu("bill/searchBills",(async e=>{let{query:t,searchType:r}=e;const n=await fetch(`${Nu}/api/sales/search?query=${t}&searchType=${r}`,{credentials:"include"});if(!n.ok)throw new Error("Failed to search bills");return n.json()})),ef=Bu("bill/editSaleInvoice",(async(e,t)=>{let{dispatch:r}=t;try{const t=await fetch(`${Nu}/api/sales/invoice/${e._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to edit invoice");const n=await t.json();return await r(_h()),await r(Gh()),await r(Fh()),n}catch(n){throw new Error(n.message||"Failed to edit invoice")}}),{useGlobalLoader:!0}),tf=Er({name:"bill",initialState:{bills:[],createBillStatus:"idle",editBillStatus:"idle",fetchStatus:"idle",searchStatus:"idle",deleteStatus:"idle",error:null,dateRange:{from:null,to:null}},reducers:{resetStatus:e=>{e.createBillStatus="idle",e.editBillStatus="idle",e.fetchStatus="idle",e.searchStatus="idle",e.deleteStatus="idle",e.error=null},setDateRange:(e,t)=>{e.dateRange=t.payload}},extraReducers:e=>{e.addCase(Xh.pending,(e=>{e.createBillStatus="loading",e.error=null})).addCase(Xh.fulfilled,(e=>{e.createBillStatus="succeeded",e.error=null})).addCase(Xh.rejected,((e,t)=>{e.createBillStatus="failed",e.error=t.error.message})).addCase(Jh.pending,(e=>{e.fetchStatus="loading"})).addCase(Jh.fulfilled,((e,t)=>{e.fetchStatus="succeeded",e.bills=t.payload,e.error=null})).addCase(Jh.rejected,((e,t)=>{e.fetchStatus="failed",e.error=t.error.message})).addCase(Zh.pending,(e=>{e.searchStatus="loading"})).addCase(Zh.fulfilled,((e,t)=>{e.searchStatus="succeeded",e.bills=t.payload,e.error=null})).addCase(Zh.rejected,((e,t)=>{e.searchStatus="failed",e.error=t.error.message})).addCase(ef.pending,(e=>{e.editBillStatus="loading",e.error=null})).addCase(ef.fulfilled,(e=>{e.editBillStatus="succeeded",e.error=null})).addCase(ef.rejected,((e,t)=>{e.editBillStatus="failed",e.error=t.error.message})).addCase(Qh.pending,(e=>{e.deleteStatus="loading",e.error=null})).addCase(Qh.fulfilled,((e,t)=>{e.deleteStatus="succeeded",e.bills=e.bills.filter((e=>e._id!==t.payload)),e.error=null})).addCase(Qh.rejected,((e,t)=>{e.deleteStatus="failed",e.error=t.error.message}))}}),{resetStatus:rf,setDateRange:nf}=tf.actions,af=tf.reducer,sf=Bu("purchaseBill/createPurchaseReturn",(async(e,t)=>{let{dispatch:r}=t;const n=await fetch(`${Nu}/api/purchase/return`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to create purchase return")}const a=await n.json();return await r(_h()),await r(Sh()),await r(Fh()),a}),{useGlobalLoader:!0}),of=Bu("purchaseBill/createPurchaseBill",(async(e,t)=>{let{dispatch:r}=t;const n=await fetch(`${Nu}/api/purchase`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create purchase bill");const a=await n.json();return await r(_h()),await r(Sh()),await r(Fh()),a}),{useGlobalLoader:!0}),lf=Bu("purchaseBill/savePurchaseDraft",(async(e,t)=>{let{dispatch:r}=t;const n=await fetch(`${Nu}/api/purchase/draft`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to save purchase draft")}return await n.json()}),{useGlobalLoader:!0}),cf=Bu("purchaseBill/uploadInvoiceImage",(async(e,t)=>{let{invoiceId:r,imageBase64:n}=e,{dispatch:a}=t;const s=await fetch(`${Nu}/api/purchase/invoice/${r}/image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invoiceImage:n}),credentials:"include"});if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to upload invoice image")}return await s.json()}),{useGlobalLoader:!0}),df=Bu("purchaseBill/preprocessImageForLLM",(async(e,t)=>{let{base64Image:r,mimeType:n}=e,{dispatch:a}=t;const s=await fetch(`${Nu}/api/purchase/llm/preprocessImage`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({imageBase64:r,mimeType:n})});if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to send image for LLM preprocessing")}return await s.json()}),{useGlobalLoader:!1}),uf=Bu("purchaseBill/fetchPurchaseBills",(async function(){let{startDate:e,endDate:t,filter:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=`${Nu}/api/purchase`;const a=new URLSearchParams;e&&a.append("startDate",e),t&&a.append("endDate",t),r&&a.append("filter",r);const s=a.toString();s&&(n+=`?${s}`);const i=await fetch(n,{credentials:"include"});if(!i.ok)throw new Error("Failed to fetch purchase bills");return i.json()})),hf=Bu("purchaseBill/searchPurchaseBills",(async e=>{let{query:t,searchType:r}=e;const n=await fetch(`${Nu}/api/purchase/search?query=${t}&searchType=${r}`,{credentials:"include"});if(!n.ok)throw new Error("Failed to search purchase bills");return n.json()})),ff=Bu("purchaseBill/deletePurchaseBill",(async(e,t)=>{let{dispatch:r}=t;if(!(await fetch(`${Nu}/api/purchase/${e}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete purchase bill");return await r(_h()),await r(Sh()),await r(Fh()),e}),{useGlobalLoader:!0}),mf=Bu("purchaseBill/searchByInvoice",(async e=>{let{distributorId:t,invoiceNumber:r}=e;const n=await fetch(`${Nu}/api/purchase/search-by-invoice`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({distributorId:t,invoiceNumber:r}),credentials:"include"});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to fetch invoice details")}return n.json()})),pf=Er({name:"purchaseBill",initialState:{purchaseBills:[],fetchStatus:"idle",createPurchaseBillStatus:"idle",createPurchaseReturnStatus:"idle",searchStatus:"idle",searchByInvoiceStatus:"idle",deleteStatus:"idle",saveDraftStatus:"idle",uploadImageStatus:"idle",error:null,invoiceDetails:null,preprocessLLMStatus:"idle"},reducers:{resetStatus:e=>{e.fetchStatus="idle",e.createPurchaseBillStatus="idle",e.createPurchaseReturnStatus="idle",e.searchStatus="idle",e.searchByInvoiceStatus="idle",e.deleteStatus="idle",e.saveDraftStatus="idle",e.uploadImageStatus="idle",e.error=null}},extraReducers:e=>{e.addCase(sf.pending,(e=>{e.createPurchaseReturnStatus="loading",e.error=null})).addCase(sf.fulfilled,((e,t)=>{e.createPurchaseReturnStatus="succeeded",e.error=null})).addCase(sf.rejected,((e,t)=>{e.createPurchaseReturnStatus="failed",e.error=t.error.message})).addCase(of.pending,(e=>{e.createPurchaseBillStatus="loading",e.error=null})).addCase(of.fulfilled,((e,t)=>{e.createPurchaseBillStatus="succeeded",e.purchaseBills.unshift(t.payload)})).addCase(of.rejected,((e,t)=>{e.createPurchaseBillStatus="failed",e.error=t.payload})).addCase(uf.pending,(e=>{e.fetchStatus="loading",e.error=null})).addCase(uf.fulfilled,((e,t)=>{e.fetchStatus="succeeded",e.purchaseBills=t.payload,e.error=null})).addCase(uf.rejected,((e,t)=>{e.fetchStatus="failed",e.error=t.payload})).addCase(hf.pending,(e=>{e.searchStatus="loading"})).addCase(hf.fulfilled,((e,t)=>{e.searchStatus="succeeded",e.purchaseBills=t.payload,e.error=null})).addCase(hf.rejected,((e,t)=>{e.searchStatus="failed",e.error=t.error.message})).addCase(ff.pending,(e=>{e.deleteStatus="loading",e.error=null})).addCase(ff.fulfilled,((e,t)=>{e.deleteStatus="succeeded",e.purchaseBills=e.purchaseBills.filter((e=>e._id!==t.payload))})).addCase(ff.rejected,((e,t)=>{e.deleteStatus="failed",e.error=t.payload})).addCase(mf.pending,(e=>{e.searchByInvoiceStatus="loading",e.error=null})).addCase(mf.fulfilled,((e,t)=>{e.searchByInvoiceStatus="succeeded",e.invoiceDetails=t.payload,e.error=null})).addCase(mf.rejected,((e,t)=>{e.searchByInvoiceStatus="failed",e.error=t.error.message})).addCase(lf.pending,(e=>{e.saveDraftStatus="loading",e.error=null})).addCase(lf.fulfilled,((e,t)=>{e.saveDraftStatus="succeeded";const r=e.purchaseBills.findIndex((e=>e._id===t.payload._id));-1!==r&&(e.purchaseBills[r]=t.payload),e.error=null})).addCase(lf.rejected,((e,t)=>{e.saveDraftStatus="failed",e.error=t.error.message})).addCase(cf.pending,(e=>{e.uploadImageStatus="loading",e.error=null})).addCase(cf.fulfilled,((e,t)=>{e.uploadImageStatus="succeeded";const r=e.purchaseBills.findIndex((e=>e._id===t.payload._id));-1!==r&&(e.purchaseBills[r]=t.payload),e.error=null})).addCase(cf.rejected,((e,t)=>{e.uploadImageStatus="failed",e.error=t.error.message})).addCase(df.pending,(e=>{e.preprocessLLMStatus="loading",e.error=null})).addCase(df.fulfilled,((e,t)=>{e.preprocessLLMStatus="succeeded",e.error=null})).addCase(df.rejected,((e,t)=>{e.preprocessLLMStatus="failed",e.error=t.error.message}))}}),{resetStatus:xf}=pf.actions,vf=pf.reducer,gf=Bu("payment/fetchPayments",(async function(){let{startDate:e,endDate:t,filter:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=`${Nu}/api/payment`;const a=new URLSearchParams;e&&a.append("startDate",e),t&&a.append("endDate",t),r&&a.append("filter",r);const s=a.toString();s&&(n+=`?${s}`);const i=await fetch(n,{credentials:"include"});if(!i.ok)throw new Error("Failed to fetch payments");return i.json()})),yf=Bu("payment/createPayment",(async(e,t)=>{let{dispatch:r}=t;const n=await fetch(`${Nu}/api/payment/make-payment`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!n.ok)throw new Error("Payment creation failed");const a=await n.json();return await r(_h()),await r(Sh()),a}),{useGlobalLoader:!0}),bf=Bu("payment/deletePayment",(async e=>{if(!(await fetch(`${Nu}/api/payment/${e}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Payment deletion failed");return{paymentId:e,message:"Payment deleted successfully"}}),{useGlobalLoader:!0}),wf=Bu("payment/searchPayments",(async e=>{let{query:t,searchType:r}=e;const n=await fetch(`${Nu}/api/payment/search?query=${t}&searchType=${r}`,{credentials:"include"});if(!n.ok)throw new Error("Failed to search payments");return n.json()})),Nf=Er({name:"payment",initialState:{payments:[],createPaymentStatus:"idle",deletePaymentStatus:"idle",fetchStatus:"idle",searchStatus:"idle",error:null,dateRange:{from:null,to:null}},reducers:{resetStatus:e=>{e.createPaymentStatus="idle",e.deletePaymentStatus="idle",e.fetchStatus="idle",e.searchStatus="idle",e.error=null},setDateRange:(e,t)=>{e.dateRange=t.payload}},extraReducers:e=>{e.addCase(gf.pending,(e=>{e.fetchStatus="loading"})).addCase(gf.fulfilled,((e,t)=>{e.fetchStatus="succeeded",e.payments=t.payload,e.error=null})).addCase(gf.rejected,((e,t)=>{e.fetchStatus="failed",e.error=t.error.message})).addCase(wf.pending,(e=>{e.searchStatus="loading"})).addCase(wf.fulfilled,((e,t)=>{e.searchStatus="succeeded",e.payments=t.payload,e.error=null})).addCase(wf.rejected,((e,t)=>{e.searchStatus="failed",e.error=t.error.message})).addCase(yf.pending,(e=>{e.createPaymentStatus="loading"})).addCase(yf.fulfilled,(e=>{e.createPaymentStatus="succeeded"})).addCase(yf.rejected,((e,t)=>{e.createPaymentStatus="failed",e.error=t.error.message})).addCase(bf.pending,(e=>{e.deletePaymentStatus="loading"})).addCase(bf.fulfilled,(e=>{e.deletePaymentStatus="succeeded"})).addCase(bf.rejected,((e,t)=>{e.deletePaymentStatus="failed",e.error=t.error.message}))}}),{resetStatus:jf,setDateRange:Sf}=Nf.actions,Cf=Nf.reducer,kf=Bu("report/fetchSalesReport",(async e=>{const t=new URLSearchParams;Object.entries(e).forEach((e=>{let[r,n]=e;void 0!==n&&null!==n&&t.append(r,n)}));const r=await fetch(`${Nu}/api/reports/sales?${t.toString()}`,{credentials:"include"});if(!r.ok)throw new Error("Failed to generate report");return r.json()}),{useGlobalLoader:!0}),Ef=Bu("report/fetchPurchaseReport",(async e=>{const t=new URLSearchParams;Object.entries(e).forEach((e=>{let[r,n]=e;void 0!==n&&null!==n&&t.append(r,n)}));const r=await fetch(`${Nu}/api/reports/purchase?${t.toString()}`,{credentials:"include"});if(!r.ok)throw new Error("Failed to generate report");return r.json()}),{useGlobalLoader:!0}),Tf=Bu("report/fetchInventoryReport",(async e=>{const t=new URLSearchParams;Object.entries(e).forEach((e=>{let[r,n]=e;void 0!==n&&null!==n&&t.append(r,n)}));const r=await fetch(`${Nu}/api/reports/inventory?${t.toString()}`,{credentials:"include"});if(!r.ok)throw new Error("Failed to generate inventory report");return r.json()}),{useGlobalLoader:!0}),Df=Er({name:"report",initialState:{data:null,status:"idle",error:null,dateRange:{from:null,to:null},singleDate:null,selectedMonth:null},reducers:{clearReport:e=>{e.data=null,e.error=null,e.status="idle"},setDateRange:(e,t)=>{e.dateRange.from=t.payload.from?new Date(t.payload.from).toISOString():null,e.dateRange.to=t.payload.to?new Date(t.payload.to).toISOString():null},setSingleDate:(e,t)=>{e.singleDate=t.payload?new Date(t.payload).toISOString():null},setSelectedMonth:(e,t)=>{e.selectedMonth=t.payload?new Date(t.payload).toISOString():null}},extraReducers:e=>{e.addCase(kf.pending,(e=>{e.status="loading",e.error=null})).addCase(kf.fulfilled,((e,t)=>{e.status="succeeded",e.data=t.payload,e.error=null})).addCase(kf.rejected,((e,t)=>{e.status="failed",e.error=t.error.message})).addCase(Ef.pending,(e=>{e.status="loading",e.error=null})).addCase(Ef.fulfilled,((e,t)=>{e.status="succeeded",e.data=t.payload,e.error=null})).addCase(Ef.rejected,((e,t)=>{e.status="failed",e.error=t.error.message})).addCase(Tf.pending,(e=>{e.status="loading",e.error=null})).addCase(Tf.fulfilled,((e,t)=>{e.status="succeeded",e.data=t.payload,e.error=null})).addCase(Tf.rejected,((e,t)=>{e.status="failed",e.error=t.error.message}))}}),{clearReport:Af,setDateRange:Pf,setSingleDate:_f,setSelectedMonth:Rf}=Df.actions,If=Df.reducer,Mf=Bu("settings/fetchSettings",(async()=>{const e=await fetch(`${Nu}/api/settings`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch settings");return e.json()}),{useGlobalLoader:!0}),Of=Bu("settings/updateSettings",(async e=>{const t=await fetch(`${Nu}/api/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!t.ok)throw new Error("Failed to update settings");return t.json()}),{useGlobalLoader:!0}),Ff=Er({name:"settings",initialState:{settings:{adjustment:!1},status:"idle",updateStatus:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(Mf.pending,(e=>{e.status="loading"})).addCase(Mf.fulfilled,((e,t)=>{e.status="succeeded",e.settings=t.payload})).addCase(Mf.rejected,((e,t)=>{e.status="failed",e.error=t.error.message})).addCase(Of.pending,(e=>{e.updateStatus="loading"})).addCase(Of.fulfilled,((e,t)=>{e.updateStatus="succeeded",e.settings=t.payload})).addCase(Of.rejected,((e,t)=>{e.updateStatus="failed",e.error=t.error.message}))}}).reducer,Lf=Bu("exportImport/importDistributors",(async(e,t)=>{let{dispatch:r}=t;const n=await fetch(`${Nu}/api/export-import/import-distributors`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({distributors:e}),credentials:"include"});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to import distributors")}return r(Sh()),n.json()})),Bf=Bu("exportImport/importCustomers",(async(e,t)=>{let{dispatch:r}=t;const n=await fetch(`${Nu}/api/export-import/import-customers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customers:e}),credentials:"include"});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to import customers")}return r(Gh()),n.json()})),Uf=Bu("exportImport/importInventory",(async(e,t)=>{let{dispatch:r}=t;const n=await fetch(`${Nu}/api/export-import/import-inventory`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inventory:e}),credentials:"include"});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to import inventory")}return r(Fh()),n.json()})),zf=Bu("exportImport/exportInventory",(async()=>{const e=await fetch(`${Nu}/api/export-import/export-inventory`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to export inventory")}return e.json()})),Vf=Er({name:"exportImport",initialState:{importStatus:"idle",importError:null,exportStatus:"idle",exportError:null},reducers:{},extraReducers:e=>{e.addCase(Lf.pending,(e=>{e.importStatus="loading",e.importError=null})).addCase(Lf.fulfilled,(e=>{e.importStatus="succeeded",e.importError=null})).addCase(Lf.rejected,((e,t)=>{e.importStatus="failed",e.importError=t.error.message})).addCase(Uf.pending,(e=>{e.importStatus="loading",e.importError=null})).addCase(Uf.fulfilled,(e=>{e.importStatus="succeeded",e.importError=null})).addCase(Uf.rejected,((e,t)=>{e.importStatus="failed",e.importError=t.error.message})).addCase(zf.pending,(e=>{e.exportStatus="loading",e.exportError=null})).addCase(zf.fulfilled,(e=>{e.exportStatus="succeeded",e.exportError=null})).addCase(zf.rejected,((e,t)=>{e.exportStatus="failed",e.exportError=t.error.message}))}}).reducer,Hf=Bu("dashboard/fetchMetrics",(async(e,t)=>{let{from:r,to:n}=e,{rejectWithValue:a}=t;try{const e=await fetch(`${Nu}/api/dashboard/metrics?startDate=${r.toISOString()}&endDate=${n.toISOString()}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok){return a((await e.json()).message||"Failed to fetch dashboard data")}return await e.json()}catch(s){return a(s.message||"An unknown error occurred")}})),$f=Er({name:"dashboard",initialState:{data:null,loading:"idle",error:null},reducers:{resetDashboardState:e=>{e.data=null,e.loading="idle",e.error=null}},extraReducers:e=>{e.addCase(Hf.pending,(e=>{e.loading="pending",e.error=null})).addCase(Hf.fulfilled,((e,t)=>{e.loading="succeeded",e.data=t.payload})).addCase(Hf.rejected,((e,t)=>{e.loading="failed",e.error=t.payload}))}}),{resetDashboardState:Wf}=$f.actions,qf=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:a=!0}=e??{};let s=new ir;return t&&("boolean"===typeof t?s.push(ht):s.push(ft(t.extraArgument))),s},{reducer:r,middleware:n,devTools:a=!0,preloadedState:s,enhancers:i}=e||{};let o,l;if("function"===typeof r)o=r;else{if(!ot(r))throw new Error(Ar(1));o=ct(r)}l="function"===typeof n?n(t):t();let c=dt;a&&(c=nr({trace:!1,..."object"===typeof a&&a}));const d=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(nt(15))};const i={getState:a.getState,dispatch:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return s(e,...r)}},o=t.map((e=>e(i)));return s=dt(...o)(a.dispatch),{...a,dispatch:s}}}(...l),u=hr(d);return lt(o,s,c(..."function"===typeof i?i(u):u()))}({reducer:{staff:Iu,pharmacy:ih,user:$u,loader:Lu,expenses:fh,distributor:Ch,bill:af,purchaseBill:vf,inventory:Lh,payment:Cf,accounts:Rh,customers:Yh,report:If,settings:Ff,exportImport:Vf,dashboard:$f.reducer}}),Gf=t.forwardRef(((e,t)=>{let{className:r,type:n,...a}=e;return(0,Rr.jsx)("input",{type:n,className:Un("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:rounded-none disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})}));Gf.displayName="Input";const Kf=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("div",{ref:t,className:Un(" border bg-card text-card-foreground shadow",r),...n})}));Kf.displayName="Card";const Yf=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("div",{ref:t,className:Un("flex flex-col space-y-1.5 p-4",r),...n})}));Yf.displayName="CardHeader";const Xf=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("h3",{ref:t,className:Un("font-semibold leading-none tracking-tight",r),...n})}));Xf.displayName="CardTitle";const Qf=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("p",{ref:t,className:Un("text-sm text-muted-foreground",r),...n})}));Qf.displayName="CardDescription";const Jf=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("div",{ref:t,className:Un("p-6 pt-0",r),...n})}));Jf.displayName="CardContent";t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("div",{ref:t,className:Un("flex items-center p-6 pt-0",r),...n})})).displayName="CardFooter";const Zf=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(((e,t,r)=>Boolean(e)&&r.indexOf(e)===t)).join(" ")};var em={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const tm=(0,t.forwardRef)(((e,r)=>{let{color:n="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:c,...d}=e;return(0,t.createElement)("svg",{ref:r,...em,width:a,height:a,stroke:n,strokeWidth:i?24*Number(s)/Number(a):s,className:Zf("lucide",o),...d},[...c.map((e=>{let[r,n]=e;return(0,t.createElement)(r,n)})),...Array.isArray(l)?l:[l]])})),rm=(e,r)=>{const n=(0,t.forwardRef)(((n,a)=>{let{className:s,...i}=n;return(0,t.createElement)(tm,{ref:a,iconNode:r,className:Zf(`lucide-${o=e,o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,s),...i});var o}));return n.displayName=`${e}`,n},nm=rm("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),am=rm("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),sm=rm("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),im=rm("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),om=rm("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),lm=rm("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),cm=rm("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),dm=rm("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),um=rm("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),hm=rm("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),fm=rm("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),mm=rm("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),pm=rm("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),xm=rm("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]),vm=rm("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),gm=rm("WalletMinimal",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]),ym=rm("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),bm=rm("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),wm=rm("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Nm=rm("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var jm=t.createContext(void 0);function Sm(e){const r=t.useContext(jm);return e||r||"ltr"}function Cm(e,t){let[r,n]=t;return Math.min(n,Math.max(r,e))}var km="ScrollArea",[Em,Tm]=$n(km),[Dm,Am]=Em(km),Pm=t.forwardRef(((e,r)=>{const{__scopeScrollArea:n,type:a="hover",dir:s,scrollHideDelay:i=600,...o}=e,[l,c]=t.useState(null),[d,u]=t.useState(null),[h,f]=t.useState(null),[m,p]=t.useState(null),[x,v]=t.useState(null),[g,y]=t.useState(0),[b,w]=t.useState(0),[N,j]=t.useState(!1),[S,C]=t.useState(!1),k=_r(r,(e=>c(e))),E=Sm(s);return(0,Rr.jsx)(Dm,{scope:n,type:a,dir:E,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:p,scrollbarXEnabled:N,onScrollbarXEnabledChange:j,scrollbarY:x,onScrollbarYChange:v,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:y,onCornerHeightChange:w,children:(0,Rr.jsx)(qn.div,{dir:E,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})}));Pm.displayName=km;var _m="ScrollAreaViewport",Rm=t.forwardRef(((e,r)=>{const{__scopeScrollArea:n,children:a,asChild:s,nonce:i,...o}=e,l=Am(_m,n),c=_r(r,t.useRef(null),l.onViewportChange);return(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n[data-radix-scroll-area-viewport] {\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  -webkit-overflow-scrolling: touch;\n}\n[data-radix-scroll-area-viewport]::-webkit-scrollbar {\n  display: none;\n}\n:where([data-radix-scroll-area-viewport]) {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n}\n:where([data-radix-scroll-area-content]) {\n  flex-grow: 1;\n}\n"},nonce:i}),(0,Rr.jsx)(qn.div,{"data-radix-scroll-area-viewport":"",...o,asChild:s,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:ip({asChild:s,children:a},(e=>(0,Rr.jsx)("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:e})))})]})}));Rm.displayName=_m;var Im="ScrollAreaScrollbar",Mm=t.forwardRef(((e,r)=>{const{forceMount:n,...a}=e,s=Am(Im,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l="horizontal"===e.orientation;return t.useEffect((()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)})),[l,i,o]),"hover"===s.type?(0,Rr.jsx)(Om,{...a,ref:r,forceMount:n}):"scroll"===s.type?(0,Rr.jsx)(Fm,{...a,ref:r,forceMount:n}):"auto"===s.type?(0,Rr.jsx)(Lm,{...a,ref:r,forceMount:n}):"always"===s.type?(0,Rr.jsx)(Bm,{...a,ref:r}):null}));Mm.displayName=Im;var Om=t.forwardRef(((e,r)=>{const{forceMount:n,...a}=e,s=Am(Im,e.__scopeScrollArea),[i,o]=t.useState(!1);return t.useEffect((()=>{const e=s.scrollArea;let t=0;if(e){const r=()=>{window.clearTimeout(t),o(!0)},n=()=>{t=window.setTimeout((()=>o(!1)),s.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",n)}}}),[s.scrollArea,s.scrollHideDelay]),(0,Rr.jsx)(Ni,{present:n||i,children:(0,Rr.jsx)(Lm,{"data-state":i?"visible":"hidden",...a,ref:r})})})),Fm=t.forwardRef(((e,r)=>{const{forceMount:n,...a}=e,s=Am(Im,e.__scopeScrollArea),i="horizontal"===e.orientation,o=ap((()=>c("SCROLL_END")),100),[l,c]=function(e,r){return t.useReducer(((e,t)=>r[e][t]??e),e)}("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return t.useEffect((()=>{if("idle"===l){const e=window.setTimeout((()=>c("HIDE")),s.scrollHideDelay);return()=>window.clearTimeout(e)}}),[l,s.scrollHideDelay,c]),t.useEffect((()=>{const e=s.viewport,t=i?"scrollLeft":"scrollTop";if(e){let r=e[t];const n=()=>{const n=e[t];r!==n&&(c("SCROLL"),o()),r=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}}),[s.viewport,i,c,o]),(0,Rr.jsx)(Ni,{present:n||"hidden"!==l,children:(0,Rr.jsx)(Bm,{"data-state":"hidden"===l?"hidden":"visible",...a,ref:r,onPointerEnter:Hn(e.onPointerEnter,(()=>c("POINTER_ENTER"))),onPointerLeave:Hn(e.onPointerLeave,(()=>c("POINTER_LEAVE")))})})})),Lm=t.forwardRef(((e,r)=>{const n=Am(Im,e.__scopeScrollArea),{forceMount:a,...s}=e,[i,o]=t.useState(!1),l="horizontal"===e.orientation,c=ap((()=>{if(n.viewport){const e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?e:t)}}),10);return sp(n.viewport,c),sp(n.content,c),(0,Rr.jsx)(Ni,{present:a||i,children:(0,Rr.jsx)(Bm,{"data-state":i?"visible":"hidden",...s,ref:r})})})),Bm=t.forwardRef(((e,r)=>{const{orientation:n="vertical",...a}=e,s=Am(Im,e.__scopeScrollArea),i=t.useRef(null),o=t.useRef(0),[l,c]=t.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Jm(l.viewport,l.content),u={...a,sizes:l,onSizesChange:c,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>i.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function h(e,t){return function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ltr";const a=Zm(r),s=a/2,i=t||s,o=a-i,l=r.scrollbar.paddingStart+i,c=r.scrollbar.size-r.scrollbar.paddingEnd-o,d=r.content-r.viewport,u="ltr"===n?[0,d]:[-1*d,0],h=tp([l,c],u);return h(e)}(e,o.current,l,t)}return"horizontal"===n?(0,Rr.jsx)(Um,{...u,ref:r,onThumbPositionChange:()=>{if(s.viewport&&i.current){const e=ep(s.viewport.scrollLeft,l,s.dir);i.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollLeft=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollLeft=h(e,s.dir))}}):"vertical"===n?(0,Rr.jsx)(zm,{...u,ref:r,onThumbPositionChange:()=>{if(s.viewport&&i.current){const e=ep(s.viewport.scrollTop,l);i.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{s.viewport&&(s.viewport.scrollTop=e)},onDragScroll:e=>{s.viewport&&(s.viewport.scrollTop=h(e))}}):null})),Um=t.forwardRef(((e,r)=>{const{sizes:n,onSizesChange:a,...s}=e,i=Am(Im,e.__scopeScrollArea),[o,l]=t.useState(),c=t.useRef(null),d=_r(r,c,i.onScrollbarXChange);return t.useEffect((()=>{c.current&&l(getComputedStyle(c.current))}),[c]),(0,Rr.jsx)($m,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:"rtl"===i.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===i.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Zm(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(i.viewport){const n=i.viewport.scrollLeft+t.deltaX;e.onWheelScroll(n),rp(n,r)&&t.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Qm(o.paddingLeft),paddingEnd:Qm(o.paddingRight)}})}})})),zm=t.forwardRef(((e,r)=>{const{sizes:n,onSizesChange:a,...s}=e,i=Am(Im,e.__scopeScrollArea),[o,l]=t.useState(),c=t.useRef(null),d=_r(r,c,i.onScrollbarYChange);return t.useEffect((()=>{c.current&&l(getComputedStyle(c.current))}),[c]),(0,Rr.jsx)($m,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Zm(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(i.viewport){const n=i.viewport.scrollTop+t.deltaY;e.onWheelScroll(n),rp(n,r)&&t.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Qm(o.paddingTop),paddingEnd:Qm(o.paddingBottom)}})}})})),[Vm,Hm]=Em(Im),$m=t.forwardRef(((e,r)=>{const{__scopeScrollArea:n,sizes:a,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...f}=e,m=Am(Im,n),[p,x]=t.useState(null),v=_r(r,(e=>x(e))),g=t.useRef(null),y=t.useRef(""),b=m.viewport,w=a.content-a.viewport,N=Kn(u),j=Kn(c),S=ap(h,10);function C(e){if(g.current){const t=e.clientX-g.current.left,r=e.clientY-g.current.top;d({x:t,y:r})}}return t.useEffect((()=>{const e=e=>{const t=e.target,r=p?.contains(t);r&&N(e,w)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})}),[b,p,w,N]),t.useEffect(j,[a,j]),sp(p,S),sp(m.content,S),(0,Rr.jsx)(Vm,{scope:n,scrollbar:p,hasThumb:s,onThumbChange:Kn(i),onThumbPointerUp:Kn(o),onThumbPositionChange:j,onThumbPointerDown:Kn(l),children:(0,Rr.jsx)(qn.div,{...f,ref:v,style:{position:"absolute",...f.style},onPointerDown:Hn(e.onPointerDown,(e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),g.current=p.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),C(e)}})),onPointerMove:Hn(e.onPointerMove,C),onPointerUp:Hn(e.onPointerUp,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),g.current=null}))})})})),Wm="ScrollAreaThumb",qm=t.forwardRef(((e,t)=>{const{forceMount:r,...n}=e,a=Hm(Wm,e.__scopeScrollArea);return(0,Rr.jsx)(Ni,{present:r||a.hasThumb,children:(0,Rr.jsx)(Gm,{ref:t,...n})})})),Gm=t.forwardRef(((e,r)=>{const{__scopeScrollArea:n,style:a,...s}=e,i=Am(Wm,n),o=Hm(Wm,n),{onThumbPositionChange:l}=o,c=_r(r,(e=>o.onThumbChange(e))),d=t.useRef(),u=ap((()=>{d.current&&(d.current(),d.current=void 0)}),100);return t.useEffect((()=>{const e=i.viewport;if(e){const t=()=>{if(u(),!d.current){const t=np(e,l);d.current=t,l()}};return l(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}}),[i.viewport,u,l]),(0,Rr.jsx)(qn.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:Hn(e.onPointerDownCapture,(e=>{const t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;o.onThumbPointerDown({x:r,y:n})})),onPointerUp:Hn(e.onPointerUp,o.onThumbPointerUp)})}));qm.displayName=Wm;var Km="ScrollAreaCorner",Ym=t.forwardRef(((e,t)=>{const r=Am(Km,e.__scopeScrollArea),n=Boolean(r.scrollbarX&&r.scrollbarY);return"scroll"!==r.type&&n?(0,Rr.jsx)(Xm,{...e,ref:t}):null}));Ym.displayName=Km;var Xm=t.forwardRef(((e,r)=>{const{__scopeScrollArea:n,...a}=e,s=Am(Km,n),[i,o]=t.useState(0),[l,c]=t.useState(0),d=Boolean(i&&l);return sp(s.scrollbarX,(()=>{const e=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(e),c(e)})),sp(s.scrollbarY,(()=>{const e=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(e),o(e)})),d?(0,Rr.jsx)(qn.div,{...a,ref:r,style:{width:i,height:l,position:"absolute",right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:0,...e.style}}):null}));function Qm(e){return e?parseInt(e,10):0}function Jm(e,t){const r=e/t;return isNaN(r)?0:r}function Zm(e){const t=Jm(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function ep(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ltr";const n=Zm(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,i=t.content-t.viewport,o=s-n,l=Cm(e,"ltr"===r?[0,i]:[-1*i,0]);return tp([0,i],[0,o])(l)}function tp(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function rp(e,t){return e>0&&e<t}var np=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const s={left:e.scrollLeft,top:e.scrollTop},i=r.left!==s.left,o=r.top!==s.top;(i||o)&&t(),r=s,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function ap(e,r){const n=Kn(e),a=t.useRef(0);return t.useEffect((()=>()=>window.clearTimeout(a.current)),[]),t.useCallback((()=>{window.clearTimeout(a.current),a.current=window.setTimeout(n,r)}),[n,r])}function sp(e,t){const r=Kn(t);ya((()=>{let t=0;if(e){const n=new ResizeObserver((()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)}));return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}}),[e,r])}function ip(e,r){const{asChild:n,children:a}=e;if(!n)return"function"===typeof r?r(a):r;const s=t.Children.only(a);return t.cloneElement(s,{children:"function"===typeof r?r(s.props.children):r})}var op=Pm,lp=Rm,cp=Ym;const dp=t.forwardRef(((e,t)=>{let{className:r,children:n,...a}=e;return(0,Rr.jsxs)(op,{ref:t,className:Un("relative overflow-hidden",r),...a,children:[(0,Rr.jsx)(lp,{className:"h-full w-full rounded-[inherit]",children:n}),(0,Rr.jsx)(up,{}),(0,Rr.jsx)(cp,{})]})}));dp.displayName=op.displayName;const up=t.forwardRef(((e,t)=>{let{className:r,orientation:n="vertical",...a}=e;return(0,Rr.jsx)(Mm,{ref:t,orientation:n,className:Un("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...a,children:(0,Rr.jsx)(qm,{className:"relative flex-1 rounded-full bg-border"})})}));up.displayName=Mm.displayName;var hp=t.forwardRef(((e,t)=>(0,Rr.jsx)(qn.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));hp.displayName="VisuallyHidden";var fp=hp,[mp,pp]=$n("Tooltip",[ti]),xp=ti(),vp="TooltipProvider",gp=700,yp="tooltip.open",[bp,wp]=mp(vp),Np=e=>{const{__scopeTooltip:r,delayDuration:n=gp,skipDelayDuration:a=300,disableHoverableContent:s=!1,children:i}=e,[o,l]=t.useState(!0),c=t.useRef(!1),d=t.useRef(0);return t.useEffect((()=>{const e=d.current;return()=>window.clearTimeout(e)}),[]),(0,Rr.jsx)(bp,{scope:r,isOpenDelayed:o,delayDuration:n,onOpen:t.useCallback((()=>{window.clearTimeout(d.current),l(!1)}),[]),onClose:t.useCallback((()=>{window.clearTimeout(d.current),d.current=window.setTimeout((()=>l(!0)),a)}),[a]),isPointerInTransitRef:c,onPointerInTransitChange:t.useCallback((e=>{c.current=e}),[]),disableHoverableContent:s,children:i})};Np.displayName=vp;var jp="Tooltip",[Sp,Cp]=mp(jp),kp=e=>{const{__scopeTooltip:r,children:n,open:a,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=wp(jp,e.__scopeTooltip),d=xp(r),[u,h]=t.useState(null),f=Na(),m=t.useRef(0),p=o??c.disableHoverableContent,x=l??c.delayDuration,v=t.useRef(!1),[g=!1,y]=Si({prop:a,defaultProp:s,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(yp))):c.onClose(),i?.(e)}}),b=t.useMemo((()=>g?v.current?"delayed-open":"instant-open":"closed"),[g]),w=t.useCallback((()=>{window.clearTimeout(m.current),v.current=!1,y(!0)}),[y]),N=t.useCallback((()=>{window.clearTimeout(m.current),y(!1)}),[y]),j=t.useCallback((()=>{window.clearTimeout(m.current),m.current=window.setTimeout((()=>{v.current=!0,y(!0)}),x)}),[x,y]);return t.useEffect((()=>()=>window.clearTimeout(m.current)),[]),(0,Rr.jsx)(vi,{...d,children:(0,Rr.jsx)(Sp,{scope:r,contentId:f,open:g,stateAttribute:b,trigger:u,onTriggerChange:h,onTriggerEnter:t.useCallback((()=>{c.isOpenDelayed?j():w()}),[c.isOpenDelayed,j,w]),onTriggerLeave:t.useCallback((()=>{p?N():window.clearTimeout(m.current)}),[N,p]),onOpen:w,onClose:N,disableHoverableContent:p,children:n})})};kp.displayName=jp;var Ep="TooltipTrigger",Tp=t.forwardRef(((e,r)=>{const{__scopeTooltip:n,...a}=e,s=Cp(Ep,n),i=wp(Ep,n),o=xp(n),l=_r(r,t.useRef(null),s.onTriggerChange),c=t.useRef(!1),d=t.useRef(!1),u=t.useCallback((()=>c.current=!1),[]);return t.useEffect((()=>()=>document.removeEventListener("pointerup",u)),[u]),(0,Rr.jsx)(gi,{asChild:!0,...o,children:(0,Rr.jsx)(qn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...a,ref:l,onPointerMove:Hn(e.onPointerMove,(e=>{"touch"!==e.pointerType&&(d.current||i.isPointerInTransitRef.current||(s.onTriggerEnter(),d.current=!0))})),onPointerLeave:Hn(e.onPointerLeave,(()=>{s.onTriggerLeave(),d.current=!1})),onPointerDown:Hn(e.onPointerDown,(()=>{c.current=!0,document.addEventListener("pointerup",u,{once:!0})})),onFocus:Hn(e.onFocus,(()=>{c.current||s.onOpen()})),onBlur:Hn(e.onBlur,s.onClose),onClick:Hn(e.onClick,s.onClose)})})}));Tp.displayName=Ep;var Dp="TooltipPortal",[Ap,Pp]=mp(Dp,{forceMount:void 0}),_p=e=>{const{__scopeTooltip:t,forceMount:r,children:n,container:a}=e,s=Cp(Dp,t);return(0,Rr.jsx)(Ap,{scope:t,forceMount:r,children:(0,Rr.jsx)(Ni,{present:r||s.open,children:(0,Rr.jsx)(wi,{asChild:!0,container:a,children:n})})})};_p.displayName=Dp;var Rp="TooltipContent",Ip=t.forwardRef(((e,t)=>{const r=Pp(Rp,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...s}=e,i=Cp(Rp,e.__scopeTooltip);return(0,Rr.jsx)(Ni,{present:n||i.open,children:i.disableHoverableContent?(0,Rr.jsx)(Lp,{side:a,...s,ref:t}):(0,Rr.jsx)(Mp,{side:a,...s,ref:t})})})),Mp=t.forwardRef(((e,r)=>{const n=Cp(Rp,e.__scopeTooltip),a=wp(Rp,e.__scopeTooltip),s=t.useRef(null),i=_r(r,s),[o,l]=t.useState(null),{trigger:c,onClose:d}=n,u=s.current,{onPointerInTransitChange:h}=a,f=t.useCallback((()=>{l(null),h(!1)}),[h]),m=t.useCallback(((e,t)=>{const r=e.currentTarget,n={x:e.clientX,y:e.clientY},a=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(n,function(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,a,s)){case s:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}(n,r.getBoundingClientRect())),s=function(e){const t=e.slice();return t.sort(((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0)),function(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const r=e[n];for(;t.length>=2;){const e=t[t.length-1],n=t[t.length-2];if(!((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x)))break;t.pop()}t.push(r)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const t=e[n];for(;r.length>=2;){const e=r[r.length-1],n=r[r.length-2];if(!((e.x-n.x)*(t.y-n.y)>=(e.y-n.y)*(t.x-n.x)))break;r.pop()}r.push(t)}return r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}(t)}([...a,...function(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}(t.getBoundingClientRect())]);l(s),h(!0)}),[h]);return t.useEffect((()=>()=>f()),[f]),t.useEffect((()=>{if(c&&u){const e=e=>m(e,u),t=e=>m(e,c);return c.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}}),[c,u,m,f]),t.useEffect((()=>{if(o){const e=e=>{const t=e.target,r={x:e.clientX,y:e.clientY},n=c?.contains(t)||u?.contains(t),a=!function(e,t){const{x:r,y:n}=e;let a=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const e=t[s].x,o=t[s].y,l=t[i].x,c=t[i].y;o>n!==c>n&&r<(l-e)*(n-o)/(c-o)+e&&(a=!a)}return a}(r,o);n?f():a&&(f(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}}),[c,u,o,d,f]),(0,Rr.jsx)(Lp,{...e,ref:i})})),[Op,Fp]=mp(jp,{isInside:!1}),Lp=t.forwardRef(((e,r)=>{const{__scopeTooltip:n,children:a,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Cp(Rp,n),d=xp(n),{onClose:u}=c;return t.useEffect((()=>(document.addEventListener(yp,u),()=>document.removeEventListener(yp,u))),[u]),t.useEffect((()=>{if(c.trigger){const e=e=>{const t=e.target;t?.contains(c.trigger)&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}}),[c.trigger,u]),(0,Rr.jsx)(ea,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:(0,Rr.jsxs)(yi,{"data-state":c.stateAttribute,...d,...l,ref:r,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,Rr.jsx)(Or,{children:a}),(0,Rr.jsx)(Op,{scope:n,isInside:!0,children:(0,Rr.jsx)(fp,{id:c.contentId,role:"tooltip",children:s||a})})]})})}));Ip.displayName=Rp;var Bp="TooltipArrow",Up=t.forwardRef(((e,t)=>{const{__scopeTooltip:r,...n}=e,a=xp(r);return Fp(Bp,r).isInside?null:(0,Rr.jsx)(bi,{...a,...n,ref:t})}));Up.displayName=Bp;var zp=Ip;const Vp=Np,Hp=kp,$p=Tp,Wp=t.forwardRef(((e,t)=>{let{className:r,sideOffset:n=4,...a}=e;return(0,Rr.jsx)(zp,{ref:t,sideOffset:n,className:Un("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...a})}));Wp.displayName=zp.displayName;var qp="Avatar",[Gp,Kp]=$n(qp),[Yp,Xp]=Gp(qp),Qp=t.forwardRef(((e,r)=>{const{__scopeAvatar:n,...a}=e,[s,i]=t.useState("idle");return(0,Rr.jsx)(Yp,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:(0,Rr.jsx)(qn.span,{...a,ref:r})})}));Qp.displayName=qp;var Jp="AvatarImage",Zp=t.forwardRef(((e,r)=>{const{__scopeAvatar:n,src:a,onLoadingStatusChange:s=()=>{},...i}=e,o=Xp(Jp,n),l=function(e,r){const[n,a]=t.useState("idle");return ya((()=>{if(!e)return void a("error");let t=!0;const n=new window.Image,s=e=>()=>{t&&a(e)};return a("loading"),n.onload=s("loaded"),n.onerror=s("error"),n.src=e,r&&(n.referrerPolicy=r),()=>{t=!1}}),[e,r]),n}(a,i.referrerPolicy),c=Kn((e=>{s(e),o.onImageLoadingStatusChange(e)}));return ya((()=>{"idle"!==l&&c(l)}),[l,c]),"loaded"===l?(0,Rr.jsx)(qn.img,{...i,ref:r,src:a}):null}));Zp.displayName=Jp;var ex="AvatarFallback",tx=t.forwardRef(((e,r)=>{const{__scopeAvatar:n,delayMs:a,...s}=e,i=Xp(ex,n),[o,l]=t.useState(void 0===a);return t.useEffect((()=>{if(void 0!==a){const e=window.setTimeout((()=>l(!0)),a);return()=>window.clearTimeout(e)}}),[a]),o&&"loaded"!==i.imageLoadingStatus?(0,Rr.jsx)(qn.span,{...s,ref:r}):null}));tx.displayName=ex;var rx=Qp,nx=Zp,ax=tx;const sx=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(rx,{ref:t,className:Un("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...n})}));sx.displayName=rx.displayName;const ix=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(nx,{ref:t,className:Un("aspect-square h-full w-full",r),...n})}));ix.displayName=nx.displayName;const ox=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(ax,{ref:t,className:Un("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...n})}));function lx(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const a=r[0];if(1===r.length)return a;const s=()=>{const e=r.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(r){const n=e.reduce(((e,t)=>{let{useScope:n,scopeName:a}=t;return{...e,...n(r)[`__scope${a}`]}}),{});return t.useMemo((()=>({[`__scope${a.scopeName}`]:n})),[n])}};return s.scopeName=a.scopeName,s}function cx(e){const r=e+"CollectionProvider",[n,a]=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const a=()=>{const r=n.map((e=>t.createContext(e)));return function(n){const a=n?.[e]||r;return t.useMemo((()=>({[`__scope${e}`]:{...n,[e]:a}})),[n,a])}};return a.scopeName=e,[function(r,a){const s=t.createContext(a),i=n.length;function o(r){const{scope:n,children:a,...o}=r,l=n?.[e][i]||s,c=t.useMemo((()=>o),Object.values(o));return(0,Rr.jsx)(l.Provider,{value:c,children:a})}return n=[...n,a],o.displayName=r+"Provider",[o,function(n,o){const l=o?.[e][i]||s,c=t.useContext(l);if(c)return c;if(void 0!==a)return a;throw new Error(`\`${n}\` must be used within \`${r}\``)}]},lx(a,...r)]}(r),[s,i]=n(r,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:r,children:n}=e,a=t.useRef(null),i=t.useRef(new Map).current;return(0,Rr.jsx)(s,{scope:r,itemMap:i,collectionRef:a,children:n})};o.displayName=r;const l=e+"CollectionSlot",c=t.forwardRef(((e,t)=>{const{scope:r,children:n}=e,a=_r(t,i(l,r).collectionRef);return(0,Rr.jsx)(Ir,{ref:a,children:n})}));c.displayName=l;const d=e+"CollectionItemSlot",u="data-radix-collection-item",h=t.forwardRef(((e,r)=>{const{scope:n,children:a,...s}=e,o=t.useRef(null),l=_r(r,o),c=i(d,n);return t.useEffect((()=>(c.itemMap.set(o,{ref:o,...s}),()=>{c.itemMap.delete(o)}))),(0,Rr.jsx)(Ir,{[u]:"",ref:l,children:a})}));return h.displayName=d,[{Provider:o,Slot:c,ItemSlot:h},function(r){const n=i(e+"CollectionConsumer",r);return t.useCallback((()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${u}]`));return Array.from(n.itemMap.values()).sort(((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current)))}),[n.collectionRef,n.itemMap])},a]}function dx(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const a=r[0];if(1===r.length)return a;const s=()=>{const e=r.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(r){const n=e.reduce(((e,t)=>{let{useScope:n,scopeName:a}=t;return{...e,...n(r)[`__scope${a}`]}}),{});return t.useMemo((()=>({[`__scope${a.scopeName}`]:n})),[n])}};return s.scopeName=a.scopeName,s}ox.displayName=ax.displayName;var ux="rovingFocusGroup.onEntryFocus",hx={bubbles:!1,cancelable:!0},fx="RovingFocusGroup",[mx,px,xx]=cx(fx),[vx,gx]=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const a=()=>{const r=n.map((e=>t.createContext(e)));return function(n){const a=n?.[e]||r;return t.useMemo((()=>({[`__scope${e}`]:{...n,[e]:a}})),[n,a])}};return a.scopeName=e,[function(r,a){const s=t.createContext(a),i=n.length;function o(r){const{scope:n,children:a,...o}=r,l=n?.[e][i]||s,c=t.useMemo((()=>o),Object.values(o));return(0,Rr.jsx)(l.Provider,{value:c,children:a})}return n=[...n,a],o.displayName=r+"Provider",[o,function(n,o){const l=o?.[e][i]||s,c=t.useContext(l);if(c)return c;if(void 0!==a)return a;throw new Error(`\`${n}\` must be used within \`${r}\``)}]},dx(a,...r)]}(fx,[xx]),[yx,bx]=vx(fx),wx=t.forwardRef(((e,t)=>(0,Rr.jsx)(mx.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,Rr.jsx)(mx.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,Rr.jsx)(Nx,{...e,ref:t})})})));wx.displayName=fx;var Nx=t.forwardRef(((e,r)=>{const{__scopeRovingFocusGroup:n,orientation:a,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,f=t.useRef(null),m=_r(r,f),p=Sm(i),[x=null,v]=Si({prop:o,defaultProp:l,onChange:c}),[g,y]=t.useState(!1),b=Kn(d),w=px(n),N=t.useRef(!1),[j,S]=t.useState(0);return t.useEffect((()=>{const e=f.current;if(e)return e.addEventListener(ux,b),()=>e.removeEventListener(ux,b)}),[b]),(0,Rr.jsx)(yx,{scope:n,orientation:a,dir:p,loop:s,currentTabStopId:x,onItemFocus:t.useCallback((e=>v(e)),[v]),onItemShiftTab:t.useCallback((()=>y(!0)),[]),onFocusableItemAdd:t.useCallback((()=>S((e=>e+1))),[]),onFocusableItemRemove:t.useCallback((()=>S((e=>e-1))),[]),children:(0,Rr.jsx)(qn.div,{tabIndex:g||0===j?-1:0,"data-orientation":a,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:Hn(e.onMouseDown,(()=>{N.current=!0})),onFocus:Hn(e.onFocus,(e=>{const t=!N.current;if(e.target===e.currentTarget&&t&&!g){const t=new CustomEvent(ux,hx);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=w().filter((e=>e.focusable));kx([e.find((e=>e.active)),e.find((e=>e.id===x)),...e].filter(Boolean).map((e=>e.ref.current)),u)}}N.current=!1})),onBlur:Hn(e.onBlur,(()=>y(!1)))})})})),jx="RovingFocusGroupItem",Sx=t.forwardRef(((e,r)=>{const{__scopeRovingFocusGroup:n,focusable:a=!0,active:s=!1,tabStopId:i,...o}=e,l=Na(),c=i||l,d=bx(jx,n),u=d.currentTabStopId===c,h=px(n),{onFocusableItemAdd:f,onFocusableItemRemove:m}=d;return t.useEffect((()=>{if(a)return f(),()=>m()}),[a,f,m]),(0,Rr.jsx)(mx.ItemSlot,{scope:n,id:c,focusable:a,active:s,children:(0,Rr.jsx)(qn.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:r,onMouseDown:Hn(e.onMouseDown,(e=>{a?d.onItemFocus(c):e.preventDefault()})),onFocus:Hn(e.onFocus,(()=>d.onItemFocus(c))),onKeyDown:Hn(e.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void d.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,r){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:Cx[n]}(e,d.orientation,d.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=h().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)a.reverse();else if("prev"===t||"next"===t){"prev"===t&&a.reverse();const s=a.indexOf(e.currentTarget);a=d.loop?(n=s+1,(r=a).map(((e,t)=>r[(n+t)%r.length]))):a.slice(s+1)}setTimeout((()=>kx(a)))}var r,n}))})})}));Sx.displayName=jx;var Cx={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kx(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=document.activeElement;for(const n of e){if(n===r)return;if(n.focus({preventScroll:t}),document.activeElement!==r)return}}var Ex=wx,Tx=Sx,Dx=["Enter"," "],Ax=["ArrowUp","PageDown","End"],Px=["ArrowDown","PageUp","Home",...Ax],_x={ltr:[...Dx,"ArrowRight"],rtl:[...Dx,"ArrowLeft"]},Rx={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ix="Menu",[Mx,Ox,Fx]=cx(Ix),[Lx,Bx]=$n(Ix,[Fx,ti,gx]),Ux=ti(),zx=gx(),[Vx,Hx]=Lx(Ix),[$x,Wx]=Lx(Ix),qx=e=>{const{__scopeMenu:r,open:n=!1,children:a,dir:s,onOpenChange:i,modal:o=!0}=e,l=Ux(r),[c,d]=t.useState(null),u=t.useRef(!1),h=Kn(i),f=Sm(s);return t.useEffect((()=>{const e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}}),[]),(0,Rr.jsx)(vi,{...l,children:(0,Rr.jsx)(Vx,{scope:r,open:n,onOpenChange:h,content:c,onContentChange:d,children:(0,Rr.jsx)($x,{scope:r,onClose:t.useCallback((()=>h(!1)),[h]),isUsingKeyboardRef:u,dir:f,modal:o,children:a})})})};qx.displayName=Ix;var Gx=t.forwardRef(((e,t)=>{const{__scopeMenu:r,...n}=e,a=Ux(r);return(0,Rr.jsx)(gi,{...a,...n,ref:t})}));Gx.displayName="MenuAnchor";var Kx="MenuPortal",[Yx,Xx]=Lx(Kx,{forceMount:void 0}),Qx=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,s=Hx(Kx,t);return(0,Rr.jsx)(Yx,{scope:t,forceMount:r,children:(0,Rr.jsx)(Ni,{present:r||s.open,children:(0,Rr.jsx)(wi,{asChild:!0,container:a,children:n})})})};Qx.displayName=Kx;var Jx="MenuContent",[Zx,ev]=Lx(Jx),tv=t.forwardRef(((e,t)=>{const r=Xx(Jx,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,s=Hx(Jx,e.__scopeMenu),i=Wx(Jx,e.__scopeMenu);return(0,Rr.jsx)(Mx.Provider,{scope:e.__scopeMenu,children:(0,Rr.jsx)(Ni,{present:n||s.open,children:(0,Rr.jsx)(Mx.Slot,{scope:e.__scopeMenu,children:i.modal?(0,Rr.jsx)(rv,{...a,ref:t}):(0,Rr.jsx)(nv,{...a,ref:t})})})})})),rv=t.forwardRef(((e,r)=>{const n=Hx(Jx,e.__scopeMenu),a=t.useRef(null),s=_r(r,a);return t.useEffect((()=>{const e=a.current;if(e)return _i(e)}),[]),(0,Rr.jsx)(av,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Hn(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})})),nv=t.forwardRef(((e,t)=>{const r=Hx(Jx,e.__scopeMenu);return(0,Rr.jsx)(av,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})})),av=t.forwardRef(((e,r)=>{const{__scopeMenu:n,loop:a=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:p,...x}=e,v=Hx(Jx,n),g=Wx(Jx,n),y=Ux(n),b=zx(n),w=Ox(n),[N,j]=t.useState(null),S=t.useRef(null),C=_r(r,S,v.onContentChange),k=t.useRef(0),E=t.useRef(""),T=t.useRef(0),D=t.useRef(null),A=t.useRef("right"),P=t.useRef(0),_=p?So:t.Fragment,R=p?{as:Ir,allowPinchZoom:!0}:void 0,I=e=>{const t=E.current+e,r=w().filter((e=>!e.disabled)),n=document.activeElement,a=r.find((e=>e.ref.current===n))?.textValue,s=function(e,t,r){const n=t.length>1&&Array.from(t).every((e=>e===t[0])),a=n?t[0]:t,s=r?e.indexOf(r):-1;let i=(o=e,l=Math.max(s,0),o.map(((e,t)=>o[(l+t)%o.length])));var o,l;1===a.length&&(i=i.filter((e=>e!==r)));const c=i.find((e=>e.toLowerCase().startsWith(a.toLowerCase())));return c!==r?c:void 0}(r.map((e=>e.textValue)),t,a),i=r.find((e=>e.textValue===s))?.ref.current;!function e(t){E.current=t,window.clearTimeout(k.current),""!==t&&(k.current=window.setTimeout((()=>e("")),1e3))}(t),i&&setTimeout((()=>i.focus()))};t.useEffect((()=>()=>window.clearTimeout(k.current)),[]),oa();const M=t.useCallback((e=>A.current===D.current?.side&&function(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return function(e,t){const{x:r,y:n}=e;let a=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const e=t[s].x,o=t[s].y,l=t[i].x,c=t[i].y;o>n!==c>n&&r<(l-e)*(n-o)/(c-o)+e&&(a=!a)}return a}(r,t)}(e,D.current?.area)),[]);return(0,Rr.jsx)(Zx,{scope:n,searchRef:E,onItemEnter:t.useCallback((e=>{M(e)&&e.preventDefault()}),[M]),onItemLeave:t.useCallback((e=>{M(e)||(S.current?.focus(),j(null))}),[M]),onTriggerLeave:t.useCallback((e=>{M(e)&&e.preventDefault()}),[M]),pointerGraceTimerRef:T,onPointerGraceIntentChange:t.useCallback((e=>{D.current=e}),[]),children:(0,Rr.jsx)(_,{...R,children:(0,Rr.jsx)(ha,{asChild:!0,trapped:s,onMountAutoFocus:Hn(i,(e=>{e.preventDefault(),S.current?.focus({preventScroll:!0})})),onUnmountAutoFocus:o,children:(0,Rr.jsx)(ea,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:(0,Rr.jsx)(Ex,{asChild:!0,...b,dir:g.dir,orientation:"vertical",loop:a,currentTabStopId:N,onCurrentTabStopIdChange:j,onEntryFocus:Hn(c,(e=>{g.isUsingKeyboardRef.current||e.preventDefault()})),preventScrollOnEntryFocus:!0,children:(0,Rr.jsx)(yi,{role:"menu","aria-orientation":"vertical","data-state":_v(v.open),"data-radix-menu-content":"",dir:g.dir,...y,...x,ref:C,style:{outline:"none",...x.style},onKeyDown:Hn(x.onKeyDown,(e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!r&&n&&I(e.key));const a=S.current;if(e.target!==a)return;if(!Px.includes(e.key))return;e.preventDefault();const s=w().filter((e=>!e.disabled)).map((e=>e.ref.current));Ax.includes(e.key)&&s.reverse(),function(e){const t=document.activeElement;for(const r of e){if(r===t)return;if(r.focus(),document.activeElement!==t)return}}(s)})),onBlur:Hn(e.onBlur,(e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(k.current),E.current="")})),onPointerMove:Hn(e.onPointerMove,Mv((e=>{const t=e.target,r=P.current!==e.clientX;if(e.currentTarget.contains(t)&&r){const t=e.clientX>P.current?"right":"left";A.current=t,P.current=e.clientX}})))})})})})})})}));tv.displayName=Jx;var sv=t.forwardRef(((e,t)=>{const{__scopeMenu:r,...n}=e;return(0,Rr.jsx)(qn.div,{role:"group",...n,ref:t})}));sv.displayName="MenuGroup";var iv=t.forwardRef(((e,t)=>{const{__scopeMenu:r,...n}=e;return(0,Rr.jsx)(qn.div,{...n,ref:t})}));iv.displayName="MenuLabel";var ov="MenuItem",lv="menu.itemSelect",cv=t.forwardRef(((e,r)=>{const{disabled:n=!1,onSelect:a,...s}=e,i=t.useRef(null),o=Wx(ov,e.__scopeMenu),l=ev(ov,e.__scopeMenu),c=_r(r,i),d=t.useRef(!1);return(0,Rr.jsx)(dv,{...s,ref:c,disabled:n,onClick:Hn(e.onClick,(()=>{const e=i.current;if(!n&&e){const t=new CustomEvent(lv,{bubbles:!0,cancelable:!0});e.addEventListener(lv,(e=>a?.(e)),{once:!0}),Gn(e,t),t.defaultPrevented?d.current=!1:o.onClose()}})),onPointerDown:t=>{e.onPointerDown?.(t),d.current=!0},onPointerUp:Hn(e.onPointerUp,(e=>{d.current||e.currentTarget?.click()})),onKeyDown:Hn(e.onKeyDown,(e=>{const t=""!==l.searchRef.current;n||t&&" "===e.key||Dx.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))})}));cv.displayName=ov;var dv=t.forwardRef(((e,r)=>{const{__scopeMenu:n,disabled:a=!1,textValue:s,...i}=e,o=ev(ov,n),l=zx(n),c=t.useRef(null),d=_r(r,c),[u,h]=t.useState(!1),[f,m]=t.useState("");return t.useEffect((()=>{const e=c.current;e&&m((e.textContent??"").trim())}),[i.children]),(0,Rr.jsx)(Mx.ItemSlot,{scope:n,disabled:a,textValue:s??f,children:(0,Rr.jsx)(Tx,{asChild:!0,...l,focusable:!a,children:(0,Rr.jsx)(qn.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...i,ref:d,onPointerMove:Hn(e.onPointerMove,Mv((e=>{if(a)o.onItemLeave(e);else if(o.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}}))),onPointerLeave:Hn(e.onPointerLeave,Mv((e=>o.onItemLeave(e)))),onFocus:Hn(e.onFocus,(()=>h(!0))),onBlur:Hn(e.onBlur,(()=>h(!1)))})})})})),uv=t.forwardRef(((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return(0,Rr.jsx)(yv,{scope:e.__scopeMenu,checked:r,children:(0,Rr.jsx)(cv,{role:"menuitemcheckbox","aria-checked":Rv(r)?"mixed":r,...a,ref:t,"data-state":Iv(r),onSelect:Hn(a.onSelect,(()=>n?.(!!Rv(r)||!r)),{checkForDefaultPrevented:!1})})})}));uv.displayName="MenuCheckboxItem";var hv="MenuRadioGroup",[fv,mv]=Lx(hv,{value:void 0,onValueChange:()=>{}}),pv=t.forwardRef(((e,t)=>{const{value:r,onValueChange:n,...a}=e,s=Kn(n);return(0,Rr.jsx)(fv,{scope:e.__scopeMenu,value:r,onValueChange:s,children:(0,Rr.jsx)(sv,{...a,ref:t})})}));pv.displayName=hv;var xv="MenuRadioItem",vv=t.forwardRef(((e,t)=>{const{value:r,...n}=e,a=mv(xv,e.__scopeMenu),s=r===a.value;return(0,Rr.jsx)(yv,{scope:e.__scopeMenu,checked:s,children:(0,Rr.jsx)(cv,{role:"menuitemradio","aria-checked":s,...n,ref:t,"data-state":Iv(s),onSelect:Hn(n.onSelect,(()=>a.onValueChange?.(r)),{checkForDefaultPrevented:!1})})})}));vv.displayName=xv;var gv="MenuItemIndicator",[yv,bv]=Lx(gv,{checked:!1}),wv=t.forwardRef(((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,s=bv(gv,r);return(0,Rr.jsx)(Ni,{present:n||Rv(s.checked)||!0===s.checked,children:(0,Rr.jsx)(qn.span,{...a,ref:t,"data-state":Iv(s.checked)})})}));wv.displayName=gv;var Nv=t.forwardRef(((e,t)=>{const{__scopeMenu:r,...n}=e;return(0,Rr.jsx)(qn.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})}));Nv.displayName="MenuSeparator";var jv=t.forwardRef(((e,t)=>{const{__scopeMenu:r,...n}=e,a=Ux(r);return(0,Rr.jsx)(bi,{...a,...n,ref:t})}));jv.displayName="MenuArrow";var Sv="MenuSub",[Cv,kv]=Lx(Sv),Ev=e=>{const{__scopeMenu:r,children:n,open:a=!1,onOpenChange:s}=e,i=Hx(Sv,r),o=Ux(r),[l,c]=t.useState(null),[d,u]=t.useState(null),h=Kn(s);return t.useEffect((()=>(!1===i.open&&h(!1),()=>h(!1))),[i.open,h]),(0,Rr.jsx)(vi,{...o,children:(0,Rr.jsx)(Vx,{scope:r,open:a,onOpenChange:h,content:d,onContentChange:u,children:(0,Rr.jsx)(Cv,{scope:r,contentId:Na(),triggerId:Na(),trigger:l,onTriggerChange:c,children:n})})})};Ev.displayName=Sv;var Tv="MenuSubTrigger",Dv=t.forwardRef(((e,r)=>{const n=Hx(Tv,e.__scopeMenu),a=Wx(Tv,e.__scopeMenu),s=kv(Tv,e.__scopeMenu),i=ev(Tv,e.__scopeMenu),o=t.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},u=t.useCallback((()=>{o.current&&window.clearTimeout(o.current),o.current=null}),[]);return t.useEffect((()=>u),[u]),t.useEffect((()=>{const e=l.current;return()=>{window.clearTimeout(e),c(null)}}),[l,c]),(0,Rr.jsx)(Gx,{asChild:!0,...d,children:(0,Rr.jsx)(dv,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":_v(n.open),...e,ref:Pr(r,s.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Hn(e.onPointerMove,Mv((t=>{i.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||o.current||(i.onPointerGraceIntentChange(null),o.current=window.setTimeout((()=>{n.onOpenChange(!0),u()}),100))}))),onPointerLeave:Hn(e.onPointerLeave,Mv((e=>{u();const t=n.content?.getBoundingClientRect();if(t){const r=n.content?.dataset.side,a="right"===r,s=a?-5:5,o=t[a?"left":"right"],c=t[a?"right":"left"];i.onPointerGraceIntentChange({area:[{x:e.clientX+s,y:e.clientY},{x:o,y:t.top},{x:c,y:t.top},{x:c,y:t.bottom},{x:o,y:t.bottom}],side:r}),window.clearTimeout(l.current),l.current=window.setTimeout((()=>i.onPointerGraceIntentChange(null)),300)}else{if(i.onTriggerLeave(e),e.defaultPrevented)return;i.onPointerGraceIntentChange(null)}}))),onKeyDown:Hn(e.onKeyDown,(t=>{const r=""!==i.searchRef.current;e.disabled||r&&" "===t.key||_x[a.dir].includes(t.key)&&(n.onOpenChange(!0),n.content?.focus(),t.preventDefault())}))})})}));Dv.displayName=Tv;var Av="MenuSubContent",Pv=t.forwardRef(((e,r)=>{const n=Xx(Jx,e.__scopeMenu),{forceMount:a=n.forceMount,...s}=e,i=Hx(Jx,e.__scopeMenu),o=Wx(Jx,e.__scopeMenu),l=kv(Av,e.__scopeMenu),c=t.useRef(null),d=_r(r,c);return(0,Rr.jsx)(Mx.Provider,{scope:e.__scopeMenu,children:(0,Rr.jsx)(Ni,{present:a||i.open,children:(0,Rr.jsx)(Mx.Slot,{scope:e.__scopeMenu,children:(0,Rr.jsx)(av,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:"rtl"===o.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{o.isUsingKeyboardRef.current&&c.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Hn(e.onFocusOutside,(e=>{e.target!==l.trigger&&i.onOpenChange(!1)})),onEscapeKeyDown:Hn(e.onEscapeKeyDown,(e=>{o.onClose(),e.preventDefault()})),onKeyDown:Hn(e.onKeyDown,(e=>{const t=e.currentTarget.contains(e.target),r=Rx[o.dir].includes(e.key);t&&r&&(i.onOpenChange(!1),l.trigger?.focus(),e.preventDefault())}))})})})})}));function _v(e){return e?"open":"closed"}function Rv(e){return"indeterminate"===e}function Iv(e){return Rv(e)?"indeterminate":e?"checked":"unchecked"}function Mv(e){return t=>"mouse"===t.pointerType?e(t):void 0}Pv.displayName=Av;var Ov=qx,Fv=Gx,Lv=Qx,Bv=tv,Uv=sv,zv=iv,Vv=cv,Hv=uv,$v=pv,Wv=vv,qv=wv,Gv=Nv,Kv=jv,Yv=Dv,Xv=Pv,Qv="DropdownMenu",[Jv,Zv]=$n(Qv,[Bx]),eg=Bx(),[tg,rg]=Jv(Qv),ng=e=>{const{__scopeDropdownMenu:r,children:n,dir:a,open:s,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=eg(r),d=t.useRef(null),[u=!1,h]=Si({prop:s,defaultProp:i,onChange:o});return(0,Rr.jsx)(tg,{scope:r,triggerId:Na(),triggerRef:d,contentId:Na(),open:u,onOpenChange:h,onOpenToggle:t.useCallback((()=>h((e=>!e))),[h]),modal:l,children:(0,Rr.jsx)(Ov,{...c,open:u,onOpenChange:h,dir:a,modal:l,children:n})})};ng.displayName=Qv;var ag="DropdownMenuTrigger",sg=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,s=rg(ag,r),i=eg(r);return(0,Rr.jsx)(Fv,{asChild:!0,...i,children:(0,Rr.jsx)(qn.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Pr(t,s.triggerRef),onPointerDown:Hn(e.onPointerDown,(e=>{n||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())})),onKeyDown:Hn(e.onKeyDown,(e=>{n||(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())}))})})}));sg.displayName=ag;var ig=e=>{const{__scopeDropdownMenu:t,...r}=e,n=eg(t);return(0,Rr.jsx)(Lv,{...n,...r})};ig.displayName="DropdownMenuPortal";var og="DropdownMenuContent",lg=t.forwardRef(((e,r)=>{const{__scopeDropdownMenu:n,...a}=e,s=rg(og,n),i=eg(n),o=t.useRef(!1);return(0,Rr.jsx)(Bv,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...a,ref:r,onCloseAutoFocus:Hn(e.onCloseAutoFocus,(e=>{o.current||s.triggerRef.current?.focus(),o.current=!1,e.preventDefault()})),onInteractOutside:Hn(e.onInteractOutside,(e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;s.modal&&!n||(o.current=!0)})),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}));lg.displayName=og;var cg=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=eg(r);return(0,Rr.jsx)(Uv,{...a,...n,ref:t})}));cg.displayName="DropdownMenuGroup";var dg=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=eg(r);return(0,Rr.jsx)(zv,{...a,...n,ref:t})}));dg.displayName="DropdownMenuLabel";var ug=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=eg(r);return(0,Rr.jsx)(Vv,{...a,...n,ref:t})}));ug.displayName="DropdownMenuItem";var hg=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=eg(r);return(0,Rr.jsx)(Hv,{...a,...n,ref:t})}));hg.displayName="DropdownMenuCheckboxItem";var fg=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=eg(r);return(0,Rr.jsx)($v,{...a,...n,ref:t})}));fg.displayName="DropdownMenuRadioGroup";var mg=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=eg(r);return(0,Rr.jsx)(Wv,{...a,...n,ref:t})}));mg.displayName="DropdownMenuRadioItem";var pg=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=eg(r);return(0,Rr.jsx)(qv,{...a,...n,ref:t})}));pg.displayName="DropdownMenuItemIndicator";var xg=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=eg(r);return(0,Rr.jsx)(Gv,{...a,...n,ref:t})}));xg.displayName="DropdownMenuSeparator";var vg=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=eg(r);return(0,Rr.jsx)(Kv,{...a,...n,ref:t})}));vg.displayName="DropdownMenuArrow";var gg=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=eg(r);return(0,Rr.jsx)(Yv,{...a,...n,ref:t})}));gg.displayName="DropdownMenuSubTrigger";var yg=t.forwardRef(((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=eg(r);return(0,Rr.jsx)(Xv,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}));yg.displayName="DropdownMenuSubContent";var bg=ig,wg=lg,Ng=dg,jg=ug,Sg=hg,Cg=mg,kg=pg,Eg=xg,Tg=gg,Dg=yg;const Ag=ng,Pg=sg;t.forwardRef(((e,t)=>{let{className:r,inset:n,children:a,...s}=e;return(0,Rr.jsxs)(Tg,{ref:t,className:Un("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",r),...s,children:[a,(0,Rr.jsx)(hl,{className:"ml-auto h-4 w-4"})]})})).displayName=Tg.displayName;t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(Dg,{ref:t,className:Un("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...n})})).displayName=Dg.displayName;const _g=t.forwardRef(((e,t)=>{let{className:r,sideOffset:n=4,...a}=e;return(0,Rr.jsx)(bg,{children:(0,Rr.jsx)(wg,{ref:t,sideOffset:n,className:Un("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...a})})}));_g.displayName=wg.displayName;const Rg=t.forwardRef(((e,t)=>{let{className:r,inset:n,...a}=e;return(0,Rr.jsx)(jg,{ref:t,className:Un("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",r),...a})}));Rg.displayName=jg.displayName;t.forwardRef(((e,t)=>{let{className:r,children:n,checked:a,...s}=e;return(0,Rr.jsxs)(Sg,{ref:t,className:Un("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:a,...s,children:[(0,Rr.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,Rr.jsx)(kg,{children:(0,Rr.jsx)(il,{className:"h-4 w-4"})})}),n]})})).displayName=Sg.displayName;t.forwardRef(((e,t)=>{let{className:r,children:n,...a}=e;return(0,Rr.jsxs)(Cg,{ref:t,className:Un("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...a,children:[(0,Rr.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,Rr.jsx)(kg,{children:(0,Rr.jsx)(gl,{className:"h-4 w-4 fill-current"})})}),n]})})).displayName=Cg.displayName;const Ig=t.forwardRef(((e,t)=>{let{className:r,inset:n,...a}=e;return(0,Rr.jsx)(Ng,{ref:t,className:Un("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",r),...a})}));Ig.displayName=Ng.displayName;const Mg=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(Eg,{ref:t,className:Un("-mx-1 my-1 h-px bg-muted",r),...n})}));Mg.displayName=Eg.displayName;let Og=0;const Fg=new Map,Lg=e=>{if(Fg.has(e))return;const t=setTimeout((()=>{Fg.delete(e),Vg({type:"REMOVE_TOAST",toastId:e})}),1e3);Fg.set(e,t)},Bg=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Lg(r):e.toasts.forEach((e=>{Lg(e.id)})),{...e,toasts:e.toasts.map((e=>e.id===r||void 0===r?{...e,open:!1}:e))}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))}}},Ug=[];let zg={toasts:[]};function Vg(e){zg=Bg(zg,e),Ug.forEach((e=>{e(zg)}))}function Hg(e){let{...t}=e;const r=(Og=(Og+1)%Number.MAX_SAFE_INTEGER,Og.toString()),n=()=>Vg({type:"DISMISS_TOAST",toastId:r});return Vg({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>Vg({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function $g(){const[e,r]=t.useState(zg);return t.useEffect((()=>(Ug.push(r),()=>{const e=Ug.indexOf(r);e>-1&&Ug.splice(e,1)})),[e]),{...e,toast:Hg,dismiss:e=>Vg({type:"DISMISS_TOAST",toastId:e})}}const Wg=[{name:"Quick Menu",icon:hm,path:"/"},{name:"Sales",icon:fm,path:"/sales"},{name:"Purchase",icon:mm,path:"/purchase"},{name:"Inventory",icon:pm,path:"/inventory"},{name:"Payments",icon:xm,path:"/payments"},{name:"Accounts",icon:vm,path:"/accounts"},{name:"Customers",icon:am,path:"/customers"},{name:"Distributors",icon:am,path:"/distributors"},{name:"Expenses",icon:gm,path:"/expenses"},{name:"Dashboard",icon:ym,path:"/dashboard"},{name:"Staffs",icon:am,path:"/staff"},{name:"Settings",icon:bm,path:"/settings"}],qg=e=>{let{className:t}=e;return(0,Rr.jsxs)("svg",{className:t,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Rr.jsx)("circle",{cx:"50",cy:"50",r:"45",fill:"#4299E1"}),(0,Rr.jsx)("rect",{x:"35",y:"30",width:"30",height:"40",rx:"3",fill:"#F6E05E"}),(0,Rr.jsx)("path",{d:"M35 40H65M35 48H65M35 56H50",stroke:"#4299E1",strokeWidth:"3",strokeLinecap:"round"}),(0,Rr.jsx)("text",{x:"50",y:"70",textAnchor:"middle",fill:"#48BB78",fontSize:"16",fontWeight:"bold",fontFamily:"Arial",children:"\u20b9"})]})};function Gg(){var e,t;const r=Z(),n=Q(),a=rt(),{toast:s}=$g(),i=$e((e=>e.user.userData)),{isCollapsed:o}=$e((e=>e.loader));return(0,Rr.jsxs)("div",{className:Un("flex flex-col h-screen  border-r transition-all duration-300 fixed top-0 left-0 z-10",o?"w-16":"w-48"),children:[(0,Rr.jsxs)("div",{className:"flex items-center p-4 border-b-[1px] border-b-gray-100",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"sm",onClick:()=>a(Fu(!o)),children:(0,Rr.jsx)(om,{className:"h-4 w-4"})}),!o&&(0,Rr.jsxs)("div",{className:"flex items-center",children:[(0,Rr.jsx)(qg,{className:"h-6 w-6"}),(0,Rr.jsx)("span",{className:"ml-1 text-lg text-gray-800 font-medium",children:"The Billing"})]})]}),(0,Rr.jsx)(dp,{className:"flex-1 overflow-y-auto py-2",children:(0,Rr.jsx)("ul",{className:"space-y-1 px-3",children:Wg.map((e=>{return(0,Rr.jsx)("li",{children:(0,Rr.jsx)(Vp,{children:(0,Rr.jsxs)(Hp,{children:[(0,Rr.jsx)($p,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"ghost",className:Un("w-full justify-start rounded-[6px]",(t=e.path,("/"===t?"/"===n.pathname:n.pathname.startsWith(t))?"bg-blue-300 text-blue-900":"text-gray-600 hover:bg-blue-100 hover:text-blue-900"),o?"px-2":"px-4"),onClick:()=>r(e.path),children:[(0,Rr.jsx)(e.icon,{className:Un("h-5 w-5",o?"mr-0":"mr-3")}),!o&&(0,Rr.jsx)("span",{children:e.name})]})}),o&&(0,Rr.jsx)(Wp,{side:"right",children:(0,Rr.jsx)("p",{className:"font-semibold",children:e.name})})]})})},e.name);var t}))})}),(0,Rr.jsx)("div",{className:"p-4",children:(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"ghost",size:"sm",className:"w-full flex items-center justify-start",children:[(0,Rr.jsx)(sx,{className:"h-6 w-6 mr-2",children:(0,Rr.jsx)(ox,{children:null===i||void 0===i||null===(e=i.name)||void 0===e||null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase()})}),!o&&(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)("span",{className:"text-sm capitalize",children:null===i||void 0===i?void 0:i.name}),(0,Rr.jsx)(wm,{className:"ml-auto h-4 w-4"})]})]})}),(0,Rr.jsxs)(_g,{align:"end",children:[(0,Rr.jsx)(Ig,{children:"My Account"}),(0,Rr.jsx)(Mg,{}),(0,Rr.jsx)(Rg,{onSelect:()=>r(`/staff/${null===i||void 0===i?void 0:i._id}`,{state:{staffData:i}}),children:"Profile"}),(0,Rr.jsx)(Rg,{onSelect:()=>r("/settings"),children:"Settings"}),(0,Rr.jsx)(Mg,{}),(0,Rr.jsxs)(Rg,{onSelect:async()=>{try{(await fetch(`${Nu}/api/auth/logout`,{method:"POST",credentials:"include"})).ok?(a(Hu()),s({title:"Logged out successfully",variant:"success"}),r("/")):s({title:"Logout failed",variant:"destructive"})}catch(e){s({title:"Logout failed",variant:"destructive"})}},children:[(0,Rr.jsx)(Nm,{className:"mr-2 h-4 w-4"}),(0,Rr.jsx)("span",{children:"Log out"})]})]})]})})]})}var Kg="Dialog",[Yg,Xg]=$n(Kg),[Qg,Jg]=Yg(Kg),Zg=e=>{const{__scopeDialog:r,children:n,open:a,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,l=t.useRef(null),c=t.useRef(null),[d=!1,u]=Si({prop:a,defaultProp:s,onChange:i});return(0,Rr.jsx)(Qg,{scope:r,triggerRef:l,contentRef:c,contentId:Na(),titleId:Na(),descriptionId:Na(),open:d,onOpenChange:u,onOpenToggle:t.useCallback((()=>u((e=>!e))),[u]),modal:o,children:n})};Zg.displayName=Kg;var ey="DialogTrigger",ty=t.forwardRef(((e,t)=>{const{__scopeDialog:r,...n}=e,a=Jg(ey,r),s=_r(t,a.triggerRef);return(0,Rr.jsx)(qn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":by(a.open),...n,ref:s,onClick:Hn(e.onClick,a.onOpenToggle)})}));ty.displayName=ey;var ry="DialogPortal",[ny,ay]=Yg(ry,{forceMount:void 0}),sy=e=>{const{__scopeDialog:r,forceMount:n,children:a,container:s}=e,i=Jg(ry,r);return(0,Rr.jsx)(ny,{scope:r,forceMount:n,children:t.Children.map(a,(e=>(0,Rr.jsx)(Ni,{present:n||i.open,children:(0,Rr.jsx)(wi,{asChild:!0,container:s,children:e})})))})};sy.displayName=ry;var iy="DialogOverlay",oy=t.forwardRef(((e,t)=>{const r=ay(iy,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,s=Jg(iy,e.__scopeDialog);return s.modal?(0,Rr.jsx)(Ni,{present:n||s.open,children:(0,Rr.jsx)(ly,{...a,ref:t})}):null}));oy.displayName=iy;var ly=t.forwardRef(((e,t)=>{const{__scopeDialog:r,...n}=e,a=Jg(iy,r);return(0,Rr.jsx)(So,{as:Ir,allowPinchZoom:!0,shards:[a.contentRef],children:(0,Rr.jsx)(qn.div,{"data-state":by(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})})),cy="DialogContent",dy=t.forwardRef(((e,t)=>{const r=ay(cy,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,s=Jg(cy,e.__scopeDialog);return(0,Rr.jsx)(Ni,{present:n||s.open,children:s.modal?(0,Rr.jsx)(uy,{...a,ref:t}):(0,Rr.jsx)(hy,{...a,ref:t})})}));dy.displayName=cy;var uy=t.forwardRef(((e,r)=>{const n=Jg(cy,e.__scopeDialog),a=t.useRef(null),s=_r(r,n.contentRef,a);return t.useEffect((()=>{const e=a.current;if(e)return _i(e)}),[]),(0,Rr.jsx)(fy,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Hn(e.onCloseAutoFocus,(e=>{e.preventDefault(),n.triggerRef.current?.focus()})),onPointerDownOutside:Hn(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()})),onFocusOutside:Hn(e.onFocusOutside,(e=>e.preventDefault()))})})),hy=t.forwardRef(((e,r)=>{const n=Jg(cy,e.__scopeDialog),a=t.useRef(!1),s=t.useRef(!1);return(0,Rr.jsx)(fy,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||n.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const r=t.target,i=n.triggerRef.current?.contains(r);i&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})})),fy=t.forwardRef(((e,r)=>{const{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,l=Jg(cy,n),c=t.useRef(null),d=_r(r,c);return oa(),(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(ha,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:i,children:(0,Rr.jsx)(ea,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":by(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(Sy,{titleId:l.titleId}),(0,Rr.jsx)(Cy,{contentRef:c,descriptionId:l.descriptionId})]})]})})),my="DialogTitle",py=t.forwardRef(((e,t)=>{const{__scopeDialog:r,...n}=e,a=Jg(my,r);return(0,Rr.jsx)(qn.h2,{id:a.titleId,...n,ref:t})}));py.displayName=my;var xy="DialogDescription",vy=t.forwardRef(((e,t)=>{const{__scopeDialog:r,...n}=e,a=Jg(xy,r);return(0,Rr.jsx)(qn.p,{id:a.descriptionId,...n,ref:t})}));vy.displayName=xy;var gy="DialogClose",yy=t.forwardRef(((e,t)=>{const{__scopeDialog:r,...n}=e,a=Jg(gy,r);return(0,Rr.jsx)(qn.button,{type:"button",...n,ref:t,onClick:Hn(e.onClick,(()=>a.onOpenChange(!1)))})}));function by(e){return e?"open":"closed"}yy.displayName=gy;var wy="DialogTitleWarning",[Ny,jy]=function(e,r){const n=t.createContext(r),a=e=>{const{children:r,...a}=e,s=t.useMemo((()=>a),Object.values(a));return(0,Rr.jsx)(n.Provider,{value:s,children:r})};return a.displayName=e+"Provider",[a,function(a){const s=t.useContext(n);if(s)return s;if(void 0!==r)return r;throw new Error(`\`${a}\` must be used within \`${e}\``)}]}(wy,{contentName:cy,titleName:my,docsSlug:"dialog"}),Sy=e=>{let{titleId:r}=e;const n=jy(wy),a=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return t.useEffect((()=>{if(r){document.getElementById(r)||console.error(a)}}),[a,r]),null},Cy=e=>{let{contentRef:r,descriptionId:n}=e;const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${jy("DialogDescriptionWarning").contentName}}.`;return t.useEffect((()=>{const e=r.current?.getAttribute("aria-describedby");if(n&&e){document.getElementById(n)||console.warn(a)}}),[a,r,n]),null},ky=Zg,Ey=ty,Ty=sy,Dy=oy,Ay=dy,Py=py,_y=vy,Ry=yy;const Iy=ky,My=Ey,Oy=Ty,Fy=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(Dy,{className:Un("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n,ref:t})}));Fy.displayName=Dy.displayName;const Ly=Hr("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),By=t.forwardRef(((e,t)=>{let{side:r="right",className:n,children:a,...s}=e;return(0,Rr.jsxs)(Oy,{children:[(0,Rr.jsx)(Fy,{}),(0,Rr.jsxs)(Ay,{ref:t,className:Un(Ly({side:r}),n),...s,children:[(0,Rr.jsxs)(Ry,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,Rr.jsx)(xl,{className:"h-4 w-4"}),(0,Rr.jsx)("span",{className:"sr-only",children:"Close"})]}),a]})]})}));By.displayName=Ay.displayName;const Uy=e=>{let{className:t,...r}=e;return(0,Rr.jsx)("div",{className:Un("flex flex-col space-y-2 text-center sm:text-left",t),...r})};Uy.displayName="SheetHeader";const zy=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(Py,{ref:t,className:Un("text-lg font-semibold text-foreground",r),...n})}));zy.displayName=Py.displayName;function Vy(){const e=rt(),r=Z(),n=Q(),a=(0,t.useRef)(null),[s,i]=(0,t.useState)({pharmacyId:"",username:"",password:""}),[o,l]=(0,t.useState)(!1),c=$e((e=>e.user.loginStatus)),d=$e((e=>e.user.loginError)),{toast:u}=$g(),[h,f]=(0,t.useState)(!1),m=(0,t.useRef)(null),[p,x]=(0,t.useState)(!1);(0,t.useEffect)((()=>{var e;null!==(e=n.state)&&void 0!==e&&e.scrollToFeatures&&a.current&&a.current.scrollIntoView({behavior:"smooth"})}),[n]);const v=e=>{var t;e.preventDefault(),null===(t=a.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})},g=e=>{const{id:t,value:r}=e.target;i((e=>({...e,[t]:r})))},y=()=>{x(!1)},b=[{icon:(0,Rr.jsx)(nm,{className:"h-12 w-12 text-blue-600"}),title:"Easy Invoice Creation",description:"Create professional invoices quickly with customizable templates and automated calculations."},{icon:(0,Rr.jsx)(am,{className:"h-12 w-12 text-blue-600"}),title:"Client Management",description:"Efficiently manage client information, payment history, and communication all in one place."},{icon:(0,Rr.jsx)(sm,{className:"h-12 w-12 text-blue-600"}),title:"Multiple Payment Options",description:"Accept various payment methods and integrate with popular payment gateways for smooth transactions."},{icon:(0,Rr.jsx)(im,{className:"h-12 w-12 text-blue-600"}),title:"Financial Reporting",description:"Generate comprehensive financial reports and gain insights into your business performance."}];return(0,Rr.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,Rr.jsxs)("header",{className:"px-2 lg:px-6 h-16 flex items-center justify-between bg-white shadow-sm",children:[(0,Rr.jsxs)("div",{className:"flex items-center",children:[(0,Rr.jsxs)(Iy,{open:p,onOpenChange:x,children:[(0,Rr.jsx)(My,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"ghost",size:"icon",className:"md:hidden mr-0",children:[(0,Rr.jsx)(om,{className:"h-6 w-6"}),(0,Rr.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,Rr.jsx)(By,{side:"left",children:(0,Rr.jsxs)("nav",{className:"flex flex-col gap-4 mt-4",children:[(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",onClick:y,children:"Home"}),(0,Rr.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:e=>((e,t)=>{y(),"scrollToFeatures"===t&&v(e)})(e,"scrollToFeatures"),children:"Features"}),(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",onClick:y,children:"About"}),(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",onClick:y,children:"Contact"})]})})]}),(0,Rr.jsxs)(Te,{className:"flex items-center justify-center",to:"/",children:[(0,Rr.jsx)(qg,{className:"h-6 w-6 sm:h-7 sm:w-7 text-blue-600"}),(0,Rr.jsx)("span",{className:"ml-2 text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:"The Billing"})]})]}),(0,Rr.jsxs)("nav",{className:"hidden md:flex items-center space-x-4",children:[(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",children:"Home"}),(0,Rr.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:v,children:"Features"}),(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",children:"About"}),(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",children:"Contact"})]}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",className:"md:hidden mr-2",onClick:()=>{m.current&&m.current.scrollIntoView({behavior:"smooth",block:"center"})},children:[(0,Rr.jsx)(lm,{className:"h-4 w-4 mr-2"}),"Login"]})]}),(0,Rr.jsxs)("main",{className:"flex-1",children:[(0,Rr.jsx)("section",{className:"w-full py-12 md:py-24 lg:py-32 bg-white",children:(0,Rr.jsx)("div",{className:"container px-4 md:px-6",children:(0,Rr.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1fr_400px] lg:gap-12 xl:grid-cols-[1fr_600px]",children:[(0,Rr.jsxs)("div",{className:"flex flex-col justify-center space-y-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("h1",{className:"text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl lg:text-6xl/none",children:"Streamline Your Business Billing"}),(0,Rr.jsx)("p",{className:"max-w-[600px] text-gray-500 md:text-xl",children:"The Billing provides a comprehensive solution for efficient billing, invoice management, and financial reporting for businesses of all sizes."})]}),(0,Rr.jsxs)("div",{className:"hidden md:flex lg:flex flex-col gap-2 min-[400px]:flex-row",children:[(0,Rr.jsx)(Vn,{className:"w-full sm:w-auto inline-flex h-10 items-center justify-center rounded-md bg-blue-600 px-4 sm:px-8 text-sm font-medium text-white shadow transition-colors hover:bg-blue-700 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-blue-700 disabled:pointer-events-none disabled:opacity-50",onClick:()=>{m.current&&(m.current.focus(),m.current.scrollIntoView({behavior:"smooth",block:"center"}))},children:"Get Started"}),(0,Rr.jsx)(Vn,{className:"w-full sm:w-auto inline-flex h-10 items-center justify-center rounded-md border border-gray-200 bg-white px-4 sm:px-8 text-sm font-medium shadow-sm transition-colors hover:bg-gray-100 hover:text-gray-900 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-950 disabled:pointer-events-none disabled:opacity-50",variant:"outline",onClick:()=>{r("/about")},children:"Learn More"})]})]}),(0,Rr.jsx)(Kf,{className:"w-full max-w-sm mx-auto lg:mx-0",children:(0,Rr.jsx)(Jf,{className:"p-6",children:(0,Rr.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),s.pharmacyId&&s.username&&s.password){l(!0);try{await e(Uu(s)).unwrap(),await e(zu()),r("/")}catch(n){console.error("Login error:",n),u({title:"Login failed",description:"Please check your credentials and try again.",variant:"destructive"})}finally{l(!1)}}else u({title:"Incomplete form",description:"Please fill in all fields.",variant:"destructive"})},className:"space-y-4",children:[(0,Rr.jsx)("h2",{className:"text-2xl font-bold text-center",children:"Login"}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"pharmacyId",children:"Business ID"}),(0,Rr.jsx)(Gf,{className:"w-full flex h-10 font-semibold rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",id:"pharmacyId",placeholder:"Enter your Business ID",type:"text",required:!0,value:s.pharmacyId,onChange:g,ref:m})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"username",children:"User ID"}),(0,Rr.jsx)(Gf,{className:"w-full flex h-10 font-semibold rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",id:"username",placeholder:"Enter your user ID",type:"text",required:!0,value:s.username,onChange:g})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"password",children:"Password"}),(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{className:"w-full flex h-10 font-semibold rounded-md border border-gray-300 bg-transparent px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50 pr-10",id:"password",placeholder:"********",type:h?"text":"password",required:!0,value:s.password,onChange:g}),(0,Rr.jsx)("button",{type:"button",onClick:()=>{f(!h)},className:"absolute inset-y-0 right-0 flex items-center pr-3",children:h?(0,Rr.jsx)(cm,{className:"h-4 w-4 text-gray-400"}):(0,Rr.jsx)(dm,{className:"h-4 w-4 text-gray-400"})})]})]}),(0,Rr.jsx)(Vn,{className:"w-full bg-blue-600 text-white hover:bg-blue-700",type:"submit",disabled:o,children:o?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(um,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging in..."]}):"Login"}),"failed"===c&&(0,Rr.jsx)("p",{className:"text-red-500 text-sm",children:d})]})})})]})})}),(0,Rr.jsx)("section",{id:"features",ref:a,className:"w-full py-12 md:py-24 lg:py-32 bg-gray-100",children:(0,Rr.jsxs)("div",{className:"container px-4 md:px-6",children:[(0,Rr.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tighter text-center mb-8 sm:mb-12",children:"Key Features"}),(0,Rr.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:b.map(((e,t)=>(0,Rr.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.icon,(0,Rr.jsx)("h3",{className:"text-xl font-bold",children:e.title}),(0,Rr.jsx)("p",{className:"text-gray-500",children:e.description})]},t)))})]})})]}),(0,Rr.jsxs)("footer",{className:"flex flex-col sm:flex-row justify-between items-center py-6 px-4 md:px-6 border-t bg-white",children:[(0,Rr.jsx)("p",{className:"text-xs text-gray-500 mb-2 sm:mb-0",children:"\xa9 2024 The Billing. All rights reserved."}),(0,Rr.jsxs)("nav",{className:"flex gap-4",children:[(0,Rr.jsx)(Te,{className:"text-xs hover:underline underline-offset-4",children:"Terms of Service"}),(0,Rr.jsx)(Te,{className:"text-xs hover:underline underline-offset-4",children:"Privacy"})]})]})]})}t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(_y,{ref:t,className:Un("text-sm text-muted-foreground",r),...n})})).displayName=_y.displayName;const Hy=e=>{let{text:t="Loading..."}=e;return(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[200px]",children:[(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("div",{className:"h-16 w-16 rounded-full border-4 border-t-indigo-600 border-r-indigo-600 border-b-indigo-200 border-l-indigo-200 animate-spin"}),(0,Rr.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,Rr.jsx)("div",{className:"h-8 w-8 rounded-full border-4 border-t-transparent border-r-transparent border-b-indigo-600 border-l-indigo-600 animate-spin"})})]}),(0,Rr.jsx)("p",{className:"mt-4 text-sm text-gray-600 animate-pulse",children:t})]})},$y=rm("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),Wy=rm("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),qy=rm("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),Gy=rm("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ky=rm("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Yy=rm("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);function Xy(e){const r=t.useRef({value:e,previous:e});return t.useMemo((()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous)),[e])}var Qy=[" ","Enter","ArrowUp","ArrowDown"],Jy=[" ","Enter"],Zy="Select",[eb,tb,rb]=cx(Zy),[nb,ab]=$n(Zy,[rb,ti]),sb=ti(),[ib,ob]=nb(Zy),[lb,cb]=nb(Zy),db=e=>{const{__scopeSelect:r,children:n,open:a,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:f,required:m,form:p}=e,x=sb(r),[v,g]=t.useState(null),[y,b]=t.useState(null),[w,N]=t.useState(!1),j=Sm(d),[S=!1,C]=Si({prop:a,defaultProp:s,onChange:i}),[k,E]=Si({prop:o,defaultProp:l,onChange:c}),T=t.useRef(null),D=!v||(p||!!v.closest("form")),[A,P]=t.useState(new Set),_=Array.from(A).map((e=>e.props.value)).join(";");return(0,Rr.jsx)(vi,{...x,children:(0,Rr.jsxs)(ib,{required:m,scope:r,trigger:v,onTriggerChange:g,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:w,onValueNodeHasChildrenChange:N,contentId:Na(),value:k,onValueChange:E,open:S,onOpenChange:C,dir:j,triggerPointerDownPosRef:T,disabled:f,children:[(0,Rr.jsx)(eb.Provider,{scope:r,children:(0,Rr.jsx)(lb,{scope:e.__scopeSelect,onNativeOptionAdd:t.useCallback((e=>{P((t=>new Set(t).add(e)))}),[]),onNativeOptionRemove:t.useCallback((e=>{P((t=>{const r=new Set(t);return r.delete(e),r}))}),[]),children:n})}),D?(0,Rr.jsxs)(Jb,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:h,value:k,onChange:e=>E(e.target.value),disabled:f,form:p,children:[void 0===k?(0,Rr.jsx)("option",{value:""}):null,Array.from(A)]},_):null]})})};db.displayName=Zy;var ub="SelectTrigger",hb=t.forwardRef(((e,r)=>{const{__scopeSelect:n,disabled:a=!1,...s}=e,i=sb(n),o=ob(ub,n),l=o.disabled||a,c=_r(r,o.onTriggerChange),d=tb(n),u=t.useRef("touch"),[h,f,m]=Zb((e=>{const t=d().filter((e=>!e.disabled)),r=t.find((e=>e.value===o.value)),n=ew(t,e,r);void 0!==n&&o.onValueChange(n.value)})),p=e=>{l||(o.onOpenChange(!0),m()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,Rr.jsx)(gi,{asChild:!0,...i,children:(0,Rr.jsx)(qn.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Qb(o.value)?"":void 0,...s,ref:c,onClick:Hn(s.onClick,(e=>{e.currentTarget.focus(),"mouse"!==u.current&&p(e)})),onPointerDown:Hn(s.onPointerDown,(e=>{u.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(p(e),e.preventDefault())})),onKeyDown:Hn(s.onKeyDown,(e=>{const t=""!==h.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||f(e.key),t&&" "===e.key||Qy.includes(e.key)&&(p(),e.preventDefault())}))})})}));hb.displayName=ub;var fb="SelectValue",mb=t.forwardRef(((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:s,placeholder:i="",...o}=e,l=ob(fb,r),{onValueNodeHasChildrenChange:c}=l,d=void 0!==s,u=_r(t,l.onValueNodeChange);return ya((()=>{c(d)}),[c,d]),(0,Rr.jsx)(qn.span,{...o,ref:u,style:{pointerEvents:"none"},children:Qb(l.value)?(0,Rr.jsx)(Rr.Fragment,{children:i}):s})}));mb.displayName=fb;var pb=t.forwardRef(((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return(0,Rr.jsx)(qn.span,{"aria-hidden":!0,...a,ref:t,children:n||"\u25bc"})}));pb.displayName="SelectIcon";var xb=e=>(0,Rr.jsx)(wi,{asChild:!0,...e});xb.displayName="SelectPortal";var vb="SelectContent",gb=t.forwardRef(((e,r)=>{const n=ob(vb,e.__scopeSelect),[a,s]=t.useState();if(ya((()=>{s(new DocumentFragment)}),[]),!n.open){const t=a;return t?ge.createPortal((0,Rr.jsx)(bb,{scope:e.__scopeSelect,children:(0,Rr.jsx)(eb.Slot,{scope:e.__scopeSelect,children:(0,Rr.jsx)("div",{children:e.children})})}),t):null}return(0,Rr.jsx)(Nb,{...e,ref:r})}));gb.displayName=vb;var yb=10,[bb,wb]=nb(vb),Nb=t.forwardRef(((e,r)=>{const{__scopeSelect:n,position:a="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:p,hideWhenDetached:x,avoidCollisions:v,...g}=e,y=ob(vb,n),[b,w]=t.useState(null),[N,j]=t.useState(null),S=_r(r,(e=>w(e))),[C,k]=t.useState(null),[E,T]=t.useState(null),D=tb(n),[A,P]=t.useState(!1),_=t.useRef(!1);t.useEffect((()=>{if(b)return _i(b)}),[b]),oa();const R=t.useCallback((e=>{const[t,...r]=D().map((e=>e.ref.current)),[n]=r.slice(-1),a=document.activeElement;for(const s of e){if(s===a)return;if(s?.scrollIntoView({block:"nearest"}),s===t&&N&&(N.scrollTop=0),s===n&&N&&(N.scrollTop=N.scrollHeight),s?.focus(),document.activeElement!==a)return}}),[D,N]),I=t.useCallback((()=>R([C,b])),[R,C,b]);t.useEffect((()=>{A&&I()}),[A,I]);const{onOpenChange:M,triggerPointerDownPosRef:O}=y;t.useEffect((()=>{if(b){let e={x:0,y:0};const t=t=>{e={x:Math.abs(Math.round(t.pageX)-(O.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(O.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():b.contains(r.target)||M(!1),document.removeEventListener("pointermove",t),O.current=null};return null!==O.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}}),[b,M,O]),t.useEffect((()=>{const e=()=>M(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}}),[M]);const[F,L]=Zb((e=>{const t=D().filter((e=>!e.disabled)),r=t.find((e=>e.ref.current===document.activeElement)),n=ew(t,e,r);n&&setTimeout((()=>n.ref.current.focus()))})),B=t.useCallback(((e,t,r)=>{const n=!_.current&&!r;(void 0!==y.value&&y.value===t||n)&&(k(e),n&&(_.current=!0))}),[y.value]),U=t.useCallback((()=>b?.focus()),[b]),z=t.useCallback(((e,t,r)=>{const n=!_.current&&!r;(void 0!==y.value&&y.value===t||n)&&T(e)}),[y.value]),V="popper"===a?Sb:jb,H=V===Sb?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:p,hideWhenDetached:x,avoidCollisions:v}:{};return(0,Rr.jsx)(bb,{scope:n,content:b,viewport:N,onViewportChange:j,itemRefCallback:B,selectedItem:C,onItemLeave:U,itemTextRefCallback:z,focusSelectedItem:I,selectedItemText:E,position:a,isPositioned:A,searchRef:F,children:(0,Rr.jsx)(So,{as:Ir,allowPinchZoom:!0,children:(0,Rr.jsx)(ha,{asChild:!0,trapped:y.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Hn(s,(e=>{y.trigger?.focus({preventScroll:!0}),e.preventDefault()})),children:(0,Rr.jsx)(ea,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:(0,Rr.jsx)(V,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:e=>e.preventDefault(),...g,...H,onPlaced:()=>P(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:Hn(g.onKeyDown,(e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||L(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=D().filter((e=>!e.disabled)).map((e=>e.ref.current));if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const r=e.target,n=t.indexOf(r);t=t.slice(n+1)}setTimeout((()=>R(t))),e.preventDefault()}}))})})})})})}));Nb.displayName="SelectContentImpl";var jb=t.forwardRef(((e,r)=>{const{__scopeSelect:n,onPlaced:a,...s}=e,i=ob(vb,n),o=wb(vb,n),[l,c]=t.useState(null),[d,u]=t.useState(null),h=_r(r,(e=>u(e))),f=tb(n),m=t.useRef(!1),p=t.useRef(!0),{viewport:x,selectedItem:v,selectedItemText:g,focusSelectedItem:y}=o,b=t.useCallback((()=>{if(i.trigger&&i.valueNode&&l&&d&&x&&v&&g){const e=i.trigger.getBoundingClientRect(),t=d.getBoundingClientRect(),r=i.valueNode.getBoundingClientRect(),n=g.getBoundingClientRect();if("rtl"!==i.dir){const a=n.left-t.left,s=r.left-a,i=e.left-s,o=e.width+i,c=Math.max(o,t.width),d=window.innerWidth-yb,u=Cm(s,[yb,Math.max(yb,d-c)]);l.style.minWidth=o+"px",l.style.left=u+"px"}else{const a=t.right-n.right,s=window.innerWidth-r.right-a,i=window.innerWidth-e.right-s,o=e.width+i,c=Math.max(o,t.width),d=window.innerWidth-yb,u=Cm(s,[yb,Math.max(yb,d-c)]);l.style.minWidth=o+"px",l.style.right=u+"px"}const s=f(),o=window.innerHeight-2*yb,c=x.scrollHeight,u=window.getComputedStyle(d),h=parseInt(u.borderTopWidth,10),p=parseInt(u.paddingTop,10),y=parseInt(u.borderBottomWidth,10),b=h+p+c+parseInt(u.paddingBottom,10)+y,w=Math.min(5*v.offsetHeight,b),N=window.getComputedStyle(x),j=parseInt(N.paddingTop,10),S=parseInt(N.paddingBottom,10),C=e.top+e.height/2-yb,k=o-C,E=v.offsetHeight/2,T=h+p+(v.offsetTop+E),D=b-T;if(T<=C){const e=s.length>0&&v===s[s.length-1].ref.current;l.style.bottom="0px";const t=d.clientHeight-x.offsetTop-x.offsetHeight,r=T+Math.max(k,E+(e?S:0)+t+y);l.style.height=r+"px"}else{const e=s.length>0&&v===s[0].ref.current;l.style.top="0px";const t=Math.max(C,h+x.offsetTop+(e?j:0)+E)+D;l.style.height=t+"px",x.scrollTop=T-C+x.offsetTop}l.style.margin=`${yb}px 0`,l.style.minHeight=w+"px",l.style.maxHeight=o+"px",a?.(),requestAnimationFrame((()=>m.current=!0))}}),[f,i.trigger,i.valueNode,l,d,x,v,g,i.dir,a]);ya((()=>b()),[b]);const[w,N]=t.useState();ya((()=>{d&&N(window.getComputedStyle(d).zIndex)}),[d]);const j=t.useCallback((e=>{e&&!0===p.current&&(b(),y?.(),p.current=!1)}),[b,y]);return(0,Rr.jsx)(Cb,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:j,children:(0,Rr.jsx)("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:(0,Rr.jsx)(qn.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})}));jb.displayName="SelectItemAlignedPosition";var Sb=t.forwardRef(((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=yb,...s}=e,i=sb(r);return(0,Rr.jsx)(yi,{...i,...s,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})}));Sb.displayName="SelectPopperPosition";var[Cb,kb]=nb(vb,{}),Eb="SelectViewport",Tb=t.forwardRef(((e,r)=>{const{__scopeSelect:n,nonce:a,...s}=e,i=wb(Eb,n),o=kb(Eb,n),l=_r(r,i.onViewportChange),c=t.useRef(0);return(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,Rr.jsx)(eb.Slot,{scope:n,children:(0,Rr.jsx)(qn.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Hn(s.onScroll,(e=>{const t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=o;if(n?.current&&r){const e=Math.abs(c.current-t.scrollTop);if(e>0){const n=window.innerHeight-2*yb,a=parseFloat(r.style.minHeight),s=parseFloat(r.style.height),i=Math.max(a,s);if(i<n){const a=i+e,s=Math.min(n,a),o=a-s;r.style.height=s+"px","0px"===r.style.bottom&&(t.scrollTop=o>0?o:0,r.style.justifyContent="flex-end")}}}c.current=t.scrollTop}))})})]})}));Tb.displayName=Eb;var Db="SelectGroup",[Ab,Pb]=nb(Db),_b=t.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e,a=Na();return(0,Rr.jsx)(Ab,{scope:r,id:a,children:(0,Rr.jsx)(qn.div,{role:"group","aria-labelledby":a,...n,ref:t})})}));_b.displayName=Db;var Rb="SelectLabel",Ib=t.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e,a=Pb(Rb,r);return(0,Rr.jsx)(qn.div,{id:a.id,...n,ref:t})}));Ib.displayName=Rb;var Mb="SelectItem",[Ob,Fb]=nb(Mb),Lb=t.forwardRef(((e,r)=>{const{__scopeSelect:n,value:a,disabled:s=!1,textValue:i,...o}=e,l=ob(Mb,n),c=wb(Mb,n),d=l.value===a,[u,h]=t.useState(i??""),[f,m]=t.useState(!1),p=_r(r,(e=>c.itemRefCallback?.(e,a,s))),x=Na(),v=t.useRef("touch"),g=()=>{s||(l.onValueChange(a),l.onOpenChange(!1))};if(""===a)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,Rr.jsx)(Ob,{scope:n,value:a,disabled:s,textId:x,isSelected:d,onItemTextChange:t.useCallback((e=>{h((t=>t||(e?.textContent??"").trim()))}),[]),children:(0,Rr.jsx)(eb.ItemSlot,{scope:n,value:a,disabled:s,textValue:u,children:(0,Rr.jsx)(qn.div,{role:"option","aria-labelledby":x,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:p,onFocus:Hn(o.onFocus,(()=>m(!0))),onBlur:Hn(o.onBlur,(()=>m(!1))),onClick:Hn(o.onClick,(()=>{"mouse"!==v.current&&g()})),onPointerUp:Hn(o.onPointerUp,(()=>{"mouse"===v.current&&g()})),onPointerDown:Hn(o.onPointerDown,(e=>{v.current=e.pointerType})),onPointerMove:Hn(o.onPointerMove,(e=>{v.current=e.pointerType,s?c.onItemLeave?.():"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})})),onPointerLeave:Hn(o.onPointerLeave,(e=>{e.currentTarget===document.activeElement&&c.onItemLeave?.()})),onKeyDown:Hn(o.onKeyDown,(e=>{""!==c.searchRef?.current&&" "===e.key||(Jy.includes(e.key)&&g()," "===e.key&&e.preventDefault())}))})})})}));Lb.displayName=Mb;var Bb="SelectItemText",Ub=t.forwardRef(((e,r)=>{const{__scopeSelect:n,className:a,style:s,...i}=e,o=ob(Bb,n),l=wb(Bb,n),c=Fb(Bb,n),d=cb(Bb,n),[u,h]=t.useState(null),f=_r(r,(e=>h(e)),c.onItemTextChange,(e=>l.itemTextRefCallback?.(e,c.value,c.disabled))),m=u?.textContent,p=t.useMemo((()=>(0,Rr.jsx)("option",{value:c.value,disabled:c.disabled,children:m},c.value)),[c.disabled,c.value,m]),{onNativeOptionAdd:x,onNativeOptionRemove:v}=d;return ya((()=>(x(p),()=>v(p))),[x,v,p]),(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(qn.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ge.createPortal(i.children,o.valueNode):null]})}));Ub.displayName=Bb;var zb="SelectItemIndicator",Vb=t.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e;return Fb(zb,r).isSelected?(0,Rr.jsx)(qn.span,{"aria-hidden":!0,...n,ref:t}):null}));Vb.displayName=zb;var Hb="SelectScrollUpButton",$b=t.forwardRef(((e,r)=>{const n=wb(Hb,e.__scopeSelect),a=kb(Hb,e.__scopeSelect),[s,i]=t.useState(!1),o=_r(r,a.onScrollButtonChange);return ya((()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;i(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[n.viewport,n.isPositioned]),s?(0,Rr.jsx)(Gb,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null}));$b.displayName=Hb;var Wb="SelectScrollDownButton",qb=t.forwardRef(((e,r)=>{const n=wb(Wb,e.__scopeSelect),a=kb(Wb,e.__scopeSelect),[s,i]=t.useState(!1),o=_r(r,a.onScrollButtonChange);return ya((()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,r=Math.ceil(t.scrollTop)<e;i(r)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[n.viewport,n.isPositioned]),s?(0,Rr.jsx)(Gb,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null}));qb.displayName=Wb;var Gb=t.forwardRef(((e,r)=>{const{__scopeSelect:n,onAutoScroll:a,...s}=e,i=wb("SelectScrollButton",n),o=t.useRef(null),l=tb(n),c=t.useCallback((()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)}),[]);return t.useEffect((()=>()=>c()),[c]),ya((()=>{const e=l().find((e=>e.ref.current===document.activeElement));e?.ref.current?.scrollIntoView({block:"nearest"})}),[l]),(0,Rr.jsx)(qn.div,{"aria-hidden":!0,...s,ref:r,style:{flexShrink:0,...s.style},onPointerDown:Hn(s.onPointerDown,(()=>{null===o.current&&(o.current=window.setInterval(a,50))})),onPointerMove:Hn(s.onPointerMove,(()=>{i.onItemLeave?.(),null===o.current&&(o.current=window.setInterval(a,50))})),onPointerLeave:Hn(s.onPointerLeave,(()=>{c()}))})})),Kb=t.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e;return(0,Rr.jsx)(qn.div,{"aria-hidden":!0,...n,ref:t})}));Kb.displayName="SelectSeparator";var Yb="SelectArrow",Xb=t.forwardRef(((e,t)=>{const{__scopeSelect:r,...n}=e,a=sb(r),s=ob(Yb,r),i=wb(Yb,r);return s.open&&"popper"===i.position?(0,Rr.jsx)(bi,{...a,...n,ref:t}):null}));function Qb(e){return""===e||void 0===e}Xb.displayName=Yb;var Jb=t.forwardRef(((e,r)=>{const{value:n,...a}=e,s=t.useRef(null),i=_r(r,s),o=Xy(n);return t.useEffect((()=>{const e=s.current,t=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(t,"value").set;if(o!==n&&r){const t=new Event("change",{bubbles:!0});r.call(e,n),e.dispatchEvent(t)}}),[o,n]),(0,Rr.jsx)(hp,{asChild:!0,children:(0,Rr.jsx)("select",{...a,ref:i,defaultValue:n})})}));function Zb(e){const r=Kn(e),n=t.useRef(""),a=t.useRef(0),s=t.useCallback((e=>{const t=n.current+e;r(t),function e(t){n.current=t,window.clearTimeout(a.current),""!==t&&(a.current=window.setTimeout((()=>e("")),1e3))}(t)}),[r]),i=t.useCallback((()=>{n.current="",window.clearTimeout(a.current)}),[]);return t.useEffect((()=>()=>window.clearTimeout(a.current)),[]),[n,s,i]}function ew(e,t,r){const n=t.length>1&&Array.from(t).every((e=>e===t[0]))?t[0]:t,a=r?e.indexOf(r):-1;let s=(i=e,o=Math.max(a,0),i.map(((e,t)=>i[(o+t)%i.length])));var i,o;1===n.length&&(s=s.filter((e=>e!==r)));const l=s.find((e=>e.textValue.toLowerCase().startsWith(n.toLowerCase())));return l!==r?l:void 0}Jb.displayName="BubbleSelect";var tw=hb,rw=pb,nw=xb,aw=gb,sw=Tb,iw=Ib,ow=Lb,lw=Ub,cw=Vb,dw=$b,uw=qb,hw=Kb;const fw=db,mw=mb,pw=t.forwardRef(((e,t)=>{let{className:r,children:n,...a}=e;return(0,Rr.jsxs)(tw,{ref:t,className:Un("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...a,children:[n,(0,Rr.jsx)(rw,{asChild:!0,children:(0,Rr.jsx)(al,{className:"h-4 w-4 opacity-50"})})]})}));pw.displayName=tw.displayName;const xw=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(dw,{ref:t,className:Un("flex cursor-default items-center justify-center py-1",r),...n,children:(0,Rr.jsx)(ml,{})})}));xw.displayName=dw.displayName;const vw=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(uw,{ref:t,className:Un("flex cursor-default items-center justify-center py-1",r),...n,children:(0,Rr.jsx)(ll,{})})}));vw.displayName=uw.displayName;const gw=t.forwardRef(((e,t)=>{let{className:r,children:n,position:a="popper",...s}=e;return(0,Rr.jsx)(nw,{children:(0,Rr.jsxs)(aw,{ref:t,className:Un("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:a,...s,children:[(0,Rr.jsx)(xw,{}),(0,Rr.jsx)(sw,{className:Un("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,Rr.jsx)(vw,{})]})})}));gw.displayName=aw.displayName;t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(iw,{ref:t,className:Un("px-2 py-1.5 text-sm font-semibold",r),...n})})).displayName=iw.displayName;const yw=t.forwardRef(((e,t)=>{let{className:r,children:n,...a}=e;return(0,Rr.jsxs)(ow,{ref:t,className:Un("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...a,children:[(0,Rr.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,Rr.jsx)(cw,{children:(0,Rr.jsx)(il,{className:"h-4 w-4"})})}),(0,Rr.jsx)(lw,{children:n})]})}));yw.displayName=ow.displayName;t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(hw,{ref:t,className:Un("-mx-1 my-1 h-px bg-muted",r),...n})})).displayName=hw.displayName;const bw=()=>{!function(e){const[r,n]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const t=window.matchMedia(e);t.matches!==r&&n(t.matches);const a=()=>n(t.matches);return t.addListener(a),()=>t.removeListener(a)}),[r,e])}("(max-width: 767px)");const e=Z(),r=rt(),{data:n,loading:a,error:s}=$e((e=>e.dashboard)),i="pending"===a||"idle"===a,[o,l]=(0,t.useState)("Today"),[c,d]=(0,t.useState)((()=>{const{from:e,to:t}=Su("Today");return{from:e,to:t}}));(0,t.useEffect)((()=>{if("Custom"!==o){const{from:e,to:t}=Su(o);d({from:e,to:t}),r(Hf({from:e,to:t}))}}),[o,r]),(0,t.useEffect)((()=>{if("Today"===o&&"idle"===a){const{from:e,to:t}=Su("Today");r(Hf({from:e,to:t}))}}),[r,o,a]);const u=e=>{null!==e&&void 0!==e&&e.from&&null!==e&&void 0!==e&&e.to&&d(e)},h=()=>{c.from&&c.to&&r(Hf({from:c.from,to:c.to}))},f=()=>{const{from:e,to:t}=Su("Today");l("Today")};if(i)return(0,Rr.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:(0,Rr.jsx)(Hy,{text:"Loading dashboard data..."})});if(s)return(0,Rr.jsxs)("div",{className:"p-4 bg-gray-50 max-w-[1600px] mx-auto",children:[(0,Rr.jsxs)("div",{className:"flex flex-col gap-3 mb-4",children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsx)("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600",children:"Dashboard Overview"}),(0,Rr.jsxs)(Vn,{variant:"outline",onClick:()=>e("/reports"),className:"flex items-center hover:bg-indigo-50 transition-colors text-base",children:[(0,Rr.jsx)($y,{className:"mr-2 h-4 w-4"}),"View Reports"]})]}),(0,Rr.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,Rr.jsxs)(fw,{value:o,onValueChange:l,children:[(0,Rr.jsx)(pw,{className:"w-[160px] h-10 text-base border-indigo-200 hover:border-indigo-300 transition-colors",children:(0,Rr.jsx)(mw,{placeholder:"Select date range"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"Today",children:"Today"}),(0,Rr.jsx)(yw,{value:"Yesterday",children:"Yesterday"}),(0,Rr.jsx)(yw,{value:"This Week",children:"This Week"}),(0,Rr.jsx)(yw,{value:"This Month",children:"This Month"}),(0,Rr.jsx)(yw,{value:"Last 7 Days",children:"Last 7 Days"}),(0,Rr.jsx)(yw,{value:"Custom",children:"Custom Range"})]})]}),"Custom"===o&&(0,Rr.jsx)(ju,{from:c.from,to:c.to,onSelect:u,onSearch:h,onCancel:f})]})]}),(0,Rr.jsxs)("div",{className:"text-center py-10 text-red-600",children:[(0,Rr.jsx)(Wy,{className:"mx-auto h-12 w-12 text-red-500"}),(0,Rr.jsx)("p",{className:"mt-4 text-lg",children:"Error loading dashboard data:"}),(0,Rr.jsx)("p",{children:"string"===typeof s?s:JSON.stringify(s)}),(0,Rr.jsx)(Vn,{onClick:()=>r(Hf({from:c.from,to:c.to})),className:"mt-4",children:"Try Again"})]})]});if(!n||!n.salesSummary)return(0,Rr.jsxs)("div",{className:"p-4 bg-gray-50 max-w-[1600px] mx-auto",children:[(0,Rr.jsxs)("div",{className:"flex flex-col gap-3 mb-4",children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsx)("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600",children:"Dashboard Overview"}),(0,Rr.jsxs)(Vn,{variant:"outline",onClick:()=>e("/reports"),className:"flex items-center hover:bg-indigo-50 transition-colors text-base",children:[(0,Rr.jsx)($y,{className:"mr-2 h-4 w-4"}),"View Reports"]})]}),(0,Rr.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,Rr.jsxs)(fw,{value:o,onValueChange:l,children:[(0,Rr.jsx)(pw,{className:"w-[160px] h-10 text-base border-indigo-200 hover:border-indigo-300 transition-colors",children:(0,Rr.jsx)(mw,{placeholder:"Select date range"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"Today",children:"Today"}),(0,Rr.jsx)(yw,{value:"Yesterday",children:"Yesterday"}),(0,Rr.jsx)(yw,{value:"This Week",children:"This Week"}),(0,Rr.jsx)(yw,{value:"This Month",children:"This Month"}),(0,Rr.jsx)(yw,{value:"Last 7 Days",children:"Last 7 Days"}),(0,Rr.jsx)(yw,{value:"Custom",children:"Custom Range"})]})]}),"Custom"===o&&(0,Rr.jsx)(ju,{from:c.from,to:c.to,onSelect:u,onSearch:h,onCancel:f})]})]}),(0,Rr.jsx)("div",{className:"text-center py-10",children:"No data available for the selected period."})]});const m="bg-gradient-to-br from-blue-500 to-indigo-600",p="bg-gradient-to-br from-emerald-500 to-teal-600",x="bg-gradient-to-br from-purple-500 to-pink-600",v="bg-gradient-to-br from-amber-500 to-orange-600";return(0,Rr.jsxs)("div",{className:"p-4 bg-gray-50 max-w-[1600px] mx-auto",children:[(0,Rr.jsxs)("div",{className:"flex flex-col gap-3 mb-4",children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsx)("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600",children:"Dashboard Overview"}),(0,Rr.jsxs)(Vn,{variant:"outline",onClick:()=>e("/reports"),className:"flex items-center hover:bg-indigo-50 transition-colors text-base",children:[(0,Rr.jsx)($y,{className:"mr-2 h-4 w-4"}),"View Reports"]})]}),(0,Rr.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,Rr.jsxs)(fw,{value:o,onValueChange:l,children:[(0,Rr.jsx)(pw,{className:"w-[160px] h-10 text-base border-indigo-200 hover:border-indigo-300 transition-colors",children:(0,Rr.jsx)(mw,{placeholder:"Select date range"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"Today",children:"Today"}),(0,Rr.jsx)(yw,{value:"Yesterday",children:"Yesterday"}),(0,Rr.jsx)(yw,{value:"This Week",children:"This Week"}),(0,Rr.jsx)(yw,{value:"This Month",children:"This Month"}),(0,Rr.jsx)(yw,{value:"Last 7 Days",children:"Last 7 Days"}),(0,Rr.jsx)(yw,{value:"Custom",children:"Custom Range"})]})]}),"Custom"===o&&(0,Rr.jsx)(ju,{from:c.from,to:c.to,onSelect:u,onSearch:h,onCancel:f})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[(0,Rr.jsxs)(Kf,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300 bg-gradient-to-br from-indigo-50 to-blue-50",children:[(0,Rr.jsx)("div",{className:`h-1 ${m}`}),(0,Rr.jsx)(Jf,{className:"p-3",children:(0,Rr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium text-indigo-600",children:"Sales Summary"}),(0,Rr.jsxs)("h3",{className:"text-xl font-bold mt-0.5 text-gray-900",children:["\u20b9",n.salesSummary.totalRevenue.toLocaleString()]}),(0,Rr.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[n.salesSummary.totalSales," orders"]}),(0,Rr.jsxs)("p",{className:"text-sm text-gray-500",children:["Received: \u20b9",n.salesSummary.totalAmountReceived.toLocaleString()]}),(0,Rr.jsxs)("p",{className:"text-sm text-red-600",children:["Due: \u20b9",n.salesSummary.totalAmountDue.toLocaleString()," (",n.salesSummary.dueInvoicesCount," invoices)"]})]}),(0,Rr.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center bg-gradient-to-br from-blue-500/20 to-indigo-500/20",children:(0,Rr.jsx)(fm,{className:"h-4 w-4 text-indigo-600"})})]})})]}),(0,Rr.jsxs)(Kf,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300 bg-gradient-to-br from-emerald-50 to-teal-50",children:[(0,Rr.jsx)("div",{className:`h-1 ${p}`}),(0,Rr.jsx)(Jf,{className:"p-3",children:(0,Rr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium text-emerald-600",children:"Purchase Summary"}),(0,Rr.jsxs)("h3",{className:"text-xl font-bold mt-0.5 text-gray-900",children:["\u20b9",n.purchaseSummary.totalCost.toLocaleString()]}),(0,Rr.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[n.purchaseSummary.totalPurchases," purchases"]}),(0,Rr.jsxs)("p",{className:"text-sm text-gray-500",children:["Paid: \u20b9",n.purchaseSummary.totalAmountPaid.toLocaleString()]}),(0,Rr.jsxs)("p",{className:"text-sm text-orange-600",children:["Due: \u20b9",n.purchaseSummary.totalAmountDue.toLocaleString()," (",n.purchaseSummary.dueInvoicesCount," invoices)"]})]}),(0,Rr.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center bg-gradient-to-br from-emerald-500/20 to-teal-500/20",children:(0,Rr.jsx)(mm,{className:"h-4 w-4 text-emerald-600"})})]})})]}),(0,Rr.jsxs)(Kf,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300 bg-gradient-to-br from-amber-50 to-orange-50",children:[(0,Rr.jsx)("div",{className:`h-1 ${v}`}),(0,Rr.jsx)(Jf,{className:"p-3",children:(0,Rr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium text-amber-600",children:"Payment Summary"}),(0,Rr.jsxs)("h3",{className:"text-xl font-bold mt-0.5 "+(n.paymentSummary.netCashFlow>=0?"text-green-700":"text-red-700"),children:["\u20b9",n.paymentSummary.netCashFlow.toLocaleString(),(0,Rr.jsx)("span",{className:"text-sm font-normal text-gray-600",children:" (Net Flow)"})]}),(0,Rr.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:["In: \u20b9",n.paymentSummary.totalPaymentIn.toLocaleString()]}),(0,Rr.jsxs)("p",{className:"text-sm text-red-600",children:["Out: \u20b9",n.paymentSummary.totalPaymentOut.toLocaleString()]})]}),(0,Rr.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center bg-gradient-to-br from-amber-500/20 to-orange-500/20",children:(0,Rr.jsx)(qy,{className:"h-4 w-4 text-amber-600"})})]})})]}),(0,Rr.jsxs)(Kf,{className:"overflow-hidden hover:shadow-md transition-shadow duration-300 bg-gradient-to-br from-purple-50 to-pink-50",children:[(0,Rr.jsx)("div",{className:`h-1 ${x}`}),(0,Rr.jsx)(Jf,{className:"p-3",children:(0,Rr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium text-purple-600",children:"Financial Metrics"}),(0,Rr.jsxs)("div",{className:"mt-1 space-y-1",children:[(0,Rr.jsxs)("p",{className:"text-base  text-red-600 flex items-center",children:[(0,Rr.jsx)(Gy,{className:"h-4 w-4 mr-1"}),"Receivables: \u20b9",n.financialMetrics.totalReceivables.toLocaleString()]}),(0,Rr.jsxs)("p",{className:"text-base text-orange-600 flex items-center",children:[(0,Rr.jsx)(Ky,{className:"h-4 w-4 mr-1"}),"Payables: \u20b9",n.financialMetrics.totalPayables.toLocaleString()]})]})]}),(0,Rr.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-500/20 to-pink-500/20",children:(0,Rr.jsx)(Yy,{className:"h-4 w-4 text-purple-600"})})]})})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[(0,Rr.jsxs)(Kf,{className:"hover:shadow-md transition-shadow duration-300",children:[(0,Rr.jsx)(Yf,{className:"p-3 pb-1",children:(0,Rr.jsx)(Xf,{className:"text-base font-medium text-green-700",children:"Payment In by Method"})}),(0,Rr.jsx)(Jf,{className:"p-3 text-sm max-h-40 overflow-y-auto space-y-1",children:n.paymentSummary.paymentInMethods.length>0?n.paymentSummary.paymentInMethods.map((e=>(0,Rr.jsxs)("div",{className:"flex justify-between",children:[(0,Rr.jsx)("span",{className:"capitalize",children:e.method.toLowerCase()}),(0,Rr.jsxs)("span",{className:"font-medium",children:["\u20b9",e.totalAmount.toLocaleString()]})]},e.method))):(0,Rr.jsx)("p",{className:"text-sm text-gray-500",children:"No payments received in this period."})})]}),(0,Rr.jsxs)(Kf,{className:"hover:shadow-md transition-shadow duration-300",children:[(0,Rr.jsx)(Yf,{className:"p-3 pb-1",children:(0,Rr.jsx)(Xf,{className:"text-base font-medium text-red-700",children:"Payment Out by Method"})}),(0,Rr.jsx)(Jf,{className:"p-3 text-sm max-h-40 overflow-y-auto space-y-1",children:n.paymentSummary.paymentOutMethods.length>0?n.paymentSummary.paymentOutMethods.map((e=>(0,Rr.jsxs)("div",{className:"flex justify-between",children:[(0,Rr.jsx)("span",{className:"capitalize",children:e.method.toLowerCase()}),(0,Rr.jsxs)("span",{className:"font-medium",children:["\u20b9",e.totalAmount.toLocaleString()]})]},e.method))):(0,Rr.jsx)("p",{className:"text-sm text-gray-500",children:"No payments made in this period."})})]})]})]})},ww=rm("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Nw=rm("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),jw=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("div",{className:"relative w-full overflow-auto",children:(0,Rr.jsx)("table",{ref:t,className:Un("w-full caption-bottom text-sm",r),...n})})}));jw.displayName="Table";const Sw=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("thead",{ref:t,className:Un(" [&_tr]:bg-gray-100 [&_tr]:text-black [&_tr:hover]:bg-gray-100 [&_th]:text-black border",r),...n})}));Sw.displayName="TableHeader";const Cw=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("tbody",{ref:t,className:Un("[&_tr:last-child]:border-0",r),...n})}));Cw.displayName="TableBody";const kw=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("tfoot",{ref:t,className:Un("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})}));kw.displayName="TableFooter";const Ew=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("tr",{ref:t,className:Un("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})}));Ew.displayName="TableRow";const Tw=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("th",{ref:t,className:Un("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...n})}));Tw.displayName="TableHead";const Dw=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("td",{ref:t,className:Un("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...n})}));Dw.displayName="TableCell";t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("caption",{ref:t,className:Un("mt-4 text-sm text-muted-foreground",r),...n})})).displayName="TableCaption";const Aw=rm("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Pw=rm("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);function _w(e){const[r,n]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{const t=window.matchMedia(e);n(t.matches);const r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),r}function Rw(){const e=Z(),{staffMembers:t}=$e((e=>e.staff)),r=t,n=t=>{e("/addstaff",{state:{editMode:!0,staffData:t}})},a=t=>{e(`/staff/${t._id}`,{state:{staffData:t}})},s=_w("(max-width: 640px)");return(0,Rr.jsx)("div",{className:"w-full mx-auto p-0",children:(0,Rr.jsxs)(Kf,{className:"border-0 shadow-none",children:[(0,Rr.jsxs)(Yf,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(Xf,{children:"Staff List"}),(0,Rr.jsx)(Qf,{children:"Manage and view staff information"})]}),s&&(0,Rr.jsx)(Vn,{size:"icon",onClick:()=>e("/addstaff"),children:(0,Rr.jsx)(Aw,{className:"h-4 w-4"})})]}),(0,Rr.jsxs)(Jf,{className:"px-4",children:[(0,Rr.jsx)("div",{className:"flex flex-col space-y-4 md:flex-row md:justify-between md:items-center mb-4",children:!s&&(0,Rr.jsx)("div",{className:"flex justify-end w-full",children:(0,Rr.jsxs)(Vn,{variant:"outline",onClick:()=>e("/addstaff"),children:[(0,Rr.jsx)(ww,{className:"mr-2 h-4 w-4"})," Add Staff"]})})}),r.length>0?s?(0,Rr.jsx)(dp,{className:"h-[calc(100vh-200px)]",children:(0,Rr.jsx)("div",{className:"space-y-4",children:r.map((e=>{var t;return(0,Rr.jsx)(Kf,{className:"p-4",children:(0,Rr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-4 cursor-pointer",onClick:()=>a(e),children:[(0,Rr.jsx)(sx,{children:(0,Rr.jsx)(ox,{children:null===(t=e.name.split(" ").filter(((e,t,r)=>0===t||t===r.length-1)).map((e=>e[0].toUpperCase())))||void 0===t?void 0:t.join("")})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("h3",{className:"font-semibold hover:underline",children:e.name}),(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:e.role})]})]}),(0,Rr.jsxs)("div",{className:"flex space-x-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>a(e),children:(0,Rr.jsx)(dm,{className:"h-4 w-4"})}),(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>n(e),children:(0,Rr.jsx)(Pw,{className:"h-4 w-4"})})]})]})},e._id)}))})}):(0,Rr.jsx)("div",{className:"overflow-x-auto",children:(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:"w-[50%]",children:"Name"}),(0,Rr.jsx)(Tw,{className:"w-[35%]",children:"Role"}),(0,Rr.jsx)(Tw,{className:"w-[15%]",children:"Actions"})]})}),(0,Rr.jsx)(Cw,{children:r.map((e=>{var t;return(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Dw,{className:"font-medium",children:(0,Rr.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer hover:underline",onClick:()=>a(e),children:[(0,Rr.jsx)(sx,{className:"hidden md:block",children:(0,Rr.jsx)(ox,{children:null===(t=e.name.split(" ").filter(((e,t,r)=>0===t||t===r.length-1)).map((e=>e[0].toUpperCase())))||void 0===t?void 0:t.join("")})}),(0,Rr.jsx)("span",{className:"capitalize",children:e.name})]})}),(0,Rr.jsx)(Dw,{className:"font-semibold uppercase",children:e.role}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsxs)("div",{className:"flex space-x-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"sm",onClick:()=>a(e),children:(0,Rr.jsx)(dm,{className:"h-4 w-4"})}),(0,Rr.jsx)(Vn,{variant:"ghost",size:"sm",onClick:()=>n(e),children:(0,Rr.jsx)(Pw,{className:"h-4 w-4"})})]})})]},e._id)}))})]})}):(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 text-center",children:[(0,Rr.jsx)(Nw,{className:"h-10 w-10 text-muted-foreground mb-4"}),(0,Rr.jsx)("p",{className:"text-lg font-medium",children:"No staff members found"}),(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Add new staff members to see them listed here."})]})]})]})})}const Iw=()=>{const e=Z();return(0,Rr.jsxs)("div",{className:"p-4 gap-4 flex",children:[(0,Rr.jsx)(Vn,{onClick:()=>e("/settings/pharmacy-info"),children:"Pharmacy Info"}),(0,Rr.jsx)(Vn,{onClick:()=>e("/settings/config"),children:"Configure"}),(0,Rr.jsx)(Vn,{onClick:()=>e("/settings/manage-groups"),children:"Manage Groups"})]})},Mw=rm("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Ow=rm("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Fw=rm("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Lw=rm("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),Bw=rm("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Uw=rm("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),zw=rm("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Vw=rm("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Hw=rm("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),$w=rm("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Ww=Hr("inline-flex items-center rounded-[6px] border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",warning:"border-transparent bg-orange-500 text-white shadow hover:bg-orange-500/80",success:"border-transparent bg-[#4BB543] text-white shadow hover:bg-[#4BB543]/80"}},defaultVariants:{variant:"default"}});function qw(e){let{className:t,variant:r,...n}=e;return(0,Rr.jsx)("div",{className:Un(Ww({variant:r}),t),...n})}var Gw="Tabs",[Kw,Yw]=$n(Gw,[gx]),Xw=gx(),[Qw,Jw]=Kw(Gw),Zw=t.forwardRef(((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:s,orientation:i="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=Sm(o),[u,h]=Si({prop:n,onChange:a,defaultProp:s});return(0,Rr.jsx)(Qw,{scope:r,baseId:Na(),value:u,onValueChange:h,orientation:i,dir:d,activationMode:l,children:(0,Rr.jsx)(qn.div,{dir:d,"data-orientation":i,...c,ref:t})})}));Zw.displayName=Gw;var eN="TabsList",tN=t.forwardRef(((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,s=Jw(eN,r),i=Xw(r);return(0,Rr.jsx)(Ex,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:n,children:(0,Rr.jsx)(qn.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})}));tN.displayName=eN;var rN="TabsTrigger",nN=t.forwardRef(((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...s}=e,i=Jw(rN,r),o=Xw(r),l=iN(i.baseId,n),c=oN(i.baseId,n),d=n===i.value;return(0,Rr.jsx)(Tx,{asChild:!0,...o,focusable:!a,active:d,children:(0,Rr.jsx)(qn.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...s,ref:t,onMouseDown:Hn(e.onMouseDown,(e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(n)})),onKeyDown:Hn(e.onKeyDown,(e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(n)})),onFocus:Hn(e.onFocus,(()=>{const e="manual"!==i.activationMode;d||a||!e||i.onValueChange(n)}))})})}));nN.displayName=rN;var aN="TabsContent",sN=t.forwardRef(((e,r)=>{const{__scopeTabs:n,value:a,forceMount:s,children:i,...o}=e,l=Jw(aN,n),c=iN(l.baseId,a),d=oN(l.baseId,a),u=a===l.value,h=t.useRef(u);return t.useEffect((()=>{const e=requestAnimationFrame((()=>h.current=!1));return()=>cancelAnimationFrame(e)}),[]),(0,Rr.jsx)(Ni,{present:s||u,children:t=>{let{present:n}=t;return(0,Rr.jsx)(qn.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!n,id:d,tabIndex:0,...o,ref:r,style:{...e.style,animationDuration:h.current?"0s":void 0},children:n&&i})}})}));function iN(e,t){return`${e}-trigger-${t}`}function oN(e,t){return`${e}-content-${t}`}sN.displayName=aN;var lN=tN,cN=nN,dN=sN;const uN=Zw,hN=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(lN,{ref:t,className:Un("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",r),...n})}));hN.displayName=lN.displayName;const fN=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(cN,{ref:t,className:Un("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",r),...n})}));fN.displayName=cN.displayName;const mN=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(dN,{ref:t,className:Un("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...n})}));function pN(){var e,t,r,n,a,s,i,o,l,c,d;const u=Q(),h=Z(),f=(null===(e=u.state)||void 0===e?void 0:e.staffData)||{};return(0,Rr.jsxs)("div",{className:"space-y-2 px-4 ",children:[(0,Rr.jsx)("div",{className:"flex justify-between items-center",children:(0,Rr.jsxs)("div",{className:"flex items-center",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>h(-1),"aria-label":"Go back",children:(0,Rr.jsx)(Mw,{className:"h-4 w-4"})}),(0,Rr.jsx)("h1",{className:"text-xl font-bold",children:"Staff Profile"})]})}),(0,Rr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,Rr.jsxs)(Kf,{className:"lg:col-span-2",children:[(0,Rr.jsx)(Yf,{}),(0,Rr.jsxs)(Jf,{className:"grid gap-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rr.jsxs)(sx,{className:"h-16 w-16",children:[(0,Rr.jsx)(ix,{src:"/placeholder.svg?height=64&width=64",alt:f.name}),(0,Rr.jsx)(ox,{children:f.name.split(" ").map((e=>e[0])).join("")})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("h2",{className:"text-xl font-bold",children:f.name}),(0,Rr.jsx)("p",{className:"text-gray-500",children:null===(t=f.roles)||void 0===t?void 0:t.join(", ")})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(Ow,{className:"h-4 w-4 text-gray-500"}),(0,Rr.jsx)("span",{children:f.email})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(Fw,{className:"h-4 w-4 text-gray-500"}),(0,Rr.jsx)("span",{children:f.username})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(Lw,{className:"h-4 w-4 text-gray-500"}),(0,Rr.jsx)("span",{children:null===(r=f.department)||void 0===r?void 0:r.join(", ")})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(Bw,{className:"h-4 w-4 text-gray-500"}),(0,Rr.jsxs)("span",{children:["Joined on ",f.hireDate]})]})]})]})]}),(0,Rr.jsxs)(Kf,{className:"lg:col-span-2",children:[(0,Rr.jsx)(Yf,{children:(0,Rr.jsx)(Xf,{children:"Current Status"})}),(0,Rr.jsxs)(Jf,{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsx)("span",{className:"font-semibold",children:"Shift Type:"}),(0,Rr.jsx)("span",{children:null===(n=f.shift)||void 0===n?void 0:n.type})]}),(0,Rr.jsxs)("div",{className:"flex align-center justify-between",children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(Uw,{className:"h-4 w-4 text-green-500"}),(0,Rr.jsx)("span",{className:"font-semibold",children:"Time In:"}),(0,Rr.jsx)("span",{children:null===(a=f.shift)||void 0===a?void 0:a.hours.start})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(Uw,{className:"h-4 w-4 text-red-500"}),(0,Rr.jsx)("span",{className:"font-semibold",children:"Time Out:"}),(0,Rr.jsx)("span",{children:null===(s=f.shift)||void 0===s?void 0:s.hours.end})]})]})]})]}),(0,Rr.jsxs)(Kf,{className:"lg:col-span-1",children:[(0,Rr.jsx)(Yf,{children:(0,Rr.jsx)(Xf,{children:"Employee Info"})}),(0,Rr.jsxs)(Jf,{className:"space-y-2",children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsx)("span",{className:"font-semibold",children:"Employee ID:"}),(0,Rr.jsx)("span",{children:f.employeeID})]}),(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsx)("span",{className:"font-semibold",children:"Experience:"}),(0,Rr.jsxs)("span",{children:[f.yearsOfExperience," years"]})]})]})]})]}),(0,Rr.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,Rr.jsxs)(uN,{defaultValue:"personal",className:"w-full",children:[(0,Rr.jsxs)(hN,{className:"mb-2 flex flex-wrap",children:[(0,Rr.jsxs)(fN,{value:"personal",className:"flex-grow",children:[(0,Rr.jsx)("span",{className:"hidden sm:inline",children:"Personal Info"}),(0,Rr.jsx)("span",{className:"sm:hidden",children:"Personal"})]}),(0,Rr.jsxs)(fN,{value:"payroll",className:"flex-grow",children:[(0,Rr.jsx)("span",{className:"hidden sm:inline",children:"Payroll Info"}),(0,Rr.jsx)("span",{className:"sm:hidden",children:"Payroll"})]}),(0,Rr.jsxs)(fN,{value:"education",className:"flex-grow",children:[(0,Rr.jsx)("span",{className:"hidden sm:inline",children:"Education & Certifications"}),(0,Rr.jsx)("span",{className:"sm:hidden",children:"Education"})]})]}),(0,Rr.jsx)(mN,{value:"personal",children:(0,Rr.jsxs)(Kf,{children:[(0,Rr.jsx)(Yf,{children:(0,Rr.jsx)(Xf,{children:"Personal Information"})}),(0,Rr.jsx)(Jf,{children:(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(Bw,{className:"h-4 w-4 text-gray-500"}),(0,Rr.jsx)("span",{className:"font-semibold",children:"Date of Birth:"}),(0,Rr.jsx)("span",{children:f.dateOfBirth})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(Fw,{className:"h-4 w-4 text-gray-500"}),(0,Rr.jsx)("span",{className:"font-semibold",children:"Gender:"}),(0,Rr.jsx)("span",{children:f.gender})]}),(0,Rr.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,Rr.jsx)(zw,{className:"h-4 w-4 text-gray-500 mt-1"}),(0,Rr.jsx)("span",{className:"font-semibold",children:"Address:"}),(0,Rr.jsx)("span",{children:f.address})]})]})})]})}),(0,Rr.jsx)(mN,{value:"payroll",children:(0,Rr.jsxs)(Kf,{children:[(0,Rr.jsx)(Yf,{children:(0,Rr.jsx)(Xf,{children:"Payroll Information"})}),(0,Rr.jsx)(Jf,{children:(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(Vw,{className:"h-4 w-4 text-gray-500"}),(0,Rr.jsx)("span",{className:"font-semibold",children:"Salary:"}),(0,Rr.jsxs)("span",{children:["\u20b9",f.salary]})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(zw,{className:"h-4 w-4 text-gray-500"}),(0,Rr.jsx)("span",{className:"font-semibold",children:"Bank Name:"}),(0,Rr.jsx)("span",{children:null===(i=f.payrollInfo)||void 0===i?void 0:i.bankName})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(nm,{className:"h-4 w-4 text-gray-500"}),(0,Rr.jsx)("span",{className:"font-semibold",children:"Account Number:"}),(0,Rr.jsx)("span",{children:null===(o=f.payrollInfo)||void 0===o?void 0:o.accountNumber})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(nm,{className:"h-4 w-4 text-gray-500"}),(0,Rr.jsx)("span",{className:"font-semibold",children:"IFSC Code:"}),(0,Rr.jsx)("span",{children:null===(l=f.payrollInfo)||void 0===l?void 0:l.ifscCode})]})]})})]})}),(0,Rr.jsx)(mN,{value:"education",children:(0,Rr.jsxs)(Kf,{children:[(0,Rr.jsxs)(Yf,{children:[(0,Rr.jsx)(Xf,{children:"Education & Certifications"}),(0,Rr.jsx)(Qf,{children:"Academic background and professional certifications"})]}),(0,Rr.jsx)(Jf,{children:(0,Rr.jsxs)("div",{className:"space-y-6",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Qualifications"}),(null===(c=f.qualifications)||void 0===c?void 0:c.length)>0?(0,Rr.jsx)("ul",{className:"space-y-2",children:f.qualifications.map(((e,t)=>(0,Rr.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,Rr.jsx)(Hw,{className:"h-5 w-5 text-blue-500 mt-0.5"}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"font-medium",children:e})})]},t)))}):(0,Rr.jsx)("p",{children:"No qualification information available."})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Certifications"}),(null===(d=f.certifications)||void 0===d?void 0:d.length)>0?(0,Rr.jsx)("ul",{className:"space-y-2",children:f.certifications.map(((e,t)=>(0,Rr.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,Rr.jsx)($w,{className:"h-5 w-5 text-green-500 mt-0.5"}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"font-medium",children:e})})]},t)))}):(0,Rr.jsx)("p",{children:"No certification information available."})]})]})})]})})]})})]})}mN.displayName=dN.displayName;var xN=t.forwardRef(((e,t)=>(0,Rr.jsx)(qn.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));xN.displayName="Label";var vN=xN;const gN=Hr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),yN=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(vN,{ref:t,className:Un(gN(),r),...n})}));function bN(){const{toast:e}=$g(),r=rt(),n=Z(),a=Q(),{staffId:s}=ee(),{status:i,error:o}=$e((e=>e.staff)),[l,c]=(0,t.useState)({name:"",username:"",email:"",password:"",mobileNumber:"",role:"user"}),[d,u]=(0,t.useState)(!1);(0,t.useEffect)((()=>{var e,t;if(null!==(e=a.state)&&void 0!==e&&e.editMode&&null!==(t=a.state)&&void 0!==t&&t.staffData){u(!0);const{name:e,username:t,email:r,_id:n,mobileNumber:s,role:i}=a.state.staffData;c({name:e,username:t,email:r,_id:n,mobileNumber:s,role:i||"user"})}else s&&u(!0)}),[a,s]);const[h,f]=(0,t.useState)({}),m=e=>{const{id:t,value:r}=e.target;c({...l,[t]:r})};return(0,Rr.jsxs)("div",{className:"max-w-[800px] mx-auto p-4",children:[" ",(0,Rr.jsxs)("h2",{className:"text-xl font-bold mb-0",children:[d?"Edit":"Add New"," Staff Member"]}),(0,Rr.jsxs)("p",{className:"text-gray-600 mb-4",children:["Fill in the details of the ",d?"existing":"new"," staff member"]}),(0,Rr.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{const e={};return l.name||(e.name="Name is required"),l.username||(e.username="Username is required"),l.email||(e.email="Email is required"),l.mobileNumber||(e.mobileNumber="Mobile number is required"),l.role||(e.role="Role is required."),d||l.password||(e.password="Password is required"),f(e),0===Object.keys(e).length})())try{const t={name:l.name,username:l.username,email:l.email,mobileNumber:l.mobileNumber,role:l.role};l.password&&(t.password=l.password),d?(await r(Pu({id:l._id,data:t})).unwrap(),e({variant:"success",title:"Staff Updated",description:"Staff member has been updated successfully."})):(await r(Au(t)).unwrap(),e({variant:"success",title:"Staff Added",description:"Staff member has been added successfully."})),n("/staff")}catch(eZ){e({title:"Error",description:eZ.message||eZ||`Failed to ${d?"update":"add"} staff member. Please try again.`,variant:"destructive"})}},children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"name",children:"Full Name"}),(0,Rr.jsx)(Gf,{id:"name",placeholder:"John Doe",value:l.name||"",onChange:m,className:"font-semibold"}),h.name&&(0,Rr.jsx)("span",{className:"text-red-500 text-sm",children:h.name})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"username",children:"Username"}),(0,Rr.jsx)(Gf,{id:"username",placeholder:"johndoe",value:l.username||"",onChange:m,disabled:d&&l.username,className:"font-semibold"}),h.username&&(0,Rr.jsx)("span",{className:"text-red-500 text-sm",children:h.username})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"email",children:"Email"}),(0,Rr.jsx)(Gf,{id:"email",type:"email",placeholder:"john@example.com",value:l.email||"",onChange:m,className:"font-semibold"}),h.email&&(0,Rr.jsx)("span",{className:"text-red-500 text-sm",children:h.email})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"mobileNumber",children:"Mobile Number"}),(0,Rr.jsx)(Gf,{id:"mobileNumber",type:"tel",placeholder:"e.g., 9876543210",value:l.mobileNumber||"",onChange:m,className:"font-semibold"}),h.mobileNumber&&(0,Rr.jsx)("span",{className:"text-red-500 text-sm",children:h.mobileNumber})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"role",children:"Role"}),(0,Rr.jsxs)(fw,{onValueChange:e=>((e,t)=>{c("role"===e?{...l,role:t||"user"}:{...l,[e]:t})})("role",e),value:l.role,children:[(0,Rr.jsx)(pw,{className:"font-semibold",children:(0,Rr.jsx)(mw,{placeholder:"Select a role"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"user",children:"User"}),(0,Rr.jsx)(yw,{value:"doctor",children:"Doctor"})]})]}),h.role&&(0,Rr.jsx)("span",{className:"text-red-500 text-sm",children:h.role})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"password",children:d?"New Password (optional)":"Password"}),(0,Rr.jsx)(Gf,{id:"password",type:"password",placeholder:"********",value:l.password||"",onChange:m,className:"font-semibold"}),h.password&&(0,Rr.jsx)("span",{className:"text-red-500 text-sm",children:h.password})]})]}),(0,Rr.jsxs)("div",{className:"mt-6 flex justify-end space-x-4",children:[" ",(0,Rr.jsx)(Vn,{type:"button",variant:"outline",onClick:()=>{c({name:"",username:"",email:"",password:"",mobileNumber:"",role:"user"}),f({})},children:"Reset"}),(0,Rr.jsx)(Vn,{type:"submit",disabled:"loading"===i,children:"loading"===i?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(um,{className:"mr-2 h-4 w-4 animate-spin"}),d?"Updating...":"Adding..."]}):d?"Update Staff":"Add Staff"})]})]})]})}yN.displayName=vN.displayName;const wN=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)("textarea",{className:Un("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})}));wN.displayName="Textarea";const NN=rm("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),jN=rm("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),SN=e=>{let{label:t,name:r,value:n,onChange:a,type:s="text",required:i=!1,disabled:o=!1}=e;return(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:r,className:"text-sm font-medium",children:t}),(0,Rr.jsx)(Gf,{id:r,name:r,type:s,value:n,onChange:a,placeholder:`Enter ${t.toLowerCase()}`,required:i,disabled:o,className:"w-full"})]})},CN=e=>{let{label:t,name:r,value:n,onChange:a,required:s=!1}=e;return(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:r,className:"text-sm font-medium",children:t}),(0,Rr.jsx)(wN,{id:r,name:r,value:n,onChange:a,placeholder:`Enter ${t.toLowerCase()}`,required:s,className:"w-full"})]})},kN=e=>{let{label:t,categories:r,newCategory:n,setNewCategory:a,onAdd:s,onRemove:i}=e;return(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:t}),(0,Rr.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,Rr.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s()},className:"flex space-x-2",children:[(0,Rr.jsx)(Gf,{value:n,onChange:e=>a(e.target.value),placeholder:"Enter a new category",className:"flex-grow"}),(0,Rr.jsx)(Vn,{type:"submit",disabled:!n.trim(),children:(0,Rr.jsx)(Aw,{size:16})})]}),(0,Rr.jsx)(dp,{className:"h-[150px] w-full border rounded-md p-4",children:(null===r||void 0===r?void 0:r.length)>0?(0,Rr.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map(((e,t)=>(0,Rr.jsxs)(qw,{variant:"secondary",className:"text-sm py-1 px-2 flex items-center space-x-1",children:[(0,Rr.jsx)("span",{children:e}),(0,Rr.jsx)("button",{onClick:()=>i(t),className:"ml-1 text-gray-500 hover:text-red-500 focus:outline-none",children:(0,Rr.jsx)(jN,{size:14})})]},t)))}):(0,Rr.jsx)("p",{className:"text-gray-500 text-sm",children:"No categories added yet."})})]})]})},EN=()=>{const{toast:e}=$g(),r=rt(),{pharmacyInfo:n,pharmacyInfoStatus:a,updateStatus:s}=$e((e=>e.pharmacy)),[i,o]=(0,t.useState)({name:"",logo:"",address:"",contactNumber:"",email:"",website:"",pharmacyId:"",gstNumber:"",drugLicenceNumber:"",itemExpiryThreshold:3,itemCategories:[]}),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(null),[h,f]=(0,t.useState)(null);(0,t.useEffect)((()=>{"idle"===a&&r(rh())}),[r,a]),(0,t.useEffect)((()=>{n&&(o((e=>({...e,...n}))),u(null))}),[n]);const m=e=>{const{name:t,value:r}=e.target;o((e=>({...e,[t]:r})))};return(0,Rr.jsxs)(Kf,{className:"w-full",children:[(0,Rr.jsx)(Yf,{className:"border-b pb-3",children:(0,Rr.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[(0,Rr.jsxs)("div",{className:"mb-4 sm:mb-0",children:[(0,Rr.jsx)(Xf,{className:"text-xl sm:text-2xl font-bold",children:"Pharmacy Information Management"}),(0,Rr.jsx)(Qf,{className:"text-gray-500",children:"Manage your pharmacy's details"})]}),(0,Rr.jsx)(Vn,{onClick:async t=>{t.preventDefault();try{let t={...i};if(h){const r=await(async()=>{if(!h)return null;try{const e=await fetch(`${Nu}/api/pharmacies/getUploadUrl`,{credentials:"include"});if(!e.ok)throw new Error("Failed to upload logo");const t=await e.json();if((await fetch(t.url,{method:"PUT",body:h,headers:{"Content-Type":"image/png"}})).ok)return`https://thousandwayspharmacy.s3.ap-south-1.amazonaws.com/${t.key}`;throw new Error("Failed to upload logo")}catch(t){return console.error("Error uploading logo:",t),e({title:"Logo Upload Failed",description:"Failed to upload the logo. Please try again.",variant:"destructive"}),null}})();r&&(t.logo=r)}await r(nh(t)).unwrap(),e({variant:"success",title:"Updated Successfully",description:"Pharmacy information has been updated successfully."})}catch(n){e({title:"Unable to update",description:"Failed to update pharmacy information. Please try again.",variant:"destructive"})}},disabled:"loading"===s,className:"w-full sm:w-auto",children:"loading"===s?"Saving...":"Save Changes"})]})}),(0,Rr.jsx)(Jf,{className:"pt-6",children:(0,Rr.jsxs)(uN,{defaultValue:"pharmacy",className:"w-full",children:[(0,Rr.jsxs)(hN,{className:"grid w-full sm:w-1/2 grid-cols-2 mb-6",children:[(0,Rr.jsxs)(fN,{value:"pharmacy",className:"text-sm font-medium",children:[(0,Rr.jsx)("span",{className:"hidden sm:inline",children:"Pharmacy Information"}),(0,Rr.jsx)("span",{className:"sm:hidden",children:"Pharmacy"})]}),(0,Rr.jsxs)(fN,{value:"pharmacySetting",className:"text-sm font-medium",children:[(0,Rr.jsx)("span",{className:"hidden sm:inline",children:"Detailed Setting"}),(0,Rr.jsx)("span",{className:"sm:hidden",children:"Detailed Setting"})]})]}),(0,Rr.jsx)(mN,{value:"pharmacy",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,Rr.jsxs)("div",{className:"sm:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,Rr.jsx)(SN,{label:"Pharmacy ID",name:"pharmacyId",value:i.pharmacyId,onChange:m,disabled:!0}),(0,Rr.jsx)(SN,{label:"Pharmacy Name",name:"name",value:i.name,onChange:m,required:!0}),(0,Rr.jsx)(SN,{label:"Contact Number",name:"contactNumber",value:i.contactNumber,onChange:m,required:!0}),(0,Rr.jsx)(SN,{label:"Email",name:"email",type:"email",value:i.email,onChange:m,required:!0}),(0,Rr.jsx)(SN,{label:"Website",name:"website",type:"url",value:i.website,onChange:m}),(0,Rr.jsx)(SN,{label:"GST Number",name:"gstNumber",value:i.gstNumber,onChange:m}),(0,Rr.jsx)(SN,{label:"Drug Licence Number",name:"drugLicenceNumber",value:i.drugLicenceNumber,onChange:m}),(0,Rr.jsx)(CN,{label:"Address",name:"address",value:i.address,onChange:m,required:!0})]}),(0,Rr.jsxs)("div",{className:"col-span-1",children:[(0,Rr.jsxs)("div",{className:"mb-6",children:[(0,Rr.jsx)(yN,{htmlFor:"logo-upload",className:"text-sm font-medium",children:"Pharmacy Logo"}),(0,Rr.jsx)("div",{className:"mt-2 flex justify-center items-center rounded-lg border border-dashed border-gray-900/25 w-full sm:w-40 h-40 cursor-pointer",onClick:()=>{document.getElementById("logo-upload").click()},children:(0,Rr.jsxs)("div",{className:"text-center",children:[d?(0,Rr.jsx)("img",{src:d,alt:"Logo Preview",className:"mx-auto h-32 w-32 object-cover"}):null!==n&&void 0!==n&&n.logoUsable?(0,Rr.jsx)("img",{src:n.logoUsable,alt:"Pharmacy Logo",className:"mx-auto h-32 w-32 object-cover"}):i.logo?(0,Rr.jsx)("img",{src:i.logo,alt:"Pharmacy Logo",className:"mx-auto h-32 w-32 object-cover"}):(0,Rr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Rr.jsx)(NN,{className:"h-10 w-10 text-gray-300","aria-hidden":"true"}),(0,Rr.jsx)("span",{className:"mt-2 block text-sm font-semibold text-gray-900",children:"Upload"})]}),(0,Rr.jsx)("input",{id:"logo-upload",name:"logo-upload",type:"file",className:"hidden",onChange:e=>{const t=e.target.files[0];if(t){f(t);const e=new FileReader;e.onloadend=()=>{u(e.result)},e.readAsDataURL(t)}},accept:"image/*"})]})})]}),(0,Rr.jsx)(kN,{label:"Pharmacy Service Categories",categories:i.pharmacyServiceCategories,newCategory:l,setNewCategory:c,onAdd:()=>{return e="pharmacyServiceCategories",void(l.trim()&&(o((t=>({...t,[e]:[...t[e],l.trim()]}))),c("")));var e},onRemove:e=>((e,t)=>{o((r=>({...r,[e]:r[e].filter(((e,r)=>r!==t))})))})("pharmacyServiceCategories",e)})]})]})}),(0,Rr.jsx)(mN,{value:"pharmacySetting"})]})})]})},TN=rm("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]),DN=rm("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),AN=rm("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),PN=rm("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),_N=rm("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);function RN(){const e=Z(),[r,n]=(0,t.useState)(!1),a=()=>{n(!1)};return(0,Rr.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,Rr.jsxs)("header",{className:"px-2 lg:px-6 h-16 flex items-center justify-between bg-white shadow-sm",children:[(0,Rr.jsxs)("div",{className:"flex items-center",children:[(0,Rr.jsxs)(Iy,{open:r,onOpenChange:n,children:[(0,Rr.jsx)(My,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"ghost",size:"icon",className:"md:hidden mr-0",children:[(0,Rr.jsx)(om,{className:"h-6 w-6"}),(0,Rr.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,Rr.jsx)(By,{side:"left",children:(0,Rr.jsxs)("nav",{className:"flex flex-col gap-4 mt-4",children:[(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",onClick:a,children:"Home"}),(0,Rr.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:t=>((t,r)=>{t.preventDefault(),a(),"scrollToFeatures"===r&&setTimeout((()=>{e("/",{state:{scrollToFeatures:!0}})}),300)})(t,"scrollToFeatures"),children:"Features"}),(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",onClick:a,children:"About"}),(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",onClick:a,children:"Contact"})]})})]}),(0,Rr.jsxs)(Te,{className:"flex items-center justify-center",to:"/",children:[(0,Rr.jsx)(qg,{className:"h-6 w-6 sm:h-7 sm:w-7 text-blue-600"}),(0,Rr.jsx)("span",{className:"ml-2 text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:"PharmaBill Pro"})]})]}),(0,Rr.jsxs)("nav",{className:"hidden md:flex items-center space-x-4",children:[(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",children:"Home"}),(0,Rr.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:t=>{t.preventDefault(),e("/",{state:{scrollToFeatures:!0}})},children:"Features"}),(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",children:"About"}),(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",children:"Contact"})]}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",className:"md:hidden mr-2",onClick:()=>{e("/",{state:{scrollToLogin:!0}})},children:[(0,Rr.jsx)(lm,{className:"h-4 w-4 mr-2"}),"Login"]})]}),(0,Rr.jsxs)("main",{className:"flex-1",children:[(0,Rr.jsx)("section",{className:"w-full py-12 sm:py-16 md:py-20 lg:py-32 bg-white",children:(0,Rr.jsx)("div",{className:"container px-4 md:px-6 mx-auto",children:(0,Rr.jsx)("div",{className:"flex flex-col items-center justify-center space-y-4 text-center",children:(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold tracking-tighter",children:"About PharmaBill Pro"}),(0,Rr.jsx)("p",{className:"max-w-[900px] text-sm sm:text-base md:text-lg lg:text-xl text-gray-500",children:"Streamlining pharmacy operations with intelligent billing and inventory management solutions."})]})})})}),(0,Rr.jsx)("section",{className:"w-full py-8 sm:py-12 md:py-16 lg:py-20 bg-gray-100",children:(0,Rr.jsxs)("div",{className:"container px-4 md:px-6 mx-auto",children:[(0,Rr.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold tracking-tighter text-center mb-8 sm:mb-12",children:"Complete Pharmacy Management Solution"}),(0,Rr.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 lg:gap-12",children:[(0,Rr.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,Rr.jsx)(TN,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Prescription Management"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Efficiently process prescriptions and manage patient medication records with ease."})]}),(0,Rr.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,Rr.jsx)(sm,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Insurance Processing"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Seamlessly handle insurance claims and verify coverage in real-time."})]}),(0,Rr.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,Rr.jsx)(DN,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Inventory Control"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Track medication stock levels and automate reordering processes."})]})]})]})}),(0,Rr.jsx)("section",{className:"w-full py-8 sm:py-12 md:py-16 lg:py-20 bg-blue-50",children:(0,Rr.jsxs)("div",{className:"container px-4 md:px-6 mx-auto",children:[(0,Rr.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold tracking-tighter text-center mb-8",children:"Our Impact on Businesses"}),(0,Rr.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 lg:gap-12",children:[(0,Rr.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,Rr.jsx)(Uw,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Time Savings"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Pharmacies save up to 75% of time spent on billing and prescription processing."})]}),(0,Rr.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,Rr.jsx)(Gy,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Increased Accuracy"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Reduce medication errors by 99% with our automated verification system."})]}),(0,Rr.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,Rr.jsx)(AN,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"HIPAA Compliant"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Ensure patient data protection with our secure, compliant platform."})]})]})]})}),(0,Rr.jsx)("section",{className:"w-full py-8 sm:py-12 md:py-16 lg:py-20 bg-gray-100",children:(0,Rr.jsxs)("div",{className:"container px-4 md:px-6 mx-auto",children:[(0,Rr.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold tracking-tighter text-center mb-8 sm:mb-12",children:"Our Core Values"}),(0,Rr.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 lg:gap-12",children:[(0,Rr.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,Rr.jsx)(am,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Patient-First Approach"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"We prioritize patient care by streamlining medication dispensing and billing processes."})]}),(0,Rr.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,Rr.jsx)(PN,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Healthcare Integration"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Seamlessly connect with healthcare providers and insurance networks."})]}),(0,Rr.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,Rr.jsx)(_N,{className:"h-10 w-10 sm:h-12 sm:w-12 text-blue-600"}),(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Quality Assurance"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Maintain the highest standards in pharmaceutical care and service delivery."})]})]})]})}),(0,Rr.jsx)("section",{className:"w-full py-8 sm:py-12 md:py-16 lg:py-20",children:(0,Rr.jsxs)("div",{className:"container px-4 md:px-6 mx-auto",children:[(0,Rr.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold tracking-tighter text-center mb-8 sm:mb-12",children:"Why Choose Our Solution"}),(0,Rr.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2 lg:gap-12",children:[(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Drug Database Integration"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Access comprehensive drug information, interactions, and pricing data in real-time."})]}),(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Scalable Solution"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Perfect for independent pharmacies and large pharmacy chains alike."})]}),(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Customizable Workflows"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Adapt the system to your pharmacy's specific needs and processes."})]}),(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Expert Support"}),(0,Rr.jsx)("p",{className:"text-sm sm:text-base text-gray-500",children:"Get dedicated support from pharmacy technology specialists 24/7."})]})]})]})}),(0,Rr.jsx)("section",{className:"w-full py-8 sm:py-12 md:py-16 lg:py-20",children:(0,Rr.jsx)("div",{className:"container px-4 md:px-6 mx-auto",children:(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 text-center",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold tracking-tighter",children:"Our Team"}),(0,Rr.jsx)("p",{className:"max-w-[900px] text-sm sm:text-base md:text-lg lg:text-xl text-gray-500",children:"Behind PharmaBill Pro is a dedicated team of pharmacists, healthcare technologists, and industry experts committed to revolutionizing pharmacy management."})]}),(0,Rr.jsx)("div",{className:"w-full max-w-sm space-y-2",children:(0,Rr.jsxs)(Vn,{className:"w-full bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{e("/contact",{state:{scrollToContact:!0}})},children:[(0,Rr.jsx)(Ow,{className:"mr-2 h-4 w-4"})," Contact Us"]})})]})})})]}),(0,Rr.jsxs)("footer",{className:"flex flex-col gap-2 sm:flex-row py-4 sm:py-6 w-full shrink-0 items-center px-4 md:px-6 border-t bg-white",children:[(0,Rr.jsx)("p",{className:"text-xs text-gray-500",children:"\xa9 2024 PharmaBill Pro. All rights reserved."}),(0,Rr.jsxs)("nav",{className:"sm:ml-auto flex gap-4 sm:gap-6",children:[(0,Rr.jsx)(Te,{className:"text-xs hover:underline underline-offset-4",href:"#",children:"Terms of Service"}),(0,Rr.jsx)(Te,{className:"text-xs hover:underline underline-offset-4",href:"#",children:"Privacy"})]})]})]})}const IN=rm("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),MN=rm("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ON=rm("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),FN=rm("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),LN=rm("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);function BN(){const e=Z(),r=Q(),n=(0,t.useRef)(null),[a,s]=(0,t.useState)(!1);(0,t.useEffect)((()=>{var e;null!==(e=r.state)&&void 0!==e&&e.scrollToContact&&n.current&&n.current.scrollIntoView({behavior:"smooth"})}),[r]);const i=()=>{s(!1)};return(0,Rr.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,Rr.jsxs)("header",{className:"px-2 lg:px-6 h-16 flex items-center justify-between bg-white shadow-sm",children:[(0,Rr.jsxs)("div",{className:"flex items-center",children:[(0,Rr.jsxs)(Iy,{open:a,onOpenChange:s,children:[(0,Rr.jsx)(My,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"ghost",size:"icon",className:"md:hidden mr-0",children:[(0,Rr.jsx)(om,{className:"h-6 w-6"}),(0,Rr.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,Rr.jsx)(By,{side:"left",children:(0,Rr.jsxs)("nav",{className:"flex flex-col gap-4 mt-4",children:[(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",onClick:i,children:"Home"}),(0,Rr.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:t=>((t,r)=>{t.preventDefault(),i(),"scrollToFeatures"===r&&setTimeout((()=>{e("/",{state:{scrollToFeatures:!0}})}),300)})(t,"scrollToFeatures"),children:"Features"}),(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",onClick:i,children:"About"}),(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",onClick:i,children:"Contact"})]})})]}),(0,Rr.jsxs)(Te,{className:"flex items-center justify-center",to:"/",children:[(0,Rr.jsx)(qg,{className:"h-6 w-6 sm:h-7 sm:w-7 text-blue-600"}),(0,Rr.jsx)("span",{className:"ml-2 text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:"The Billing"})]})]}),(0,Rr.jsxs)("nav",{className:"hidden md:flex items-center space-x-4",children:[(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/",children:"Home"}),(0,Rr.jsx)("a",{href:"#features",className:"text-sm font-medium hover:underline underline-offset-4 cursor-pointer",onClick:t=>{t.preventDefault(),e("/",{state:{scrollToFeatures:!0}})},children:"Features"}),(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/about",children:"About"}),(0,Rr.jsx)(Te,{className:"text-sm font-medium hover:underline underline-offset-4",to:"/contact",children:"Contact"})]}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",className:"md:hidden mr-2",onClick:()=>{e("/",{state:{scrollToLogin:!0}})},children:[(0,Rr.jsx)(lm,{className:"h-4 w-4 mr-2"}),"Login"]})]}),(0,Rr.jsxs)("main",{className:"flex-1",children:[(0,Rr.jsx)("section",{className:"w-full py-6 sm:py-8 md:py-12 bg-white",children:(0,Rr.jsx)("div",{className:"container px-4 md:px-6",children:(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2 sm:space-y-4 text-center",children:[(0,Rr.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold tracking-tighter",children:"Contact Us"}),(0,Rr.jsx)("p",{className:"max-w-[600px] text-gray-500 text-sm sm:text-base md:text-lg",children:"We're here to help. Get in touch with us for any inquiries or support."})]})})}),(0,Rr.jsx)("section",{className:"w-full py-6 sm:py-8 md:py-12",children:(0,Rr.jsx)("div",{className:"container px-4 md:px-6",children:(0,Rr.jsxs)("div",{className:"grid gap-8 md:gap-12 lg:grid-cols-2",children:[(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsx)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tighter",children:"Contact Information"}),(0,Rr.jsx)(Kf,{className:"w-full",children:(0,Rr.jsx)(Jf,{className:"p-4 sm:p-6",children:(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rr.jsx)(IN,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 flex-shrink-0"}),(0,Rr.jsx)("span",{className:"text-sm sm:text-base",children:"+91 9942000425"})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rr.jsx)(Ow,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 flex-shrink-0"}),(0,Rr.jsx)("span",{className:"text-sm sm:text-base",children:"support@thebilling.in"})]}),(0,Rr.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,Rr.jsx)(MN,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 flex-shrink-0 mt-1"}),(0,Rr.jsxs)("span",{className:"text-sm sm:text-base",children:["Thousand Ways Private Limited",(0,Rr.jsx)("br",{}),"Dariyapur, Bodh Gaya,",(0,Rr.jsx)("br",{}),"Bihar 824237, India"]})]})]})})}),(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Follow Us"}),(0,Rr.jsxs)("div",{className:"flex space-x-4",children:[(0,Rr.jsxs)(Te,{href:"https://www.facebook.com/people/thehospitalin/61573546403108/",className:"text-gray-500 hover:text-blue-600",children:[(0,Rr.jsx)(ON,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,Rr.jsx)("span",{className:"sr-only",children:"Facebook"})]}),(0,Rr.jsxs)(Te,{href:"#",className:"text-gray-500 hover:text-blue-600",children:[(0,Rr.jsx)(FN,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,Rr.jsx)("span",{className:"sr-only",children:"Twitter"})]}),(0,Rr.jsxs)(Te,{href:"#",className:"text-gray-500 hover:text-blue-600",children:[(0,Rr.jsx)(LN,{className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,Rr.jsx)("span",{className:"sr-only",children:"LinkedIn"})]})]})]})]}),(0,Rr.jsxs)("div",{className:"space-y-4",ref:n,children:[(0,Rr.jsx)("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tighter",children:"Contact Us"}),(0,Rr.jsx)("p",{className:"text-gray-500 text-sm sm:text-base",children:"We appreciate your interest. Please complete the form below, and a member of our team will respond promptly."}),(0,Rr.jsxs)("form",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("label",{htmlFor:"name",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Full Name"}),(0,Rr.jsx)(Gf,{id:"name",placeholder:"Enter your full name",required:!0,className:"w-full"})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("label",{htmlFor:"mobile",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Contact Number"}),(0,Rr.jsx)(Gf,{id:"mobile",placeholder:"Enter your contact number",required:!0,type:"tel",className:"w-full"})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("label",{htmlFor:"message",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Inquiry"}),(0,Rr.jsx)(wN,{id:"message",placeholder:"Please provide details about your inquiry",required:!0,className:"w-full"})]}),(0,Rr.jsx)(Vn,{type:"submit",className:"w-full bg-blue-600 text-white hover:bg-blue-700",children:"Submit Inquiry"})]})]})]})})})]}),(0,Rr.jsxs)("footer",{className:"flex flex-col sm:flex-row justify-between items-center py-6 px-4 md:px-6 border-t bg-white",children:[(0,Rr.jsx)("p",{className:"text-xs text-gray-500 mb-2 sm:mb-0",children:"\xa9 2024 The Billing. All rights reserved."}),(0,Rr.jsxs)("nav",{className:"flex gap-4",children:[(0,Rr.jsx)(Te,{className:"text-xs hover:underline underline-offset-4",href:"#",children:"Terms of Service"}),(0,Rr.jsx)(Te,{className:"text-xs hover:underline underline-offset-4",href:"#",children:"Privacy"})]})]})]})}function UN(e,t){const r=+Il(e),[n,a]=[+Il(t.start),+Il(t.end)].sort(((e,t)=>e-t));return r>=n&&r<=a}function zN(e){const t=Il(e);return t.setHours(23,59,59,999),t}const VN=rm("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),HN=rm("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),$N=rm("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]),WN=ky,qN=Ey,GN=Ty,KN=Ry,YN=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(Dy,{ref:t,className:Un("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n})}));YN.displayName=Dy.displayName;const XN=t.forwardRef(((e,t)=>{let{className:r,children:n,...a}=e;return(0,Rr.jsxs)(GN,{children:[(0,Rr.jsx)(YN,{}),(0,Rr.jsxs)(Ay,{ref:t,className:Un("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",r),onOpenAutoFocus:e=>{e.preventDefault();const t=e.currentTarget.querySelector('[data-dialog-autofocus="true"]');t&&t.focus()},...a,children:[n,(0,Rr.jsxs)(Ry,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,Rr.jsx)(xl,{className:"h-4 w-4"}),(0,Rr.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}));XN.displayName=Ay.displayName;const QN=e=>{let{className:t,...r}=e;return(0,Rr.jsx)("div",{className:Un("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};QN.displayName="DialogHeader";const JN=e=>{let{className:t,...r}=e;return(0,Rr.jsx)("div",{className:Un("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};JN.displayName="DialogFooter";const ZN=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(Py,{ref:t,className:Un("text-lg font-semibold leading-none tracking-tight",r),...n})}));ZN.displayName=Py.displayName;const ej=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(_y,{ref:t,className:Un("text-sm text-muted-foreground",r),...n})}));ej.displayName=_y.displayName;const tj=e=>{let{isOpen:r,onClose:n,expenseToEdit:a}=e;const s=rt(),{createExpenseStatus:i,updateExpenseStatus:o}=$e((e=>e.expenses)),{toast:l}=$g(),[c,d]=(0,t.useState)({category:"",description:"",amount:"",date:"",amountPaid:"",paymentMethod:""});(0,t.useEffect)((()=>{if(a){const e=new Date(a.date);d({category:a.category,description:a.description,amount:a.amount.toString(),date:jc(e,"yyyy-MM-dd"),amountPaid:a.amountPaid.toString(),paymentMethod:a.paymentMethod||""})}else d({category:"",description:"",amount:"",date:jc(new Date,"yyyy-MM-dd"),amountPaid:"",paymentMethod:""})}),[a]);const u=e=>{const{name:t,value:r}=e.target;d((e=>{const n={...e,[t]:r};return"amount"===t&&(n.amountPaid=r),n}))};return(0,Rr.jsx)(WN,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(XN,{className:" sm:max-w-[425px] max-w-[90vw]",children:[(0,Rr.jsxs)(QN,{children:[(0,Rr.jsx)(ZN,{className:"text-2xl font-semibold",children:a?"Edit Expense":"Add New Expense"}),(0,Rr.jsx)(ej,{className:"text-gray-500",children:a?"Update the expense details below.":"Fill in the details to add a new expense."})]}),(0,Rr.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t={...c,amount:parseFloat(c.amount),amountPaid:parseFloat(c.amountPaid),date:new Date(c.date).toISOString()},r=a?lh({...t,_id:a._id}):oh(t);s(r).unwrap().then((()=>{l({title:`Expense ${a?"updated":"added"} successfully`,description:`The expense has been ${a?"updated":"added"}.`,variant:"success"}),d({category:"",description:"",amount:"",date:jc(new Date,"yyyy-MM-dd"),amountPaid:"",paymentMethod:""}),n()})).catch((e=>{l({title:`Failed to ${a?"update":"add"} expense`,description:e.message||`There was an error ${a?"updating":"adding"} the expense. Please try again.`,variant:"destructive"})}))},className:"space-y-6",children:[(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:"category",children:"Category"}),(0,Rr.jsxs)(fw,{name:"category",value:c.category,onValueChange:e=>u({target:{name:"category",value:e}}),children:[(0,Rr.jsx)(pw,{className:"w-full",children:(0,Rr.jsx)(mw,{placeholder:"Select category"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"Supplies",children:"Supplies"}),(0,Rr.jsx)(yw,{value:"Utilities",children:"Utilities"}),(0,Rr.jsx)(yw,{value:"Salaries",children:"Salaries"}),(0,Rr.jsx)(yw,{value:"Equipment",children:"Equipment"}),(0,Rr.jsx)(yw,{value:"Maintenance",children:"Maintenance"})]})]})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:"description",children:"Description"}),(0,Rr.jsx)(Gf,{autoFocus:!0,id:"description",name:"description",value:c.description,onChange:u,placeholder:"Enter expense description"})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:"amount",children:"Amount"}),(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"\u20b9"}),(0,Rr.jsx)(Gf,{id:"amount",name:"amount",type:"number",value:c.amount,onChange:u,placeholder:"0.00",className:"pl-7"})]})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:"amountPaid",children:"Amount Paid"}),(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"\u20b9"}),(0,Rr.jsx)(Gf,{id:"amountPaid",name:"amountPaid",type:"number",value:c.amountPaid,onChange:u,placeholder:"0.00",className:"pl-7"})]})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:"date",children:"Date"}),(0,Rr.jsx)(Gf,{id:"date",name:"date",type:"date",value:c.date,onChange:u})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:"paymentMethod",children:"Payment Method"}),(0,Rr.jsxs)(fw,{name:"paymentMethod",value:c.paymentMethod,onValueChange:e=>u({target:{name:"paymentMethod",value:e}}),children:[(0,Rr.jsx)(pw,{className:"w-full",children:(0,Rr.jsx)(mw,{placeholder:"Select method"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"Cash",children:"Cash"}),(0,Rr.jsx)(yw,{value:"Card",children:"Card"}),(0,Rr.jsx)(yw,{value:"UPI",children:"UPI"}),(0,Rr.jsx)(yw,{value:"Bank Transfer",children:"Bank Transfer"}),(0,Rr.jsx)(yw,{value:"Other",children:"Other"})]})]})]})]})]}),(0,Rr.jsxs)(JN,{className:"flex justify-end space-x-2",children:[(0,Rr.jsx)(Vn,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),(0,Rr.jsx)(Vn,{type:"submit",disabled:a?"loading"===o:"loading"===i,className:"px-4 py-2",children:a?"loading"===o?"Updating...":"Update Expense":"loading"===i?"Adding...":"Add Expense"})]})]})]})})};var rj="AlertDialog",[nj,aj]=$n(rj,[Xg]),sj=Xg(),ij=e=>{const{__scopeAlertDialog:t,...r}=e,n=sj(t);return(0,Rr.jsx)(ky,{...n,...r,modal:!0})};ij.displayName=rj;var oj=t.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=sj(r);return(0,Rr.jsx)(Ey,{...a,...n,ref:t})}));oj.displayName="AlertDialogTrigger";var lj=e=>{const{__scopeAlertDialog:t,...r}=e,n=sj(t);return(0,Rr.jsx)(Ty,{...n,...r})};lj.displayName="AlertDialogPortal";var cj=t.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=sj(r);return(0,Rr.jsx)(Dy,{...a,...n,ref:t})}));cj.displayName="AlertDialogOverlay";var dj="AlertDialogContent",[uj,hj]=nj(dj),fj=t.forwardRef(((e,r)=>{const{__scopeAlertDialog:n,children:a,...s}=e,i=sj(n),o=t.useRef(null),l=_r(r,o),c=t.useRef(null);return(0,Rr.jsx)(Ny,{contentName:dj,titleName:mj,docsSlug:"alert-dialog",children:(0,Rr.jsx)(uj,{scope:n,cancelRef:c,children:(0,Rr.jsxs)(Ay,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:Hn(s.onOpenAutoFocus,(e=>{e.preventDefault(),c.current?.focus({preventScroll:!0})})),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,Rr.jsx)(Or,{children:a}),(0,Rr.jsx)(wj,{contentRef:o})]})})})}));fj.displayName=dj;var mj="AlertDialogTitle",pj=t.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=sj(r);return(0,Rr.jsx)(Py,{...a,...n,ref:t})}));pj.displayName=mj;var xj="AlertDialogDescription",vj=t.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=sj(r);return(0,Rr.jsx)(_y,{...a,...n,ref:t})}));vj.displayName=xj;var gj=t.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=sj(r);return(0,Rr.jsx)(Ry,{...a,...n,ref:t})}));gj.displayName="AlertDialogAction";var yj="AlertDialogCancel",bj=t.forwardRef(((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=hj(yj,r),s=sj(r),i=_r(t,a);return(0,Rr.jsx)(Ry,{...s,...n,ref:i})}));bj.displayName=yj;var wj=e=>{let{contentRef:r}=e;const n=`\`${dj}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${dj}\` by passing a \`${xj}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${dj}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return t.useEffect((()=>{document.getElementById(r.current?.getAttribute("aria-describedby"))||console.warn(n)}),[n,r]),null},Nj=cj,jj=fj,Sj=gj,Cj=bj,kj=pj,Ej=vj;const Tj=ij,Dj=oj,Aj=lj,Pj=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(Nj,{className:Un("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n,ref:t})}));Pj.displayName=Nj.displayName;const _j=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsxs)(Aj,{children:[(0,Rr.jsx)(Pj,{}),(0,Rr.jsx)(jj,{ref:t,className:Un("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...n})]})}));_j.displayName=jj.displayName;const Rj=e=>{let{className:t,...r}=e;return(0,Rr.jsx)("div",{className:Un("flex flex-col space-y-0 text-center sm:text-left",t),...r})};Rj.displayName="AlertDialogHeader";const Ij=e=>{let{className:t,...r}=e;return(0,Rr.jsx)("div",{className:Un("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};Ij.displayName="AlertDialogFooter";const Mj=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(kj,{ref:t,className:Un("text-lg font-semibold",r),...n})}));Mj.displayName=kj.displayName;const Oj=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(Ej,{ref:t,className:Un("text-sm text-muted-foreground",r),...n})}));Oj.displayName=Ej.displayName;const Fj=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(Sj,{ref:t,className:Un(zn(),r),...n})}));Fj.displayName=Sj.displayName;const Lj=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(Cj,{ref:t,className:Un(zn({variant:"outline"}),"mt-2 sm:mt-0",r),...n})}));Lj.displayName=Cj.displayName;var Bj="horizontal",Uj=["horizontal","vertical"],zj=t.forwardRef(((e,t)=>{const{decorative:r,orientation:n=Bj,...a}=e,s=function(e){return Uj.includes(e)}(n)?n:Bj,i=r?{role:"none"}:{"aria-orientation":"vertical"===s?s:void 0,role:"separator"};return(0,Rr.jsx)(qn.div,{"data-orientation":s,...i,...a,ref:t})}));zj.displayName="Separator";var Vj=zj;const Hj=t.forwardRef(((e,t)=>{let{className:r,orientation:n="horizontal",decorative:a=!0,...s}=e;return(0,Rr.jsx)(Vj,{ref:t,decorative:a,orientation:n,className:Un("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",r),...s})}));Hj.displayName=Vj.displayName;const $j=e=>{var r;let{isOpen:n,setIsOpen:a,expenseData:s}=e;const i=rt(),{toast:o}=$g(),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(""),[h,f]=(0,t.useState)(!1),m=_w("(max-width: 640px)");(0,t.useEffect)((()=>{n&&(c(""),u(""))}),[n]);const p=(null===s||void 0===s?void 0:s.amount)||0,x=p-((null===s||void 0===s?void 0:s.amountPaid)||0),v=x<=0;if(!s)return null;return(0,Rr.jsx)(WN,{open:n,onOpenChange:a,children:(0,Rr.jsxs)(XN,{className:"w-[90vw] max-w-[425px] max-h-[90vh] overflow-y-auto",children:[(0,Rr.jsxs)(QN,{children:[(0,Rr.jsx)(ZN,{className:"text-xl font-semibold",children:"Add Payment"}),(0,Rr.jsx)(ej,{children:"Manage payments for the expense."})]}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between text-sm font-medium",children:[(0,Rr.jsxs)("span",{children:["Total Amount: ",(0,Rr.jsxs)("span",{className:"text-primary",children:["\u20b9",p.toLocaleString("en-IN")]})]}),(0,Rr.jsxs)("span",{children:["Due Amount: ",(0,Rr.jsxs)("span",{className:"text-red-600",children:["\u20b9",x.toLocaleString("en-IN")]})]})]}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)(yN,{htmlFor:"paymentAmount",children:"Payment Amount"}),(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{id:"paymentAmount",type:"number",value:l,onChange:e=>c(e.target.value),placeholder:"Enter amount",className:"pr-10",disabled:v}),(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2",onClick:()=>{c(x.toFixed(2))},title:"Set Due Amount",disabled:v,children:(0,Rr.jsx)(sm,{className:"h-4 w-4"})})]})]}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)(yN,{htmlFor:"paymentMethod",children:"Payment Method"}),(0,Rr.jsxs)(fw,{onValueChange:u,value:d,disabled:v,children:[(0,Rr.jsx)(pw,{id:"paymentMethod",children:(0,Rr.jsx)(mw,{placeholder:"Select method"})}),(0,Rr.jsx)(gw,{children:["Cash","UPI","Card","Bank Transfer","Other"].map((e=>(0,Rr.jsx)(yw,{value:e,children:e},e)))})]})]})]}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsxs)("div",{className:"space-y-0",children:[(0,Rr.jsx)("h4",{className:"text-sm font-semibold",children:"Recent Payments"}),null!==s&&void 0!==s&&s.payments&&(null===s||void 0===s||null===(r=s.payments)||void 0===r?void 0:r.length)>0?(0,Rr.jsx)("div",{className:"overflow-x-auto",children:(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:"w-[80px]",children:"Date"}),!m&&(0,Rr.jsx)(Tw,{className:"w-[80px]",children:"Time"}),(0,Rr.jsx)(Tw,{children:"Amount"}),(0,Rr.jsx)(Tw,{children:"Method"})]})}),(0,Rr.jsx)(Cw,{children:s.payments.map(((e,t)=>(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Dw,{className:"text-xs",children:new Date(e.createdAt).toLocaleDateString()}),!m&&(0,Rr.jsx)(Dw,{className:"text-xs",children:new Date(e.createdAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}),(0,Rr.jsxs)(Dw,{className:"text-xs font-medium",children:["\u20b9",e.amount.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,Rr.jsx)(Dw,{className:"text-xs",children:e.paymentMethod})]},t)))})]})}):(0,Rr.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-500 py-4",children:[(0,Rr.jsx)(Nw,{size:18}),(0,Rr.jsx)("span",{children:"No recent payments found"})]})]}),(0,Rr.jsxs)(JN,{className:"mt-6 flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",onClick:()=>a(!1),disabled:h,className:"w-full sm:w-auto",children:"Cancel"}),(0,Rr.jsx)(Vn,{onClick:()=>{if(!l||!d)return void o({title:"Error",description:"Please fill in all fields",variant:"destructive"});f(!0);const e={amount:parseFloat(l),paymentMethod:d};i(ch({id:s._id,paymentData:e})).unwrap().then((()=>{o({title:"Payment added successfully",description:`Payment of \u20b9${l} has been added successfully.`,variant:"success"}),a(!1)})).catch((e=>{o({title:"Error",description:`Failed to add payment: ${e.message}`,variant:"destructive"})})).finally((()=>{f(!1)}))},disabled:h||v,className:"w-full sm:w-auto",children:h?"Processing...":v?"Fully Paid":"Add Payment"})]})]})})},Wj=(0,t.createContext)(null);function qj(e){const r=(0,t.useRef)(null);return null===r.current&&(r.current=e()),r.current}const Gj=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Kj extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Yj(e){let{children:r,isPresent:n}=e;const a=(0,t.useId)(),s=(0,t.useRef)(null),i=(0,t.useRef)({width:0,height:0,top:0,left:0}),{nonce:o}=(0,t.useContext)(Gj);return(0,t.useInsertionEffect)((()=>{const{width:e,height:t,top:r,left:l}=i.current;if(n||!s.current||!e||!t)return;s.current.dataset.motionPopId=a;const c=document.createElement("style");return o&&(c.nonce=o),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`\n          [data-motion-pop-id="${a}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            top: ${r}px !important;\n            left: ${l}px !important;\n          }\n        `),()=>{document.head.removeChild(c)}}),[n]),(0,Rr.jsx)(Kj,{isPresent:n,childRef:s,sizeRef:i,children:t.cloneElement(r,{ref:s})})}const Xj=e=>{let{children:r,initial:n,isPresent:a,onExitComplete:s,custom:i,presenceAffectsLayout:o,mode:l}=e;const c=qj(Qj),d=(0,t.useId)(),u=(0,t.useCallback)((e=>{c.set(e,!0);for(const t of c.values())if(!t)return;s&&s()}),[c,s]),h=(0,t.useMemo)((()=>({id:d,initial:n,isPresent:a,custom:i,onExitComplete:u,register:e=>(c.set(e,!1),()=>c.delete(e))})),o?[Math.random(),u]:[a,u]);return(0,t.useMemo)((()=>{c.forEach(((e,t)=>c.set(t,!1)))}),[a]),t.useEffect((()=>{!a&&!c.size&&s&&s()}),[a]),"popLayout"===l&&(r=(0,Rr.jsx)(Yj,{isPresent:a,children:r})),(0,Rr.jsx)(Wj.Provider,{value:h,children:r})};function Qj(){return new Map}const Jj=(0,t.createContext)({}),Zj=e=>e;let eS=Zj,tS=Zj;const rS=e=>e.key||"";function nS(e){const r=[];return t.Children.forEach(e,(e=>{(0,t.isValidElement)(e)&&r.push(e)})),r}const aS="undefined"!==typeof window,sS=aS?t.useLayoutEffect:t.useEffect,iS=e=>{let{children:r,exitBeforeEnter:n,custom:a,initial:s=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:l="sync"}=e;tS(!n,"Replace exitBeforeEnter with mode='wait'");const c=(0,t.useMemo)((()=>nS(r)),[r]),d=c.map(rS),u=(0,t.useRef)(!0),h=(0,t.useRef)(c),f=qj((()=>new Map)),[m,p]=(0,t.useState)(c),[x,v]=(0,t.useState)(c);sS((()=>{u.current=!1,h.current=c;for(let e=0;e<x.length;e++){const t=rS(x[e]);d.includes(t)?f.delete(t):!0!==f.get(t)&&f.set(t,!1)}}),[x,d.length,d.join("-")]);const g=[];if(c!==m){let e=[...c];for(let t=0;t<x.length;t++){const r=x[t],n=rS(r);d.includes(n)||(e.splice(t,0,r),g.push(r))}return"wait"===l&&g.length&&(e=g),v(nS(e)),void p(c)}const{forceRender:y}=(0,t.useContext)(Jj);return(0,Rr.jsx)(Rr.Fragment,{children:x.map((e=>{const t=rS(e),r=c===x||d.includes(t);return(0,Rr.jsx)(Xj,{isPresent:r,initial:!(u.current&&!s)&&void 0,custom:r?void 0:a,presenceAffectsLayout:o,mode:l,onExitComplete:r?void 0:()=>{if(!f.has(t))return;f.set(t,!0);let e=!0;f.forEach((t=>{t||(e=!1)})),e&&(null===y||void 0===y||y(),v(h.current),i&&i())},children:e},t)}))})};function oS(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy((function(){return e(...arguments)}),{get:(r,n)=>"create"===n?e:(t.has(n)||t.set(n,e(n)),t.get(n))})}function lS(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const cS=e=>Array.isArray(e);function dS(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function uS(e){return"string"===typeof e||Array.isArray(e)}function hS(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach(((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()})),t}function fS(e,t,r,n){if("function"===typeof t){const[a,s]=hS(n);t=t(void 0!==r?r:e.custom,a,s)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[a,s]=hS(n);t=t(void 0!==r?r:e.custom,a,s)}return t}function mS(e,t,r){const n=e.getProps();return fS(n,t,void 0!==r?r:n.custom,e)}const pS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],xS=["initial",...pS],vS=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gS=new Set(vS),yS=e=>1e3*e,bS=e=>e/1e3,wS={type:"spring",stiffness:500,damping:25,restSpeed:10},NS={type:"keyframes",duration:.8},jS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SS=(e,t)=>{let{keyframes:r}=t;return r.length>2?NS:gS.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===r[1]?2*Math.sqrt(550):30,restSpeed:10}:wS:jS};function CS(e,t){return e?e[t]||e.default||e:void 0}const kS=!1,ES=!1,TS=!1,DS=e=>null!==e;function AS(e,t,r){let{repeat:n,repeatType:a="loop"}=t;const s=e.filter(DS),i=n&&"loop"!==a&&n%2===1?0:s.length-1;return i&&void 0!==r?r:s[i]}const PS=["read","resolveKeyframes","update","preRender","render","postRender"];function _S(e,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,i=PS.reduce(((e,t)=>(e[t]=function(e){let t=new Set,r=new Set,n=!1,a=!1;const s=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function o(t){s.has(t)&&(l.schedule(t),e()),t(i)}const l={schedule:function(e){const a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&n?t:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),a.has(e)||a.add(e),e},cancel:e=>{r.delete(e),s.delete(e)},process:e=>{i=e,n?a=!0:(n=!0,[t,r]=[r,t],r.clear(),t.forEach(o),n=!1,a&&(a=!1,l.process(e)))}};return l}(s),e)),{}),{read:o,resolveKeyframes:l,update:c,preRender:d,render:u,postRender:h}=i,f=()=>{const s=ES?a.timestamp:performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(s-a.timestamp,40),1),a.timestamp=s,a.isProcessing=!0,o.process(a),l.process(a),c.process(a),d.process(a),u.process(a),h.process(a),a.isProcessing=!1,r&&t&&(n=!1,e(f))},m=PS.reduce(((t,s)=>{const o=i[s];return t[s]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r||(r=!0,n=!0,a.isProcessing||e(f)),o.schedule(t,s,i)},t}),{});return{schedule:m,cancel:e=>{for(let t=0;t<PS.length;t++)i[PS[t]].cancel(e)},state:a,steps:i}}const{schedule:RS,cancel:IS,state:MS,steps:OS}=_S("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Zj,!0),FS=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function LS(e,t,r,n){if(e===t&&r===n)return Zj;const a=t=>function(e,t,r,n,a){let s,i,o=0;do{i=t+(r-t)/2,s=FS(i,n,a)-e,s>0?r=i:t=i}while(Math.abs(s)>1e-7&&++o<12);return i}(t,0,1,e,r);return e=>0===e||1===e?e:FS(a(e),t,n)}const BS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,US=e=>t=>1-e(1-t),zS=LS(.33,1.53,.69,.99),VS=US(zS),HS=BS(VS),$S=e=>(e*=2)<1?.5*VS(e):.5*(2-Math.pow(2,-10*(e-1))),WS=e=>1-Math.sin(Math.acos(e)),qS=US(WS),GS=BS(WS),KS=e=>/^0[^.\s]+$/u.test(e);const YS=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),XS=e=>t=>"string"===typeof t&&t.startsWith(e),QS=XS("--"),JS=XS("var(--"),ZS=e=>!!JS(e)&&eC.test(e.split("/*")[0].trim()),eC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function rC(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;tS(r<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[n,a]=function(e){const t=tC.exec(e);if(!t)return[,];const[,r,n,a]=t;return[`--${null!==r&&void 0!==r?r:n}`,a]}(e);if(!n)return;const s=window.getComputedStyle(t).getPropertyValue(n);if(s){const e=s.trim();return YS(e)?parseFloat(e):e}return ZS(a)?rC(a,t,r+1):a}const nC=(e,t,r)=>r>t?t:r<e?e:r,aC={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},sC={...aC,transform:e=>nC(0,1,e)},iC={...aC,default:1},oC=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),lC=oC("deg"),cC=oC("%"),dC=oC("px"),uC=oC("vh"),hC=oC("vw"),fC={...cC,parse:e=>cC.parse(e)/100,transform:e=>cC.transform(100*e)},mC=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),pC=e=>e===aC||e===dC,xC=(e,t)=>parseFloat(e.split(", ")[t]),vC=(e,t)=>(r,n)=>{let{transform:a}=n;if("none"===a||!a)return 0;const s=a.match(/^matrix3d\((.+)\)$/u);if(s)return xC(s[1],t);{const t=a.match(/^matrix\((.+)\)$/u);return t?xC(t[1],e):0}},gC=new Set(["x","y","z"]),yC=vS.filter((e=>!gC.has(e)));const bC={width:(e,t)=>{let{x:r}=e,{paddingLeft:n="0",paddingRight:a="0"}=t;return r.max-r.min-parseFloat(n)-parseFloat(a)},height:(e,t)=>{let{y:r}=e,{paddingTop:n="0",paddingBottom:a="0"}=t;return r.max-r.min-parseFloat(n)-parseFloat(a)},top:(e,t)=>{let{top:r}=t;return parseFloat(r)},left:(e,t)=>{let{left:r}=t;return parseFloat(r)},bottom:(e,t)=>{let{y:r}=e,{top:n}=t;return parseFloat(n)+(r.max-r.min)},right:(e,t)=>{let{x:r}=e,{left:n}=t;return parseFloat(n)+(r.max-r.min)},x:vC(4,13),y:vC(5,14)};bC.translateX=bC.x,bC.translateY=bC.y;const wC=e=>t=>t.test(e),NC=[aC,dC,cC,lC,hC,uC,{test:e=>"auto"===e,parse:e=>e}],jC=e=>NC.find(wC(e)),SC=new Set;let CC=!1,kC=!1;function EC(){if(kC){const e=Array.from(SC).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),r=new Map;t.forEach((e=>{const t=function(e){const t=[];return yC.forEach((r=>{const n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))})),t}(e);t.length&&(r.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=r.get(e);t&&t.forEach((t=>{let[r,n]=t;var a;null===(a=e.getValue(r))||void 0===a||a.set(n)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}kC=!1,CC=!1,SC.forEach((e=>e.complete())),SC.clear()}function TC(){SC.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(kC=!0)}))}class DC{constructor(e,t,r,n,a){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=n,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(SC.add(this),CC||(CC=!0,RS.read(TC),RS.resolveKeyframes(EC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:n}=this;for(let a=0;a<e.length;a++)if(null===e[a])if(0===a){const a=null===n||void 0===n?void 0:n.get(),s=e[e.length-1];if(void 0!==a)e[0]=a;else if(r&&t){const n=r.readValue(t,s);void 0!==n&&null!==n&&(e[0]=n)}void 0===e[0]&&(e[0]=s),n&&void 0===a&&n.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),SC.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,SC.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const AC=e=>Math.round(1e5*e)/1e5,PC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const _C=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,RC=(e,t)=>r=>Boolean("string"===typeof r&&_C.test(r)&&r.startsWith(e)||t&&!function(e){return null==e}(r)&&Object.prototype.hasOwnProperty.call(r,t)),IC=(e,t,r)=>n=>{if("string"!==typeof n)return n;const[a,s,i,o]=n.match(PC);return{[e]:parseFloat(a),[t]:parseFloat(s),[r]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},MC={...aC,transform:e=>Math.round((e=>nC(0,255,e))(e))},OC={test:RC("rgb","red"),parse:IC("red","green","blue"),transform:e=>{let{red:t,green:r,blue:n,alpha:a=1}=e;return"rgba("+MC.transform(t)+", "+MC.transform(r)+", "+MC.transform(n)+", "+AC(sC.transform(a))+")"}};const FC={test:RC("#"),parse:function(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}},transform:OC.transform},LC={test:RC("hsl","hue"),parse:IC("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:r,lightness:n,alpha:a=1}=e;return"hsla("+Math.round(t)+", "+cC.transform(AC(r))+", "+cC.transform(AC(n))+", "+AC(sC.transform(a))+")"}},BC={test:e=>OC.test(e)||FC.test(e)||LC.test(e),parse:e=>OC.test(e)?OC.parse(e):LC.test(e)?LC.parse(e):FC.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?OC.transform(e):LC.transform(e)},UC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const zC="number",VC="color",HC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $C(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},a=[];let s=0;const i=t.replace(HC,(e=>(BC.test(e)?(n.color.push(s),a.push(VC),r.push(BC.parse(e))):e.startsWith("var(")?(n.var.push(s),a.push("var"),r.push(e)):(n.number.push(s),a.push(zC),r.push(parseFloat(e))),++s,"${}"))).split("${}");return{values:r,split:i,indexes:n,types:a}}function WC(e){return $C(e).values}function qC(e){const{split:t,types:r}=$C(e),n=t.length;return e=>{let a="";for(let s=0;s<n;s++)if(a+=t[s],void 0!==e[s]){const t=r[s];a+=t===zC?AC(e[s]):t===VC?BC.transform(e[s]):e[s]}return a}}const GC=e=>"number"===typeof e?0:e;const KC={test:function(e){var t,r;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(PC))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(UC))||void 0===r?void 0:r.length)||0)>0},parse:WC,createTransformer:qC,getAnimatableNone:function(e){const t=WC(e);return qC(e)(t.map(GC))}},YC=new Set(["brightness","contrast","saturate","opacity"]);function XC(e){const[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[n]=r.match(PC)||[];if(!n)return e;const a=r.replace(n,"");let s=YC.has(t)?1:0;return n!==r&&(s*=100),t+"("+s+a+")"}const QC=/\b([a-z-]*)\(.*?\)/gu,JC={...KC,getAnimatableNone:e=>{const t=e.match(QC);return t?t.map(XC).join(" "):e}},ZC={borderWidth:dC,borderTopWidth:dC,borderRightWidth:dC,borderBottomWidth:dC,borderLeftWidth:dC,borderRadius:dC,radius:dC,borderTopLeftRadius:dC,borderTopRightRadius:dC,borderBottomRightRadius:dC,borderBottomLeftRadius:dC,width:dC,maxWidth:dC,height:dC,maxHeight:dC,top:dC,right:dC,bottom:dC,left:dC,padding:dC,paddingTop:dC,paddingRight:dC,paddingBottom:dC,paddingLeft:dC,margin:dC,marginTop:dC,marginRight:dC,marginBottom:dC,marginLeft:dC,backgroundPositionX:dC,backgroundPositionY:dC},ek={rotate:lC,rotateX:lC,rotateY:lC,rotateZ:lC,scale:iC,scaleX:iC,scaleY:iC,scaleZ:iC,skew:lC,skewX:lC,skewY:lC,distance:dC,translateX:dC,translateY:dC,translateZ:dC,x:dC,y:dC,z:dC,perspective:dC,transformPerspective:dC,opacity:sC,originX:fC,originY:fC,originZ:dC},tk={...aC,transform:Math.round},rk={...ZC,...ek,zIndex:tk,size:dC,fillOpacity:sC,strokeOpacity:sC,numOctaves:tk},nk={...rk,color:BC,backgroundColor:BC,outlineColor:BC,fill:BC,stroke:BC,borderColor:BC,borderTopColor:BC,borderRightColor:BC,borderBottomColor:BC,borderLeftColor:BC,filter:JC,WebkitFilter:JC},ak=e=>nk[e];function sk(e,t){let r=ak(e);return r!==JC&&(r=KC),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const ik=new Set(["auto","none","0"]);class ok extends DC{constructor(e,t,r,n,a){super(e,t,r,n,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let r=e[o];if("string"===typeof r&&(r=r.trim(),ZS(r))){const n=rC(r,t.current);void 0!==n&&(e[o]=n),o===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!mC.has(r)||2!==e.length)return;const[n,a]=e,s=jC(n),i=jC(a);if(s!==i)if(pC(s)&&pC(i))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let a=0;a<e.length;a++)("number"===typeof(n=e[a])?0===n:null===n||"none"===n||"0"===n||KS(n))&&r.push(a);var n;r.length&&function(e,t,r){let n,a=0;for(;a<e.length&&!n;){const t=e[a];"string"===typeof t&&!ik.has(t)&&$C(t).values.length&&(n=e[a]),a++}if(n&&r)for(const s of t)e[s]=sk(r,n)}(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bC[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const n=t[t.length-1];void 0!==n&&e.getValue(r,n).jump(n,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const a=t.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=n.length-1,i=n[s];n[s]=bC[r](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach((e=>{let[r,n]=e;t.getValue(r).set(n)})),this.resolveNoneKeyframes()}}function lk(e){return"function"===typeof e}let ck;function dk(){ck=void 0}const uk={now:()=>(void 0===ck&&uk.set(MS.isProcessing||ES?MS.timestamp:performance.now()),ck),set:e=>{ck=e,queueMicrotask(dk)}},hk=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!KC.test(e)&&"0"!==e||e.startsWith("url(")));function fk(e,t,r,n){const a=e[0];if(null===a)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],i=hk(a,t),o=hk(s,t);return eS(i===o,`You are trying to animate ${t} from "${a}" to "${s}". ${a} is not an animatable value - to enable this animation set ${a} to a value animatable to ${s} via the \`style\` property.`),!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||lk(r))&&n)}class mk{constructor(e){let{autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:s=0,repeatType:i="loop",...o}=e;this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=uk.now(),this.options={autoplay:t,delay:r,type:n,repeat:a,repeatDelay:s,repeatType:i,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(TC(),EC()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=uk.now(),this.hasAttemptedResolve=!0;const{name:r,type:n,velocity:a,delay:s,onComplete:i,onUpdate:o,isGenerator:l}=this.options;if(!l&&!fk(e,r,n,a)){if(TS||!s)return null===o||void 0===o||o(AS(e,this.options,t)),null===i||void 0===i||i(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}updateFinishedPromise(){this.currentFinishedPromise=new Promise((e=>{this.resolveFinishedPromise=e}))}}function pk(e,t){return t?e*(1e3/t):0}function xk(e,t,r){const n=Math.max(t-5,0);return pk(r-e(n),t-n)}const vk=.001;function gk(e){let t,r,{duration:n=800,bounce:a=.25,velocity:s=0,mass:i=1}=e;eS(n<=yS(10),"Spring duration must be 10 seconds or less");let o=1-a;o=nC(.05,1,o),n=nC(.01,10,bS(n)),o<1?(t=e=>{const t=e*o,r=t*n,a=t-s,i=bk(e,o),l=Math.exp(-r);return vk-a/i*l},r=e=>{const r=e*o*n,a=r*s+s,i=Math.pow(o,2)*Math.pow(e,2)*n,l=Math.exp(-r),c=bk(Math.pow(e,2),o);return(-t(e)+vk>0?-1:1)*((a-i)*l)/c}):(t=e=>Math.exp(-e*n)*((e-s)*n+1)-.001,r=e=>Math.exp(-e*n)*(n*n*(s-e)));const l=function(e,t,r){let n=r;for(let a=1;a<yk;a++)n-=e(n)/t(n);return n}(t,r,5/n);if(n=yS(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:n}}}const yk=12;function bk(e,t){return e*Math.sqrt(1-t*t)}const wk=["duration","bounce"],Nk=["stiffness","damping","mass"];function jk(e,t){return t.some((t=>void 0!==e[t]))}function Sk(e){let{keyframes:t,restDelta:r,restSpeed:n,...a}=e;const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:f}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!jk(e,Nk)&&jk(e,wk)){const r=gk(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}({...a,velocity:-bS(a.velocity||0)}),m=h||0,p=c/(2*Math.sqrt(l*d)),x=i-s,v=bS(Math.sqrt(l/d)),g=Math.abs(x)<5;let y;if(n||(n=g?.01:2),r||(r=g?.005:.5),p<1){const e=bk(v,p);y=t=>{const r=Math.exp(-p*v*t);return i-r*((m+p*v*x)/e*Math.sin(e*t)+x*Math.cos(e*t))}}else if(1===p)y=e=>i-Math.exp(-v*e)*(x+(m+v*x)*e);else{const e=v*Math.sqrt(p*p-1);y=t=>{const r=Math.exp(-p*v*t),n=Math.min(e*t,300);return i-r*((m+p*v*x)*Math.sinh(n)+e*x*Math.cosh(n))/e}}return{calculatedDuration:f&&u||null,next:e=>{const t=y(e);if(f)o.done=e>=u;else{let a=0;p<1&&(a=0===e?yS(m):xk(y,e,t));const s=Math.abs(a)<=n,l=Math.abs(i-t)<=r;o.done=s&&l}return o.value=o.done?i:t,o}}}function Ck(e){let{keyframes:t,velocity:r=0,power:n=.8,timeConstant:a=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],f={done:!1,value:h},m=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let p=n*r;const x=h+p,v=void 0===o?x:o(x);v!==x&&(p=v-h);const g=e=>-p*Math.exp(-e/a),y=e=>v+g(e),b=e=>{const t=g(e),r=y(e);f.done=Math.abs(t)<=d,f.value=f.done?v:r};let w,N;const j=e=>{var t;(t=f.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(w=e,N=Sk({keyframes:[f.value,m(f.value)],velocity:xk(y,e,f.value),damping:s,stiffness:i,restDelta:d,restSpeed:u}))};return j(0),{calculatedDuration:null,next:e=>{let t=!1;return N||void 0!==w||(t=!0,b(e),j(e)),void 0!==w&&e>=w?N.next(e-w):(!t&&b(e),f)}}}const kk=LS(.42,0,1,1),Ek=LS(0,0,.58,1),Tk=LS(.42,0,.58,1),Dk=e=>Array.isArray(e)&&"number"===typeof e[0],Ak={linear:Zj,easeIn:kk,easeInOut:Tk,easeOut:Ek,circIn:WS,circInOut:GS,circOut:qS,backIn:VS,backInOut:HS,backOut:zS,anticipate:$S},Pk=e=>{if(Dk(e)){tS(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,r,n,a]=e;return LS(t,r,n,a)}return"string"===typeof e?(tS(void 0!==Ak[e],`Invalid easing type '${e}'`),Ak[e]):e},_k=(e,t)=>r=>t(e(r)),Rk=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(_k)},Ik=(e,t,r)=>{const n=t-e;return 0===n?1:(r-e)/n},Mk=(e,t,r)=>e+(t-e)*r;function Ok(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Fk(e,t){return r=>r>0?t:e}const Lk=(e,t,r)=>{const n=e*e,a=r*(t*t-n)+n;return a<0?0:Math.sqrt(a)},Bk=[FC,OC,LC];function Uk(e){const t=(r=e,Bk.find((e=>e.test(r))));var r;if(eS(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`),!Boolean(t))return!1;let n=t.parse(e);return t===LC&&(n=function(e){let{hue:t,saturation:r,lightness:n,alpha:a}=e;t/=360,r/=100,n/=100;let s=0,i=0,o=0;if(r){const e=n<.5?n*(1+r):n+r-n*r,a=2*n-e;s=Ok(a,e,t+1/3),i=Ok(a,e,t),o=Ok(a,e,t-1/3)}else s=i=o=n;return{red:Math.round(255*s),green:Math.round(255*i),blue:Math.round(255*o),alpha:a}}(n)),n}const zk=(e,t)=>{const r=Uk(e),n=Uk(t);if(!r||!n)return Fk(e,t);const a={...r};return e=>(a.red=Lk(r.red,n.red,e),a.green=Lk(r.green,n.green,e),a.blue=Lk(r.blue,n.blue,e),a.alpha=Mk(r.alpha,n.alpha,e),OC.transform(a))},Vk=new Set(["none","hidden"]);function Hk(e,t){return r=>Mk(e,t,r)}function $k(e){return"number"===typeof e?Hk:"string"===typeof e?ZS(e)?Fk:BC.test(e)?zk:Gk:Array.isArray(e)?Wk:"object"===typeof e?BC.test(e)?zk:qk:Fk}function Wk(e,t){const r=[...e],n=r.length,a=e.map(((e,r)=>$k(e)(e,t[r])));return e=>{for(let t=0;t<n;t++)r[t]=a[t](e);return r}}function qk(e,t){const r={...e,...t},n={};for(const a in r)void 0!==e[a]&&void 0!==t[a]&&(n[a]=$k(e[a])(e[a],t[a]));return e=>{for(const t in n)r[t]=n[t](e);return r}}const Gk=(e,t)=>{const r=KC.createTransformer(t),n=$C(e),a=$C(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?Vk.has(e)&&!a.values.length||Vk.has(t)&&!n.values.length?function(e,t){return Vk.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}(e,t):Rk(Wk(function(e,t){var r;const n=[],a={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][a[i]],l=null!==(r=e.values[o])&&void 0!==r?r:0;n[s]=l,a[i]++}return n}(n,a),a.values),r):(eS(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),Fk(e,t))};function Kk(e,t,r){if("number"===typeof e&&"number"===typeof t&&"number"===typeof r)return Mk(e,t,r);return $k(e)(e,t)}function Yk(e,t){let{clamp:r=!0,ease:n,mixer:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(tS(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];if(2===s&&e[0]===e[1])return()=>t[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=function(e,t,r){const n=[],a=r||Kk,s=e.length-1;for(let i=0;i<s;i++){let r=a(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||Zj:t;r=Rk(e,r)}n.push(r)}return n}(t,n,a),o=i.length,l=t=>{let r=0;if(o>1)for(;r<e.length-2&&!(t<e[r+1]);r++);const n=Ik(e[r],e[r+1],t);return i[r](n)};return r?t=>l(nC(e[0],e[s-1],t)):l}function Xk(e){const t=[0];return function(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const a=Ik(0,t,n);e.push(Mk(r,1,a))}}(t,e.length-1),t}function Qk(e){let{duration:t=300,keyframes:r,times:n,ease:a="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(a)?a.map(Pk):Pk(a),i={done:!1,value:r[0]},o=function(e,t){return e.map((e=>e*t))}(n&&n.length===r.length?n:Xk(r),t),l=Yk(o,r,{ease:Array.isArray(s)?s:(c=r,d=s,c.map((()=>d||Tk)).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}const Jk=e=>{const t=t=>{let{timestamp:r}=t;return e(r)};return{start:()=>RS.update(t,!0),stop:()=>IS(t),now:()=>MS.isProcessing?MS.timestamp:uk.now()}},Zk={decay:Ck,inertia:Ck,tween:Qk,keyframes:Qk,spring:Sk},eE=e=>e/100;class tE extends mk{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:t,motionValue:r,element:n,keyframes:a}=this.options,s=(null===n||void 0===n?void 0:n.KeyframeResolver)||DC;this.resolver=new s(a,((e,t)=>this.onKeyframesResolved(e,t)),t,r,n),this.resolver.scheduleResolve()}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:n=0,repeatType:a,velocity:s=0}=this.options,i=lk(t)?t:Zk[t]||Qk;let o,l;i!==Qk&&"number"!==typeof e[0]&&(o=Rk(eE,Kk(e[0],e[1])),e=[0,100]);const c=i({...this.options,keyframes:e});"mirror"===a&&(l=i({...this.options,keyframes:[...e].reverse(),velocity:-s})),null===c.calculatedDuration&&(c.calculatedDuration=function(e){let t=0,r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}(c));const{calculatedDuration:d}=c,u=d+n;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:o,calculatedDuration:d,resolvedDuration:u,totalDuration:u*(r+1)-n}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{resolved:r}=this;if(!r){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:n,generator:a,mirroredGenerator:s,mapPercentToKeyframes:i,keyframes:o,calculatedDuration:l,totalDuration:c,resolvedDuration:d}=r;if(null===this.startTime)return a.next(0);const{delay:u,repeat:h,repeatType:f,repeatDelay:m,onUpdate:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-u*(this.speed>=0?1:-1),v=this.speed>=0?x<0:x>c;this.currentTime=Math.max(x,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let g=this.currentTime,y=a;if(h){const e=Math.min(this.currentTime,c)/d;let t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,t=Math.min(t,h+1);Boolean(t%2)&&("reverse"===f?(r=1-r,m&&(r-=m/d)):"mirror"===f&&(y=s)),g=nC(0,1,r)*d}const b=v?{done:!1,value:o[0]}:y.next(g);i&&(b.value=i(b.value));let{done:w}=b;v||null===l||(w=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const N=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return N&&void 0!==n&&(b.value=AS(o,this.options,n)),p&&p(b.value),N&&this.finish(),b}get duration(){const{resolved:e}=this;return e?bS(e.calculatedDuration):0}get time(){return bS(this.currentTime)}set time(e){e=yS(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=bS(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=Jk,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),t&&t();const n=this.driver.now();null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=n):this.startTime=null!==r&&void 0!==r?r:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const rE=new Set(["opacity","clipPath","filter","transform"]);function nE(e){let t;return()=>(void 0===t&&(t=e()),t)}const aE={linearEasing:void 0};function sE(e,t){const r=nE(e);return()=>{var e;return null!==(e=aE[t])&&void 0!==e?e:r()}}const iE=sE((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(ZJ){return!1}return!0}),"linearEasing");function oE(e){return Boolean("function"===typeof e&&iE()||!e||"string"===typeof e&&(e in cE||iE())||Dk(e)||Array.isArray(e)&&e.every(oE))}const lE=e=>{let[t,r,n,a]=e;return`cubic-bezier(${t}, ${r}, ${n}, ${a})`},cE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lE([0,.65,.55,1]),circOut:lE([.55,0,1,.45]),backIn:lE([.31,.01,.66,-.59]),backOut:lE([.33,1.53,.69,.99])};function dE(e,t){return e?"function"===typeof e&&iE()?((e,t)=>{let r="";const n=Math.max(Math.round(t/10),2);for(let a=0;a<n;a++)r+=e(Ik(0,n-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`})(e,t):Dk(e)?lE(e):Array.isArray(e)?e.map((e=>dE(e,t)||cE.easeOut)):cE[e]:void 0}function uE(e,t){e.timeline=t,e.onfinish=null}const hE=nE((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const fE={anticipate:$S,backInOut:HS,circInOut:GS};class mE extends mk{constructor(e){super(e);const{name:t,motionValue:r,element:n,keyframes:a}=this.options;this.resolver=new ok(a,((e,t)=>this.onKeyframesResolved(e,t)),t,r,n),this.resolver.scheduleResolve()}initPlayback(e,t){var r;let{duration:n=300,times:a,ease:s,type:i,motionValue:o,name:l,startTime:c}=this.options;if(!(null===(r=o.owner)||void 0===r?void 0:r.current))return!1;if("string"===typeof s&&iE()&&function(e){return e in fE}(s)&&(s=fE[s]),function(e){return lk(e.type)||"spring"===e.type||!oE(e.ease)}(this.options)){const{onComplete:t,onUpdate:r,motionValue:o,element:l,...c}=this.options,d=function(e,t){const r=new tE({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const a=[];let s=0;for(;!n.done&&s<2e4;)n=r.sample(s),a.push(n.value),s+=10;return{times:void 0,keyframes:a,duration:s-10,ease:"linear"}}(e,c);1===(e=d.keyframes).length&&(e[1]=e[0]),n=d.duration,a=d.times,s=d.ease,i="keyframes"}const d=function(e,t,r){let{delay:n=0,duration:a=300,repeat:s=0,repeatType:i="loop",ease:o,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:r};l&&(c.offset=l);const d=dE(o,a);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:n,duration:a,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:"reverse"===i?"alternate":"normal"})}(o.owner.current,l,e,{...this.options,duration:n,times:a,ease:s});return d.startTime=null!==c&&void 0!==c?c:this.calcStartTime(),this.pendingTimeline?(uE(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:r}=this.options;o.set(AS(e,this.options,t)),r&&r(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:a,type:i,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return bS(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return bS(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=yS(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return Zj;const{animation:r}=t;uE(r,e)}else this.pendingTimeline=e;return Zj}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:n,type:a,ease:s,times:i}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){const{motionValue:e,onUpdate:t,onComplete:o,element:l,...c}=this.options,d=new tE({...c,keyframes:r,duration:n,type:a,ease:s,times:i,isGenerator:!0}),u=yS(this.time);e.setWithVelocity(d.sample(u-10).value,d.sample(u).value,10)}const{onStop:o}=this.options;o&&o(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:a,damping:s,type:i}=e;return hE()&&r&&rE.has(r)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!n&&"mirror"!==a&&0!==s&&"inertia"!==i}}const pE=nE((()=>void 0!==window.ScrollTimeline));class xE{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map((r=>pE()&&r.attachTimeline?r.attachTimeline(e):t(r)));return()=>{r.forEach(((e,t)=>{e&&e(),this.animations[t].stop()}))}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach((t=>t[e]()))}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const vE=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return i=>{const o=CS(n,e)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c-=yS(l);let d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:a};(function(e){let{when:t,delay:r,delayChildren:n,staggerChildren:a,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}=e;return!!Object.keys(u).length})(o)||(d={...d,...SS(e,d)}),d.duration&&(d.duration=yS(d.duration)),d.repeatDelay&&(d.repeatDelay=yS(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(d.duration=0,0===d.delay&&(u=!0)),(TS||kS)&&(u=!0,d.duration=0,d.delay=0),u&&!s&&void 0!==t.get()){const e=AS(d.keyframes,o);if(void 0!==e)return RS.update((()=>{d.onUpdate(e),d.onComplete()})),new xE([])}return!s&&mE.supports(d)?new mE(d):new tE(d)}};function gE(e,t){-1===e.indexOf(t)&&e.push(t)}function yE(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class bE{constructor(){this.subscriptions=[]}add(e){return gE(this.subscriptions,e),()=>yE(this.subscriptions,e)}notify(e,t,r){const n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,r);else for(let a=0;a<n;a++){const n=this.subscriptions[a];n&&n(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wE={current:void 0};class NE{constructor(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="11.11.9",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=uk.now();t.updatedAt!==n&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&t.events.change&&t.events.change.notify(t.current),r&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){var t;this.current=e,this.updatedAt=uk.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new bE);const r=this.events[e].add(t);return"change"===e?()=>{r(),RS.read((()=>{this.events.change.getSize()||this.stop()}))}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return wE.current&&wE.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=uk.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return pk(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jE(e,t){return new NE(e,t)}function SE(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,jE(r))}const CE=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),kE="data-"+CE("framerAppearId");function EE(e){return e.props[kE]}const TE=e=>Boolean(e&&e.getVelocity);function DE(e,t){if(!e.applyWillChange)return;const r=e.getValue("willChange");return n=r,Boolean(TE(n)&&n.add)?r.add(t):void 0;var n}function AE(e,t){let{protectedKeys:r,needsAnimating:n}=e;const a=r.hasOwnProperty(t)&&!0!==n[t];return n[t]=!1,a}function PE(e,t){let{delay:r=0,transitionOverride:n,type:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s;let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(i=n);const c=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const u in l){const t=e.getValue(u,null!==(s=e.latestValues[u])&&void 0!==s?s:null),n=l[u];if(void 0===n||d&&AE(d,u))continue;const a={delay:r,...CS(i||{},u)};let o=!1;if(window.MotionHandoffAnimation){const t=EE(e);if(t){const e=window.MotionHandoffAnimation(t,u,RS);null!==e&&(a.startTime=e,o=!0)}}DE(e,u),t.start(vE(u,t,n,e.shouldReduceMotion&&gS.has(u)?{type:!1}:a,e,o));const h=t.animation;h&&c.push(h)}return o&&Promise.all(c).then((()=>{RS.update((()=>{o&&function(e,t){const r=mS(e,t);let{transitionEnd:n={},transition:a={},...s}=r||{};s={...s,...n};for(const o in s)SE(e,o,(i=s[o],cS(i)?i[i.length-1]||0:i));var i}(e,o)}))})),c}function _E(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n;const a=mS(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(s=r.transitionOverride);const i=a?()=>Promise.all(PE(e,a,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:a=0,staggerChildren:i,staggerDirection:o}=s;return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5?arguments[5]:void 0;const i=[],o=(e.variantChildren.size-1)*n,l=1===a?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*n}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*n};return Array.from(e.variantChildren).sort(RE).forEach(((e,n)=>{e.notify("AnimationStart",t),i.push(_E(e,t,{...s,delay:r+l(n)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(i)}(e,t,a+n,i,o,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[e,t]="beforeChildren"===l?[i,o]:[o,i];return e().then((()=>t()))}return Promise.all([i(),o(r.delay)])}function RE(e,t){return e.sortNodePosition(t)}const IE=xS.length;function ME(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&ME(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let r=0;r<IE;r++){const n=xS[r],a=e.props[n];(uS(a)||!1===a)&&(t[n]=a)}return t}const OE=[...pS].reverse(),FE=pS.length;function LE(e){return t=>Promise.all(t.map((t=>{let{animation:r,options:n}=t;return function(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const a=t.map((t=>_E(e,t,n)));r=Promise.all(a)}else if("string"===typeof t)r=_E(e,t,n);else{const a="function"===typeof t?mS(e,t,n.custom):t;r=Promise.all(PE(e,a,n))}return r.then((()=>{e.notify("AnimationComplete",t)}))}(e,r,n)})))}function BE(e){let t=LE(e),r=VE(),n=!0;const a=t=>(r,n)=>{var a;const s=mS(e,n,"exit"===t?null===(a=e.presenceContext)||void 0===a?void 0:a.custom:void 0);if(s){const{transition:e,transitionEnd:t,...n}=s;r={...r,...n,...t}}return r};function s(s){const{props:i}=e,o=ME(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<FE;t++){const h=OE[t],f=r[h],m=void 0!==i[h]?i[h]:o[h],p=uS(m),x=h===s?f.isActive:null;!1===x&&(u=t);let v=m===o[h]&&m!==i[h]&&p;if(v&&n&&e.manuallyAnimateOnMount&&(v=!1),f.protectedKeys={...d},!f.isActive&&null===x||!m&&!f.prevProp||lS(m)||"boolean"===typeof m)continue;const g=UE(f.prevProp,m);let y=g||h===s&&f.isActive&&!v&&p||t>u&&p,b=!1;const w=Array.isArray(m)?m:[m];let N=w.reduce(a(h),{});!1===x&&(N={});const{prevResolvedValues:j={}}=f,S={...j,...N},C=t=>{y=!0,c.has(t)&&(b=!0,c.delete(t)),f.needsAnimating[t]=!0;const r=e.getValue(t);r&&(r.liveStyle=!1)};for(const e in S){const t=N[e],r=j[e];if(d.hasOwnProperty(e))continue;let n=!1;n=cS(t)&&cS(r)?!dS(t,r):t!==r,n?void 0!==t&&null!==t?C(e):c.add(e):void 0!==t&&c.has(e)?C(e):f.protectedKeys[e]=!0}f.prevProp=m,f.prevResolvedValues=N,f.isActive&&(d={...d,...N}),n&&e.blockInitialAnimation&&(y=!1);y&&(!(v&&g)||b)&&l.push(...w.map((e=>({animation:e,options:{type:h}}))))}if(c.size){const t={};c.forEach((r=>{const n=e.getBaseTarget(r),a=e.getValue(r);a&&(a.liveStyle=!0),t[r]=null!==n&&void 0!==n?n:null})),l.push({animation:t})}let h=Boolean(l.length);return!n||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),n=!1,h?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,n){var a;if(r[t].isActive===n)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach((e=>{var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,n)})),r[t].isActive=n;const i=s(t);for(const e in r)r[e].protectedKeys={};return i},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=VE(),n=!0}}}function UE(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!dS(t,e)}function zE(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VE(){return{animate:zE(!0),whileInView:zE(),whileHover:zE(),whileTap:zE(),whileDrag:zE(),whileFocus:zE(),exit:zE()}}class HE{constructor(e){this.isMounted=!1,this.node=e}update(){}}let $E=0;const WE={animation:{Feature:class extends HE{constructor(e){super(e),e.animationState||(e.animationState=BE(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();lS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends HE{constructor(){super(...arguments),this.id=$E++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},qE=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function GE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}function KE(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function YE(e,t,r,n){return KE(e,t,(e=>t=>qE(t)&&e(t,GE(t)))(r),n)}const XE=(e,t)=>Math.abs(e-t);class QE{constructor(e,t){let{transformPagePoint:r,contextWindow:n,dragSnapToOrigin:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=eT(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){const r=XE(e.x,t.x),n=XE(e.y,t.y);return Math.sqrt(r**2+n**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!r)return;const{point:n}=e,{timestamp:a}=MS;this.history.push({...n,timestamp:a});const{onStart:s,onMove:i}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=JE(t,this.transformPagePoint),RS.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:r,onSessionEnd:n,resumeAnimation:a}=this.handlers;if(this.dragSnapToOrigin&&a&&a(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=eT("pointercancel"===e.type?this.lastMoveEventInfo:JE(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,s),n&&n(e,s)},!qE(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=n||window;const s=JE(GE(e),this.transformPagePoint),{point:i}=s,{timestamp:o}=MS;this.history=[{...i,timestamp:o}];const{onSessionStart:l}=t;l&&l(e,eT(s,this.history)),this.removeListeners=Rk(YE(this.contextWindow,"pointermove",this.handlePointerMove),YE(this.contextWindow,"pointerup",this.handlePointerUp),YE(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),IS(this.updatePoint)}}function JE(e,t){return t?{point:t(e.point)}:e}function ZE(e,t){return{x:e.x-t.x,y:e.y-t.y}}function eT(e,t){let{point:r}=e;return{point:r,delta:ZE(r,rT(t)),offset:ZE(r,tT(t)),velocity:nT(t,.1)}}function tT(e){return e[0]}function rT(e){return e[e.length-1]}function nT(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const a=rT(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>yS(t)));)r--;if(!n)return{x:0,y:0};const s=bS(a.timestamp-n.timestamp);if(0===s)return{x:0,y:0};const i={x:(a.x-n.x)/s,y:(a.y-n.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function aT(e){let t=null;return()=>{const r=()=>{t=null};return null===t&&(t=e,r)}}const sT=aT("dragHorizontal"),iT=aT("dragVertical");function oT(e){let t=!1;if("y"===e)t=iT();else if("x"===e)t=sT();else{const e=sT(),r=iT();e&&r?t=()=>{e(),r()}:(e&&e(),r&&r())}return t}function lT(){const e=oT(!0);return!e||(e(),!1)}function cT(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function dT(e){return e.max-e.min}function uT(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=n,e.originPoint=Mk(t.min,t.max,e.origin),e.scale=dT(r)/dT(t),e.translate=Mk(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function hT(e,t,r,n){uT(e.x,t.x,r.x,n?n.originX:void 0),uT(e.y,t.y,r.y,n?n.originY:void 0)}function fT(e,t,r){e.min=r.min+t.min,e.max=e.min+dT(t)}function mT(e,t,r){e.min=t.min-r.min,e.max=e.min+dT(t)}function pT(e,t,r){mT(e.x,t.x,r.x),mT(e.y,t.y,r.y)}function xT(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function vT(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}const gT=.35;function yT(e,t,r){return{min:bT(e,t),max:bT(e,r)}}function bT(e,t){return"number"===typeof e?e:e[t]||0}const wT=()=>({x:{min:0,max:0},y:{min:0,max:0}});function NT(e){return[e("x"),e("y")]}function jT(e){let{top:t,left:r,right:n,bottom:a}=e;return{x:{min:r,max:n},y:{min:t,max:a}}}function ST(e){return void 0===e||1===e}function CT(e){let{scale:t,scaleX:r,scaleY:n}=e;return!ST(t)||!ST(r)||!ST(n)}function kT(e){return CT(e)||ET(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ET(e){return TT(e.x)||TT(e.y)}function TT(e){return e&&"0%"!==e}function DT(e,t,r){return r+t*(e-r)}function AT(e,t,r,n,a){return void 0!==a&&(e=DT(e,a,n)),DT(e,r,n)+t}function PT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;e.min=AT(e.min,t,r,n,a),e.max=AT(e.max,t,r,n,a)}function _T(e,t){let{x:r,y:n}=t;PT(e.x,r.translate,r.scale,r.originPoint),PT(e.y,n.translate,n.scale,n.originPoint)}const RT=.999999999999,IT=1.0000000000001;function MT(e,t){e.min=e.min+t,e.max=e.max+t}function OT(e,t,r,n){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;PT(e,t,r,Mk(e.min,e.max,a),n)}function FT(e,t){OT(e.x,t.x,t.scaleX,t.scale,t.originX),OT(e.y,t.y,t.scaleY,t.scale,t.originY)}function LT(e,t){return jT(function(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}const BT=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},UT=new WeakMap;class zT{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:n}=this.getProps();this.panSession=new QE(e,{onSessionStart:e=>{const{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(GE(e,"page").point)},onStart:(e,t)=>{const{drag:r,dragPropagation:n,onDragStart:a}=this.getProps();if(r&&!n&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=oT(r),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),NT((e=>{let t=this.getAxisMotionValue(e).get()||0;if(cC.test(t)){const{projection:r}=this.visualElement;if(r&&r.layout){const n=r.layout.layoutBox[e];if(n){t=dT(n)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),a&&RS.postRender((()=>a(e,t))),DE(this.visualElement,"transform");const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:r,dragDirectionLock:n,onDirectionLock:a,onDrag:s}=this.getProps();if(!r&&!this.openGlobalLock)return;const{offset:i}=t;if(n&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=null;Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x");return r}(i),void(null!==this.currentDirection&&a&&a(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>NT((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:n,contextWindow:BT(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:n}=t;this.startAnimation(n);const{onDragEnd:a}=this.getProps();a&&RS.postRender((()=>a(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:n}=this.getProps();if(!r||!VT(e,n,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=function(e,t,r){let{min:n,max:a}=t;return void 0!==n&&e<n?e=r?Mk(n,e,r.min):Math.max(e,n):void 0!==a&&e>a&&(e=r?Mk(a,e,r.max):Math.min(e,a)),e}(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,a=this.constraints;t&&cT(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&function(e,t){let{top:r,left:n,bottom:a,right:s}=t;return{x:xT(e.x,n,s),y:xT(e.y,r,a)}}(n.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gT;return!1===e?e=0:!0===e&&(e=gT),{x:yT(e,"left","right"),y:yT(e,"top","bottom")}}(r),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&NT((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(n.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!cT(e))return!1;const r=e.current;tS(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const a=function(e,t,r){const n=LT(e,r),{scroll:a}=t;return a&&(MT(n.x,a.offset.x),MT(n.y,a.offset.y)),n}(r,n.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:vT(e.x,t.x),y:vT(e.y,t.y)}}(n.layout.layoutBox,a);if(t){const e=t(function(e){let{x:t,y:r}=e;return{top:r.min,right:t.max,bottom:r.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=jT(e))}return s}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:n,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=NT((i=>{if(!VT(i,t,this.currentDirection))return;let l=o&&o[i]||{};s&&(l={min:0,max:0});const c=n?200:1e6,d=n?40:1e7,u={type:"inertia",velocity:r?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...a,...l};return this.startAxisValueAnimation(i,u)}));return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return DE(this.visualElement,e),r.start(vE(e,r,0,t,this.visualElement,!1))}stopAnimation(){NT((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){NT((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),n=r[t];return n||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){NT((t=>{const{drag:r}=this.getProps();if(!VT(t,r,this.currentDirection))return;const{projection:n}=this.visualElement,a=this.getAxisMotionValue(t);if(n&&n.layout){const{min:r,max:s}=n.layout.layoutBox[t];a.set(e[t]-Mk(r,s,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!cT(t)||!r||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};NT((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const r=t.get();n[e]=function(e,t){let r=.5;const n=dT(e),a=dT(t);return a>n?r=Ik(t.min,t.max-n,e.min):n>a&&(r=Ik(e.min,e.max-a,t.min)),nC(0,1,r)}({min:r,max:r},this.constraints[e])}}));const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),NT((t=>{if(!VT(t,e,null))return;const r=this.getAxisMotionValue(t),{min:a,max:s}=this.constraints[t];r.set(Mk(a,s,n[t]))}))}addListeners(){if(!this.visualElement.current)return;UT.set(this.visualElement,this);const e=YE(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();cT(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,n=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),RS.read(t);const a=KE(window,"resize",(()=>this.scalePositionWithinConstraints())),s=r.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:r}=e;this.isDragging&&r&&(NT((e=>{const r=this.getAxisMotionValue(e);r&&(this.originPoint[e]+=t[e].translate,r.set(r.get()+t[e].translate))})),this.visualElement.render())}));return()=>{a(),e(),n(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:a=!1,dragElastic:s=gT,dragMomentum:i=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:n,dragConstraints:a,dragElastic:s,dragMomentum:i}}}function VT(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}const HT=e=>(t,r)=>{e&&RS.postRender((()=>e(t,r)))};const $T=(0,t.createContext)({}),WT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qT(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const GT={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!dC.test(e))return e;e=parseFloat(e)}return`${qT(e,t.target.x)}% ${qT(e,t.target.y)}%`}},KT={correct:(e,t)=>{let{treeScale:r,projectionDelta:n}=t;const a=e,s=KC.parse(e);if(s.length>5)return a;const i=KC.createTransformer(e),o="number"!==typeof s[0]?1:0,l=n.x.scale*r.x,c=n.y.scale*r.y;s[0+o]/=l,s[1+o]/=c;const d=Mk(l,c,.5);return"number"===typeof s[2+o]&&(s[2+o]/=d),"number"===typeof s[3+o]&&(s[3+o]/=d),i(s)}},YT={};const{schedule:XT,cancel:QT}=_S(queueMicrotask,!1);class JT extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:n}=this.props,{projection:a}=e;var s;s=eD,Object.assign(YT,s),a&&(t.group&&t.group.add(a),r&&r.register&&n&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",(()=>{this.safeToRemove()})),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),WT.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:n,isPresent:a}=this.props,s=r.projection;return s?(s.isPresent=a,n||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||RS.postRender((()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),XT.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ZT(e){const[r,n]=function(){const e=(0,t.useContext)(Wj);if(null===e)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=e,s=(0,t.useId)();(0,t.useEffect)((()=>a(s)),[]);const i=(0,t.useCallback)((()=>n&&n(s)),[s,n]);return!r&&n?[!1,i]:[!0]}(),a=(0,t.useContext)(Jj);return(0,Rr.jsx)(JT,{...e,layoutGroup:a,switchLayoutGroup:(0,t.useContext)($T),isPresent:r,safeToRemove:n})}const eD={borderRadius:{...GT,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:GT,borderTopRightRadius:GT,borderBottomLeftRadius:GT,borderBottomRightRadius:GT,boxShadow:KT},tD=["TopLeft","TopRight","BottomLeft","BottomRight"],rD=tD.length,nD=e=>"string"===typeof e?parseFloat(e):e,aD=e=>"number"===typeof e||dC.test(e);function sD(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const iD=lD(0,.5,qS),oD=lD(.5,.95,Zj);function lD(e,t,r){return n=>n<e?0:n>t?1:r(Ik(e,t,n))}function cD(e,t){e.min=t.min,e.max=t.max}function dD(e,t){cD(e.x,t.x),cD(e.y,t.y)}function uD(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function hD(e,t,r,n,a){return e=DT(e-=t,1/r,n),void 0!==a&&(e=DT(e,1/a,n)),e}function fD(e,t,r,n,a){let[s,i,o]=r;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;cC.test(t)&&(t=parseFloat(t),t=Mk(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=Mk(s.min,s.max,n);e===s&&(o-=t),e.min=hD(e.min,t,r,o,a),e.max=hD(e.max,t,r,o,a)}(e,t[s],t[i],t[o],t.scale,n,a)}const mD=["x","scaleX","originX"],pD=["y","scaleY","originY"];function xD(e,t,r,n){fD(e.x,t,mD,r?r.x:void 0,n?n.x:void 0),fD(e.y,t,pD,r?r.y:void 0,n?n.y:void 0)}function vD(e){return 0===e.translate&&1===e.scale}function gD(e){return vD(e.x)&&vD(e.y)}function yD(e,t){return e.min===t.min&&e.max===t.max}function bD(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function wD(e,t){return bD(e.x,t.x)&&bD(e.y,t.y)}function ND(e){return dT(e.x)/dT(e.y)}function jD(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class SD{constructor(){this.members=[]}add(e){gE(this.members,e),e.scheduleRender()}remove(e){if(yE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let r;for(let n=t;n>=0;n--){const e=this.members[n];if(!1!==e.isPresent){r=e;break}}return!!r&&(this.promote(r),!0)}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const CD=(e,t)=>e.depth-t.depth;class kD{constructor(){this.children=[],this.isDirty=!1}add(e){gE(this.children,e),this.isDirty=!0}remove(e){yE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(CD),this.isDirty=!1,this.children.forEach(e)}}function ED(e){const t=TE(e)?e.get():e;return r=t,Boolean(r&&"object"===typeof r&&r.mix&&r.toValue)?t.toValue():t;var r}function TD(e,t){const r=uk.now(),n=a=>{let{timestamp:s}=a;const i=s-r;i>=t&&(IS(n),e(i-t))};return RS.read(n,!0),()=>IS(n)}const DD={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},AD="undefined"!==typeof window&&void 0!==window.MotionDebug,PD=["","X","Y","Z"],_D={visibility:"hidden"};let RD=0;function ID(e,t,r,n){const{latestValues:a}=t;a[e]&&(r[e]=a[e],t.setStaticValue(e,0),n&&(n[e]=0))}function MD(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=EE(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:t,layoutId:n}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",RS,!(t||n))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&MD(n)}function OD(e){let{attachResizeListener:t,defaultParent:r,measureScroll:n,checkIsScrollRoot:a,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===r||void 0===r?void 0:r();this.id=RD++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,AD&&(DD.totalNodes=DD.resolvedTargetDeltas=DD.recalculatedProjection=0),this.nodes.forEach(BD),this.nodes.forEach(qD),this.nodes.forEach(GD),this.nodes.forEach(UD),AD&&window.MotionDebug.record(DD)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let r=0;r<this.path.length;r++)this.path[r].shouldResetTransform=!0;this.root===this&&(this.nodes=new kD)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new bE),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t&&t.notify(...n)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var n;this.isSVG=(n=e)instanceof SVGElement&&"svg"!==n.tagName,this.instance=e;const{layoutId:a,layout:s,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(s||a)&&(this.isLayoutDirty=!0),t){let r;const n=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,r&&r(),r=TD(n,250),WT.hasAnimatedSinceResize&&(WT.hasAnimatedSinceResize=!1,this.nodes.forEach(WD))}))}a&&this.root.registerSharedNode(a,this),!1!==this.options.animate&&i&&(a||s)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:r,hasRelativeTargetChanged:n,layout:a}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||i.getDefaultTransition()||ZD,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=i.getProps(),c=!this.targetLayout||!wD(this.targetLayout,a)||n,d=!r&&n;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||d||r&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,d);const e={...CS(s,"layout"),onPlay:o,onComplete:l};(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else r||WD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=a}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,IS(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(KD),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&MD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let a=0;a<this.path.length;a++){const e=this.path[a];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;const n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(VD);this.isUpdating||this.nodes.forEach(HD),this.isUpdating=!1,this.nodes.forEach($D),this.nodes.forEach(FD),this.nodes.forEach(LD),this.clearAllSnapshots();const e=uk.now();MS.delta=nC(0,1e3/60,e-MS.timestamp),MS.timestamp=e,MS.isProcessing=!0,OS.update.process(MS),OS.preRender.process(MS),OS.render.process(MS),MS.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,XT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(zD),this.sharedNodes.forEach(YD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,RS.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){RS.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++){this.path[r].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=a(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!gD(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,a=n!==this.prevTransformTemplateValue;e&&(t||kT(this.latestValues)||a)&&(s(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let r=this.removeElementScroll(t);var n;return e&&(r=this.removeTransform(r)),rA((n=r).x),rA(n.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const r=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(aA))){const{scroll:e}=this.root;e&&(MT(r.x,e.offset.x),MT(r.y,e.offset.y))}return r}removeElementScroll(e){var t;const r={x:{min:0,max:0},y:{min:0,max:0}};if(dD(r,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return r;for(let n=0;n<this.path.length;n++){const t=this.path[n],{scroll:a,options:s}=t;t!==this.root&&a&&s.layoutScroll&&(a.wasRoot&&dD(r,e),MT(r.x,a.offset.x),MT(r.y,a.offset.y))}return r}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r={x:{min:0,max:0},y:{min:0,max:0}};dD(r,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&FT(r,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),kT(e.latestValues)&&FT(r,e.latestValues)}return kT(this.latestValues)&&FT(r,this.latestValues),r}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};dD(t,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];if(!e.instance)continue;if(!kT(e.latestValues))continue;CT(e.latestValues)&&e.updateSnapshot();const n={x:{min:0,max:0},y:{min:0,max:0}};dD(n,e.measurePageBox()),xD(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,n)}return kT(this.latestValues)&&xD(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==MS.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==r;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:a,layoutId:s}=this.options;if(this.layout&&(a||s)){if(this.resolvedRelativeTargetAt=MS.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},pT(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),dD(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,l=this.relativeParent.target,fT(i.x,o.x,l.x),fT(i.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):dD(this.target,this.layout.layoutBox),_T(this.target,this.targetDelta)):dD(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},pT(this.relativeTargetOrigin,this.target,e.target),dD(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}AD&&DD.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!CT(this.parent.latestValues)&&!ET(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),r=Boolean(this.resumingFrom)||this!==t;let n=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(n=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===MS.timestamp&&(n=!1),n)return;const{layout:a,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!a&&!s)return;dD(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=r.length;if(!a)return;let s,i;t.x=t.y=1;for(let o=0;o<a;o++){s=r[o],i=s.projectionDelta;const{visualElement:a}=s.options;a&&a.props.style&&"contents"===a.props.style.display||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&FT(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,_T(e,i)),n&&kT(s.latestValues)&&FT(e,s.latestValues))}t.x<IT&&t.x>RT&&(t.x=1),t.y<IT&&t.y>RT&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,r),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(uD(this.prevProjectionDelta.x,this.projectionDelta.x),uD(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),hT(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&jD(this.projectionDelta.x,this.prevProjectionDelta.x)&&jD(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),AD&&DD.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.snapshot,n=r?r.latestValues:{},a={...this.latestValues},s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(JD));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const r=t/1e3;var l,h,f,m,p,x;XD(s.x,e.x,r),XD(s.y,e.y,r),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pT(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,m=this.relativeTargetOrigin,p=i,x=r,QD(f.x,m.x,p.x,x),QD(f.y,m.y,p.y,x),u&&(l=this.relativeTarget,h=u,yD(l.x,h.x)&&yD(l.y,h.y))&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),dD(u,this.relativeTarget)),o&&(this.animationValues=a,function(e,t,r,n,a,s){a?(e.opacity=Mk(0,void 0!==r.opacity?r.opacity:1,iD(n)),e.opacityExit=Mk(void 0!==t.opacity?t.opacity:1,0,oD(n))):s&&(e.opacity=Mk(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,n));for(let i=0;i<rD;i++){const a=`border${tD[i]}Radius`;let s=sD(t,a),o=sD(r,a);void 0===s&&void 0===o||(s||(s=0),o||(o=0),0===s||0===o||aD(s)===aD(o)?(e[a]=Math.max(Mk(nD(s),nD(o),n),0),(cC.test(o)||cC.test(s))&&(e[a]+="%")):e[a]=o)}(t.rotate||r.rotate)&&(e.rotate=Mk(t.rotate||0,r.rotate||0,n))}(a,n,this.latestValues,r,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(IS(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=RS.update((()=>{WT.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,r){const n=TE(e)?e:jE(e);return n.start(vE("",n,t,r)),n.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:r,layout:n,latestValues:a}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&nA(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=dT(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;const n=dT(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+n}dD(t,r),FT(t,a),hT(this.projectionDeltaWithTransform,this.layoutCorrected,t,a)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new SD);this.sharedNodes.get(e).add(t);const r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;const n={};r.z&&ID("z",e,n,this.animationValues);for(let a=0;a<PD.length;a++)ID(`rotate${PD[a]}`,e,n,this.animationValues),ID(`skew${PD[a]}`,e,n,this.animationValues);e.render();for(const a in n)e.setStaticValue(a,n[a]),this.animationValues&&(this.animationValues[a]=n[a]);e.scheduleRender()}getProjectionStyles(e){var t,r;if(!this.instance||this.isSVG)return;if(!this.isVisible)return _D;const n={visibility:""},a=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=ED(null===e||void 0===e?void 0:e.pointerEvents)||"",n.transform=a?a(this.latestValues,""):"none",n;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=ED(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!kT(this.latestValues)&&(t.transform=a?a({},""):"none",this.hasProjected=!1),t}const i=s.animationValues||s.latestValues;this.applyTransformsToTarget(),n.transform=function(e,t,r){let n="";const a=e.x.translate/t.x,s=e.y.translate/t.y,i=(null===r||void 0===r?void 0:r.z)||0;if((a||s||i)&&(n=`translate3d(${a}px, ${s}px, ${i}px) `),1===t.x&&1===t.y||(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:e,rotate:t,rotateX:a,rotateY:s,skewX:i,skewY:o}=r;e&&(n=`perspective(${e}px) ${n}`),t&&(n+=`rotate(${t}deg) `),a&&(n+=`rotateX(${a}deg) `),s&&(n+=`rotateY(${s}deg) `),i&&(n+=`skewX(${i}deg) `),o&&(n+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(n+=`scale(${o}, ${l})`),n||"none"}(this.projectionDeltaWithTransform,this.treeScale,i),a&&(n.transform=a(i,n.transform));const{x:o,y:l}=this.projectionDelta;n.transformOrigin=`${100*o.origin}% ${100*l.origin}% 0`,s.animationValues?n.opacity=s===this?null!==(r=null!==(t=i.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:n.opacity=s===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const c in YT){if(void 0===i[c])continue;const{correct:e,applyTo:t}=YT[c],r="none"===n.transform?i[c]:e(i[c],s);if(t){const e=t.length;for(let a=0;a<e;a++)n[t[a]]=r}else n[c]=r}return this.options.layoutId&&(n.pointerEvents=s===this?ED(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),n}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(VD),this.root.sharedNodes.clear()}}}function FD(e){e.updateLayout()}function LD(e){var t;const r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=e.layout,{animationType:a}=e.options,s=r.source!==e.layout.source;"size"===a?NT((e=>{const n=s?r.measuredBox[e]:r.layoutBox[e],a=dT(n);n.min=t[e].min,n.max=n.min+a})):nA(a,r.layoutBox,t)&&NT((n=>{const a=s?r.measuredBox[n]:r.layoutBox[n],i=dT(t[n]);a.max=a.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+i)}));const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};hT(i,t,r.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?hT(o,e.applyTransform(n,!0),r.measuredBox):hT(o,t,r.layoutBox);const l=!gD(i);let c=!1;if(!e.resumeFrom){const n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){const{snapshot:a,layout:s}=n;if(a&&s){const i={x:{min:0,max:0},y:{min:0,max:0}};pT(i,r.layoutBox,a.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};pT(o,t,s.layoutBox),wD(i,o)||(c=!0),n.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function BD(e){AD&&DD.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function UD(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function zD(e){e.clearSnapshot()}function VD(e){e.clearMeasurements()}function HD(e){e.isLayoutDirty=!1}function $D(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function WD(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function qD(e){e.resolveTargetDelta()}function GD(e){e.calcProjection()}function KD(e){e.resetSkewAndRotation()}function YD(e){e.removeLeadSnapshot()}function XD(e,t,r){e.translate=Mk(t.translate,0,r),e.scale=Mk(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function QD(e,t,r,n){e.min=Mk(t.min,r.min,n),e.max=Mk(t.max,r.max,n)}function JD(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const ZD={duration:.45,ease:[.4,0,.1,1]},eA=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),tA=eA("applewebkit/")&&!eA("chrome/")?Math.round:Zj;function rA(e){e.min=tA(e.min),e.max=tA(e.max)}function nA(e,t,r){return"position"===e||"preserve-aspect"===e&&(n=ND(t),a=ND(r),s=.2,!(Math.abs(n-a)<=s));var n,a,s}function aA(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const sA=OD({attachResizeListener:(e,t)=>KE(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),iA={current:void 0},oA=OD({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!iA.current){const e=new sA({});e.mount(window),e.setOptions({layoutScroll:!0}),iA.current=e}return iA.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),lA={pan:{Feature:class extends HE{constructor(){super(...arguments),this.removePointerDownListener=Zj}onPointerDown(e){this.session=new QE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:HT(e),onStart:HT(t),onMove:r,onEnd:(e,t)=>{delete this.session,n&&RS.postRender((()=>n(e,t)))}}}mount(){this.removePointerDownListener=YE(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends HE{constructor(e){super(e),this.removeGroupControls=Zj,this.removeListeners=Zj,this.controls=new zT(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zj}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:oA,MeasureLayout:ZT}};function cA(e,t){const r=t?"pointerenter":"pointerleave",n=t?"onHoverStart":"onHoverEnd";return YE(e.current,r,((r,a)=>{if("touch"===r.pointerType||lT())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t);const i=s[n];i&&RS.postRender((()=>i(r,a)))}),{passive:!e.getProps()[n]})}const dA=(e,t)=>!!t&&(e===t||dA(e,t.parentElement));function uA(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,GE(r))}const hA=new WeakMap,fA=new WeakMap,mA=e=>{const t=hA.get(e.target);t&&t(e)},pA=e=>{e.forEach(mA)};function xA(e,t,r){const n=function(e){let{root:t,...r}=e;const n=t||document;fA.has(n)||fA.set(n,{});const a=fA.get(n),s=JSON.stringify(r);return a[s]||(a[s]=new IntersectionObserver(pA,{root:t,...r})),a[s]}(t);return hA.set(e,r),n.observe(e),()=>{hA.delete(e),n.unobserve(e)}}const vA={some:0,all:1};const gA={inView:{Feature:class extends HE{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:n="some",once:a}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:"number"===typeof n?n:vA[n]};return xA(this.node.current,s,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,a&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:r,onViewportLeave:n}=this.node.getProps(),s=t?r:n;s&&s(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,r=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:r={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==r[e]}(e,t));r&&this.startObserver()}unmount(){}}},tap:{Feature:class extends HE{constructor(){super(...arguments),this.removeStartListeners=Zj,this.removeEndListeners=Zj,this.removeAccessibleListeners=Zj,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),n=YE(window,"pointerup",((e,t)=>{if(!this.checkPressEnd())return;const{onTap:r,onTapCancel:n,globalTapTarget:a}=this.node.getProps(),s=a||dA(this.node.current,e.target)?r:n;s&&RS.update((()=>s(e,t)))}),{passive:!(r.onTap||r.onPointerUp)}),a=YE(window,"pointercancel",((e,t)=>this.cancelPress(e,t)),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Rk(n,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=KE(this.node.current,"keydown",(e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=KE(this.node.current,"keyup",(e=>{"Enter"===e.key&&this.checkPressEnd()&&uA("up",((e,t)=>{const{onTap:r}=this.node.getProps();r&&RS.postRender((()=>r(e,t)))}))})),uA("down",((e,t)=>{this.startPress(e,t)}))})),t=KE(this.node.current,"blur",(()=>{this.isPressing&&uA("cancel",((e,t)=>this.cancelPress(e,t)))}));this.removeAccessibleListeners=Rk(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:n}=this.node.getProps();n&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&RS.postRender((()=>r(e,t)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!lT()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&RS.postRender((()=>r(e,t)))}mount(){const e=this.node.getProps(),t=YE(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=KE(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Rk(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends HE{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(ZJ){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rk(KE(this.node.current,"focus",(()=>this.onFocus())),KE(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends HE{mount(){this.unmount=Rk(cA(this.node,!0),cA(this.node,!1))}unmount(){}}}},yA={layout:{ProjectionNode:oA,MeasureLayout:ZT}},bA=(0,t.createContext)({}),wA=(0,t.createContext)({strict:!1});function NA(e,r,n,a,s){var i,o;const{visualElement:l}=(0,t.useContext)(bA),c=(0,t.useContext)(wA),d=(0,t.useContext)(Wj),u=(0,t.useContext)(Gj).reducedMotion,h=(0,t.useRef)();a=a||c.renderer,!h.current&&a&&(h.current=a(e,{visualState:r,parent:l,props:n,presenceContext:d,blockInitialAnimation:!!d&&!1===d.initial,reducedMotionConfig:u}));const f=h.current,m=(0,t.useContext)($T);!f||f.projection||!s||"html"!==f.type&&"svg"!==f.type||function(e,t,r,n){const{layoutId:a,layout:s,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:jA(e.parent)),e.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:Boolean(i)||o&&cT(o),visualElement:e,animationType:"string"===typeof s?s:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:c})}(h.current,n,s,m),(0,t.useInsertionEffect)((()=>{f&&f.update(n,d)}));const p=n[kE],x=(0,t.useRef)(Boolean(p)&&!(null===(i=window.MotionHandoffIsComplete)||void 0===i?void 0:i.call(window,p))&&(null===(o=window.MotionHasOptimisedAnimation)||void 0===o?void 0:o.call(window,p)));return sS((()=>{f&&(window.MotionIsMounted=!0,f.updateFeatures(),XT.render(f.render),x.current&&f.animationState&&f.animationState.animateChanges())})),(0,t.useEffect)((()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask((()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,p)})),x.current=!1))})),f}function jA(e){if(e)return!1!==e.options.allowProjection?e.projection:jA(e.parent)}function SA(e,r,n){return(0,t.useCallback)((t=>{t&&e.mount&&e.mount(t),r&&(t?r.mount(t):r.unmount()),n&&("function"===typeof n?n(t):cT(n)&&(n.current=t))}),[r])}function CA(e){return lS(e.animate)||xS.some((t=>uS(e[t])))}function kA(e){return Boolean(CA(e)||e.variants)}function EA(e){const{initial:r,animate:n}=function(e,t){if(CA(e)){const{initial:t,animate:r}=e;return{initial:!1===t||uS(t)?t:void 0,animate:uS(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(bA));return(0,t.useMemo)((()=>({initial:r,animate:n})),[TA(r),TA(n)])}function TA(e){return Array.isArray(e)?e.join(" "):e}const DA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},AA={};for(const r in DA)AA[r]={isEnabled:e=>DA[r].some((t=>!!e[t]))};const PA=Symbol.for("motionComponentSymbol");function _A(e){let{preloadedFeatures:r,createVisualElement:n,useRender:a,useVisualState:s,Component:i}=e;r&&function(e){for(const t in e)AA[t]={...AA[t],...e[t]}}(r);const o=(0,t.forwardRef)((function(e,r){let o;const l={...(0,t.useContext)(Gj),...e,layoutId:RA(e)},{isStatic:c}=l,d=EA(e),u=s(e,c);if(!c&&aS){!function(){(0,t.useContext)(wA).strict;0}();const e=function(e){const{drag:t,layout:r}=AA;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:(null===t||void 0===t?void 0:t.isEnabled(e))||(null===r||void 0===r?void 0:r.isEnabled(e))?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}(l);o=e.MeasureLayout,d.visualElement=NA(i,u,l,n,e.ProjectionNode)}return(0,Rr.jsxs)(bA.Provider,{value:d,children:[o&&d.visualElement?(0,Rr.jsx)(o,{visualElement:d.visualElement,...l}):null,a(i,e,SA(u,d.visualElement,r),u,c,d.visualElement)]})}));return o[PA]=i,o}function RA(e){let{layoutId:r}=e;const n=(0,t.useContext)(Jj).id;return n&&void 0!==r?n+"-"+r:r}const IA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function MA(e){return"string"===typeof e&&!e.includes("-")&&!!(IA.indexOf(e)>-1||/[A-Z]/u.test(e))}function OA(e,t,r,n){let{style:a,vars:s}=t;Object.assign(e.style,a,n&&n.getProjectionStyles(r));for(const i in s)e.style.setProperty(i,s[i])}const FA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function LA(e,t,r,n){OA(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(FA.has(a)?a:CE(a),t.attrs[a])}function BA(e,t){let{layout:r,layoutId:n}=t;return gS.has(e)||e.startsWith("origin")||(r||void 0!==n)&&(!!YT[e]||"opacity"===e)}function UA(e,t,r){var n;const{style:a}=e,s={};for(const i in a)(TE(a[i])||t.style&&TE(t.style[i])||BA(i,e)||void 0!==(null===(n=null===r||void 0===r?void 0:r.getValue(i))||void 0===n?void 0:n.liveStyle))&&(s[i]=a[i]);return r&&a&&"string"===typeof a.willChange&&(r.applyWillChange=!1),s}function zA(e,t,r){const n=UA(e,t,r);for(const a in e)if(TE(e[a])||TE(t[a])){n[-1!==vS.indexOf(a)?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a]=e[a]}return n}function VA(e){return gS.has(e)?"transform":rE.has(e)?CE(e):void 0}const HA=e=>(r,n)=>{const a=(0,t.useContext)(bA),s=(0,t.useContext)(Wj),i=()=>function(e,t,r,n,a){let{applyWillChange:s=!1,scrapeMotionValuesFromProps:i,createRenderState:o,onMount:l}=e;const c={latestValues:WA(t,r,n,!a&&s,i),renderState:o()};return l&&(c.mount=e=>l(t,e,c)),c}(e,r,a,s,n);return n?i():qj(i)};function $A(e,t,r){const n=Array.isArray(t)?t:[t];for(let a=0;a<n.length;a++){const t=fS(e,n[a]);if(t){const{transitionEnd:e,transition:n,...a}=t;r(a,e)}}}function WA(e,t,r,n,a){var s;const i={},o=new Set,l=n&&void 0===(null===(s=e.style)||void 0===s?void 0:s.willChange),c=a(e,{});for(const x in c)i[x]=ED(c[x]);let{initial:d,animate:u}=e;const h=CA(e),f=kA(e);t&&f&&!h&&!1!==e.inherit&&(void 0===d&&(d=t.initial),void 0===u&&(u=t.animate));let m=!!r&&!1===r.initial;m=m||!1===d;const p=m?u:d;return p&&"boolean"!==typeof p&&!lS(p)&&$A(e,p,((e,t)=>{for(const r in e){let t=e[r];if(Array.isArray(t)){t=t[m?t.length-1:0]}null!==t&&(i[r]=t)}for(const r in t)i[r]=t[r]})),l&&(u&&!1!==d&&!lS(u)&&$A(e,u,(e=>{for(const t in e){const e=VA(t);e&&o.add(e)}})),o.size&&(i.willChange=Array.from(o).join(","))),i}const qA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),GA=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),KA=(e,t)=>t&&"number"===typeof e?t.transform(e):e,YA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},XA=vS.length;function QA(e,t,r){const{style:n,vars:a,transformOrigin:s}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(gS.has(l))i=!0;else if(QS(l))a[l]=e;else{const t=KA(e,rk[l]);l.startsWith("origin")?(o=!0,s[l]=t):n[l]=t}}if(t.transform||(i||r?n.transform=function(e,t,r){let n="",a=!0;for(let s=0;s<XA;s++){const i=vS[s],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"===typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||r){const e=KA(o,rk[i]);l||(a=!1,n+=`${YA[i]||i}(${e}) `),r&&(t[i]=e)}}return n=n.trim(),r?n=r(t,a?"":n):a&&(n="none"),n}(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:r=0}=s;n.transformOrigin=`${e} ${t} ${r}`}}function JA(e,t,r){return"string"===typeof e?e:dC.transform(t+r*e)}const ZA={offset:"stroke-dashoffset",array:"stroke-dasharray"},eP={offset:"strokeDashoffset",array:"strokeDasharray"};function tP(e,t,r,n){let{attrX:a,attrY:s,attrScale:i,originX:o,originY:l,pathLength:c,pathSpacing:d=1,pathOffset:u=0,...h}=t;if(QA(e,h,n),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:p}=e;f.transform&&(p&&(m.transform=f.transform),delete f.transform),p&&(void 0!==o||void 0!==l||m.transform)&&(m.transformOrigin=function(e,t,r){return`${JA(t,e.x,e.width)} ${JA(r,e.y,e.height)}`}(p,void 0!==o?o:.5,void 0!==l?l:.5)),void 0!==a&&(f.x=a),void 0!==s&&(f.y=s),void 0!==i&&(f.scale=i),void 0!==c&&function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=a?ZA:eP;e[s.offset]=dC.transform(-n);const i=dC.transform(t),o=dC.transform(r);e[s.array]=`${i} ${o}`}(f,c,d,u,!1)}const rP=e=>"string"===typeof e&&"svg"===e.toLowerCase(),nP={useVisualState:HA({scrapeMotionValuesFromProps:zA,createRenderState:GA,onMount:(e,t,r)=>{let{renderState:n,latestValues:a}=r;RS.read((()=>{try{n.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(ZJ){n.dimensions={x:0,y:0,width:0,height:0}}})),RS.render((()=>{tP(n,a,rP(t.tagName),e.transformTemplate),LA(t,n)}))}})},aP={useVisualState:HA({applyWillChange:!0,scrapeMotionValuesFromProps:UA,createRenderState:qA})};function sP(e,t,r){for(const n in t)TE(t[n])||BA(n,r)||(e[n]=t[n])}function iP(e,r){const n={};return sP(n,e.style||{},e),Object.assign(n,function(e,r){let{transformTemplate:n}=e;return(0,t.useMemo)((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return QA(e,r,n),Object.assign({},e.vars,e.style)}),[r])}(e,r)),n}function oP(e,t){const r={},n=iP(e,t);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const lP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function cP(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||lP.has(e)}let dP=e=>!cP(e);try{(uP=require("@emotion/is-prop-valid").default)&&(dP=e=>e.startsWith("on")?!cP(e):uP(e))}catch(tZ){}var uP;function hP(e,r,n,a){const s=(0,t.useMemo)((()=>{const t={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return tP(t,r,rP(a),e.transformTemplate),{...t.attrs,style:{...t.style}}}),[r]);if(e.style){const t={};sP(t,e.style,e),s.style={...t,...s.style}}return s}function fP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(r,n,a,s,i)=>{let{latestValues:o}=s;const l=(MA(r)?hP:oP)(n,o,i,r),c=function(e,t,r){const n={};for(const a in e)"values"===a&&"object"===typeof e.values||(dP(a)||!0===r&&cP(a)||!t&&!cP(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}(n,"string"===typeof r,e),d=r!==t.Fragment?{...c,...l,ref:a}:{},{children:u}=n,h=(0,t.useMemo)((()=>TE(u)?u.get():u),[u]);return(0,t.createElement)(r,{...d,children:h})}}function mP(e,t){return function(r){let{forwardMotionProps:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return _A({...MA(r)?nP:aP,preloadedFeatures:e,useRender:fP(n),createVisualElement:t,Component:r})}}const pP={current:null},xP={current:!1};const vP=new WeakMap,gP=[...NC,BC,KC],yP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class bP{scrapeMotionValuesFromProps(e,t,r){return{}}constructor(e){let{parent:t,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:s,visualState:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=DC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=uk.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,RS.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=CA(r),this.isVariantNode=kA(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in u){const e=u[h];void 0!==l[h]&&TE(e)&&e.set(l[h],!1)}}mount(e){this.current=e,vP.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),xP.current||function(){if(xP.current=!0,aS)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>pP.current=e.matches;e.addListener(t),t()}else pP.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||pP.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){vP.delete(this.current),this.projection&&this.projection.unmount(),IS(this.notifyUpdate),IS(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=gS.has(e),n=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&RS.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)})),a=t.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{n(),a(),s&&s(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in AA){const t=AA[e];if(!t)continue;const{isEnabled:r,Feature:n}=t;if(!this.features[e]&&n&&r(this.props)&&(this.features[e]=new n(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<yP.length;r++){const t=yP[r];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const n=e["on"+t];n&&(this.propEventSubscriptions[t]=this.on(t,n))}this.prevMotionValues=function(e,t,r){for(const n in t){const a=t[n],s=r[n];if(TE(a))e.addValue(n,a);else if(TE(s))e.addValue(n,jE(a,{owner:e}));else if(s!==a)if(e.hasValue(n)){const t=e.getValue(n);!0===t.liveStyle?t.jump(a):t.hasAnimated||t.set(a)}else{const t=e.getStaticValue(n);e.addValue(n,jE(void 0!==t?t:a,{owner:e}))}}for(const n in r)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=jE(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let n=void 0===this.latestValues[e]&&this.current?null!==(r=this.getBaseTargetFromProps(this.props,e))&&void 0!==r?r:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var a;return void 0!==n&&null!==n&&("string"===typeof n&&(YS(n)||KS(n))?n=parseFloat(n):(a=n,!gP.find(wC(a))&&KC.test(t)&&(n=sk(e,t))),this.setBaseTarget(e,TE(n)?n.get():n)),TE(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let n;if("string"===typeof r||"object"===typeof r){const a=fS(this.props,r,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);a&&(n=a[e])}if(r&&void 0!==n)return n;const a=this.getBaseTargetFromProps(this.props,e);return void 0===a||TE(a)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:a}on(e,t){return this.events[e]||(this.events[e]=new bE),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.events[e].notify(...r)}}}class wP extends bP{constructor(){super(...arguments),this.KeyframeResolver=ok}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:r,style:n}=t;delete r[e],delete n[e]}}class NP extends wP{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=OA}readValueFromInstance(e,t){if(gS.has(t)){const e=ak(t);return e&&e.default||0}{const n=(r=e,window.getComputedStyle(r)),a=(QS(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof a?a.trim():a}var r}measureInstanceViewportBox(e,t){let{transformPagePoint:r}=t;return LT(e,r)}build(e,t,r){QA(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return UA(e,t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;TE(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}}class jP extends wP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wT}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(gS.has(t)){const e=ak(t);return e&&e.default||0}return t=FA.has(t)?t:CE(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return zA(e,t,r)}build(e,t,r){tP(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,n){LA(e,t,0,n)}mount(e){this.isSVGTag=rP(e.tagName),super.mount(e)}}const SP=(e,r)=>MA(e)?new jP(r):new NP(r,{allowProjection:e!==t.Fragment}),CP=oS(mP({...WE,...gA,...lA,...yA},SP)),kP=()=>{const e=rt(),{expenses:r,expensesStatus:n,deleteExpenseStatus:a}=$e((e=>e.expenses)),[s,i]=(0,t.useState)(""),[o,l]=(0,t.useState)("All"),[c,d]=(0,t.useState)("All"),[u,h]=(0,t.useState)({from:null,to:null}),[f,m]=(0,t.useState)({from:null,to:null}),[p,x]=(0,t.useState)(!1),[v,g]=(0,t.useState)(null),{toast:y}=$g(),[b,w]=(0,t.useState)(!1),[N,j]=(0,t.useState)(null),[S,C]=(0,t.useState)(!1),[k,E]=(0,t.useState)(null),[T,D]=(0,t.useState)(null),A=_w("(max-width: 640px)"),[P,_]=(0,t.useState)(!1);(0,t.useEffect)((()=>{"idle"===n&&e(uh())}),[e,n]);const R=r.filter((e=>{const t=e.description.toLowerCase().includes(s.toLowerCase())||e.category.toLowerCase().includes(s.toLowerCase());let r=!0;const n=new Date(e.date),a=new Date;switch(c){case"Today":r=UN(n,{start:Ml(a),end:zN(a)});break;case"Yesterday":r=UN(n,{start:Ml(Lc(a,1)),end:zN(Lc(a,1))});break;case"This Week":r=UN(n,{start:zl(a),end:zN(a)});break;case"Custom":u.from&&u.to&&(r=UN(n,{start:Ml(u.from),end:zN(u.to)}))}let i=!0;if("All"!==o){const t=e.amount===e.amountPaid;i=t&&"Paid"===o||!t&&"Due"===o}return t&&r&&i})),I=()=>{h(f),d("Custom")},M=()=>{m({from:null,to:null}),d("All")},O=()=>{g(null),x(!0),D(null)};return(0,Rr.jsxs)(Kf,{className:"w-full mx-auto border-0 shadow-none",children:[(0,Rr.jsx)(Yf,{children:(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(Xf,{className:"font-semibold",children:"Expenses List"}),(0,Rr.jsx)(Qf,{children:"Manage and view pharmacy expenses"})]}),A&&(0,Rr.jsx)(Vn,{size:"icon",onClick:O,children:(0,Rr.jsx)(Aw,{className:"h-4 w-4"})})]})}),(0,Rr.jsxs)(Jf,{className:"px-4",children:[(0,Rr.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:justify-between md:items-center md:space-y-0 md:space-x-2 mb-4",children:[(0,Rr.jsxs)("div",{className:"flex flex-col space-y-2 md:flex-row md:items-center md:space-x-2 md:space-y-0",children:[(0,Rr.jsxs)("div",{className:"flex w-full space-x-2",children:[(0,Rr.jsxs)("div",{className:"relative flex-grow",children:[(0,Rr.jsx)(VN,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,Rr.jsx)(Gf,{placeholder:"Search expenses...",value:s,onChange:e=>i(e.target.value),className:"pl-8 w-full"})]}),A&&(0,Rr.jsx)(Vn,{variant:"outline",className:"shrink-0",onClick:()=>_(!P),children:(0,Rr.jsx)(HN,{className:"h-4 w-4"})})]}),A?(0,Rr.jsx)(iS,{children:P&&(0,Rr.jsx)(CP.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden w-full",children:(0,Rr.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,Rr.jsxs)(fw,{onValueChange:e=>l(e),defaultValue:"All",children:[(0,Rr.jsx)(pw,{className:"w-full",children:(0,Rr.jsx)(mw,{placeholder:"Filter by Status"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"All",children:"All"}),(0,Rr.jsx)(yw,{value:"Paid",children:"Paid"}),(0,Rr.jsx)(yw,{value:"Due",children:"Due"})]})]}),(0,Rr.jsxs)(fw,{onValueChange:e=>d(e),defaultValue:"All",children:[(0,Rr.jsx)(pw,{className:"w-full",children:(0,Rr.jsx)(mw,{placeholder:"Time Filter Options"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"All",children:"All Time"}),(0,Rr.jsx)(yw,{value:"Today",children:"Today"}),(0,Rr.jsx)(yw,{value:"Yesterday",children:"Yesterday"}),(0,Rr.jsx)(yw,{value:"This Week",children:"This Week"}),(0,Rr.jsx)(yw,{value:"Custom",children:"Custom Range"})]})]}),"Custom"===c&&(0,Rr.jsx)(ju,{from:f.from,to:f.to,onSelect:e=>m(e),onSearch:I,onCancel:M})]})})}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"outline",className:"ml-auto",children:[(0,Rr.jsx)(HN,{className:"mr-2 h-4 w-4"}),"All"===o?"Status":o]})}),(0,Rr.jsxs)(_g,{align:"start",className:"w-[200px]",children:[(0,Rr.jsx)(Ig,{children:"Filter by Status"}),(0,Rr.jsx)(Mg,{}),(0,Rr.jsx)(Rg,{onSelect:()=>l("All"),children:"All"}),(0,Rr.jsx)(Rg,{onSelect:()=>l("Paid"),children:"Paid"}),(0,Rr.jsx)(Rg,{onSelect:()=>l("Due"),children:"Due"})]})]}),(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"outline",children:[(0,Rr.jsx)(Bw,{className:"mr-2 h-4 w-4"}),"All"===c?"All Time":c]})}),(0,Rr.jsxs)(_g,{align:"start",className:"w-[200px]",children:[(0,Rr.jsx)(Ig,{children:"Time Filter Options"}),(0,Rr.jsx)(Mg,{}),(0,Rr.jsx)(Rg,{onSelect:()=>d("Today"),children:"Today"}),(0,Rr.jsx)(Rg,{onSelect:()=>d("Yesterday"),children:"Yesterday"}),(0,Rr.jsx)(Rg,{onSelect:()=>d("This Week"),children:"This Week"}),(0,Rr.jsx)(Rg,{onSelect:()=>d("All"),children:"All Time"}),(0,Rr.jsx)(Rg,{onSelect:()=>d("Custom"),children:"Custom Range"})]})]}),"Custom"===c&&(0,Rr.jsx)(ju,{from:f.from,to:f.to,onSelect:e=>m(e),onSearch:I,onCancel:M})]})]}),!A&&(0,Rr.jsx)("div",{className:"flex space-x-2",children:(0,Rr.jsxs)(Vn,{variant:"outline",onClick:O,children:[(0,Rr.jsx)(Aw,{className:"mr-2 h-4 w-4"})," Add Expense"]})})]}),0===R.length?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-10",children:[(0,Rr.jsx)($N,{className:"h-16 w-16 text-gray-400 mb-4"}),(0,Rr.jsx)("p",{className:"text-xl font-semibold text-gray-600",children:"No expenses found"}),(0,Rr.jsx)("p",{className:"text-gray-500 mt-2",children:"There are no expenses matching your search criteria."})]}):(0,Rr.jsx)("div",{className:"overflow-x-auto",children:(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:"font-semibold hidden md:table-cell",children:"Expense ID"}),(0,Rr.jsx)(Tw,{className:"font-semibold",children:"Description"}),(0,Rr.jsx)(Tw,{className:"font-semibold hidden md:table-cell",children:"Category"}),(0,Rr.jsx)(Tw,{className:"font-semibold",children:"Amount"}),(0,Rr.jsx)(Tw,{className:"font-semibold md:hidden",children:"Date"}),(0,Rr.jsx)(Tw,{className:"font-semibold hidden md:table-cell",children:"Date"}),(0,Rr.jsx)(Tw,{className:"font-semibold hidden md:table-cell",children:"Status"}),(0,Rr.jsx)(Tw,{className:"font-semibold hidden md:table-cell",children:"Created By"}),(0,Rr.jsx)(Tw,{className:"font-semibold",children:"Actions"})]})}),(0,Rr.jsx)(Cw,{children:R.map((e=>{var t,r,n,a,s,i;return(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Dw,{className:"hidden md:table-cell",children:`E${null===(t=e._id)||void 0===t?void 0:t.slice(-6)}`}),(0,Rr.jsx)(Dw,{children:e.description}),(0,Rr.jsx)(Dw,{className:"hidden md:table-cell",children:e.category}),(0,Rr.jsxs)(Dw,{children:["\u20b9",null===(r=e.amount)||void 0===r?void 0:r.toLocaleString("en-IN")]}),(0,Rr.jsx)(Dw,{className:"md:hidden",children:jc(new Date(e.date),"dd MMM")}),(0,Rr.jsx)(Dw,{className:"hidden md:table-cell",children:(i=e.date,jc(new Date(i),"MMM dd, yyyy"))}),(0,Rr.jsx)(Dw,{className:"hidden md:table-cell",children:(0,Rr.jsx)(qw,{variant:(a=e.amount,s=e.amountPaid,a===s?"success":"destructive"),children:e.amount===e.amountPaid?"Paid":"Due"})}),(0,Rr.jsx)(Dw,{className:"hidden md:table-cell",children:null!==(n=e.createdByName)&&void 0!==n?n:"N/A"}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsxs)(Ag,{open:T===e._id,onOpenChange:()=>(e=>{D(T===e?null:e)})(e._id),children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsx)(Vn,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,Rr.jsx)(wm,{className:"h-4 w-4"})})}),(0,Rr.jsxs)(_g,{align:"end",children:[(0,Rr.jsx)(Rg,{onClick:()=>(e=>{g(e),x(!0),D(null)})(e),children:"Edit Expense"}),(0,Rr.jsx)(Rg,{onClick:()=>(e=>{E(e),C(!0),D(null)})(e),children:"Payments"}),(0,Rr.jsx)(Mg,{}),(0,Rr.jsx)(Rg,{className:"text-red-600",onClick:()=>(e=>{j(e),w(!0),D(null)})(e),children:"Delete Expense"})]})]})})]},e._id)}))})]})})]}),(0,Rr.jsx)(tj,{isOpen:p,onClose:()=>{x(!1),g(null),D(null)},expenseToEdit:v}),(0,Rr.jsx)(Tj,{open:b,onOpenChange:w,children:(0,Rr.jsxs)(_j,{className:"max-w-[90vw] w-full sm:max-w-[425px]",children:[(0,Rr.jsxs)(Rj,{children:[(0,Rr.jsx)(Mj,{className:"text-lg sm:text-xl",children:"Delete Expense?"}),(0,Rr.jsx)(Oj,{className:"text-sm sm:text-base",children:"Are you sure you want to delete this expense? This action cannot be undone."})]}),(0,Rr.jsxs)(Ij,{className:"flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[(0,Rr.jsx)(Lj,{className:"w-full sm:w-auto",children:"Cancel"}),(0,Rr.jsx)(Fj,{className:"w-full sm:w-auto",onClick:()=>{e(dh(N._id)).unwrap().then((()=>{y({title:"Expense deleted successfully",description:"The expense has been removed.",variant:"success"})})).catch((e=>{y({title:"Failed to delete expense",description:e.message||"There was an error deleting the expense. Please try again.",variant:"destructive"})})).finally((()=>{w(!1),j(null)}))},disabled:"loading"===a,children:"loading"===a?"Deleting...":"Delete"})]})]})}),(0,Rr.jsx)($j,{isOpen:S,setIsOpen:C,expenseData:k})]})},EP=rm("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),TP=rm("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),DP=rm("FileInput",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 15h10",key:"jfw4w8"}],["path",{d:"m9 18 3-3-3-3",key:"112psh"}]]),AP=e=>{let{from:r,to:n,onSelect:a,onSearch:s,onCancel:i}=e;const[o,l]=t.useState(!1),c=new Date,d=wu(c,1);return(0,Rr.jsx)("div",{className:Un("grid gap-2"),children:(0,Rr.jsxs)(Qo,{open:o,onOpenChange:l,children:[(0,Rr.jsx)(Jo,{asChild:!0,children:(0,Rr.jsxs)(Vn,{id:"date",variant:"outline",className:Un("w-[300px] justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[(0,Rr.jsx)(Bw,{className:"mr-2 h-4 w-4"}),r?n?(0,Rr.jsxs)(Rr.Fragment,{children:[jc(r,"LLL dd, y")," - ",jc(n,"LLL dd, y")]}):jc(r,"LLL dd, y"):(0,Rr.jsx)("span",{children:"Pick a date range"})]})}),(0,Rr.jsxs)(Zo,{className:"w-auto p-0",align:"start",children:[(0,Rr.jsx)(bu,{initialFocus:!0,mode:"range",defaultMonth:d,selected:{from:r,to:n},onSelect:e=>{if(!e){const e=r||n;if(e)return void a({from:e,to:e})}a(e)},numberOfMonths:2,disabled:e=>Ic(c,e),toDate:c}),(0,Rr.jsxs)("div",{className:"flex justify-end gap-2 p-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>{i(),l(!1)},children:"Cancel"}),(0,Rr.jsx)(Vn,{size:"sm",onClick:()=>{s(),l(!1)},children:"Search"})]})]})]})})},PP=e=>{const t=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(Math.abs(e)).replace(/^(\D+)/,"\u20b9");return e<0?`-${t}`:t};var _P={version:"0.18.5"},RP=1200,IP=1252,MP=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],OP={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},FP=function(e){-1!=MP.indexOf(e)&&(IP=OP[0]=e)};var LP=function(e){RP=e,FP(e)};function BP(){LP(1200),FP(1252)}function UP(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function zP(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var VP,HP=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return 255==t&&254==r?function(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}(e.slice(2)):254==t&&255==r?zP(e.slice(2)):65279==t?e.slice(1):e},$P=function(e){return String.fromCharCode(e)},WP=function(e){return String.fromCharCode(e)};var qP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function GP(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,l=0,c=0;c<e.length;)s=(r=e.charCodeAt(c++))>>2,i=(3&r)<<4|(n=e.charCodeAt(c++))>>4,o=(15&n)<<2|(a=e.charCodeAt(c++))>>6,l=63&a,isNaN(n)?o=l=64:isNaN(a)&&(l=64),t+=qP.charAt(s)+qP.charAt(i)+qP.charAt(o)+qP.charAt(l);return t}function KP(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)r=qP.indexOf(e.charAt(l++))<<2|(s=qP.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(r),n=(15&s)<<4|(i=qP.indexOf(e.charAt(l++)))>>2,64!==i&&(t+=String.fromCharCode(n)),a=(3&i)<<6|(o=qP.indexOf(e.charAt(l++))),64!==o&&(t+=String.fromCharCode(a));return t}var YP=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),XP=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(ZJ){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function QP(e){return YP?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function JP(e){return YP?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var ZP=function(e){return YP?XP(e,"binary"):e.split("").map((function(e){return 255&e.charCodeAt(0)}))};function e_(e){if("undefined"===typeof ArrayBuffer)return ZP(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=255&e.charCodeAt(n);return t}function t_(e){if(Array.isArray(e))return e.map((function(e){return String.fromCharCode(e)})).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function r_(e){if("undefined"==typeof ArrayBuffer)throw new Error("Unsupported");if(e instanceof ArrayBuffer)return r_(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var n_=YP?function(e){return Buffer.concat(e.map((function(e){return Buffer.isBuffer(e)?e:XP(e)})))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if("string"==typeof e[t])throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map((function(e){return Array.isArray(e)?e:[].slice.call(e)})))};var a_=/\u0000/g,s_=/[\u0001-\u0006]/g;function i_(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function o_(e,t){var r=""+e;return r.length>=t?r:wR("0",t-r.length)+r}function l_(e,t){var r=""+e;return r.length>=t?r:wR(" ",t-r.length)+r}function c_(e,t){var r=""+e;return r.length>=t?r:r+wR(" ",t-r.length)}var d_=Math.pow(2,32);function u_(e,t){return e>d_||e<-d_?function(e,t){var r=""+Math.round(e);return r.length>=t?r:wR("0",t-r.length)+r}(e,t):function(e,t){var r=""+e;return r.length>=t?r:wR("0",t-r.length)+r}(Math.round(e),t)}function h_(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var f_=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],m_=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var p_={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},x_={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},v_={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function g_(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,l=1,c=0,d=0,u=Math.floor(a);c<t&&(o=(u=Math.floor(a))*i+s,d=u*c+l,!(a-u<5e-8));)a=1/(a-u),s=i,i=o,l=c,c=d;if(d>t&&(c>t?(d=l,o=s):(d=c,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function y_(e,t,r){if(e>2958465||e<0)return null;var n=0|e,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,86400==++a&&(o.T=a=0,++n,++o.D)),60===n)i=r?[1317,10,29]:[1900,2,29],s=3;else if(0===n)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),n<60&&(s=(s+6)%7),r&&(s=function(e,t){t[0]-=581;var r=e.getDay();e<60&&(r=(r+6)%7);return r}(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var b_=new Date(1899,11,31,0,0,0),w_=b_.getTime(),N_=new Date(1900,2,1,0,0,0);function j_(e,t){var r=e.getTime();return t?r-=1262304e5:e>=N_&&(r+=864e5),(r-(w_+6e4*(e.getTimezoneOffset()-b_.getTimezoneOffset())))/864e5}function S_(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function C_(e){var t,r=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=r>=-4&&r<=-1?e.toPrecision(10+r):Math.abs(r)<=9?function(e){var t=e<0?12:11,r=S_(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10)).length<=t?r:e.toExponential(5)}(e):10===r?e.toFixed(10).substr(0,12):function(e){var t=S_(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),S_(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function k_(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):C_(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return G_(14,j_(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function E_(e,t,r,n){var a,s="",i=0,o=0,l=r.y,c=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:a=l%100,c=2;break;default:a=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:a=r.m,c=t.length;break;case 3:return m_[r.m-1][1];case 5:return m_[r.m-1][0];default:return m_[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:a=r.d,c=t.length;break;case 3:return f_[r.q][0];default:return f_[r.q][1]}break;case 104:switch(t.length){case 1:case 2:a=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:a=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:a=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==r.u||"s"!=t&&"ss"!=t?(o=n>=2?3===n?1e3:100:1===n?10:1,(i=Math.round(o*(r.S+r.u)))>=60*o&&(i=0),"s"===t?0===i?"0":""+i/o:(s=o_(i,2+n),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):o_(r.S,t.length);case 90:switch(t){case"[h]":case"[hh]":a=24*r.D+r.H;break;case"[m]":case"[mm]":a=60*(24*r.D+r.H)+r.M;break;case"[s]":case"[ss]":a=60*(60*(24*r.D+r.H)+r.M)+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:a=l,c=1}return c>0?o_(a,c):""}function T_(e){if(e.length<=3)return e;for(var t=e.length%3,r=e.substr(0,t);t!=e.length;t+=3)r+=(r.length>0?",":"")+e.substr(t,3);return r}var D_=/%/g;function A_(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+A_(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),-1===(r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a)).indexOf("e")){var i=Math.floor(Math.log(t)*Math.LOG10E);for(-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);"0."===r.substr(0,2);)r=(r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,r,n){return t+r+n.substr(0,(a+s)%a)+"."+n.substr(s)+"E"}))}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var P_=/# (\?+)( ?)\/( ?)(\d+)/;var __=/^#*0*\.([0#]+)/,R_=/\).*[0#]/,I_=/\(###\) ###\\?-####/;function M_(e){for(var t,r="",n=0;n!=e.length;++n)switch(t=e.charCodeAt(n)){case 35:break;case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(t)}return r}function O_(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function F_(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function L_(e,t,r){if(40===e.charCodeAt(0)&&!t.match(R_)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?L_("n",n,r):"("+L_("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return z_(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(D_,""),a=t.length-n.length;return z_(e,n,r*Math.pow(10,2*a))+wR("%",a)}(e,t,r);if(-1!==t.indexOf("E"))return A_(t,r);if(36===t.charCodeAt(0))return"$"+L_(e,t.substr(" "==t.charAt(1)?2:1),r);var a,s,i,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+u_(l,t.length);if(t.match(/^[#?]+$/))return"0"===(a=u_(r,0))&&(a=""),a.length>t.length?a:M_(t.substr(0,t.length-a.length))+a;if(s=t.match(P_))return function(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(0===s?"":""+s)+" "+(0===i?wR(" ",e[1].length+1+e[4].length):l_(i,e[1].length)+e[2]+"/"+e[3]+o_(o,e[4].length))}(s,l,c);if(t.match(/^#+0+$/))return c+u_(l,t.length-t.indexOf("0"));if(s=t.match(__))return a=O_(r,s[1].length).replace(/^([^\.]+)$/,"$1."+M_(s[1])).replace(/\.$/,"."+M_(s[1])).replace(/\.(\d*)$/,(function(e,t){return"."+t+wR("0",M_(s[1]).length-t.length)})),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+O_(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+T_(u_(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+L_(e,t,-r):T_(""+(Math.floor(r)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(r,s[1].length)))+"."+o_(F_(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return L_(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=i_(L_(e,t.replace(/[\\-]/g,""),r)),i=0,i_(i_(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return i<a.length?a.charAt(i++):"0"===e?"0":""})));if(t.match(I_))return"("+(a=L_(e,"##########",r)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=g_(l,Math.pow(10,i)-1,!1),a=""+c," "==(d=z_("n",s[1],o[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],(d=c_(o[2],i)).length<s[4].length&&(d=M_(s[4].substr(s[4].length-d.length))+d),a+=d;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=g_(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?l_(o[1],i)+s[2]+"/"+s[3]+c_(o[2],i):wR(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=u_(r,0),t.length<=a.length?a:M_(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var u=t.indexOf(".")-i,h=t.length-a.length-u;return M_(t.substr(0,u)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=F_(r,s[1].length),r<0?"-"+L_(e,t,-r):T_(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?o_(0,3-e.length):"")+e}))+"."+o_(i,s[1].length);switch(t){case"###,##0.00":return L_(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var f=T_(u_(l,0));return"0"!==f?c+f:"";case"###,###.00":return L_(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return L_(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function B_(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+B_(e,-t);var a=e.indexOf(".");-1===a&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),!(r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a)).match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);-1===r.indexOf(".")?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,r,n){return t+r+n.substr(0,(a+s)%a)+"."+n.substr(s)+"E"}))}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function U_(e,t,r){if(40===e.charCodeAt(0)&&!t.match(R_)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?U_("n",n,r):"("+U_("n",n,-r)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,r){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return z_(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}(e,t,r);if(-1!==t.indexOf("%"))return function(e,t,r){var n=t.replace(D_,""),a=t.length-n.length;return z_(e,n,r*Math.pow(10,2*a))+wR("%",a)}(e,t,r);if(-1!==t.indexOf("E"))return B_(t,r);if(36===t.charCodeAt(0))return"$"+U_(e,t.substr(" "==t.charAt(1)?2:1),r);var a,s,i,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+o_(l,t.length);if(t.match(/^[#?]+$/))return a=""+r,0===r&&(a=""),a.length>t.length?a:M_(t.substr(0,t.length-a.length))+a;if(s=t.match(P_))return function(e,t,r){return r+(0===t?"":""+t)+wR(" ",e[1].length+2+e[4].length)}(s,l,c);if(t.match(/^#+0+$/))return c+o_(l,t.length-t.indexOf("0"));if(s=t.match(__))return a=(a=(""+r).replace(/^([^\.]+)$/,"$1."+M_(s[1])).replace(/\.$/,"."+M_(s[1]))).replace(/\.(\d*)$/,(function(e,t){return"."+t+wR("0",M_(s[1]).length-t.length)})),-1!==t.indexOf("0.")?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+T_(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+U_(e,t,-r):T_(""+r)+"."+wR("0",s[1].length);if(s=t.match(/^#,#*,#0/))return U_(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=i_(U_(e,t.replace(/[\\-]/g,""),r)),i=0,i_(i_(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return i<a.length?a.charAt(i++):"0"===e?"0":""})));if(t.match(I_))return"("+(a=U_(e,"##########",r)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=g_(l,Math.pow(10,i)-1,!1),a=""+c," "==(d=z_("n",s[1],o[1])).charAt(d.length-1)&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],(d=c_(o[2],i)).length<s[4].length&&(d=M_(s[4].substr(s[4].length-d.length))+d),a+=d;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),c+((o=g_(l,Math.pow(10,i)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?l_(o[1],i)+s[2]+"/"+s[3]+c_(o[2],i):wR(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:M_(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var u=t.indexOf(".")-i,h=t.length-a.length-u;return M_(t.substr(0,u)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+U_(e,t,-r):T_(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?o_(0,3-e.length):"")+e}))+"."+o_(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var f=T_(""+l);return"0"!==f?c+f:"";default:if(t.match(/\.[0#?]*$/))return U_(e,t.slice(0,t.lastIndexOf(".")),r)+M_(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function z_(e,t,r){return(0|r)===r?U_(e,t,r):L_(e,t,r)}var V_=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function H_(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":h_(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(n=r;"]"!==e.charAt(t++)&&t<e.length;)n+=e.charAt(t);if(n.match(V_))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||"\\"==r&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var $_=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function W_(e,t){if(null==t)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0}return!1}function q_(e,t){var r=function(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),!0===r)throw new Error("Format |"+e+"| unterminated string ");return t}(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if("number"!==typeof t)return[4,4===r.length||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"]}var s=t>0?r[0]:t<0?r[1]:r[2];if(-1===r[0].indexOf("[")&&-1===r[1].indexOf("["))return[n,s];if(null!=r[0].match(/\[[=<>]/)||null!=r[1].match(/\[[=<>]/)){var i=r[0].match($_),o=r[1].match($_);return W_(t,i)?[n,r[0]]:W_(t,o)?[n,r[1]]:[n,r[null!=i&&null!=o?2:1]]}return[n,s]}function G_(e,t,r){null==r&&(r={});var n="";switch(typeof e){case"string":n="m/d/yy"==e&&r.dateNF?r.dateNF:e;break;case"number":null==(n=14==e&&r.dateNF?r.dateNF:(null!=r.table?r.table:p_)[e])&&(n=r.table&&r.table[x_[e]]||p_[x_[e]]),null==n&&(n=v_[e]||"General")}if(h_(n,0))return k_(t,r);t instanceof Date&&(t=j_(t,r.date1904));var a=q_(n,t);if(h_(a[1]))return k_(t,r);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,r,n){for(var a,s,i,o=[],l="",c=0,d="",u="t",h="H";c<e.length;)switch(d=e.charAt(c)){case"G":if(!h_(e,c))throw new Error("unrecognized character "+d+" in "+e);o[o.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(i=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(i);o[o.length]={t:"t",v:l},++c;break;case"\\":var f=e.charAt(++c),m="("===f||")"===f?f:"t";o[o.length]={t:m,v:f},++c;break;case"_":o[o.length]={t:"t",v:" "},c+=2;break;case"@":o[o.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==a&&null==(a=y_(t,r,"2"===e.charAt(c+1))))return"";o[o.length]={t:"X",v:e.substr(c,2)},u=d,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==a&&null==(a=y_(t,r)))return"";for(l=d;++c<e.length&&e.charAt(c).toLowerCase()===d;)l+=d;"m"===d&&"h"===u.toLowerCase()&&(d="M"),"h"===d&&(d=h),o[o.length]={t:d,v:l},u=d;break;case"A":case"a":case"\u4e0a":var p={t:d,v:d};if(null==a&&(a=y_(t,r)),"A/P"===e.substr(c,3).toUpperCase()?(null!=a&&(p.v=a.H>=12?"P":"A"),p.t="T",h="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=a&&(p.v=a.H>=12?"PM":"AM"),p.t="T",c+=5,h="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=a&&(p.v=a.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),p.t="T",c+=5,h="h"):(p.t="t",++c),null==a&&"T"===p.t)return"";o[o.length]=p,u=d;break;case"[":for(l=d;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(V_)){if(null==a&&null==(a=y_(t,r)))return"";o[o.length]={t:"Z",v:l.toLowerCase()},u=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",H_(e)||(o[o.length]={t:"t",v:l}));break;case".":if(null!=a){for(l=d;++c<e.length&&"0"===(d=e.charAt(c));)l+=d;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=d;++c<e.length&&"0#?.,E+-%".indexOf(d=e.charAt(c))>-1;)l+=d;o[o.length]={t:"n",v:l};break;case"?":for(l=d;e.charAt(++c)===d;)l+=d;o[o.length]={t:d,v:l},u=d;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":o[o.length]={t:1===n?"t":d,v:d},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=d;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:d,v:d},++c;break;case"$":o[o.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(d))throw new Error("unrecognized character "+d+" in "+e);o[o.length]={t:"t",v:d},++c}var x,v=0,g=0;for(c=o.length-1,u="t";c>=0;--c)switch(o[c].t){case"h":case"H":o[c].t=h,u="h",v<1&&(v=1);break;case"s":(x=o[c].v.match(/\.0+$/))&&(g=Math.max(g,x[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":u=o[c].t;break;case"m":"s"===u&&(o[c].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&o[c].v.match(/[Hh]/)&&(v=1),v<2&&o[c].v.match(/[Mm]/)&&(v=2),v<3&&o[c].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M),a.M>=60&&(a.M=0,++a.H);break;case 2:a.u>=.5&&(a.u=0,++a.S),a.S>=60&&(a.S=0,++a.M)}var y,b="";for(c=0;c<o.length;++c)switch(o[c].t){case"t":case"T":case" ":case"D":break;case"X":o[c].v="",o[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[c].v=E_(o[c].t.charCodeAt(0),o[c].v,a,g),o[c].t="t";break;case"n":case"?":for(y=c+1;null!=o[y]&&("?"===(d=o[y].t)||"D"===d||(" "===d||"t"===d)&&null!=o[y+1]&&("?"===o[y+1].t||"t"===o[y+1].t&&"/"===o[y+1].v)||"("===o[c].t&&(" "===d||"n"===d||")"===d)||"t"===d&&("/"===o[y].v||" "===o[y].v&&null!=o[y+1]&&"?"==o[y+1].t));)o[c].v+=o[y].v,o[y]={v:"",t:";"},++y;b+=o[c].v,c=y-1;break;case"G":o[c].t="t",o[c].v=k_(t,r)}var w,N,j="";if(b.length>0){40==b.charCodeAt(0)?(w=t<0&&45===b.charCodeAt(0)?-t:t,N=z_("n",b,w)):(N=z_("n",b,w=t<0&&n>1?-t:t),w<0&&o[0]&&"t"==o[0].t&&(N=N.substr(1),o[0].v="-"+o[0].v)),y=N.length-1;var S=o.length;for(c=0;c<o.length;++c)if(null!=o[c]&&"t"!=o[c].t&&o[c].v.indexOf(".")>-1){S=c;break}var C=o.length;if(S===o.length&&-1===N.indexOf("E")){for(c=o.length-1;c>=0;--c)null!=o[c]&&-1!=="n?".indexOf(o[c].t)&&(y>=o[c].v.length-1?(y-=o[c].v.length,o[c].v=N.substr(y+1,o[c].v.length)):y<0?o[c].v="":(o[c].v=N.substr(0,y+1),y=-1),o[c].t="t",C=c);y>=0&&C<o.length&&(o[C].v=N.substr(0,y+1)+o[C].v)}else if(S!==o.length&&-1===N.indexOf("E")){for(y=N.indexOf(".")-1,c=S;c>=0;--c)if(null!=o[c]&&-1!=="n?".indexOf(o[c].t)){for(s=o[c].v.indexOf(".")>-1&&c===S?o[c].v.indexOf(".")-1:o[c].v.length-1,j=o[c].v.substr(s+1);s>=0;--s)y>=0&&("0"===o[c].v.charAt(s)||"#"===o[c].v.charAt(s))&&(j=N.charAt(y--)+j);o[c].v=j,o[c].t="t",C=c}for(y>=0&&C<o.length&&(o[C].v=N.substr(0,y+1)+o[C].v),y=N.indexOf(".")+1,c=S;c<o.length;++c)if(null!=o[c]&&(-1!=="n?(".indexOf(o[c].t)||c===S)){for(s=o[c].v.indexOf(".")>-1&&c===S?o[c].v.indexOf(".")+1:0,j=o[c].v.substr(0,s);s<o[c].v.length;++s)y<N.length&&(j+=N.charAt(y++));o[c].v=j,o[c].t="t",C=c}}}for(c=0;c<o.length;++c)null!=o[c]&&"n?".indexOf(o[c].t)>-1&&(w=n>1&&t<0&&c>0&&"-"===o[c-1].v?-t:t,o[c].v=z_(o[c].t,o[c].v,w),o[c].t="t");var k="";for(c=0;c!==o.length;++c)null!=o[c]&&(k+=o[c].v);return k}(a[1],t,r,a[0])}function K_(e,t){if("number"!=typeof t){t=+t||-1;for(var r=0;r<392;++r)if(void 0!=p_[r]){if(p_[r]==e){t=r;break}}else t<0&&(t=r);t<0&&(t=391)}return p_[t]=e,t}function Y_(e){for(var t=0;392!=t;++t)void 0!==e[t]&&K_(e[t],t)}function X_(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',p_=e}var Q_={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},J_=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var Z_=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var r=function(e){var t=0,r=0,n=0,a="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)a[n]=e[n];for(n=0;256!=n;++n)for(r=e[n],t=256+n;t<4096;t+=256)r=a[t]=r>>>8^e[255&r];var s=[];for(n=1;16!=n;++n)s[n-1]="undefined"!==typeof Int32Array?a.subarray(256*n,256*n+256):a.slice(256*n,256*n+256);return s}(t),n=r[0],a=r[1],s=r[2],i=r[3],o=r[4],l=r[5],c=r[6],d=r[7],u=r[8],h=r[9],f=r[10],m=r[11],p=r[12],x=r[13],v=r[14];return e.table=t,e.bstr=function(e,r){for(var n=~r,a=0,s=e.length;a<s;)n=n>>>8^t[255&(n^e.charCodeAt(a++))];return~n},e.buf=function(e,r){for(var g=~r,y=e.length-15,b=0;b<y;)g=v[e[b++]^255&g]^x[e[b++]^g>>8&255]^p[e[b++]^g>>16&255]^m[e[b++]^g>>>24]^f[e[b++]]^h[e[b++]]^u[e[b++]]^d[e[b++]]^c[e[b++]]^l[e[b++]]^o[e[b++]]^i[e[b++]]^s[e[b++]]^a[e[b++]]^n[e[b++]]^t[e[b++]];for(y+=15;b<y;)g=g>>>8^t[255&(g^e[b++])];return~g},e.str=function(e,r){for(var n=~r,a=0,s=e.length,i=0,o=0;a<s;)(i=e.charCodeAt(a++))<128?n=n>>>8^t[255&(n^i)]:i<2048?n=(n=n>>>8^t[255&(n^(192|i>>6&31))])>>>8^t[255&(n^(128|63&i))]:i>=55296&&i<57344?(i=64+(1023&i),o=1023&e.charCodeAt(a++),n=(n=(n=(n=n>>>8^t[255&(n^(240|i>>8&7))])>>>8^t[255&(n^(128|i>>2&63))])>>>8^t[255&(n^(128|o>>6&15|(3&i)<<4))])>>>8^t[255&(n^(128|63&o))]):n=(n=(n=n>>>8^t[255&(n^(224|i>>12&15))])>>>8^t[255&(n^(128|i>>6&63))])>>>8^t[255&(n^(128|63&i))];return~n},e}(),eR=function(){var e,t={};function r(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function n(e){if("/"==e.charAt(e.length-1))return n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function a(e,t){"string"===typeof t&&(t=new Date(t));var r=t.getHours();r=(r=r<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,r);var n=t.getFullYear()-1980;n=(n=n<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,n)}function s(e){jM(e,0);for(var t={},r=0;e.l<=e.length-4;){var n=e.read_shift(2),a=e.read_shift(2),s=e.l+a,i={};if(21589===n)1&(r=e.read_shift(1))&&(i.mtime=e.read_shift(4)),a>5&&(2&r&&(i.atime=e.read_shift(4)),4&r&&(i.ctime=e.read_shift(4))),i.mtime&&(i.mt=new Date(1e3*i.mtime));e.l=s,t[n]=i}return t}function i(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return ne(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=N(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var r=t&&t.root||"",n=(YP&&Buffer.isBuffer(e)?e.toString("binary"):N(e)).split("\r\n"),a=0,s="";for(a=0;a<n.length;++a)if(s=n[a],/^Content-Location:/i.test(s)&&(s=s.slice(s.indexOf("file")),r||(r=s.slice(0,s.lastIndexOf("/")+1)),s.slice(0,r.length)!=r))for(;r.length>0&&(r=(r=r.slice(0,r.length-1)).slice(0,r.lastIndexOf("/")+1),s.slice(0,r.length)!=r););var i=(n[1]||"").match(/boundary="(.*?)"/);if(!i)throw new Error("MAD cannot find boundary");var o="--"+(i[1]||""),l=[],c=[],d={FileIndex:l,FullPaths:c};h(d);var u,f=0;for(a=0;a<n.length;++a){var m=n[a];m!==o&&m!==o+"--"||(f++&&ce(d,n.slice(u,a),r),u=a)}return d}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var r,n,a,s,i,o,f=512,m=[],p=e.slice(0,512);jM(p,0);var x=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(g,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(p);switch(r=x[0]){case 3:f=512;break;case 4:f=4096;break;case 0:if(0==x[1])return ne(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+r)}512!==f&&jM(p=e.slice(0,f),28);var y=e.slice(0,f);!function(e,t){var r=9;switch(e.l+=2,r=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+r);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+r);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+r)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(p,r);var b=p.read_shift(4,"i");if(3===r&&0!==b)throw new Error("# Directory Sectors: Expected 0 saw "+b);p.l+=4,s=p.read_shift(4,"i"),p.l+=4,p.chk("00100000","Mini Stream Cutoff Size: "),i=p.read_shift(4,"i"),n=p.read_shift(4,"i"),o=p.read_shift(4,"i"),a=p.read_shift(4,"i");for(var w=-1,j=0;j<109&&!((w=p.read_shift(4,"i"))<0);++j)m[j]=w;var S=function(e,t){for(var r=Math.ceil(e.length/t)-1,n=[],a=1;a<r;++a)n[a-1]=e.slice(a*t,(a+1)*t);return n[r-1]=e.slice(r*t),n}(e,f);c(o,a,S,f,m);var C=function(e,t,r,n){var a=e.length,s=[],i=[],o=[],l=[],c=n-1,d=0,u=0,h=0,f=0;for(d=0;d<a;++d)if(o=[],(h=d+t)>=a&&(h-=a),!i[h]){l=[];var m=[];for(u=h;u>=0;){m[u]=!0,i[u]=!0,o[o.length]=u,l.push(e[u]);var p=r[Math.floor(4*u/n)];if(n<4+(f=4*u&c))throw new Error("FAT boundary crossed: "+u+" 4 "+n);if(!e[p])break;if(m[u=pM(e[p],f)])break}s[h]={nodes:o,data:$I([l])}}return s}(S,s,m,f);C[s].name="!Directory",n>0&&i!==v&&(C[i].name="!MiniFAT"),C[m[0]].name="!FAT",C.fat_addrs=m,C.ssz=f;var k=[],E=[],T=[];!function(e,t,r,n,a,s,i,o){for(var c,h=0,f=n.length?2:0,m=t[e].data,p=0,x=0;p<m.length;p+=128){var g=m.slice(p,p+128);jM(g,64),x=g.read_shift(2),c=qI(g,0,x-f),n.push(c);var y={name:c,type:g.read_shift(1),color:g.read_shift(1),L:g.read_shift(4,"i"),R:g.read_shift(4,"i"),C:g.read_shift(4,"i"),clsid:g.read_shift(16),state:g.read_shift(4,"i"),start:0,size:0};0!==g.read_shift(2)+g.read_shift(2)+g.read_shift(2)+g.read_shift(2)&&(y.ct=u(g,g.l-8)),0!==g.read_shift(2)+g.read_shift(2)+g.read_shift(2)+g.read_shift(2)&&(y.mt=u(g,g.l-8)),y.start=g.read_shift(4,"i"),y.size=g.read_shift(4,"i"),y.size<0&&y.start<0&&(y.size=y.type=0,y.start=v,y.name=""),5===y.type?(h=y.start,a>0&&h!==v&&(t[h].name="!StreamData")):y.size>=4096?(y.storage="fat",void 0===t[y.start]&&(t[y.start]=d(r,y.start,t.fat_addrs,t.ssz)),t[y.start].name=y.name,y.content=t[y.start].data.slice(0,y.size)):(y.storage="minifat",y.size<0?y.size=0:h!==v&&y.start!==v&&t[h]&&(y.content=l(y,t[h].data,(t[o]||{}).data))),y.content&&jM(y.content,0),s[c]=y,i.push(y)}}(s,C,S,k,n,{},E,i),function(e,t,r){for(var n=0,a=0,s=0,i=0,o=0,l=r.length,c=[],d=[];n<l;++n)c[n]=d[n]=n,t[n]=r[n];for(;o<d.length;++o)a=e[n=d[o]].L,s=e[n].R,i=e[n].C,c[n]===n&&(-1!==a&&c[a]!==a&&(c[n]=c[a]),-1!==s&&c[s]!==s&&(c[n]=c[s])),-1!==i&&(c[i]=n),-1!==a&&n!=c[n]&&(c[a]=c[n],d.lastIndexOf(a)<o&&d.push(a)),-1!==s&&n!=c[n]&&(c[s]=c[n],d.lastIndexOf(s)<o&&d.push(s));for(n=1;n<l;++n)c[n]===n&&(-1!==s&&c[s]!==s?c[n]=c[s]:-1!==a&&c[a]!==a&&(c[n]=c[a]));for(n=1;n<l;++n)if(0!==e[n].type){if((o=n)!=c[o])do{o=c[o],t[n]=t[o]+"/"+t[n]}while(0!==o&&-1!==c[o]&&o!=c[o]);c[n]=-1}for(t[0]+="/",n=1;n<l;++n)2!==e[n].type&&(t[n]+="/")}(E,T,k),k.shift();var D={FileIndex:E,FullPaths:T};return t&&t.raw&&(D.raw={header:y,sectors:S}),D}function l(e,t,r){for(var n=e.start,a=e.size,s=[],i=n;r&&a>0&&i>=0;)s.push(t.slice(i*x,i*x+x)),a-=x,i=pM(r,4*i);return 0===s.length?CM(0):n_(s).slice(0,e.size)}function c(e,t,r,n,a){var s=v;if(e===v){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var i=r[e],o=(n>>>2)-1;if(!i)return;for(var l=0;l<o&&(s=pM(i,4*l))!==v;++l)a.push(s);c(pM(i,n-4),t-1,r,n,a)}}function d(e,t,r,n,a){var s=[],i=[];a||(a=[]);var o=n-1,l=0,c=0;for(l=t;l>=0;){a[l]=!0,s[s.length]=l,i.push(e[l]);var d=r[Math.floor(4*l/n)];if(n<4+(c=4*l&o))throw new Error("FAT boundary crossed: "+l+" 4 "+n);if(!e[d])break;l=pM(e[d],c)}return{nodes:s,data:$I([i])}}function u(e,t){return new Date(1e3*(mM(e,t+4)/1e7*Math.pow(2,32)+mM(e,t)/1e7-11644473600))}function h(e,t){var r=t||{},n=r.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=n+"/",e.FileIndex[0]={name:n,type:5}),r.CLSID&&(e.FileIndex[0].clsid=r.CLSID),function(e){var t="\x01Sh33tJ5";if(eR.find(e,"/"+t))return;var r=CM(4);r[0]=55,r[1]=r[3]=50,r[2]=54,e.FileIndex.push({name:t,type:2,content:r,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),f(e)}(e)}function f(e,t){h(e);for(var a=!1,s=!1,i=e.FullPaths.length-1;i>=0;--i){var o=e.FileIndex[i];switch(o.type){case 0:s?a=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:s=!0,isNaN(o.R*o.L*o.C)&&(a=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(a=!0);break;default:a=!0}}if(a||t){var l=new Date(1987,1,19),c=0,d=Object.create?Object.create(null):{},u=[];for(i=0;i<e.FullPaths.length;++i)d[e.FullPaths[i]]=!0,0!==e.FileIndex[i].type&&u.push([e.FullPaths[i],e.FileIndex[i]]);for(i=0;i<u.length;++i){var f=r(u[i][0]);(s=d[f])||(u.push([f,{name:n(f).replace("/",""),type:1,clsid:b,ct:l,mt:l,content:null}]),d[f]=!0)}for(u.sort((function(e,t){return function(e,t){for(var r=e.split("/"),n=t.split("/"),a=0,s=0,i=Math.min(r.length,n.length);a<i;++a){if(s=r[a].length-n[a].length)return s;if(r[a]!=n[a])return r[a]<n[a]?-1:1}return r.length-n.length}(e[0],t[0])})),e.FullPaths=[],e.FileIndex=[],i=0;i<u.length;++i)e.FullPaths[i]=u[i][0],e.FileIndex[i]=u[i][1];for(i=0;i<u.length;++i){var m=e.FileIndex[i],p=e.FullPaths[i];if(m.name=n(p).replace("/",""),m.L=m.R=m.C=-(m.color=1),m.size=m.content?m.content.length:0,m.start=0,m.clsid=m.clsid||b,0===i)m.C=u.length>1?1:-1,m.size=0,m.type=5;else if("/"==p.slice(-1)){for(c=i+1;c<u.length&&r(e.FullPaths[c])!=p;++c);for(m.C=c>=u.length?-1:c,c=i+1;c<u.length&&r(e.FullPaths[c])!=r(p);++c);m.R=c>=u.length?-1:c,m.type=1}else r(e.FullPaths[i+1]||"")==r(p)&&(m.R=i+1),m.type=2}}}function m(e,t){var r=t||{};if("mad"==r.fileType)return function(e,t){for(var r=t||{},n=r.boundary||"SheetJS",a=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(n="------="+n).slice(2)+'"',"","",""],s=e.FullPaths[0],i=s,o=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(i=e.FullPaths[l].slice(s.length),(o=e.FileIndex[l]).size&&o.content&&"\x01Sh33tJ5"!=i){i=i.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,(function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"})).replace(/[\u0080-\uFFFF]/g,(function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"}));for(var c=o.content,d=YP&&Buffer.isBuffer(c)?c.toString("binary"):N(c),u=0,h=Math.min(1024,d.length),f=0,m=0;m<=h;++m)(f=d.charCodeAt(m))>=32&&f<128&&++u;var p=u>=4*h/5;a.push(n),a.push("Content-Location: "+(r.root||"file:///C:/SheetJS/")+i),a.push("Content-Transfer-Encoding: "+(p?"quoted-printable":"base64")),a.push("Content-Type: "+ie(o,i)),a.push(""),a.push(p?le(d):oe(d))}return a.push(n+"--\r\n"),a.join("\r\n")}(e,r);if(f(e),"zip"===r.fileType)return function(e,t){var r=t||{},n=[],s=[],i=CM(1),o=r.compression?8:0,l=0;0;var c=0,d=0,u=0,h=0,f=e.FullPaths[0],m=f,p=e.FileIndex[0],x=[],v=0;for(c=1;c<e.FullPaths.length;++c)if(m=e.FullPaths[c].slice(f.length),(p=e.FileIndex[c]).size&&p.content&&"\x01Sh33tJ5"!=m){var g=u,y=CM(m.length);for(d=0;d<m.length;++d)y.write_shift(1,127&m.charCodeAt(d));y=y.slice(0,y.l),x[h]=Z_.buf(p.content,0);var b=p.content;8==o&&(b=j(b)),(i=CM(30)).write_shift(4,67324752),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),p.mt?a(i,p.mt):i.write_shift(4,0),i.write_shift(-4,8&l?0:x[h]),i.write_shift(4,8&l?0:b.length),i.write_shift(4,8&l?0:p.content.length),i.write_shift(2,y.length),i.write_shift(2,0),u+=i.length,n.push(i),u+=y.length,n.push(y),u+=b.length,n.push(b),8&l&&((i=CM(12)).write_shift(-4,x[h]),i.write_shift(4,b.length),i.write_shift(4,p.content.length),u+=i.l,n.push(i)),(i=CM(46)).write_shift(4,33639248),i.write_shift(2,0),i.write_shift(2,20),i.write_shift(2,l),i.write_shift(2,o),i.write_shift(4,0),i.write_shift(-4,x[h]),i.write_shift(4,b.length),i.write_shift(4,p.content.length),i.write_shift(2,y.length),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(4,0),i.write_shift(4,g),v+=i.l,s.push(i),v+=y.length,s.push(y),++h}return i=CM(22),i.write_shift(4,101010256),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,h),i.write_shift(2,h),i.write_shift(4,v),i.write_shift(4,u),i.write_shift(2,0),n_([n_(n),n_(s),i])}(e,r);var n=function(e){for(var t=0,r=0,n=0;n<e.FileIndex.length;++n){var a=e.FileIndex[n];if(a.content){var s=a.content.length;s>0&&(s<4096?t+=s+63>>6:r+=s+511>>9)}}for(var i=e.FullPaths.length+3>>2,o=t+127>>7,l=(t+7>>3)+r+i+o,c=l+127>>7,d=c<=109?0:Math.ceil((c-109)/127);l+c+d+127>>7>c;)d=++c<=109?0:Math.ceil((c-109)/127);var u=[1,d,c,o,i,r,t,0];return e.FileIndex[0].size=t<<6,u[7]=(e.FileIndex[0].start=u[0]+u[1]+u[2]+u[3]+u[4]+u[5])+(u[6]+7>>3),u}(e),s=CM(n[7]<<9),i=0,o=0;for(i=0;i<8;++i)s.write_shift(1,y[i]);for(i=0;i<8;++i)s.write_shift(2,0);for(s.write_shift(2,62),s.write_shift(2,3),s.write_shift(2,65534),s.write_shift(2,9),s.write_shift(2,6),i=0;i<3;++i)s.write_shift(2,0);for(s.write_shift(4,0),s.write_shift(4,n[2]),s.write_shift(4,n[0]+n[1]+n[2]+n[3]-1),s.write_shift(4,0),s.write_shift(4,4096),s.write_shift(4,n[3]?n[0]+n[1]+n[2]-1:v),s.write_shift(4,n[3]),s.write_shift(-4,n[1]?n[0]-1:v),s.write_shift(4,n[1]),i=0;i<109;++i)s.write_shift(-4,i<n[2]?n[1]+i:-1);if(n[1])for(o=0;o<n[1];++o){for(;i<236+127*o;++i)s.write_shift(-4,i<n[2]?n[1]+i:-1);s.write_shift(-4,o===n[1]-1?v:o+1)}var l=function(e){for(o+=e;i<o-1;++i)s.write_shift(-4,i+1);e&&(++i,s.write_shift(-4,v))};for(o=i=0,o+=n[1];i<o;++i)s.write_shift(-4,w.DIFSECT);for(o+=n[2];i<o;++i)s.write_shift(-4,w.FATSECT);l(n[3]),l(n[4]);for(var c=0,d=0,u=e.FileIndex[0];c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&((d=u.content.length)<4096||(u.start=o,l(d+511>>9)));for(l(n[6]+7>>3);511&s.l;)s.write_shift(-4,w.ENDOFCHAIN);for(o=i=0,c=0;c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&(!(d=u.content.length)||d>=4096||(u.start=o,l(d+63>>6)));for(;511&s.l;)s.write_shift(-4,w.ENDOFCHAIN);for(i=0;i<n[4]<<2;++i){var h=e.FullPaths[i];if(h&&0!==h.length){u=e.FileIndex[i],0===i&&(u.start=u.size?u.start-1:v);var m=0===i&&r.root||u.name;if(d=2*(m.length+1),s.write_shift(64,m,"utf16le"),s.write_shift(2,d),s.write_shift(1,u.type),s.write_shift(1,u.color),s.write_shift(-4,u.L),s.write_shift(-4,u.R),s.write_shift(-4,u.C),u.clsid)s.write_shift(16,u.clsid,"hex");else for(c=0;c<4;++c)s.write_shift(4,0);s.write_shift(4,u.state||0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,u.start),s.write_shift(4,u.size),s.write_shift(4,0)}else{for(c=0;c<17;++c)s.write_shift(4,0);for(c=0;c<3;++c)s.write_shift(4,-1);for(c=0;c<12;++c)s.write_shift(4,0)}}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>=4096)if(s.l=u.start+1<<9,YP&&Buffer.isBuffer(u.content))u.content.copy(s,s.l,0,u.size),s.l+=u.size+511&-512;else{for(c=0;c<u.size;++c)s.write_shift(1,u.content[c]);for(;511&c;++c)s.write_shift(1,0)}for(i=1;i<e.FileIndex.length;++i)if((u=e.FileIndex[i]).size>0&&u.size<4096)if(YP&&Buffer.isBuffer(u.content))u.content.copy(s,s.l,0,u.size),s.l+=u.size+63&-64;else{for(c=0;c<u.size;++c)s.write_shift(1,u.content[c]);for(;63&c;++c)s.write_shift(1,0)}if(YP)s.l=s.length;else for(;s.l<s.length;)s.write_shift(1,0);return s}t.version="1.2.1";var p,x=64,v=-2,g="d0cf11e0a1b11ae1",y=[208,207,17,224,161,177,26,225],b="00000000000000000000000000000000",w={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:v,FREESECT:-1,HEADER_SIGNATURE:g,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:b,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function N(e){for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function j(e){return p?p.deflateRawSync(e):K(e)}var S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],k=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function E(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var T="undefined"!==typeof Uint8Array,D=T?new Uint8Array(256):[],A=0;A<256;++A)D[A]=E(A);function P(e,t){var r=D[255&e];return t<=8?r>>>8-t:(r=r<<8|D[e>>8&255],t<=16?r>>>16-t:(r=r<<8|D[e>>16&255])>>>24-t)}function _(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=6?0:e[n+1]<<8))>>>r&3}function R(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=5?0:e[n+1]<<8))>>>r&7}function I(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=3?0:e[n+1]<<8))>>>r&31}function M(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=1?0:e[n+1]<<8))>>>r&127}function O(e,t,r){var n=7&t,a=t>>>3,s=(1<<r)-1,i=e[a]>>>n;return r<8-n?i&s:(i|=e[a+1]<<8-n,r<16-n?i&s:(i|=e[a+2]<<16-n,r<24-n?i&s:(i|=e[a+3]<<24-n)&s))}function F(e,t,r){var n=7&t,a=t>>>3;return n<=5?e[a]|=(7&r)<<n:(e[a]|=r<<n&255,e[a+1]=(7&r)>>8-n),t+3}function L(e,t,r){return r=(1&r)<<(7&t),e[t>>>3]|=r,t+1}function B(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=r,t+8}function U(e,t,r){var n=t>>>3;return r<<=7&t,e[n]|=255&r,r>>>=8,e[n+1]=255&r,e[n+2]=r>>>8,t+16}function z(e,t){var r=e.length,n=2*r>t?2*r:t+5,a=0;if(r>=t)return e;if(YP){var s=JP(n);if(e.copy)e.copy(s);else for(;a<e.length;++a)s[a]=e[a];return s}if(T){var i=new Uint8Array(n);if(i.set)i.set(e);else for(;a<r;++a)i[a]=e[a];return i}return e.length=n,e}function V(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=0;return t}function H(e,t,r){var n=1,a=0,s=0,i=0,o=0,l=e.length,c=T?new Uint16Array(32):V(32);for(s=0;s<32;++s)c[s]=0;for(s=l;s<r;++s)e[s]=0;l=e.length;var d=T?new Uint16Array(l):V(l);for(s=0;s<l;++s)c[a=e[s]]++,n<a&&(n=a),d[s]=0;for(c[0]=0,s=1;s<=n;++s)c[s+16]=o=o+c[s-1]<<1;for(s=0;s<l;++s)0!=(o=e[s])&&(d[s]=c[o+16]++);var u=0;for(s=0;s<l;++s)if(0!=(u=e[s]))for(o=P(d[s],n)>>n-u,i=(1<<n+4-u)-1;i>=0;--i)t[o|i<<u]=15&u|s<<4;return n}var $=T?new Uint16Array(512):V(512),W=T?new Uint16Array(32):V(32);if(!T){for(var q=0;q<512;++q)$[q]=0;for(q=0;q<32;++q)W[q]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);H(e,W,32);var r=[];for(t=0;t<=143;t++)r.push(8);for(;t<=255;t++)r.push(9);for(;t<=279;t++)r.push(7);for(;t<=287;t++)r.push(8);H(r,$,288)}();var G=function(){for(var e=T?new Uint8Array(32768):[],t=0,r=0;t<k.length-1;++t)for(;r<k[t+1];++r)e[r]=t;for(;r<32768;++r)e[r]=29;var n=T?new Uint8Array(259):[];for(t=0,r=0;t<C.length-1;++t)for(;r<C[t+1];++r)n[r]=t;return function(t,r){return t.length<8?function(e,t){for(var r=0;r<e.length;){var n=Math.min(65535,e.length-r),a=r+n==e.length;for(t.write_shift(1,+a),t.write_shift(2,n),t.write_shift(2,65535&~n);n-- >0;)t[t.l++]=e[r++]}return t.l}(t,r):function(t,r){for(var a=0,s=0,i=T?new Uint16Array(32768):[];s<t.length;){var o=Math.min(65535,t.length-s);if(o<10){for(7&(a=F(r,a,+!(s+o!=t.length)))&&(a+=8-(7&a)),r.l=a/8|0,r.write_shift(2,o),r.write_shift(2,65535&~o);o-- >0;)r[r.l++]=t[s++];a=8*r.l}else{a=F(r,a,+!(s+o!=t.length)+2);for(var l=0;o-- >0;){var c=t[s],d=-1,u=0;if((d=i[l=32767&(l<<5^c)])&&((d|=-32768&s)>s&&(d-=32768),d<s))for(;t[d+u]==t[s+u]&&u<250;)++u;if(u>2){(c=n[u])<=22?a=B(r,a,D[c+1]>>1)-1:(B(r,a,3),B(r,a+=5,D[c-23]>>5),a+=3);var h=c<8?0:c-4>>2;h>0&&(U(r,a,u-C[c]),a+=h),c=e[s-d],a=B(r,a,D[c]>>3),a-=3;var f=c<4?0:c-2>>1;f>0&&(U(r,a,s-d-k[c]),a+=f);for(var m=0;m<u;++m)i[l]=32767&s,l=32767&(l<<5^t[s]),++s;o-=u-1}else c<=143?c+=48:a=L(r,a,1),a=B(r,a,D[c]),i[l]=32767&s,++s}a=B(r,a,0)-1}}return r.l=(a+7)/8|0,r.l}(t,r)}}();function K(e){var t=CM(50+Math.floor(1.1*e.length)),r=G(e,t);return t.slice(0,r)}var Y=T?new Uint16Array(32768):V(32768),X=T?new Uint16Array(32768):V(32768),Q=T?new Uint16Array(128):V(128),J=1,Z=1;function ee(e,t){var r=I(e,t)+257,n=I(e,t+=5)+1,a=function(e,t){var r=7&t,n=t>>>3;return(e[n]|(r<=4?0:e[n+1]<<8))>>>r&15}(e,t+=5)+4;t+=4;for(var s=0,i=T?new Uint8Array(19):V(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=T?new Uint8Array(8):V(8),d=T?new Uint8Array(8):V(8),u=i.length,h=0;h<a;++h)i[S[h]]=s=R(e,t),l<s&&(l=s),c[s]++,t+=3;var f=0;for(c[0]=0,h=1;h<=l;++h)d[h]=f=f+c[h-1]<<1;for(h=0;h<u;++h)0!=(f=i[h])&&(o[h]=d[f]++);var m=0;for(h=0;h<u;++h)if(0!=(m=i[h])){f=D[o[h]]>>8-m;for(var p=(1<<7-m)-1;p>=0;--p)Q[f|p<<m]=7&m|h<<3}var x=[];for(l=1;x.length<r+n;)switch(t+=7&(f=Q[M(e,t)]),f>>>=3){case 16:for(s=3+_(e,t),t+=2,f=x[x.length-1];s-- >0;)x.push(f);break;case 17:for(s=3+R(e,t),t+=3;s-- >0;)x.push(0);break;case 18:for(s=11+M(e,t),t+=7;s-- >0;)x.push(0);break;default:x.push(f),l<f&&(l=f)}var v=x.slice(0,r),g=x.slice(r);for(h=r;h<286;++h)v[h]=0;for(h=n;h<30;++h)g[h]=0;return J=H(v,Y,286),Z=H(g,X,30),t}function te(e,t){var r=function(e,t){if(3==e[0]&&!(3&e[1]))return[QP(t),2];for(var r=0,n=0,a=JP(t||1<<18),s=0,i=a.length>>>0,o=0,l=0;0==(1&n);)if(n=R(e,r),r+=3,n>>>1!=0)for(n>>1==1?(o=9,l=5):(r=ee(e,r),o=J,l=Z);;){!t&&i<s+32767&&(i=(a=z(a,s+32767)).length);var c=O(e,r,o),d=n>>>1==1?$[c]:Y[c];if(r+=15&d,0===((d>>>=4)>>>8&255))a[s++]=d;else{if(256==d)break;var u=(d-=257)<8?0:d-4>>2;u>5&&(u=0);var h=s+C[d];u>0&&(h+=O(e,r,u),r+=u),c=O(e,r,l),r+=15&(d=n>>>1==1?W[c]:X[c]);var f=(d>>>=4)<4?0:d-2>>1,m=k[d];for(f>0&&(m+=O(e,r,f),r+=f),!t&&i<h&&(i=(a=z(a,h+100)).length);s<h;)a[s]=a[s-m],++s}}else{7&r&&(r+=8-(7&r));var p=e[r>>>3]|e[1+(r>>>3)]<<8;if(r+=32,p>0)for(!t&&i<s+p&&(i=(a=z(a,s+p)).length);p-- >0;)a[s++]=e[r>>>3],r+=8}return t?[a,r+7>>>3]:[a.slice(0,s),r+7>>>3]}(e.slice(e.l||0),t);return e.l+=r[1],r[0]}function re(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function ne(e,t){var r=e;jM(r,0);var n={FileIndex:[],FullPaths:[]};h(n,{root:t.root});for(var a=r.length-4;(80!=r[a]||75!=r[a+1]||5!=r[a+2]||6!=r[a+3])&&a>=0;)--a;r.l=a+4,r.l+=4;var i=r.read_shift(2);r.l+=6;var o=r.read_shift(4);for(r.l=o,a=0;a<i;++a){r.l+=20;var l=r.read_shift(4),c=r.read_shift(4),d=r.read_shift(2),u=r.read_shift(2),f=r.read_shift(2);r.l+=8;var m=r.read_shift(4),p=s(r.slice(r.l+d,r.l+d+u));r.l+=d+u+f;var x=r.l;r.l=m+4,ae(r,l,c,n,p),r.l=x}return n}function ae(e,t,r,n,a){e.l+=2;var i=e.read_shift(2),o=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),r=65535&e.read_shift(2),n=new Date,a=31&r,s=15&(r>>>=5);r>>>=4,n.setMilliseconds(0),n.setFullYear(r+1980),n.setMonth(s-1),n.setDate(a);var i=31&t,o=63&(t>>>=5);return t>>>=6,n.setHours(t),n.setMinutes(o),n.setSeconds(i<<1),n}(e);if(8257&i)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),d=e.read_shift(4),u=e.read_shift(2),h=e.read_shift(2),f="",m=0;m<u;++m)f+=String.fromCharCode(e[e.l++]);if(h){var x=s(e.slice(e.l,e.l+h));(x[21589]||{}).mt&&(l=x[21589].mt),((a||{})[21589]||{}).mt&&(l=a[21589].mt)}e.l+=h;var v=e.slice(e.l,e.l+c);switch(o){case 8:v=function(e,t){if(!p)return te(e,t);var r=new(0,p.InflateRaw),n=r._processChunk(e.slice(e.l),r._finishFlushFlag);return e.l+=r.bytesRead,n}(e,d);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var g=!1;8&i&&(134695760==e.read_shift(4)&&(e.read_shift(4),g=!0),c=e.read_shift(4),d=e.read_shift(4)),c!=t&&re(g,"Bad compressed size: "+t+" != "+c),d!=r&&re(g,"Bad uncompressed size: "+r+" != "+d),de(n,f,v,{unsafe:!0,mt:l})}var se={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ie(e,t){if(e.ctype)return e.ctype;var r=e.name||"",n=r.match(/\.([^\.]+)$/);return n&&se[n[1]]||t&&(n=(r=t).match(/[\.\\]([^\.\\])+$/))&&se[n[1]]?se[n[1]]:"application/octet-stream"}function oe(e){for(var t=GP(e),r=[],n=0;n<t.length;n+=76)r.push(t.slice(n,n+76));return r.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,(function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)}));"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var r=[],n=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),a=0;a<n.length;++a){var s=n[a];if(0!=s.length)for(var i=0;i<s.length;){var o=76,l=s.slice(i,i+o);"="==l.charAt(o-1)?o--:"="==l.charAt(o-2)?o-=2:"="==l.charAt(o-3)&&(o-=3),l=s.slice(i,i+o),(i+=o)<s.length&&(l+="="),r.push(l)}else r.push("")}return r.join("\r\n")}function ce(e,t,r){for(var n,a="",s="",i="",o=0;o<10;++o){var l=t[o];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":a=c[2].trim();break;case"content-type":i=c[2].trim();break;case"content-transfer-encoding":s=c[2].trim()}}switch(++o,s.toLowerCase()){case"base64":n=ZP(KP(t.slice(o).join("")));break;case"quoted-printable":n=function(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r];r<=e.length&&"="==n.charAt(n.length-1);)n=n.slice(0,n.length-1)+e[++r];t.push(n)}for(var a=0;a<t.length;++a)t[a]=t[a].replace(/[=][0-9A-Fa-f]{2}/g,(function(e){return String.fromCharCode(parseInt(e.slice(1),16))}));return ZP(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+s)}var d=de(e,a.slice(r.length),n,{unsafe:!0});i&&(d.ctype=i)}function de(e,t,r,a){var s=a&&a.unsafe;s||h(e);var i=!s&&eR.find(e,t);if(!i){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),i={name:n(t),type:2},e.FileIndex.push(i),e.FullPaths.push(o),s||eR.utils.cfb_gc(e)}return i.content=r,i.size=r?r.length:0,a&&(a.CLSID&&(i.clsid=a.CLSID),a.mt&&(i.mt=a.mt),a.ct&&(i.ct=a.ct)),i}return t.find=function(e,t){var r=e.FullPaths.map((function(e){return e.toUpperCase()})),n=r.map((function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]})),a=!1;47===t.charCodeAt(0)?(a=!0,t=r[0].slice(0,-1)+t):a=-1!==t.indexOf("/");var s=t.toUpperCase(),i=!0===a?r.indexOf(s):n.indexOf(s);if(-1!==i)return e.FileIndex[i];var o=!s.match(s_);for(s=s.replace(a_,""),o&&(s=s.replace(s_,"!")),i=0;i<r.length;++i){if((o?r[i].replace(s_,"!"):r[i]).replace(a_,"")==s)return e.FileIndex[i];if((o?n[i].replace(s_,"!"):n[i]).replace(a_,"")==s)return e.FileIndex[i]}return null},t.read=function(t,r){var n=r&&r.type;switch(n||YP&&Buffer.isBuffer(t)&&(n="buffer"),n||"base64"){case"file":return function(t,r){return i(),o(e.readFileSync(t),r)}(t,r);case"base64":return o(ZP(KP(t)),r);case"binary":return o(ZP(t),r)}return o(t,r)},t.parse=o,t.write=function(t,r){var n=m(t,r);switch(r&&r.type||"buffer"){case"file":return i(),e.writeFileSync(r.filename,n),n;case"binary":return"string"==typeof n?n:N(n);case"base64":return GP("string"==typeof n?n:N(n));case"buffer":if(YP)return Buffer.isBuffer(n)?n:XP(n);case"array":return"string"==typeof n?ZP(n):n}return n},t.writeFile=function(t,r,n){i();var a=m(t,n);e.writeFileSync(r,a)},t.utils={cfb_new:function(e){var t={};return h(t,e),t},cfb_add:de,cfb_del:function(e,t){h(e);var r=eR.find(e,t);if(r)for(var n=0;n<e.FileIndex.length;++n)if(e.FileIndex[n]==r)return e.FileIndex.splice(n,1),e.FullPaths.splice(n,1),!0;return!1},cfb_mov:function(e,t,r){h(e);var a=eR.find(e,t);if(a)for(var s=0;s<e.FileIndex.length;++s)if(e.FileIndex[s]==a)return e.FileIndex[s].name=n(r),e.FullPaths[s]=r,!0;return!1},cfb_gc:function(e){f(e,!0)},ReadShift:vM,CheckField:NM,prep_blob:jM,bconcat:n_,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");p=e}catch(ZJ){console.error("cannot use native zlib: "+(ZJ.message||ZJ))}},_deflateRaw:K,_inflateRaw:te,consts:w},t}();let tR;function rR(e){return"string"===typeof e?e_(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function nR(e,t,r){if("undefined"!==typeof tR&&tR.writeFileSync)return r?tR.writeFileSync(e,t,r):tR.writeFileSync(e,t);if("undefined"!==typeof Deno){if(r&&"string"==typeof t)switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=e_(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n="utf8"==r?lI(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(n,e);if("undefined"!==typeof Blob){var a=new Blob([rR(n)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if("undefined"!==typeof saveAs)return saveAs(a,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(s)}),6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(null!=i.download)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout((function(){URL.revokeObjectURL(s)}),6e4),s}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=t_(t)),o.write(t),o.close(),t}catch(ZJ){if(!ZJ.message||!ZJ.message.match(/onstruct/))throw ZJ}throw new Error("cannot save file "+e)}function aR(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function sR(e,t){for(var r=[],n=aR(e),a=0;a!==n.length;++a)null==r[e[n[a]][t]]&&(r[e[n[a]][t]]=n[a]);return r}function iR(e){for(var t=[],r=aR(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function oR(e){for(var t=[],r=aR(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}var lR=new Date(1899,11,30,0,0,0);function cR(e,t){var r=e.getTime();return t&&(r-=1263168e5),(r-(lR.getTime()+6e4*(e.getTimezoneOffset()-lR.getTimezoneOffset())))/864e5}var dR=new Date,uR=lR.getTime()+6e4*(dR.getTimezoneOffset()-lR.getTimezoneOffset()),hR=dR.getTimezoneOffset();function fR(e){var t=new Date;return t.setTime(24*e*60*60*1e3+uR),t.getTimezoneOffset()!==hR&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-hR)),t}function mR(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(!n)throw new Error("Unsupported ISO Duration Field: M");r*=60}t+=r*parseInt(a[s],10)}return t}var pR=new Date("2017-02-19T19:06:09.000Z"),xR=isNaN(pR.getFullYear())?new Date("2/19/17"):pR,vR=2017==xR.getFullYear();function gR(e,t){var r=new Date(e);if(vR)return t>0?r.setTime(r.getTime()+60*r.getTimezoneOffset()*1e3):t<0&&r.setTime(r.getTime()-60*r.getTimezoneOffset()*1e3),r;if(e instanceof Date)return e;if(1917==xR.getFullYear()&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function yR(e,t){if(YP&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return lI(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return lI(zP(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return lI(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return lI(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,(function(e){return r[e]||e}))}catch(ZJ){}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function bR(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=bR(e[r]));return t}function wR(e,t){for(var r="";r.length<t;)r+=e;return r}function NR(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,(function(){return r*=100,""}));return isNaN(t=Number(n))?(n=n.replace(/[(](.*)[)]/,(function(e,t){return r=-r,t})),isNaN(t=Number(n))?t:t/r):t/r}var jR=["january","february","march","april","may","june","july","august","september","october","november","december"];function SR(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==jR.indexOf(i))return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&101!=n?t:e.match(/[^-0-9:,\/\\]/)?r:t}var CR=function(){var e=5=="abacaba".split(/(:?b)/i).length;return function(t,r,n){if(e||"string"==typeof r)return t.split(r);for(var a=t.split(r),s=[a[0]],i=1;i<a.length;++i)s.push(n),s.push(a[i]);return s}}();function kR(e){return e?e.content&&e.type?yR(e.content,!0):e.data?HP(e.data):e.asNodeBuffer&&YP?HP(e.asNodeBuffer().toString("binary")):e.asBinary?HP(e.asBinary()):e._data&&e._data.getContent?HP(yR(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function ER(e){if(!e)return null;if(e.data)return UP(e.data);if(e.asNodeBuffer&&YP)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return"string"==typeof t?UP(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function TR(e,t){for(var r=e.FullPaths||aR(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function DR(e,t){var r=TR(e,t);if(null==r)throw new Error("Cannot find file "+t+" in zip");return r}function AR(e,t,r){if(!r)return function(e){return e&&".bin"===e.name.slice(-4)?ER(e):kR(e)}(DR(e,t));if(!t)return null;try{return AR(e,t)}catch(ZJ){return null}}function PR(e,t,r){if(!r)return kR(DR(e,t));if(!t)return null;try{return PR(e,t)}catch(ZJ){return null}}function _R(e,t,r){if(!r)return ER(DR(e,t));if(!t)return null;try{return _R(e,t)}catch(ZJ){return null}}function RR(e){for(var t=e.FullPaths||aR(e.files),r=[],n=0;n<t.length;++n)"/"!=t[n].slice(-1)&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function IR(e,t,r){if(e.FullPaths){var n;if("string"==typeof r)return n=YP?XP(r):function(e){for(var t=[],r=0,n=e.length+250,a=QP(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|63&i;else if(i>=55296&&i<57344){i=64+(1023&i);var o=1023&e.charCodeAt(++s);a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(3&i)<<4,a[r++]=128|63&o}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|63&i;r>n&&(t.push(a.slice(0,r)),r=0,a=QP(65535),n=65530)}return t.push(a.slice(0,r)),n_(t)}(r),eR.utils.cfb_add(e,t,n);eR.utils.cfb_add(e,t,r)}else e.file(t,r)}function MR(){return eR.utils.cfb_new()}function OR(e,t){switch(t.type){case"base64":return eR.read(e,{type:"base64"});case"binary":return eR.read(e,{type:"binary"});case"buffer":case"array":return eR.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function FR(e,t){if("/"==e.charAt(0))return e.slice(1);var r=t.split("/");"/"!=t.slice(-1)&&r.pop();for(var n=e.split("/");0!==n.length;){var a=n.shift();".."===a?r.pop():"."!==a&&r.push(a)}return r.join("/")}var LR='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',BR=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,UR=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/gm,zR=LR.match(UR)?UR:/<[^>]*>/g,VR=/<\w*:/,HR=/<(\/?)\w+:/;function $R(e,t,r){for(var n={},a=0,s=0;a!==e.length&&(32!==(s=e.charCodeAt(a))&&10!==s&&13!==s);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(BR),o=0,l="",c=0,d="",u="",h=1;if(i)for(c=0;c!=i.length;++c){for(u=i[c],s=0;s!=u.length&&61!==u.charCodeAt(s);++s);for(d=u.slice(0,s).trim();32==u.charCodeAt(s+1);)++s;for(h=34==(a=u.charCodeAt(s+1))||39==a?1:0,l=u.slice(s+1+h,u.length-h),o=0;o!=d.length&&58!==d.charCodeAt(o);++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,r||(n[d.toLowerCase()]=l);else{var f=(5===o&&"xmlns"===d.slice(0,5)?"xmlns":"")+d.slice(o+1);if(n[f]&&"ext"==d.slice(o-3,o))continue;n[f]=l,r||(n[f.toLowerCase()]=l)}}return n}function WR(e){return e.replace(HR,"<$1")}var qR={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},GR=iR(qR),KR=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/gi,t=/_x([\da-fA-F]{4})_/gi;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(-1==s)return a.replace(e,(function(e,t){return qR[e]||String.fromCharCode(parseInt(t,e.indexOf("x")>-1?16:10))||e})).replace(t,(function(e,t){return String.fromCharCode(parseInt(t,16))}));var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),YR=/[&<>'"]/g,XR=/[\u0000-\u0008\u000b-\u001f]/g;function QR(e){return(e+"").replace(YR,(function(e){return GR[e]})).replace(XR,(function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"}))}function JR(e){return QR(e).replace(/ /g,"_x0020_")}var ZR=/[\u0000-\u001f]/g;function eI(e){return(e+"").replace(YR,(function(e){return GR[e]})).replace(/\n/g,"<br/>").replace(ZR,(function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"}))}var tI=function(){var e=/&#(\d+);/g;function t(e,t){return String.fromCharCode(parseInt(t,10))}return function(r){return r.replace(e,t)}}();function rI(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function nI(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;)(n=e.charCodeAt(r++))<128?t+=String.fromCharCode(n):(a=e.charCodeAt(r++),n>191&&n<224?(i=(31&n)<<6,i|=63&a,t+=String.fromCharCode(i)):(s=e.charCodeAt(r++),n<240?t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&s):(o=((7&n)<<18|(63&a)<<12|(63&s)<<6|63&(i=e.charCodeAt(r++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function aI(e){var t,r,n,a=QP(2*e.length),s=1,i=0,o=0;for(r=0;r<e.length;r+=s)s=1,(n=e.charCodeAt(r))<128?t=n:n<224?(t=64*(31&n)+(63&e.charCodeAt(r+1)),s=2):n<240?(t=4096*(15&n)+64*(63&e.charCodeAt(r+1))+(63&e.charCodeAt(r+2)),s=3):(s=4,t=262144*(7&n)+4096*(63&e.charCodeAt(r+1))+64*(63&e.charCodeAt(r+2))+(63&e.charCodeAt(r+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(a[i++]=255&o,a[i++]=o>>>8,o=0),a[i++]=t%256,a[i++]=t>>>8;return a.slice(0,i).toString("ucs2")}function sI(e){return XP(e,"binary").toString("utf8")}var iI="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",oI=YP&&(sI(iI)==nI(iI)&&sI||aI(iI)==nI(iI)&&aI)||nI,lI=YP?function(e){return XP(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(63&n)));break;case n>=55296&&n<57344:n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(63&a)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(63&n)))}return t.join("")},cI=function(){var e={};return function(t,r){var n=t+"|"+(r||"");return e[n]?e[n]:e[n]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",r||"")}}(),dI=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map((function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]}));return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),n=0;n<e.length;++n)r=r.replace(e[n][0],e[n][1]);return r}}(),uI=function(){var e={};return function(t){return void 0!==e[t]?e[t]:e[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}}(),hI=/<\/?(?:vt:)?variant>/g,fI=/<(?:vt:)([^>]*)>([\s\S]*)</;function mI(e,t){var r=$R(e),n=e.match(uI(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach((function(e){var t=e.replace(hI,"").match(fI);t&&a.push({v:oI(t[2]),t:t[1]})})),a}var pI=/(^\s|\s$|\n)/;function xI(e,t){return"<"+e+(t.match(pI)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function vI(e){return aR(e).map((function(t){return" "+t+'="'+e[t]+'"'})).join("")}function gI(e,t,r){return"<"+e+(null!=r?vI(r):"")+(null!=t?(t.match(pI)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function yI(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(ZJ){if(t)throw ZJ}return""}function bI(e){if(YP&&Buffer.isBuffer(e))return e.toString("utf8");if("string"===typeof e)return e;if("undefined"!==typeof Uint8Array&&e instanceof Uint8Array)return oI(t_(r_(e)));throw new Error("Bad input format: expected Buffer or string")}var wI=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/gm,NI="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",jI="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",SI="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CI="http://schemas.openxmlformats.org/package/2006/content-types",kI="http://schemas.openxmlformats.org/package/2006/relationships",EI="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",TI="http://purl.org/dc/elements/1.1/",DI="http://purl.org/dc/terms/",AI="http://purl.org/dc/dcmitype/",PI="http://schemas.openxmlformats.org/officeDocument/2006/relationships",_I="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",RI="http://www.w3.org/2001/XMLSchema-instance",II="http://www.w3.org/2001/XMLSchema",MI=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],OI="urn:schemas-microsoft-com:office:office",FI="urn:schemas-microsoft-com:office:excel",LI="urn:schemas-microsoft-com:office:spreadsheet",BI="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",UI="http://macVmlSchemaUri",zI="urn:schemas-microsoft-com:vml",VI="http://www.w3.org/TR/REC-html40";var HI=function(e){for(var t=[],r=0;r<e[0].length;++r)if(e[0][r])for(var n=0,a=e[0][r].length;n<a;n+=10240)t.push.apply(t,e[0][r].slice(n,n+10240));return t},$I=YP?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map((function(e){return Buffer.isBuffer(e)?e:XP(e)}))):HI(e)}:HI,WI=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(hM(e,a)));return n.join("").replace(a_,"")},qI=YP?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(a_,""):WI(e,t,r)}:WI,GI=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},KI=YP?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):GI(e,t,r)}:GI,YI=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(uM(e,a)));return n.join("")},XI=YP?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):YI(e,t,r)}:YI,QI=function(e,t){var r=mM(e,t);return r>0?XI(e,t+4,t+4+r-1):""},JI=QI,ZI=function(e,t){var r=mM(e,t);return r>0?XI(e,t+4,t+4+r-1):""},eM=ZI,tM=function(e,t){var r=2*mM(e,t);return r>0?XI(e,t+4,t+4+r-1):""},rM=tM,nM=function(e,t){var r=mM(e,t);return r>0?qI(e,t+4,t+4+r):""},aM=nM,sM=function(e,t){var r=mM(e,t);return r>0?XI(e,t+4,t+4+r):""},iM=sM,oM=function(e,t){return function(e,t){for(var r=1-2*(e[t+7]>>>7),n=((127&e[t+7])<<4)+(e[t+6]>>>4&15),a=15&e[t+6],s=5;s>=0;--s)a=256*a+e[t+s];return 2047==n?0==a?r*(1/0):NaN:(0==n?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}(e,t)},lM=oM,cM=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function dM(){qI=function(e,t,r){return VP.utils.decode(1200,e.slice(t,r)).replace(a_,"")},XI=function(e,t,r){return VP.utils.decode(65001,e.slice(t,r))},JI=function(e,t){var r=mM(e,t);return r>0?VP.utils.decode(IP,e.slice(t+4,t+4+r-1)):""},eM=function(e,t){var r=mM(e,t);return r>0?VP.utils.decode(RP,e.slice(t+4,t+4+r-1)):""},rM=function(e,t){var r=2*mM(e,t);return r>0?VP.utils.decode(1200,e.slice(t+4,t+4+r-1)):""},aM=function(e,t){var r=mM(e,t);return r>0?VP.utils.decode(1200,e.slice(t+4,t+4+r)):""},iM=function(e,t){var r=mM(e,t);return r>0?VP.utils.decode(65001,e.slice(t+4,t+4+r)):""}}YP&&(JI=function(e,t){if(!Buffer.isBuffer(e))return QI(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},eM=function(e,t){if(!Buffer.isBuffer(e))return ZI(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},rM=function(e,t){if(!Buffer.isBuffer(e))return tM(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},aM=function(e,t){if(!Buffer.isBuffer(e))return nM(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},iM=function(e,t){if(!Buffer.isBuffer(e))return sM(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},lM=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):oM(e,t)},cM=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof VP&&dM();var uM=function(e,t){return e[t]},hM=function(e,t){return 256*e[t+1]+e[t]},fM=function(e,t){var r=256*e[t+1]+e[t];return r<32768?r:-1*(65535-r+1)},mM=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},pM=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},xM=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function vM(e,t){var r,n,a,s,i,o,l="",c=[];switch(t){case"dbcs":if(o=this.l,YP&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(i=0;i<e;++i)l+=String.fromCharCode(hM(this,o)),o+=2;e*=2;break;case"utf8":l=XI(this,this.l,this.l+e);break;case"utf16le":e*=2,l=qI(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof VP)return vM.call(this,e,"dbcs");l=VP.utils.decode(RP,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=JI(this,this.l),e=4+mM(this,this.l);break;case"lpstr-cp":l=eM(this,this.l),e=4+mM(this,this.l);break;case"lpwstr":l=rM(this,this.l),e=4+2*mM(this,this.l);break;case"lpp4":e=4+mM(this,this.l),l=aM(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+mM(this,this.l),l=iM(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(a=uM(this,this.l+e++));)c.push($P(a));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(a=hM(this,this.l+e));)c.push($P(a)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",o=this.l,i=0;i<e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return a=uM(this,o),this.l=o+1,s=vM.call(this,e-i,a?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push($P(hM(this,o))),o+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof VP){l=VP.utils.decode(RP,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",o=this.l,i=0;i!=e;++i){if(this.lens&&-1!==this.lens.indexOf(o))return a=uM(this,o),this.l=o+1,s=vM.call(this,e-i,a?"dbcs-cont":"sbcs-cont"),c.join("")+s;c.push($P(uM(this,o))),o+=1}l=c.join("");break;default:switch(e){case 1:return r=uM(this,this.l),this.l++,r;case 2:return r=("i"===t?fM:hM)(this,this.l),this.l+=2,r;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(r=(e>0?pM:xM)(this,this.l),this.l+=4,r):(n=mM(this,this.l),this.l+=4,n);case 8:case-8:if("f"===t)return n=8==e?lM(this,this.l):lM([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:l=KI(this,this.l,e)}}return this.l+=e,l}var gM=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},yM=function(e,t,r){e[r]=255&t,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},bM=function(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255};function wM(e,t,r){var n=0,a=0;if("dbcs"===r){for(a=0;a!=t.length;++a)bM(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if("sbcs"===r){if("undefined"!==typeof VP&&874==IP)for(a=0;a!=t.length;++a){var s=VP.utils.encode(IP,t.charAt(a));this[this.l+a]=s[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=255&t.charCodeAt(a);n=t.length}else{if("hex"===r){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}if("utf16le"===r){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}switch(e){case 1:n=1,this[this.l]=255&t;break;case 2:n=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:n=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:n=4,gM(this,t,this.l);break;case 8:if(n=8,"f"===r){!function(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?0==i?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=255&s;e[r+6]=(15&a)<<4|15&s,e[r+7]=a>>4|n}(this,t,this.l);break}case 16:break;case-4:n=4,yM(this,t,this.l)}}return this.l+=n,this}function NM(e,t){var r=KI(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function jM(e,t){e.l=t,e.read_shift=vM,e.chk=NM,e.write_shift=wM}function SM(e,t){e.l+=t}function CM(e){var t=QP(e);return jM(t,0),t}function kM(e,t,r){if(e){var n,a,s;jM(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){128&(o=e.read_shift(1))&&(o=(127&o)+((127&e.read_shift(1))<<7));var c=PV[o]||PV[65535];for(s=127&(n=e.read_shift(1)),a=1;a<4&&128&n;++a)s+=(127&(n=e.read_shift(1)))<<7*a;l=e.l+s;var d=c.f&&c.f(e,s,r);if(e.l=l,t(d,c,o))return}}}function EM(){var e=[],t=YP?256:2048,r=function(e){var t=CM(e);return jM(t,0),t},n=r(t),a=function(){n&&(n.length>n.l&&((n=n.slice(0,n.l)).l=n.length),n.length>0&&e.push(n),n=null)},s=function(e){return n&&e<n.length-n.l?n:(a(),n=r(Math.max(e+1,t)))};return{next:s,push:function(e){a(),null==(n=e).l&&(n.l=n.length),s(t)},end:function(){return a(),n_(e)},_bufs:e}}function TM(e,t,r,n){var a,s=+t;if(!isNaN(s)){n||(n=PV[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,128+(127&s)),i.write_shift(1,s>>7));for(var o=0;4!=o;++o){if(!(n>=128)){i.write_shift(1,n);break}i.write_shift(1,128+(127&n)),n>>=7}n>0&&cM(r)&&e.push(r)}}function DM(e,t,r){var n=bR(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function AM(e,t,r){var n=bR(e);return n.s=DM(n.s,t.s,r),n.e=DM(n.e,t.s,r),n}function PM(e,t){if(e.cRel&&e.c<0)for(e=bR(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=bR(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=LM(e);return e.cRel||null==e.cRel||(r=r.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(r=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(r)),r}function _M(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?PM(e.s,t.biff)+":"+PM(e.e,t.biff):(e.s.rRel?"":"$")+IM(e.s.r)+":"+(e.e.rRel?"":"$")+IM(e.e.r):(e.s.cRel?"":"$")+OM(e.s.c)+":"+(e.e.cRel?"":"$")+OM(e.e.c)}function RM(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function IM(e){return""+(e+1)}function MM(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function OM(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function FM(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function LM(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function BM(e){var t=e.indexOf(":");return-1==t?{s:FM(e),e:FM(e)}:{s:FM(e.slice(0,t)),e:FM(e.slice(t+1))}}function UM(e,t){return"undefined"===typeof t||"number"===typeof t?UM(e.s,e.e):("string"!==typeof e&&(e=LM(e)),"string"!==typeof t&&(t=LM(t)),e==t?e:e+":"+t)}function zM(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||10!=a)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function VM(e,t){var r="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=G_(e.z,r?cR(t):t)}catch(ZJ){}try{return e.w=G_((e.XF||{}).numFmtId||(r?14:0),r?cR(t):t)}catch(ZJ){return""+t}}function HM(e,t,r){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),"e"==e.t?TO[e.v]||e.v:VM(e,void 0==t?e.v:t))}function $M(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function WM(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense;var s=e||(a?[]:{}),i=0,o=0;if(s&&null!=n.origin){if("number"==typeof n.origin)i=n.origin;else{var l="string"==typeof n.origin?FM(n.origin):n.origin;i=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=zM(s["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),-1==i&&(c.e.r=i=d.e.r+1)}for(var u=0;u!=t.length;++u)if(t[u]){if(!Array.isArray(t[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[u].length;++h)if("undefined"!==typeof t[u][h]){var f={v:t[u][h]},m=i+u,p=o+h;if(c.s.r>m&&(c.s.r=m),c.s.c>p&&(c.s.c=p),c.e.r<m&&(c.e.r=m),c.e.c<p&&(c.e.c=p),!t[u][h]||"object"!==typeof t[u][h]||Array.isArray(t[u][h])||t[u][h]instanceof Date)if(Array.isArray(f.v)&&(f.f=t[u][h][1],f.v=f.v[0]),null===f.v)if(f.f)f.t="n";else if(n.nullError)f.t="e",f.v=0;else{if(!n.sheetStubs)continue;f.t="z"}else"number"===typeof f.v?f.t="n":"boolean"===typeof f.v?f.t="b":f.v instanceof Date?(f.z=n.dateNF||p_[14],n.cellDates?(f.t="d",f.w=G_(f.z,cR(f.v))):(f.t="n",f.v=cR(f.v),f.w=G_(f.z,f.v))):f.t="s";else f=t[u][h];if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(f.z=s[m][p].z),s[m][p]=f;else{var x=LM({c:p,r:m});s[x]&&s[x].z&&(f.z=s[x].z),s[x]=f}}}return c.s.c<1e7&&(s["!ref"]=UM(c)),s}function qM(e,t){return WM(null,e,t)}function GM(e,t){return t||(t=CM(4)),t.write_shift(4,e),t}function KM(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function YM(e,t){var r=!1;return null==t&&(r=!0,t=CM(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function XM(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function QM(e,t){var r=e.l,n=e.read_shift(1),a=KM(e),s=[],i={t:a,h:a};if(0!==(1&n)){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push(XM(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}var JM=QM;function ZM(e,t){var r=!1;return null==t&&(r=!0,t=CM(23+4*e.t.length)),t.write_shift(1,1),YM(e.t,t),t.write_shift(4,1),function(e,t){t||(t=CM(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),r?t.slice(0,t.l):t}function eO(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function tO(e,t){return null==t&&(t=CM(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function rO(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function nO(e,t){return null==t&&(t=CM(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var aO=KM,sO=YM;function iO(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function oO(e,t){var r=!1;return null==t&&(r=!0,t=CM(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var lO=KM,cO=iO,dO=oO;function uO(e){var t=e.slice(e.l,e.l+4),r=1&t[0],n=2&t[0];e.l+=4;var a=0===n?lM([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):pM(t,0)>>2;return r?a/100:a}function hO(e,t){null==t&&(t=CM(4));var r=0,n=0,a=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?n=1:a==(0|a)&&a>=-(1<<29)&&a<1<<29&&(n=1,r=1),!n)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((r?a:e)<<2)+(r+2))}function fO(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var mO=fO,pO=function(e,t){return t||(t=CM(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function xO(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function vO(e,t){return(t||CM(8)).write_shift(8,e,"f")}function gO(e,t){if(t||(t=CM(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),e.rgb&&null==e.theme){var n=e.rgb||"FFFFFF";"number"==typeof n&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}function yO(e,t){var r=e.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return{2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"}[e.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return e.l-=4,e.read_shift(0,1==t?"lpstr":"lpwstr")}var bO=80,wO=[bO,81],NO={1:{n:"CodePage",t:2},2:{n:"Category",t:bO},3:{n:"PresentationFormat",t:bO},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:bO},15:{n:"Company",t:bO},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:bO},27:{n:"ContentStatus",t:bO},28:{n:"Language",t:bO},29:{n:"Version",t:bO},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},jO={1:{n:"CodePage",t:2},2:{n:"Title",t:bO},3:{n:"Subject",t:bO},4:{n:"Author",t:bO},5:{n:"Keywords",t:bO},6:{n:"Comments",t:bO},7:{n:"Template",t:bO},8:{n:"LastAuthor",t:bO},9:{n:"RevNumber",t:bO},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:bO},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},SO={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},CO=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function kO(e){return e.map((function(e){return[e>>16&255,e>>8&255,255&e]}))}var EO=bR(kO([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),TO={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},DO={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},AO={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},PO={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function _O(e,t){var r,n=function(e){for(var t=[],r=aR(e),n=0;n!==r.length;++n)null==t[e[r[n]]]&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}(AO),a=[];a[a.length]=LR,a[a.length]=gI("Types",null,{xmlns:CI,"xmlns:xsd":II,"xmlns:xsi":RI}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map((function(e){return gI("Default",null,{Extension:e[0],ContentType:e[1]})})));var s=function(n){e[n]&&e[n].length>0&&(r=e[n][0],a[a.length]=gI("Override",null,{PartName:("/"==r[0]?"":"/")+r,ContentType:PO[n][t.bookType]||PO[n].xlsx}))},i=function(r){(e[r]||[]).forEach((function(e){a[a.length]=gI("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:PO[r][t.bookType]||PO[r].xlsx})}))},o=function(t){(e[t]||[]).forEach((function(e){a[a.length]=gI("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:n[t][0]})}))};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var RO={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function IO(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function MO(e,t){var r={"!id":{}};if(!e)return r;"/"!==t.charAt(0)&&(t="/"+t);var n={};return(e.match(zR)||[]).forEach((function(e){var a=$R(e);if("<Relationship"===a[0]){var s={};s.Type=a.Type,s.Target=a.Target,s.Id=a.Id,a.TargetMode&&(s.TargetMode=a.TargetMode);var i="External"===a.TargetMode?a.Target:FR(a.Target,t);r[i]=s,n[a.Id]=s}})),r["!id"]=n,r}function OO(e){var t=[LR,gI("Relationships",null,{xmlns:kI})];return aR(e["!id"]).forEach((function(r){t[t.length]=gI("Relationship",null,e["!id"][r])})),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function FO(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,s?a.TargetMode=s:[RO.HLINK,RO.XPATH,RO.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function LO(e,t,r){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function BO(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+_P.version+"</meta:generator></office:meta></office:document-meta>"}var UO=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],zO=function(){for(var e=new Array(UO.length),t=0;t<UO.length;++t){var r=UO[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function VO(e){var t={};e=oI(e);for(var r=0;r<UO.length;++r){var n=UO[r],a=e.match(zO[r]);null!=a&&a.length>0&&(t[n[1]]=KR(a[1])),"date"===n[2]&&t[n[1]]&&(t[n[1]]=gR(t[n[1]]))}return t}function HO(e,t,r,n,a){null==a[e]&&null!=t&&""!==t&&(a[e]=t,t=QR(t),n[n.length]=r?gI(e,t,r):xI(e,t))}function $O(e,t){var r=t||{},n=[LR,gI("cp:coreProperties",null,{"xmlns:cp":NI,"xmlns:dc":TI,"xmlns:dcterms":DI,"xmlns:dcmitype":AI,"xmlns:xsi":RI})],a={};if(!e&&!r.Props)return n.join("");e&&(null!=e.CreatedDate&&HO("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:yI(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),null!=e.ModifiedDate&&HO("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:yI(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=UO.length;++s){var i=UO[s],o=r.Props&&null!=r.Props[i[1]]?r.Props[i[1]]:e?e[i[1]]:null;!0===o?o="1":!1===o?o="0":"number"==typeof o&&(o=String(o)),null!=o&&HO(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var WO=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],qO=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function GO(e,t,r,n){var a=[];if("string"==typeof e)a=mI(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map((function(e){return{v:e}})));var i="string"==typeof t?mI(t,n).map((function(e){return e.v})):t,o=0,l=0;if(i.length>0)for(var c=0;c!==a.length;c+=2){switch(l=+a[c+1].v,a[c].v){case"Worksheets":case"\u5de5\u4f5c\u8868":case"\u041b\u0438\u0441\u0442\u044b":case"\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0639\u0645\u0644":case"\u30ef\u30fc\u30af\u30b7\u30fc\u30c8":case"\u05d2\u05dc\u05d9\u05d5\u05e0\u05d5\u05ea \u05e2\u05d1\u05d5\u05d3\u05d4":case"Arbeitsbl\xe4tter":case"\xc7al\u0131\u015fma Sayfalar\u0131":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de c\xe1lculo":case"Planilhas":case"Regneark":case"Hojas de c\xe1lculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"\u540d\u524d\u4ed8\u304d\u4e00\u89a7":case"Benannte Bereiche":case"Navngivne omr\xe5der":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l)}o+=l}}function KO(e){var t=[],r=gI;return e||(e={}),e.Application="SheetJS",t[t.length]=LR,t[t.length]=gI("Properties",null,{xmlns:SI,"xmlns:vt":_I}),WO.forEach((function(n){if(void 0!==e[n[1]]){var a;switch(n[2]){case"string":a=QR(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false"}void 0!==a&&(t[t.length]=r(n[0],a))}})),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map((function(e){return"<vt:lpstr>"+QR(e)+"</vt:lpstr>"})).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var YO=/<[^>]+>[^<]*/g;function XO(e){var t=[LR,gI("Properties",null,{xmlns:jI,"xmlns:vt":_I})];if(!e)return t.join("");var r=1;return aR(e).forEach((function(n){++r,t[t.length]=gI("property",function(e,t){switch(typeof e){case"string":var r=gI("vt:lpwstr",QR(e));return t&&(r=r.replace(/&quot;/g,"_x0022_")),r;case"number":return gI((0|e)==e?"vt:i4":"vt:r8",QR(String(e)));case"boolean":return gI("vt:bool",e?"true":"false")}if(e instanceof Date)return gI("vt:filetime",yI(e));throw new Error("Unable to serialize "+e)}(e[n],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:QR(n)})})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var QO,JO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function ZO(e,t,r){QO||(QO=iR(JO)),e[t=QO[t]||t]=r}function eF(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date(1e3*(r/1e7*Math.pow(2,32)+t/1e7-11644473600)).toISOString().replace(/\.000/,"")}function tF(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function rF(e,t,r){var n=e.read_shift(0,"lpwstr");return r&&(e.l+=4-(n.length+1&3)&3),n}function nF(e,t,r){return 31===t?rF(e):tF(e,0,r)}function aF(e,t,r){return nF(e,t,!1===r?0:4)}function sF(e){var t=e.l,r=lF(e,81);return 0==e[e.l]&&0==e[e.l+1]&&e.l-t&2&&(e.l+=2),[r,lF(e,3)]}function iF(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,1200===t?"utf16le":"utf8").replace(a_,"").replace(s_,"!"),1200===t&&i%2&&(e.l+=2)}return 3&e.l&&(e.l=e.l>>3<<2),n}function oF(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(3&t)>0&&(e.l+=4-(3&t)&3),r}function lF(e,t,r){var n,a=e.read_shift(2),s=r||{};if(e.l+=2,12!==t&&a!==t&&-1===wO.indexOf(t)&&(4126!=(65534&t)||4126!=(65534&a)))throw new Error("Expected type "+t+" saw "+a);switch(12===t?a:t){case 2:return n=e.read_shift(2,"i"),s.raw||(e.l+=2),n;case 3:return n=e.read_shift(4,"i");case 11:return 0!==e.read_shift(4);case 19:return n=e.read_shift(4);case 30:return tF(e,0,4).replace(a_,"");case 31:return rF(e);case 64:return eF(e);case 65:return oF(e);case 71:return function(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}(e);case 80:return aF(e,a,!s.raw).replace(a_,"");case 81:return function(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return nF(e,t,0)}(e,a).replace(a_,"");case 4108:return function(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(sF(e));return r}(e);case 4126:case 4127:return 4127==a?function(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(a_,""),e.l-a&2&&(e.l+=2)}return r}(e):function(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(a_,"");return r}(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function cF(e,t){var r=CM(4),n=CM(4);switch(r.write_shift(4,80==e?31:e),e){case 3:n.write_shift(-4,t);break;case 5:(n=CM(8)).write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,r=t%Math.pow(2,32),n=(t-r)/Math.pow(2,32);n*=1e7;var a=(r*=1e7)/Math.pow(2,32)|0;a>0&&(r%=Math.pow(2,32),n+=a);var s=CM(8);return s.write_shift(4,r),s.write_shift(4,n),s}(t);break;case 31:case 80:for((n=CM(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return n_([r,n])}function dF(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,l=-1,c={};for(i=0;i!=a;++i){var d=e.read_shift(4),u=e.read_shift(4);s[i]=[d,u+r]}s.sort((function(e,t){return e[1]-t[1]}));var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var f=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,f=!1);break;case 80:case 4108:e.l<=s[i][1]&&(e.l=s[i][1],f=!1)}if((!t||0==i)&&e.l<=s[i][1]&&(f=!1,e.l=s[i][1]),f)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var m=t[s[i][0]];if(h[m.n]=lF(e,m.t,{raw:!0}),"version"===m.p&&(h[m.n]=String(h[m.n]>>16)+"."+("0000"+String(65535&h[m.n])).slice(-4)),"CodePage"==m.n)switch(h[m.n]){case 0:h[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:LP(o=h[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[m.n])}}else if(1===s[i][0]){if(o=h.CodePage=lF(e,2),LP(o),-1!==l){var p=e.l;e.l=s[l][1],c=iF(e,o),e.l=p}}else if(0===s[i][0]){if(0===o){l=i,e.l=s[i+1][1];continue}c=iF(e,o)}else{var x,v=c[s[i][0]];switch(e[e.l]){case 65:e.l+=4,x=oF(e);break;case 30:case 31:e.l+=4,x=aF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,x=e.read_shift(4,"i");break;case 19:e.l+=4,x=e.read_shift(4);break;case 5:e.l+=4,x=e.read_shift(8,"f");break;case 11:e.l+=4,x=vF(e,4);break;case 64:e.l+=4,x=gR(eF(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=x}}return e.l=r+n,h}var uF=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function hF(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function fF(e,t,r){var n=CM(8),a=[],s=[],i=8,o=0,l=CM(8),c=CM(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),a.push(c),i+=8+l.length,!t){(c=CM(8)).write_shift(4,0),a.unshift(c);var d=[CM(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var u=e[o][0];for((l=CM(8+2*(u.length+1)+(u.length%2?0:2))).write_shift(4,o+2),l.write_shift(4,u.length+1),l.write_shift(0,u,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=n_(d),s.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if((!t||t[e[o][0]])&&!(uF.indexOf(e[o][0])>-1||qO.indexOf(e[o][0])>-1)&&null!=e[o][1]){var h=e[o][1],f=0;if(t){var m=r[f=+t[e[o][0]]];if("version"==m.p&&"string"==typeof h){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}l=cF(m.t,h)}else{var x=hF(h);-1==x&&(x=31,h=String(h)),l=cF(x,h)}s.push(l),(c=CM(8)).write_shift(4,t?f:2+o),a.push(c),i+=8+l.length}var v=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,v),v+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),n_([n].concat(a).concat(s))}function mF(e,t,r){var n=e.content;if(!n)return{};jM(n,0);var a,s,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),d=n.read_shift(16);if(d!==eR.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(1!==(a=n.read_shift(4))&&2!==a)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),1===a&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);2===a&&(i=n.read_shift(16),l=n.read_shift(4));var u,h=dF(n,t),f={SystemIdentifier:c};for(var m in h)f[m]=h[m];if(f.FMTID=s,1===a)return f;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);try{u=dF(n,null)}catch(ZJ){}for(m in u)f[m]=u[m];return f.FMTID=[s,i],f}function pF(e,t,r,n,a,s){var i=CM(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,eR.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var l=fF(e,r,n);if(o.push(l),a){var c=fF(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+l.length),o.push(c)}return n_(o)}function xF(e,t){return e.read_shift(t),null}function vF(e,t){return 1===e.read_shift(t)}function gF(e,t){return t||(t=CM(2)),t.write_shift(2,+!!e),t}function yF(e){return e.read_shift(2,"u")}function bF(e,t){return t||(t=CM(2)),t.write_shift(2,e),t}function wF(e,t){return function(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}(e,t,yF)}function NF(e,t,r){return r||(r=CM(2)),r.write_shift(1,"e"==t?+e:+!!e),r.write_shift(1,"e"==t?1:0),r}function jF(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont",s=RP;(r&&r.biff>=8&&(RP=1200),r&&8!=r.biff)?12==r.biff&&(a="wstr"):e.read_shift(1)&&(a="dbcs-cont");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return RP=s,i}function SF(e){var t=RP;RP=1200;var r,n=e.read_shift(2),a=e.read_shift(1),s=4&a,i=8&a,o=1+(1&a),l=0,c={};i&&(l=e.read_shift(2)),s&&(r=e.read_shift(4));var d=2==o?"dbcs-cont":"sbcs-cont",u=0===n?"":e.read_shift(n,d);return i&&(e.l+=4*l),s&&(e.l+=r),c.t=u,i||(c.raw="<t>"+c.t+"</t>",c.r=c.t),RP=t,c}function CF(e){var t=e.t||"",r=CM(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=CM(2*t.length);return n.write_shift(2*t.length,t,"utf16le"),n_([r,n])}function kF(e,t,r){if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function EF(e,t,r){var n=e.read_shift(r&&2==r.biff?1:2);return 0===n?(e.l++,""):kF(e,n,r)}function TF(e,t,r){if(r.biff>5)return EF(e,0,r);var n=e.read_shift(1);return 0===n?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function DF(e,t,r){return r||(r=CM(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function AF(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return function(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,"795881f43b1d7f48af2c825dc4852763"===e.read_shift(16)&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(a_,"");return n&&(e.l+=24),a}(e);case"0303000000000000c000000000000046":return function(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,57005!=e.read_shift(2))throw new Error("Bad FileMoniker");if(0===e.read_shift(4))return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(3!=e.read_shift(2))throw new Error("Bad FileMoniker");return r+e.read_shift(a>>1,"utf16le").replace(a_,"")}(e);default:throw new Error("Unsupported Moniker "+r)}}function PF(e){var t=e.read_shift(4);return t>0?e.read_shift(t,"utf16le").replace(a_,""):""}function _F(e,t){t||(t=CM(6+2*e.length)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function RF(e){var t=CM(512),r=0,n=e.Target;"file://"==n.slice(0,7)&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(28==s)_F(n=n.slice(1),t);else if(2&s){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),8&s&&_F(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var l=0;"../"==n.slice(3*l,3*l+3)||"..\\"==n.slice(3*l,3*l+3);)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,255&n.charCodeAt(r+3*l));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function IF(e){return[e.read_shift(1),e.read_shift(1),e.read_shift(1),e.read_shift(1)]}function MF(e,t){var r=IF(e);return r[3]=0,r}function OF(e){return{r:e.read_shift(2),c:e.read_shift(2),ixfe:e.read_shift(2)}}function FF(e,t,r,n){return n||(n=CM(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function LF(e,t,r){var n=r.biff>8?4:2;return[e.read_shift(n),e.read_shift(n,"i"),e.read_shift(n,"i")]}function BF(e){return[e.read_shift(2),uO(e)]}function UF(e){var t=e.read_shift(2),r=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:r}}}function zF(e,t){return t||(t=CM(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function VF(e){var t=e.read_shift(2),r=e.read_shift(2);return{s:{c:e.read_shift(1),r:t},e:{c:e.read_shift(1),r:r}}}var HF=VF;function $F(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function WF(e){e.l+=2,e.l+=e.read_shift(2)}var qF={0:WF,4:WF,5:WF,6:WF,7:function(e){return e.l+=4,e.cf=e.read_shift(2),{}},8:WF,9:WF,10:WF,11:WF,12:WF,13:function(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t},14:WF,15:WF,16:WF,17:WF,18:WF,19:WF,20:WF,21:$F};function GF(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),(t-=2)>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function KF(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":case"xla":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;default:throw new Error("unsupported BIFF version")}var s=CM(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function YF(e,t){var r=!t||t.biff>=8?2:1,n=CM(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function XF(e,t,r){var n=0;r&&2==r.biff||(n=e.read_shift(2));var a=e.read_shift(2);return r&&2==r.biff&&(n=1-(a>>15),a&=32767),[{Unsynced:1&n,DyZero:(2&n)>>1,ExAsc:(4&n)>>2,ExDsc:(8&n)>>3},a]}function QF(e,t,r,n){var a=r&&5==r.biff;n||(n=CM(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return null==s.l&&(s.l=s.length),s}var JF=TF;function ZF(e,t,r){var n=e.l+t,a=8!=r.biff&&r.biff?2:4,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c:l}}}function eL(e,t,r,n){var a=r&&5==r.biff;n||(n=CM(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function tL(e,t,r){var n=OF(e);2!=r.biff&&9!=t||++e.l;var a=function(e){var t=e.read_shift(1);return 1===e.read_shift(1)?t:1===t}(e);return n.val=a,n.t=!0===a||!1===a?"b":"e",n}var rL=function(e,t,r){return 0===t?"":TF(e,0,r)};function nL(e,t,r){var n,a=e.read_shift(2),s={fBuiltIn:1&a,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return 14849===r.sbcch&&(n=function(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=jF(e,0,r),s=e.read_shift(2);if(s!==(n-=e.l))throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}(e,t-2,r)),s.body=n||e.read_shift(t-2),"string"===typeof n&&(s.Name=n),s}var aL=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function sL(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&2==r.biff?1:2),l=0;(!r||r.biff>=5)&&(5!=r.biff&&(e.l+=2),l=e.read_shift(2),5==r.biff&&(e.l+=2),e.l+=4);var c=kF(e,i,r);32&a&&(c=aL[c.charCodeAt(0)]);var d=n-e.l;r&&2==r.biff&&--d;var u=n!=e.l&&0!==o&&d>0?function(e,t,r,n){var a,s=e.l+t,i=yU(e,n,r);s!==e.l&&(a=gU(e,s-e.l,i,r));return[i,a]}(e,d,r,o):[];return{chKey:s,Name:c,itab:l,rgce:u}}function iL(e,t,r){if(r.biff<8)return function(e,t,r){3==e[e.l+1]&&e[e.l]++;var n=jF(e,0,r);return 3==n.charCodeAt(0)?n.slice(1):n}(e,0,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);0!==s--;)n.push(LF(e,r.biff,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function oL(e,t,r){var n=HF(e,6);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,CU(e,t,r)]}var lL={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function cL(e){var t=CM(24),r=FM(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return n_([t,RF(e[1])])}function dL(e){var t=e[1].Tooltip,r=CM(10+2*(t.length+1));r.write_shift(2,2048);var n=FM(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function uL(e,t,r){if(!r.cellStyles)return SM(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);2==n&&(e.l+=2);var c={s:a,e:s,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}var hL=OF,fL=wF,mL=EF;var pL=[2,3,48,49,131,139,140,245],xL=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=iR({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(t,r){var n=r||{};n.dateNF||(n.dateNF="yyyymmdd");var a=qM(function(t,r){var n=[],a=QP(1);switch(r.type){case"base64":a=ZP(KP(t));break;case"binary":a=ZP(t);break;case"buffer":case"array":a=t}jM(a,0);var s=a.read_shift(1),i=!!(136&s),o=!1,l=!1;switch(s){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,i=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+s.toString(16))}var c=0,d=521;2==s&&(c=a.read_shift(2)),a.l+=3,2!=s&&(c=a.read_shift(4)),c>1048576&&(c=1e6),2!=s&&(d=a.read_shift(2));var u=a.read_shift(2),h=r.codepage||1252;2!=s&&(a.l+=16,a.read_shift(1),0!==a[a.l]&&(h=e[a[a.l]]),a.l+=1,a.l+=2),l&&(a.l+=36);for(var f=[],m={},p=Math.min(a.length,2==s?521:d-10-(o?264:0)),x=l?32:11;a.l<p&&13!=a[a.l];)switch((m={}).name=VP.utils.decode(h,a.slice(a.l,a.l+x)).replace(/[\u0000\r\n].*$/g,""),a.l+=x,m.type=String.fromCharCode(a.read_shift(1)),2==s||l||(m.offset=a.read_shift(4)),m.len=a.read_shift(1),2==s&&(m.offset=a.read_shift(2)),m.dec=a.read_shift(1),m.name.length&&f.push(m),2!=s&&(a.l+=l?13:14),m.type){case"B":o&&8==m.len||!r.WTF||console.log("Skipping "+m.name+":"+m.type);break;case"G":case"P":r.WTF&&console.log("Skipping "+m.name+":"+m.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+m.type)}if(13!==a[a.l]&&(a.l=d-1),13!==a.read_shift(1))throw new Error("DBF Terminator not found "+a.l+" "+a[a.l]);a.l=d;var v=0,g=0;for(n[0]=[],g=0;g!=f.length;++g)n[0][g]=f[g].name;for(;c-- >0;)if(42!==a[a.l])for(++a.l,n[++v]=[],g=0,g=0;g!=f.length;++g){var y=a.slice(a.l,a.l+f[g].len);a.l+=f[g].len,jM(y,0);var b=VP.utils.decode(h,y);switch(f[g].type){case"C":b.trim().length&&(n[v][g]=b.replace(/\s+$/,""));break;case"D":8===b.length?n[v][g]=new Date(+b.slice(0,4),+b.slice(4,6)-1,+b.slice(6,8)):n[v][g]=b;break;case"F":n[v][g]=parseFloat(b.trim());break;case"+":case"I":n[v][g]=l?2147483648^y.read_shift(-4,"i"):y.read_shift(4,"i");break;case"L":switch(b.trim().toUpperCase()){case"Y":case"T":n[v][g]=!0;break;case"N":case"F":n[v][g]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+b+"|")}break;case"M":if(!i)throw new Error("DBF Unexpected MEMO for type "+s.toString(16));n[v][g]="##MEMO##"+(l?parseInt(b.trim(),10):y.read_shift(4));break;case"N":(b=b.replace(/\u0000/g,"").trim())&&"."!=b&&(n[v][g]=+b||0);break;case"@":n[v][g]=new Date(y.read_shift(-8,"f")-621356832e5);break;case"T":n[v][g]=new Date(864e5*(y.read_shift(4)-2440588)+y.read_shift(4));break;case"Y":n[v][g]=y.read_shift(4,"i")/1e4+y.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":n[v][g]=-y.read_shift(-8,"f");break;case"B":if(o&&8==f[g].len){n[v][g]=y.read_shift(8,"f");break}case"G":case"P":y.l+=f[g].len;break;case"0":if("_NullFlags"===f[g].name)break;default:throw new Error("DBF Unsupported data type "+f[g].type)}}else a.l+=u;if(2!=s&&a.l<a.length&&26!=a[a.l++])throw new Error("DBF EOF Marker missing "+(a.l-1)+" of "+a.length+" "+a[a.l-1].toString(16));return r&&r.sheetRows&&(n=n.slice(0,r.sheetRows)),r.DBF=f,n}(t,n),n);return a["!cols"]=n.DBF.map((function(e){return{wch:e.len,DBF:e}})),delete n.DBF,a}var n={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return $M(r(e,t),t)}catch(ZJ){if(t&&t.WTF)throw ZJ}return{SheetNames:[],Sheets:{}}},to_sheet:r,from_sheet:function(e,r){var a=r||{};if(+a.codepage>=0&&LP(+a.codepage),"string"==a.type)throw new Error("Cannot write DBF to JS string");var s=EM(),i=ZH(e,{header:1,raw:!0,cellDates:!0}),o=i[0],l=i.slice(1),c=e["!cols"]||[],d=0,u=0,h=0,f=1;for(d=0;d<o.length;++d)if(((c[d]||{}).DBF||{}).name)o[d]=c[d].DBF.name,++h;else if(null!=o[d]){if(++h,"number"===typeof o[d]&&(o[d]=o[d].toString(10)),"string"!==typeof o[d])throw new Error("DBF Invalid column name "+o[d]+" |"+typeof o[d]+"|");if(o.indexOf(o[d])!==d)for(u=0;u<1024;++u)if(-1==o.indexOf(o[d]+"_"+u)){o[d]+="_"+u;break}}var m=zM(e["!ref"]),p=[],x=[],v=[];for(d=0;d<=m.e.c-m.s.c;++d){var g="",y="",b=0,w=[];for(u=0;u<l.length;++u)null!=l[u][d]&&w.push(l[u][d]);if(0!=w.length&&null!=o[d]){for(u=0;u<w.length;++u){switch(typeof w[u]){case"number":y="B";break;case"string":default:y="C";break;case"boolean":y="L";break;case"object":y=w[u]instanceof Date?"D":"C"}b=Math.max(b,String(w[u]).length),g=g&&g!=y?"C":y}b>250&&(b=250),"C"==(y=((c[d]||{}).DBF||{}).type)&&c[d].DBF.len>b&&(b=c[d].DBF.len),"B"==g&&"N"==y&&(g="N",v[d]=c[d].DBF.dec,b=c[d].DBF.len),x[d]="C"==g||"N"==y?b:n[g]||0,f+=x[d],p[d]=g}else p[d]="?"}var N=s.next(32);for(N.write_shift(4,318902576),N.write_shift(4,l.length),N.write_shift(2,296+32*h),N.write_shift(2,f),d=0;d<4;++d)N.write_shift(4,0);for(N.write_shift(4,(+t[IP]||3)<<8),d=0,u=0;d<o.length;++d)if(null!=o[d]){var j=s.next(32),S=(o[d].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);j.write_shift(1,S,"sbcs"),j.write_shift(1,"?"==p[d]?"C":p[d],"sbcs"),j.write_shift(4,u),j.write_shift(1,x[d]||n[p[d]]||0),j.write_shift(1,v[d]||0),j.write_shift(1,2),j.write_shift(4,0),j.write_shift(1,0),j.write_shift(4,0),j.write_shift(4,0),u+=x[d]||n[p[d]]||0}var C=s.next(264);for(C.write_shift(4,13),d=0;d<65;++d)C.write_shift(4,0);for(d=0;d<l.length;++d){var k=s.next(f);for(k.write_shift(1,0),u=0;u<o.length;++u)if(null!=o[u])switch(p[u]){case"L":k.write_shift(1,null==l[d][u]?63:l[d][u]?84:70);break;case"B":k.write_shift(8,l[d][u]||0,"f");break;case"N":var E="0";for("number"==typeof l[d][u]&&(E=l[d][u].toFixed(v[u]||0)),h=0;h<x[u]-E.length;++h)k.write_shift(1,32);k.write_shift(1,E,"sbcs");break;case"D":l[d][u]?(k.write_shift(4,("0000"+l[d][u].getFullYear()).slice(-4),"sbcs"),k.write_shift(2,("00"+(l[d][u].getMonth()+1)).slice(-2),"sbcs"),k.write_shift(2,("00"+l[d][u].getDate()).slice(-2),"sbcs")):k.write_shift(8,"00000000","sbcs");break;case"C":var T=String(null!=l[d][u]?l[d][u]:"").slice(0,x[u]);for(k.write_shift(1,T,"sbcs"),h=0;h<x[u]-T.length;++h)k.write_shift(1,32)}}return s.next(1).write_shift(1,26),s.end()}}}(),vL=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+aR(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(t,r){var n=e[r];return"number"==typeof n?WP(n):n},n=function(e,t,r){var n=t.charCodeAt(0)-32<<4|r.charCodeAt(0)-48;return 59==n?e:WP(n)};function a(e,a){var s,i=e.split(/[\n\r]+/),o=-1,l=-1,c=0,d=0,u=[],h=[],f=null,m={},p=[],x=[],v=[],g=0;for(+a.codepage>=0&&LP(+a.codepage);c!==i.length;++c){g=0;var y,b=i[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),w=b.replace(/;;/g,"\0").split(";").map((function(e){return e.replace(/\u0000/g,";")})),N=w[0];if(b.length>0)switch(N){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==w[1].charAt(0)&&h.push(b.slice(3).replace(/;;/g,";"));break;case"C":var j=!1,S=!1,C=!1,k=!1,E=-1,T=-1;for(d=1;d<w.length;++d)switch(w[d].charAt(0)){case"A":case"G":break;case"X":l=parseInt(w[d].slice(1))-1,S=!0;break;case"Y":for(o=parseInt(w[d].slice(1))-1,S||(l=0),s=u.length;s<=o;++s)u[s]=[];break;case"K":'"'===(y=w[d].slice(1)).charAt(0)?y=y.slice(1,y.length-1):"TRUE"===y?y=!0:"FALSE"===y?y=!1:isNaN(NR(y))?isNaN(SR(y).getDate())||(y=gR(y)):(y=NR(y),null!==f&&H_(f)&&(y=fR(y))),"undefined"!==typeof VP&&"string"==typeof y&&"string"!=(a||{}).type&&(a||{}).codepage&&(y=VP.utils.decode(a.codepage,y)),j=!0;break;case"E":k=!0;var D=GB(w[d].slice(1),{r:o,c:l});u[o][l]=[u[o][l],D];break;case"S":C=!0,u[o][l]=[u[o][l],"S5S"];break;case"R":E=parseInt(w[d].slice(1))-1;break;case"C":T=parseInt(w[d].slice(1))-1;break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+b)}if(j&&(u[o][l]&&2==u[o][l].length?u[o][l][0]=y:u[o][l]=y,f=null),C){if(k)throw new Error("SYLK shared formula cannot have own formula");var A=E>-1&&u[E][T];if(!A||!A[1])throw new Error("SYLK shared formula cannot find base");u[o][l][1]=XB(A[1],{r:o-E,c:l-T})}break;case"F":var P=0;for(d=1;d<w.length;++d)switch(w[d].charAt(0)){case"X":l=parseInt(w[d].slice(1))-1,++P;break;case"Y":for(o=parseInt(w[d].slice(1))-1,s=u.length;s<=o;++s)u[s]=[];break;case"M":g=parseInt(w[d].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":f=h[parseInt(w[d].slice(1))];break;case"W":for(v=w[d].slice(1).split(" "),s=parseInt(v[0],10);s<=parseInt(v[1],10);++s)g=parseInt(v[2],10),x[s-1]=0===g?{hidden:!0}:{wch:g},nB(x[s-1]);break;case"C":x[l=parseInt(w[d].slice(1))-1]||(x[l]={});break;case"R":p[o=parseInt(w[d].slice(1))-1]||(p[o]={}),g>0?(p[o].hpt=g,p[o].hpx=iB(g)):0===g&&(p[o].hidden=!0);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+b)}P<1&&(f=null);break;default:if(a&&a.WTF)throw new Error("SYLK bad record "+b)}}return p.length>0&&(m["!rows"]=p),x.length>0&&(m["!cols"]=x),a&&a.sheetRows&&(u=u.slice(0,a.sheetRows)),[u,m]}function s(e,t){var r=function(e,t){switch(t.type){case"base64":return a(KP(e),t);case"binary":return a(e,t);case"buffer":return a(YP&&Buffer.isBuffer(e)?e.toString("binary"):t_(e),t);case"array":return a(yR(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),n=r[0],s=r[1],i=qM(n,t);return aR(s).forEach((function(e){i[e]=s[e]})),i}function i(e,t,r,n){var a="C;Y"+(r+1)+";X"+(n+1)+";K";switch(e.t){case"n":a+=e.v||0,e.f&&!e.F&&(a+=";E"+YB(e.f,{r:r,c:n}));break;case"b":a+=e.v?"TRUE":"FALSE";break;case"e":a+=e.w||e.v;break;case"d":a+='"'+(e.w||e.v)+'"';break;case"s":a+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return a}return e["|"]=254,{to_workbook:function(e,t){return $M(s(e,t),t)},to_sheet:s,from_sheet:function(e,t){var r,n,a=["ID;PWXL;N;E"],s=[],o=zM(e["!ref"]),l=Array.isArray(e),c="\r\n";a.push("P;PGeneral"),a.push("F;P0;DG0G8;M255"),e["!cols"]&&(n=a,e["!cols"].forEach((function(e,t){var r="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?r+="0":("number"!=typeof e.width||e.wpx||(e.wpx=JL(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=ZL(e.wpx)),"number"==typeof e.wch&&(r+=Math.round(e.wch)))," "!=r.charAt(r.length-1)&&n.push(r)}))),e["!rows"]&&function(e,t){t.forEach((function(t,r){var n="F;";t.hidden?n+="M0;":t.hpt?n+="M"+20*t.hpt+";":t.hpx&&(n+="M"+20*sB(t.hpx)+";"),n.length>2&&e.push(n+"R"+(r+1))}))}(a,e["!rows"]),a.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var d=o.s.r;d<=o.e.r;++d)for(var u=o.s.c;u<=o.e.c;++u){var h=LM({r:d,c:u});(r=l?(e[d]||[])[u]:e[h])&&(null!=r.v||r.f&&!r.F)&&s.push(i(r,0,d,u))}return a.join(c)+c+s.join(c)+c+"E"+c}}}(),gL=function(){function e(e,t){for(var r=e.split("\n"),n=-1,a=-1,s=0,i=[];s!==r.length;++s)if("BOT"!==r[s].trim()){if(!(n<0)){for(var o=r[s].trim().split(","),l=o[0],c=o[1],d=r[++s]||"";1&(d.match(/["]/g)||[]).length&&s<r.length-1;)d+="\n"+r[++s];switch(d=d.trim(),+l){case-1:if("BOT"===d){i[++n]=[],a=0;continue}if("EOD"!==d)throw new Error("Unrecognized DIF special command "+d);break;case 0:"TRUE"===d?i[n][a]=!0:"FALSE"===d?i[n][a]=!1:isNaN(NR(c))?isNaN(SR(c).getDate())?i[n][a]=c:i[n][a]=gR(c):i[n][a]=NR(c),++a;break;case 1:(d=(d=d.slice(1,d.length-1)).replace(/""/g,'"'))&&d.match(/^=".*"$/)&&(d=d.slice(2,-1)),i[n][a++]=""!==d?d:null}if("EOD"===d)break}}else i[++n]=[],a=0;return t&&t.sheetRows&&(i=i.slice(0,t.sheetRows)),i}function t(t,r){return qM(function(t,r){switch(r.type){case"base64":return e(KP(t),r);case"binary":return e(t,r);case"buffer":return e(YP&&Buffer.isBuffer(t)?t.toString("binary"):t_(t),r);case"array":return e(yR(t),r)}throw new Error("Unrecognized type "+r.type)}(t,r),r)}var r=function(){var e=function(e,t,r,n,a){e.push(t),e.push(r+","+n),e.push('"'+a.replace(/"/g,'""')+'"')},t=function(e,t,r,n){e.push(t+","+r),e.push(1==t?'"'+n.replace(/"/g,'""')+'"':n)};return function(r){var n,a=[],s=zM(r["!ref"]),i=Array.isArray(r);e(a,"TABLE",0,1,"sheetjs"),e(a,"VECTORS",0,s.e.r-s.s.r+1,""),e(a,"TUPLES",0,s.e.c-s.s.c+1,""),e(a,"DATA",0,0,"");for(var o=s.s.r;o<=s.e.r;++o){t(a,-1,0,"BOT");for(var l=s.s.c;l<=s.e.c;++l){var c=LM({r:o,c:l});if(n=i?(r[o]||[])[l]:r[c])switch(n.t){case"n":var d=n.w;d||null==n.v||(d=n.v),null==d?n.f&&!n.F?t(a,1,0,"="+n.f):t(a,1,0,""):t(a,0,d,"V");break;case"b":t(a,0,n.v?1:0,n.v?"TRUE":"FALSE");break;case"s":t(a,1,0,isNaN(n.v)?n.v:'="'+n.v+'"');break;case"d":n.w||(n.w=G_(n.z||p_[14],cR(gR(n.v)))),t(a,0,n.w,"V");break;default:t(a,1,0,"")}else t(a,1,0,"")}}t(a,-1,0,"EOD");return a.join("\r\n")}}();return{to_workbook:function(e,r){return $M(t(e,r),r)},to_sheet:t,from_sheet:r}}(),yL=function(){function e(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(e,t){return qM(function(e,t){for(var r=e.split("\n"),n=-1,a=-1,s=0,i=[];s!==r.length;++s){var o=r[s].trim().split(":");if("cell"===o[0]){var l=FM(o[1]);if(i.length<=l.r)for(n=i.length;n<=l.r;++n)i[n]||(i[n]=[]);switch(n=l.r,a=l.c,o[2]){case"t":i[n][a]=o[3].replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n");break;case"v":i[n][a]=+o[3];break;case"vtf":var c=o[o.length-1];case"vtc":"nl"===o[3]?i[n][a]=!!+o[4]:i[n][a]=+o[4],"vtf"==o[2]&&(i[n][a]=[i[n][a],c])}}}return t&&t.sheetRows&&(i=i.slice(0,t.sheetRows)),i}(e,t),t)}var r=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),n=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),s="--SocialCalcSpreadsheetControlSave--";function i(t){if(!t||!t["!ref"])return"";for(var r,n=[],a=[],s="",i=BM(t["!ref"]),o=Array.isArray(t),l=i.s.r;l<=i.e.r;++l)for(var c=i.s.c;c<=i.e.c;++c)if(s=LM({r:l,c:c}),(r=o?(t[l]||[])[c]:t[s])&&null!=r.v&&"z"!==r.t){switch(a=["cell",s,"t"],r.t){case"s":case"str":a.push(e(r.v));break;case"n":r.f?(a[2]="vtf",a[3]="n",a[4]=r.v,a[5]=e(r.f)):(a[2]="v",a[3]=r.v);break;case"b":a[2]="vt"+(r.f?"f":"c"),a[3]="nl",a[4]=r.v?"1":"0",a[5]=e(r.f||(r.v?"TRUE":"FALSE"));break;case"d":var d=cR(gR(r.v));a[2]="vtc",a[3]="nd",a[4]=""+d,a[5]=r.w||G_(r.z||p_[14],d);break;case"e":continue}n.push(a.join(":"))}return n.push("sheet:c:"+(i.e.c-i.s.c+1)+":r:"+(i.e.r-i.s.r+1)+":tvf:1"),n.push("valueformat:1:text-wiki"),n.join("\n")}return{to_workbook:function(e,r){return $M(t(e,r),r)},to_sheet:t,from_sheet:function(e){return[r,n,a,n,i(e),s].join("\n")}}}(),bL=function(){function e(e,t,r,n,a){a.raw?t[r][n]=e:""===e||("TRUE"===e?t[r][n]=!0:"FALSE"===e?t[r][n]=!1:isNaN(NR(e))?isNaN(SR(e).getDate())?t[r][n]=e:t[r][n]=gR(e):t[r][n]=NR(e))}var t={44:",",9:"\t",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function n(e){for(var n={},a=!1,s=0,i=0;s<e.length;++s)34==(i=e.charCodeAt(s))?a=!a:!a&&i in t&&(n[i]=(n[i]||0)+1);for(s in i=[],n)Object.prototype.hasOwnProperty.call(n,s)&&i.push([n[s],s]);if(!i.length)for(s in n=r)Object.prototype.hasOwnProperty.call(n,s)&&i.push([n[s],s]);return i.sort((function(e,t){return e[0]-t[0]||r[e[1]]-r[t[1]]})),t[i.pop()[1]]||44}function a(e,t){var r=t||{},a="";var s=r.dense?[]:{},i={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(a=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(a=e.charAt(4),e=e.slice(6)):a=n(e.slice(0,1024)):a=r&&r.FS?r.FS:n(e.slice(0,1024));var o=0,l=0,c=0,d=0,u=0,h=a.charCodeAt(0),f=!1,m=0,p=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var x=null!=r.dateNF?function(e){var t="number"==typeof e?p_[e]:e;return t=t.replace(J_,"(\\d+)"),new RegExp("^"+t+"$")}(r.dateNF):null;function v(){var t=e.slice(d,u),n={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)n.t="z";else if(r.raw)n.t="s",n.v=t;else if(0===t.trim().length)n.t="s",n.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(n.t="s",n.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(n.t="n",n.f=t.slice(1)):(n.t="s",n.v=t);else if("TRUE"==t)n.t="b",n.v=!0;else if("FALSE"==t)n.t="b",n.v=!1;else if(isNaN(c=NR(t)))if(!isNaN(SR(t).getDate())||x&&t.match(x)){n.z=r.dateNF||p_[14];var a=0;x&&t.match(x)&&(t=function(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,l=-1;(t.match(J_)||[]).forEach((function(e,t){var c=parseInt(r[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":n=c;break;case"d":s=c;break;case"h":i=c;break;case"s":l=c;break;case"m":i>=0?o=c:a=c}})),l>=0&&-1==o&&a>=0&&(o=a,a=-1);var c=(""+(n>=0?n:(new Date).getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==i&&-1==o&&-1==l?c:-1==n&&-1==a&&-1==s?d:c+"T"+d}(0,r.dateNF,t.match(x)||[]),a=1),r.cellDates?(n.t="d",n.v=gR(t,a)):(n.t="n",n.v=cR(gR(t,a))),!1!==r.cellText&&(n.w=G_(n.z,n.v instanceof Date?cR(n.v):n.v)),r.cellNF||delete n.z}else n.t="s",n.v=t;else n.t="n",!1!==r.cellText&&(n.w=t),n.v=c;if("z"==n.t||(r.dense?(s[o]||(s[o]=[]),s[o][l]=n):s[LM({c:l,r:o})]=n),d=u+1,p=e.charCodeAt(d),i.e.c<l&&(i.e.c=l),i.e.r<o&&(i.e.r=o),m==h)++l;else if(l=0,++o,r.sheetRows&&r.sheetRows<=o)return!0}e:for(;u<e.length;++u)switch(m=e.charCodeAt(u)){case 34:34===p&&(f=!f);break;case h:case 10:case 13:if(!f&&v())break e}return u-d>0&&v(),s["!ref"]=UM(i),s}function s(t,r){return r&&r.PRN?r.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?a(t,r):qM(function(t,r){var n=r||{},a=[];if(!t||0===t.length)return a;for(var s=t.split(/[\r\n]/),i=s.length-1;i>=0&&0===s[i].length;)--i;for(var o=10,l=0,c=0;c<=i;++c)-1==(l=s[c].indexOf(" "))?l=s[c].length:l++,o=Math.max(o,l);for(c=0;c<=i;++c){a[c]=[];var d=0;for(e(s[c].slice(0,o).trim(),a,c,d,n),d=1;d<=(s[c].length-o)/10+1;++d)e(s[c].slice(o+10*(d-1),o+10*d).trim(),a,c,d,n)}return n.sheetRows&&(a=a.slice(0,n.sheetRows)),a}(t,r),r):a(t,r)}function i(e,t){var r="",n="string"==t.type?[0,0,0,0]:VH(e,t);switch(t.type){case"base64":r=KP(e);break;case"binary":case"string":r=e;break;case"buffer":r=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof VP?VP.utils.decode(t.codepage,e):YP&&Buffer.isBuffer(e)?e.toString("binary"):t_(e);break;case"array":r=yR(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==n[0]&&187==n[1]&&191==n[2]?r=oI(r.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?r=oI(r):"binary"==t.type&&"undefined"!==typeof VP&&t.codepage&&(r=VP.utils.decode(t.codepage,VP.utils.encode(28591,r))),"socialcalc:version:"==r.slice(0,19)?yL.to_sheet("string"==t.type?r:oI(r),t):s(r,t)}return{to_workbook:function(e,t){return $M(i(e,t),t)},to_sheet:i,from_sheet:function(e){for(var t,r=[],n=zM(e["!ref"]),a=Array.isArray(e),s=n.s.r;s<=n.e.r;++s){for(var i=[],o=n.s.c;o<=n.e.c;++o){var l=LM({r:s,c:o});if((t=a?(e[s]||[])[o]:e[l])&&null!=t.v){for(var c=(t.w||(HM(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";i.push(c+(0===o?" ":""))}else i.push("          ")}r.push(i.join(""))}return r.join("\n")}}}();var wL=function(){function e(e,t,r){if(e){jM(e,e.l||0);for(var n=r.Enum||v;e.l<e.length;){var a=e.read_shift(2),s=n[a]||n[65535],i=e.read_shift(2),o=e.l+i,l=s.f&&s.f(e,i,r);if(e.l=o,t(l,s,a))return}}}function t(t,r){if(!t)return t;var n=r||{};var a=n.dense?[]:{},s="Sheet1",i="",o=0,l={},c=[],d=[],u={s:{r:0,c:0},e:{r:0,c:0}},h=n.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])n.Enum=v,e(t,(function(e,t,r){switch(r){case 0:n.vers=e,e>=4096&&(n.qpro=!0);break;case 6:u=e;break;case 204:e&&(i=e);break;case 222:i=e;break;case 15:case 51:n.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==r&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=n.dateNF||p_[14],n.cellDates&&(e[1].t="d",e[1].v=fR(e[1].v))),n.qpro&&e[3]>o&&(a["!ref"]=UM(u),l[s]=a,c.push(s),a=n.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s=i||"Sheet"+(o+1),i="");var d=n.dense?(a[e[0].r]||[])[e[0].c]:a[LM(e[0])];if(d){d.t=e[1].t,d.v=e[1].v,null!=e[1].z&&(d.z=e[1].z),null!=e[1].f&&(d.f=e[1].f);break}n.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[LM(e[0])]=e[1]}}),n);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);n.Enum=g,14==t[2]&&(n.qpro=!0,t.l=0),e(t,(function(e,t,r){switch(r){case 204:s=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(a["!ref"]=UM(u),l[s]=a,c.push(s),a=n.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s="Sheet"+(o+1)),h>0&&e[0].r>=h)break;n.dense?(a[e[0].r]||(a[e[0].r]=[]),a[e[0].r][e[0].c]=e[1]):a[LM(e[0])]=e[1],u.e.c<e[0].c&&(u.e.c=e[0].c),u.e.r<e[0].r&&(u.e.r=e[0].r);break;case 27:e[14e3]&&(d[e[14e3][0]]=e[14e3][1]);break;case 1537:d[e[0]]=e[1],e[0]==o&&(s=e[1])}}),n)}if(a["!ref"]=UM(u),l[i||s]=a,c.push(i||s),!d.length)return{SheetNames:c,Sheets:l};for(var f={},m=[],p=0;p<d.length;++p)l[c[p]]?(m.push(d[p]||c[p]),f[d[p]]=l[d[p]]||l[c[p]]):(m.push(d[p]),f[d[p]]={"!ref":"A1"});return{SheetNames:m,Sheets:f}}function r(e,t,r){var n=[{c:0,r:0},{t:"n",v:0},0,0];return r.qpro&&20768!=r.vers?(n[0].c=e.read_shift(1),n[3]=e.read_shift(1),n[0].r=e.read_shift(2),e.l+=2):(n[2]=e.read_shift(1),n[0].c=e.read_shift(2),n[0].r=e.read_shift(2)),n}function n(e,t,n){var a=e.l+t,s=r(e,0,n);if(s[1].t="s",20768==n.vers){e.l++;var i=e.read_shift(1);return s[1].v=e.read_shift(i,"utf8"),s}return n.qpro&&e.l++,s[1].v=e.read_shift(a-e.l,"cstr"),s}function a(e,t,r){var n=CM(7+r.length);n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(1,39);for(var a=0;a<n.length;++a){var s=r.charCodeAt(a);n.write_shift(1,s>=128?95:s)}return n.write_shift(1,0),n}function s(e,t,r){var n=CM(7);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r,"i"),n}function i(e,t,r){var n=CM(13);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(8,r,"f"),n}function o(e,t,r){var n=32768&t;return t=(n?e:0)+((t&=-32769)>=8192?t-16384:t),(n?"":"$")+(r?OM(t):IM(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function d(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function u(e,t,r,n){var a=CM(6+n.length);a.write_shift(2,e),a.write_shift(1,r),a.write_shift(1,t),a.write_shift(1,39);for(var s=0;s<n.length;++s){var i=n.charCodeAt(s);a.write_shift(1,i>=128?95:i)}return a.write_shift(1,0),a}function h(e,t){var r=d(e),n=e.read_shift(4),a=e.read_shift(4),s=e.read_shift(2);if(65535==s)return 0===n&&3221225472===a?(r[1].t="e",r[1].v=15):0===n&&3489660928===a?(r[1].t="e",r[1].v=42):r[1].v=0,r;var i=32768&s;return s=(32767&s)-16446,r[1].v=(1-2*i)*(a*Math.pow(2,s+32)+n*Math.pow(2,s)),r}function f(e,t,r,n){var a=CM(14);if(a.write_shift(2,e),a.write_shift(1,r),a.write_shift(1,t),0==n)return a.write_shift(4,0),a.write_shift(4,0),a.write_shift(2,65535),a;var s,i=0,o=0,l=0;return n<0&&(i=1,n=-n),o=0|Math.log2(n),0==(2147483648&(l=(n/=Math.pow(2,o-31))>>>0))&&(++o,l=(n/=2)>>>0),n-=l,l|=2147483648,l>>>=0,s=(n*=Math.pow(2,32))>>>0,a.write_shift(4,s),a.write_shift(4,l),o+=16383+(i?32768:0),a.write_shift(2,o),a}function m(e,t){var r=d(e),n=e.read_shift(8,"f");return r[1].v=n,r}function p(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function x(e,t){var r=CM(5+e.length);r.write_shift(2,14e3),r.write_shift(2,t);for(var n=0;n<e.length;++n){var a=e.charCodeAt(n);r[r.l++]=a>127?95:a}return r[r.l++]=0,r}var v={0:{n:"BOF",f:yF},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,r){var n={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&r.qpro?(n.s.c=e.read_shift(1),e.l++,n.s.r=e.read_shift(2),n.e.c=e.read_shift(1),e.l++,n.e.r=e.read_shift(2),n):(n.s.c=e.read_shift(2),n.s.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),n.e.c=e.read_shift(2),n.e.r=e.read_shift(2),12==t&&r.qpro&&(e.l+=2),65535==n.s.c&&(n.s.c=n.e.c=n.s.r=n.e.r=0),n)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,n){var a=r(e,0,n);return a[1].v=e.read_shift(2,"i"),a}},14:{n:"NUMBER",f:function(e,t,n){var a=r(e,0,n);return a[1].v=e.read_shift(8,"f"),a}},15:{n:"LABEL",f:n},16:{n:"FORMULA",f:function(e,t,n){var a=e.l+t,s=r(e,0,n);if(s[1].v=e.read_shift(8,"f"),n.qpro)e.l=a;else{var i=e.read_shift(2);!function(e,t){jM(e,0);var r=[],n=0,a="",s="",i="",d="";for(;e.l<e.length;){var u=e[e.l++];switch(u){case 0:r.push(e.read_shift(8,"f"));break;case 1:s=o(t[0].c,e.read_shift(2),!0),a=o(t[0].r,e.read_shift(2),!1),r.push(s+a);break;case 2:var h=o(t[0].c,e.read_shift(2),!0),f=o(t[0].r,e.read_shift(2),!1);s=o(t[0].c,e.read_shift(2),!0),a=o(t[0].r,e.read_shift(2),!1),r.push(h+f+":"+s+a);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:r.push("("+r.pop()+")");break;case 5:r.push(e.read_shift(2));break;case 6:for(var m="";u=e[e.l++];)m+=String.fromCharCode(u);r.push('"'+m.replace(/"/g,'""')+'"');break;case 8:r.push("-"+r.pop());break;case 23:r.push("+"+r.pop());break;case 22:r.push("NOT("+r.pop()+")");break;case 20:case 21:d=r.pop(),i=r.pop(),r.push(["AND","OR"][u-20]+"("+i+","+d+")");break;default:if(u<32&&c[u])d=r.pop(),i=r.pop(),r.push(i+c[u]+d);else{if(!l[u])return u<=7?console.error("WK1 invalid opcode "+u.toString(16)):u<=24?console.error("WK1 unsupported op "+u.toString(16)):u<=30?console.error("WK1 invalid opcode "+u.toString(16)):u<=115?console.error("WK1 unsupported function opcode "+u.toString(16)):console.error("WK1 unrecognized opcode "+u.toString(16));if(69==(n=l[u][1])&&(n=e[e.l++]),n>r.length)return void console.error("WK1 bad formula parse 0x"+u.toString(16)+":|"+r.join("|")+"|");var p=r.slice(-n);r.length-=n,r.push(l[u][0]+"("+p.join(",")+")")}}}1==r.length?t[1].f=""+r[0]:console.error("WK1 bad formula parse |"+r.join("|")+"|")}(e.slice(e.l,e.l+i),s),e.l+=i}return s}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:n},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:p},222:{n:"SHEETNAMELP",f:function(e,t){var r=e[e.l++];r>t-1&&(r=t-1);for(var n="";n.length<r;)n+=String.fromCharCode(e[e.l++]);return n}},65535:{n:""}},g={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var r=d(e);return r[1].t="s",r[1].v=e.read_shift(t-4,"cstr"),r}},23:{n:"NUMBER17",f:h},24:{n:"NUMBER18",f:function(e,t){var r=d(e);r[1].v=e.read_shift(2);var n=r[1].v>>1;if(1&r[1].v)switch(7&n){case 0:n=5e3*(n>>3);break;case 1:n=500*(n>>3);break;case 2:n=(n>>3)/20;break;case 3:n=(n>>3)/200;break;case 4:n=(n>>3)/2e3;break;case 5:n=(n>>3)/2e4;break;case 6:n=(n>>3)/16;break;case 7:n=(n>>3)/64}return r[1].v=n,r}},25:{n:"FORMULA19",f:function(e,t){var r=h(e);return e.l+=t-14,r}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var r={},n=e.l+t;e.l<n;){var a=e.read_shift(2);if(14e3==a){for(r[a]=[0,""],r[a][0]=e.read_shift(2);e[e.l];)r[a][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return r}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var r=d(e),n=e.read_shift(4);return r[1].v=n>>6,r}},38:{n:"??"},39:{n:"NUMBER27",f:m},40:{n:"FORMULA28",f:function(e,t){var r=m(e);return e.l+=t-10,r}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:p},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,r){if(r.qpro&&!(t<21)){var n=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[n,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var r=t||{};if(+r.codepage>=0&&LP(+r.codepage),"string"==r.type)throw new Error("Cannot write WK1 to JS string");var n=EM(),o=zM(e["!ref"]),l=Array.isArray(e),c=[];RV(n,0,function(e){var t=CM(2);return t.write_shift(2,e),t}(1030)),RV(n,6,function(e){var t=CM(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(o));for(var d=Math.min(o.e.r,8191),u=o.s.r;u<=d;++u)for(var h=IM(u),f=o.s.c;f<=o.e.c;++f){u===o.s.r&&(c[f]=OM(f));var m=c[f]+h,p=l?(e[u]||[])[f]:e[m];if(p&&"z"!=p.t)if("n"==p.t)(0|p.v)==p.v&&p.v>=-32768&&p.v<=32767?RV(n,13,s(u,f,p.v)):RV(n,14,i(u,f,p.v));else RV(n,15,a(u,f,HM(p).slice(0,239)))}return RV(n,1),n.end()},book_to_wk3:function(e,t){var r=t||{};if(+r.codepage>=0&&LP(+r.codepage),"string"==r.type)throw new Error("Cannot write WK3 to JS string");var n=EM();RV(n,0,function(e){var t=CM(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var r=0,n=0,a=0,s=0;s<e.SheetNames.length;++s){var i=e.SheetNames[s],o=e.Sheets[i];if(o&&o["!ref"]){++a;var l=BM(o["!ref"]);r<l.e.r&&(r=l.e.r),n<l.e.c&&(n=l.e.c)}}r>8191&&(r=8191);return t.write_shift(2,r),t.write_shift(1,a),t.write_shift(1,n),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var a=0,s=0;a<e.SheetNames.length;++a)(e.Sheets[e.SheetNames[a]]||{})["!ref"]&&RV(n,27,x(e.SheetNames[a],s++));var i=0;for(a=0;a<e.SheetNames.length;++a){var o=e.Sheets[e.SheetNames[a]];if(o&&o["!ref"]){for(var l=zM(o["!ref"]),c=Array.isArray(o),d=[],h=Math.min(l.e.r,8191),m=l.s.r;m<=h;++m)for(var p=IM(m),v=l.s.c;v<=l.e.c;++v){m===l.s.r&&(d[v]=OM(v));var g=d[v]+p,y=c?(o[m]||[])[v]:o[g];if(y&&"z"!=y.t)if("n"==y.t)RV(n,23,f(m,v,i,y.v));else RV(n,22,u(m,v,i,HM(y).slice(0,239)))}++i}}return RV(n,1),n.end()},to_workbook:function(e,r){switch(r.type){case"base64":return t(ZP(KP(e)),r);case"binary":return t(ZP(e),r);case"buffer":case"array":return t(e,r)}throw"Unsupported type "+r.type}}}();var NL=function(){var e=cI("t"),t=cI("rPr");function r(r){var n=r.match(e);if(!n)return{t:"s",v:""};var a={t:"s",v:KR(n[1])},s=r.match(t);return s&&(a.s=function(e){var t={},r=e.match(zR),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=$R(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if("1"==s.val)break;t.cp=OP[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting"}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if("0"==s.val)break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if("0"==s.val)break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":case"<scheme":case"<scheme>":case"<scheme/>":case"</scheme>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(47!==s[0].charCodeAt(1)&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}(s[1])),a}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(e){return e.replace(n,"").split(a).map(r).filter((function(e){return e.v}))}}(),jL=function(){var e=/(\r\n|\n)/g;function t(t){var r=[[],t.v,[]];return t.v?(t.s&&function(e,t,r){var n=[];e.u&&n.push("text-decoration: underline;"),e.uval&&n.push("text-underline-style:"+e.uval+";"),e.sz&&n.push("font-size:"+e.sz+"pt;"),e.outline&&n.push("text-effect: outline;"),e.shadow&&n.push("text-shadow: auto;"),t.push('<span style="'+n.join("")+'">'),e.b&&(t.push("<b>"),r.push("</b>")),e.i&&(t.push("<i>"),r.push("</i>")),e.strike&&(t.push("<s>"),r.push("</s>"));var a=e.valign||"";"superscript"==a||"super"==a?a="sup":"subscript"==a&&(a="sub"),""!=a&&(t.push("<"+a+">"),r.push("</"+a+">")),r.push("</span>")}(t.s,r[0],r[2]),r[0].join("")+r[1].replace(e,"<br/>")+r[2].join("")):""}return function(e){return e.map(t).join("")}}(),SL=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,CL=/<(?:\w+:)?r>/,kL=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function EL(e,t){var r=!t||t.cellHTML,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=KR(oI(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=oI(e),r&&(n.h=eI(n.t))):e.match(CL)&&(n.r=oI(e),n.t=KR(oI((e.replace(kL,"").match(SL)||[]).join("").replace(zR,""))),r&&(n.h=jL(NL(n.r)))),n):{t:""}}var TL=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,DL=/<(?:\w+:)?(?:si|sstItem)>/g,AL=/<\/(?:\w+:)?(?:si|sstItem)>/;var PL=/^\s|\s$|[\t\n\r]/;function _L(e,t){if(!t.bookSST)return"";var r=[LR];r[r.length]=gI("sst",null,{xmlns:MI[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(null!=e[n]){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(PL)&&(s+=' xml:space="preserve"'),s+=">"+QR(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}var RL=function(e,t){var r=!1;return null==t&&(r=!0,t=CM(15+4*e.t.length)),t.write_shift(1,0),YM(e.t,t),r?t.slice(0,t.l):t};function IL(e){var t=EM();TM(t,159,function(e,t){return t||(t=CM(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var r=0;r<e.length;++r)TM(t,19,RL(e[r]));return TM(t,160),t.end()}function ML(e){if("undefined"!==typeof VP)return VP.utils.encode(IP,e);for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function OL(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function FL(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function LL(e){var t=function(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=OL(e,4),t.U=OL(e,4),t.W=OL(e,4),t}(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),4!=e.read_shift(4))throw new Error("Bad !Primary record");return t}function BL(e,t){var r=e.l+t,n={};n.Flags=63&e.read_shift(4),e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=36==n.Flags;break;case 26625:a=4==n.Flags;break;case 0:a=16==n.Flags||4==n.Flags||36==n.Flags;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function UL(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function zL(e){if(36!=(63&e.read_shift(4)))throw new Error("EncryptionInfo mismatch");var t=e.read_shift(4);return{t:"Std",h:BL(e,t),v:UL(e,e.length-e.l)}}function VL(){throw new Error("File is password-protected: ECMA-376 Extensible")}function HL(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(zR,(function(e){var r=$R(e);switch(WR(r[0])){case"<?xml":case"<encryption":case"</encryption>":case"</keyEncryptors>":case"</keyEncryptor>":break;case"<keyData":t.forEach((function(e){n[e]=r[e]}));break;case"<dataIntegrity":n.encryptedHmacKey=r.encryptedHmacKey,n.encryptedHmacValue=r.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"<keyEncryptor":n.uri=r.uri;break;case"<encryptedKey":n.encs.push(r);break;default:throw r[0]}})),n}function $L(e){var t,r,n=0,a=ML(e),s=a.length+1;for((t=QP(s))[0]=a.length,r=1;r!=s;++r)t[r]=a[r-1];for(r=s-1;r>=0;--r)n=((0===(16384&n)?0:1)|n<<1&32767)^t[r];return 52811^n}var WL=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(e,t){return 255&((r=e^t)/2|128*r);var r};return function(a){for(var s,i,o,l=ML(a),c=function(e){for(var n=t[e.length-1],a=104,s=e.length-1;s>=0;--s)for(var i=e[s],o=0;7!=o;++o)64&i&&(n^=r[a]),i*=2,--a;return n}(l),d=l.length,u=QP(16),h=0;16!=h;++h)u[h]=0;for(1===(1&d)&&(s=c>>8,u[d]=n(e[0],s),--d,s=255&c,i=l[l.length-1],u[d]=n(i,s));d>0;)s=c>>8,u[--d]=n(l[d],s),s=255&c,u[--d]=n(l[d],s);for(d=15,o=15-l.length;o>0;)s=c>>8,u[d]=n(e[o],s),--o,s=255&c,u[--d]=n(l[d],s),--d,--o;return u}}(),qL=function(e){var t=0,r=WL(e);return function(e){var n=function(e,t,r,n,a){var s,i;for(a||(a=t),n||(n=WL(e)),s=0;s!=t.length;++s)i=t[s],i=255&((i^=n[r])>>5|i<<3),a[s]=i,++r;return[a,r,n]}("",e,t,r);return t=n[1],n[0]}};function GL(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,1===n.Info?n.Data=function(e){var t={},r=t.EncryptionVersionInfo=OL(e,4);if(1!=r.Major||1!=r.Minor)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}(e):n.Data=function(e,t){var r={},n=r.EncryptionVersionInfo=OL(e,4);if(t-=4,2!=n.Minor)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=BL(e,a),t-=a,r.EncryptionVerifier=UL(e,t),r}(e,t),n}var KL=function(){function e(e,r){switch(r.type){case"base64":return t(KP(e),r);case"binary":return t(e,r);case"buffer":return t(YP&&Buffer.isBuffer(e)?e.toString("binary"):t_(e),r);case"array":return t(yR(e),r)}throw new Error("Unrecognized type "+r.type)}function t(e,t){var r=(t||{}).dense?[]:{},n=e.match(/\\trowd.*?\\row\b/g);if(!n.length)throw new Error("RTF missing table");var a={s:{c:0,r:0},e:{c:0,r:n.length-1}};return n.forEach((function(e,t){Array.isArray(r)&&(r[t]=[]);for(var n,s=/\\\w+\b/g,i=0,o=-1;n=s.exec(e);){if("\\cell"===n[0]){var l=e.slice(i,s.lastIndex-n[0].length);if(" "==l[0]&&(l=l.slice(1)),++o,l.length){var c={v:l,t:"s"};Array.isArray(r)?r[t][o]=c:r[LM({r:t,c:o})]=c}}i=s.lastIndex}o>a.e.c&&(a.e.c=o)})),r["!ref"]=UM(a),r}return{to_workbook:function(t,r){return $M(e(t,r),r)},to_sheet:e,from_sheet:function(e){for(var t,r=["{\\rtf1\\ansi"],n=zM(e["!ref"]),a=Array.isArray(e),s=n.s.r;s<=n.e.r;++s){r.push("\\trowd\\trautofit1");for(var i=n.s.c;i<=n.e.c;++i)r.push("\\cellx"+(i+1));for(r.push("\\pard\\intbl"),i=n.s.c;i<=n.e.c;++i){var o=LM({r:s,c:i});(t=a?(e[s]||[])[i]:e[o])&&(null!=t.v||t.f&&!t.F)&&(r.push(" "+(t.w||(HM(t),t.w))),r.push("\\cell"))}r.push("\\pard\\intbl\\row")}return r.join("")+"}"}}}();function YL(e){for(var t=0,r=1;3!=t;++t)r=256*r+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function XL(e,t){if(0===t)return e;var r=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(0===i)return[0,0,t];var o,l=0,c=a+s;switch(o=i/(c>1?2-c:c),a){case t:l=((r-n)/i+6)%6;break;case r:l=(n-t)/i+2;break;case n:l=(t-r)/i+4}return[l/6,o,c/2]}(function(e){var t=e.slice("#"===e[0]?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}(e));return r[2]=t<0?r[2]*(1+t):1-(1-r[2])*(1-t),YL(function(e){var t,r=e[0],n=e[1],a=e[2],s=2*n*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*r;if(0!==n)switch(0|l){case 0:case 6:t=s*l,o[0]+=s,o[1]+=t;break;case 1:t=s*(2-l),o[0]+=t,o[1]+=s;break;case 2:t=s*(l-2),o[1]+=s,o[2]+=t;break;case 3:t=s*(4-l),o[1]+=t,o[2]+=s;break;case 4:t=s*(l-4),o[2]+=s,o[0]+=t;break;case 5:t=s*(6-l),o[2]+=t,o[0]+=s}for(var c=0;3!=c;++c)o[c]=Math.round(255*o[c]);return o}(r))}var QL=6;function JL(e){return Math.floor((e+Math.round(128/QL)/256)*QL)}function ZL(e){return Math.floor((e-5)/QL*100+.5)/100}function eB(e){return Math.round((e*QL+5)/QL*256)/256}function tB(e){return eB(ZL(JL(e)))}function rB(e){var t=Math.abs(e-tB(e)),r=QL;if(t>.005)for(QL=1;QL<15;++QL)Math.abs(e-tB(e))<=t&&(t=Math.abs(e-tB(e)),r=QL);QL=r}function nB(e){e.width?(e.wpx=JL(e.width),e.wch=ZL(e.wpx),e.MDW=QL):e.wpx?(e.wch=ZL(e.wpx),e.width=eB(e.wch),e.MDW=QL):"number"==typeof e.wch&&(e.width=eB(e.wch),e.wpx=JL(e.width),e.MDW=QL),e.customWidth&&delete e.customWidth}var aB=96;function sB(e){return 96*e/aB}function iB(e){return e*aB/96}var oB={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};var lB=["numFmtId","fillId","fontId","borderId","xfId"],cB=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];var dB=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(s,i,o){var l,c={};return s?((l=(s=s.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"")).match(e))&&function(e,t,r){t.NumberFmt=[];for(var n=aR(p_),a=0;a<n.length;++a)t.NumberFmt[n[a]]=p_[n[a]];var s=e[0].match(zR);if(s)for(a=0;a<s.length;++a){var i=$R(s[a]);switch(WR(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":case"</numFmt>":break;case"<numFmt":var o=KR(oI(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&null!=t.NumberFmt[l];--l);t.NumberFmt[l]=o}K_(o,l)}break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}(l,c,o),(l=s.match(n))&&function(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(zR)||[]).forEach((function(e){var i=$R(e);switch(WR(i[0])){case"<fonts":case"<fonts>":case"</fonts>":case"<font":case"<font>":case"<name/>":case"</name>":case"<sz/>":case"</sz>":case"<vertAlign/>":case"</vertAlign>":case"<family/>":case"</family>":case"<scheme/>":case"</scheme>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":i.val&&(a.name=oI(i.val));break;case"<b":a.bold=i.val?rI(i.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=i.val?rI(i.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(i.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=i.val?rI(i.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=i.val?rI(i.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=i.val?rI(i.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=i.val?rI(i.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=i.val?rI(i.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":i.val&&(a.sz=+i.val);break;case"<vertAlign":i.val&&(a.vertAlign=i.val);break;case"<family":i.val&&(a.family=parseInt(i.val,10));break;case"<scheme":i.val&&(a.scheme=i.val);break;case"<charset":if("1"==i.val)break;i.codepage=OP[parseInt(i.val,10)];break;case"<color":if(a.color||(a.color={}),i.auto&&(a.color.auto=rI(i.auto)),i.rgb)a.color.rgb=i.rgb.slice(-6);else if(i.indexed){a.color.index=parseInt(i.indexed,10);var o=EO[a.color.index];81==a.color.index&&(o=EO[1]),o||(o=EO[1]),a.color.rgb=o[0].toString(16)+o[1].toString(16)+o[2].toString(16)}else i.theme&&(a.color.theme=parseInt(i.theme,10),i.tint&&(a.color.tint=parseFloat(i.tint)),i.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=XL(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<AlternateContent":case"<ext":s=!0;break;case"</AlternateContent>":case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+i[0]+" in fonts")}}))}(l,c,i,o),(l=s.match(r))&&function(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(zR)||[]).forEach((function(e){var r=$R(e);switch(WR(r[0])){case"<fills":case"<fills>":case"</fills>":case"</fill>":case"<gradientFill>":case"<patternFill/>":case"</patternFill>":case"<bgColor/>":case"</bgColor>":case"<fgColor/>":case"</fgColor>":case"<stop":case"<stop/>":case"</stop>":case"<color":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":r.patternType&&(a.patternType=r.patternType);break;case"<bgColor":a.bgColor||(a.bgColor={}),r.indexed&&(a.bgColor.indexed=parseInt(r.indexed,10)),r.theme&&(a.bgColor.theme=parseInt(r.theme,10)),r.tint&&(a.bgColor.tint=parseFloat(r.tint)),r.rgb&&(a.bgColor.rgb=r.rgb.slice(-6));break;case"<fgColor":a.fgColor||(a.fgColor={}),r.theme&&(a.fgColor.theme=parseInt(r.theme,10)),r.tint&&(a.fgColor.tint=parseFloat(r.tint)),null!=r.rgb&&(a.fgColor.rgb=r.rgb.slice(-6));break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+r[0]+" in fills")}}))}(l,c,0,o),(l=s.match(a))&&function(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(zR)||[]).forEach((function(e){var r=$R(e);switch(WR(r[0])){case"<borders":case"<borders>":case"</borders>":case"</border>":case"<left/>":case"<left":case"<left>":case"</left>":case"<right/>":case"<right":case"<right>":case"</right>":case"<top/>":case"<top":case"<top>":case"</top>":case"<bottom/>":case"<bottom":case"<bottom>":case"</bottom>":case"<diagonal":case"<diagonal>":case"<diagonal/>":case"</diagonal>":case"<horizontal":case"<horizontal>":case"<horizontal/>":case"</horizontal>":case"<vertical":case"<vertical>":case"<vertical/>":case"</vertical>":case"<start":case"<start>":case"<start/>":case"</start>":case"<end":case"<end>":case"<end/>":case"</end>":case"<color":case"<color>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<border":case"<border>":case"<border/>":a={},r.diagonalUp&&(a.diagonalUp=rI(r.diagonalUp)),r.diagonalDown&&(a.diagonalDown=rI(r.diagonalDown)),t.Borders.push(a);break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+r[0]+" in borders")}}))}(l,c,0,o),(l=s.match(t))&&function(e,t,r){var n;t.CellXf=[];var a=!1;(e[0].match(zR)||[]).forEach((function(e){var s=$R(e),i=0;switch(WR(s[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":case"</xf>":case"</alignment>":case"<protection":case"</protection>":case"<protection/>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<xf":case"<xf/>":for(delete(n=s)[0],i=0;i<lB.length;++i)n[lB[i]]&&(n[lB[i]]=parseInt(n[lB[i]],10));for(i=0;i<cB.length;++i)n[cB[i]]&&(n[cB[i]]=rI(n[cB[i]]));if(t.NumberFmt&&n.numFmtId>392)for(i=392;i>60;--i)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[i]){n.numFmtId=i;break}t.CellXf.push(n);break;case"<alignment":case"<alignment/>":var o={};s.vertical&&(o.vertical=s.vertical),s.horizontal&&(o.horizontal=s.horizontal),null!=s.textRotation&&(o.textRotation=s.textRotation),s.indent&&(o.indent=s.indent),s.wrapText&&(o.wrapText=rI(s.wrapText)),n.alignment=o;break;case"<AlternateContent":case"<ext":a=!0;break;case"</AlternateContent>":case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+s[0]+" in cellXfs")}}))}(l,c,o),c):c}}();function uB(e,t){var r,n=[LR,gI("styleSheet",null,{xmlns:MI[0],"xmlns:vt":_I})];return e.SSF&&null!=(r=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach((function(r){for(var n=r[0];n<=r[1];++n)null!=e[n]&&(t[t.length]=gI("numFmt",null,{numFmtId:n,formatCode:QR(e[n])}))})),1===t.length?"":(t[t.length]="</numFmts>",t[0]=gI("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=function(e){var t=[];return t[t.length]=gI("cellXfs",null),e.forEach((function(e){t[t.length]=gI("xf",null,e)})),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=gI("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function hB(e,t,r){r||(r=CM(6+4*t.length)),r.write_shift(2,e),YM(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return null==r.l&&(r.l=r.length),n}function fB(e,t){t||(t=CM(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=CM(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,r),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var r=0;"superscript"==e.vertAlign?r=1:"subscript"==e.vertAlign&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),gO(e.color,t);var n=0;return"major"==e.scheme&&(n=1),"minor"==e.scheme&&(n=2),t.write_shift(1,n),YM(e.name,t),t.length>t.l?t.slice(0,t.l):t}var mB,pB=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],xB=SM;function vB(e,t){t||(t=CM(84)),mB||(mB=iR(pB));var r=mB[e.patternType];null==r&&(r=40),t.write_shift(4,r);var n=0;if(40!=r)for(gO({auto:1},t),gO({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function gB(e,t,r){r||(r=CM(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);return r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function yB(e,t){return t||(t=CM(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var bB=SM;function wB(e){var t;TM(e,613,GM(1)),TM(e,46,(t||(t=CM(51)),t.write_shift(1,0),yB(0,t),yB(0,t),yB(0,t),yB(0,t),yB(0,t),t.length>t.l?t.slice(0,t.l):t)),TM(e,614)}function NB(e){var t,r;TM(e,619,GM(1)),TM(e,48,(t={xfId:0,builtinId:0,name:"Normal"},r||(r=CM(52)),r.write_shift(4,t.xfId),r.write_shift(2,1),r.write_shift(1,+t.builtinId),r.write_shift(1,0),oO(t.name||"",r),r.length>r.l?r.slice(0,r.l):r)),TM(e,620)}function jB(e){TM(e,508,function(e,t,r){var n=CM(2052);return n.write_shift(4,e),oO(t,n),oO(r,n),n.length>n.l?n.slice(0,n.l):n}(0,"TableStyleMedium9","PivotStyleMedium4")),TM(e,509)}function SB(e,t){var r=EM();return TM(r,278),function(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach((function(e){for(var n=e[0];n<=e[1];++n)null!=t[n]&&++r})),0!=r&&(TM(e,615,GM(r)),[[5,8],[23,26],[41,44],[50,392]].forEach((function(r){for(var n=r[0];n<=r[1];++n)null!=t[n]&&TM(e,44,hB(n,t[n]))})),TM(e,616))}}(r,e.SSF),function(e){TM(e,611,GM(1)),TM(e,43,fB({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),TM(e,612)}(r),function(e){TM(e,603,GM(2)),TM(e,45,vB({patternType:"none"})),TM(e,45,vB({patternType:"gray125"})),TM(e,604)}(r),wB(r),function(e){TM(e,626,GM(1)),TM(e,47,gB({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),TM(e,627)}(r),function(e,t){TM(e,617,GM(t.length)),t.forEach((function(t){TM(e,47,gB(t,0))})),TM(e,618)}(r,t.cellXfs),NB(r),function(e){TM(e,505,GM(0)),TM(e,506)}(r),jB(r),TM(r,279),r.end()}var CB=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function kB(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(zR)||[]).forEach((function(e){var a=$R(e);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":"/"===a[0].charAt(1)?(t.themeElements.clrScheme[CB.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}}))}function EB(){}function TB(){}var DB=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,AB=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,PB=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;var _B=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function RB(e,t){var r;e&&0!==e.length||(e=IB());var n={};if(!(r=e.match(_B)))throw new Error("themeElements not found in theme");return function(e,t,r){var n;t.themeElements={},[["clrScheme",DB,kB],["fontScheme",AB,EB],["fmtScheme",PB,TB]].forEach((function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)}))}(r[0],n,t),n.raw=e,n}function IB(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var r=[LR];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',r[r.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',r[r.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',r[r.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',r[r.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',r[r.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',r[r.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function MB(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:case 4:e.l+=4;break;case 1:t.xclrValue=function(e,t){return SM(e,t)}(e,4);break;case 2:t.xclrValue=IF(e);break;case 3:t.xclrValue=function(e){return e.read_shift(4)}(e)}return e.l+=8,t}function OB(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=MB(e);break;case 6:n[1]=function(e,t){return SM(e,t)}(e,r);break;case 14:case 15:n[1]=e.read_shift(1===r?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function FB(){var e=EM();return TM(e,332),TM(e,334,GM(1)),TM(e,335,function(e){var t=CM(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),YM(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),TM(e,336),TM(e,339,function(e,t){var r=CM(8+2*t.length);return r.write_shift(4,e),YM(t,r),r.slice(0,r.l)}(1,"XLDAPR")),TM(e,52),TM(e,35,GM(514)),TM(e,4096,GM(0)),TM(e,4097,bF(1)),TM(e,36),TM(e,53),TM(e,340),TM(e,337,function(e,t){var r=CM(8);return r.write_shift(4,e),r.write_shift(4,t?1:0),r}(1,!0)),TM(e,51,function(e){var t=CM(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}([[1,0]])),TM(e,338),TM(e,333),e.end()}function LB(){var e=[LR];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var BB=1024;function UB(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[gI("xml",null,{"xmlns:v":zI,"xmlns:o":OI,"xmlns:x":FI,"xmlns:mv":UI}).replace(/\/>/,">"),gI("o:shapelayout",gI("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),gI("v:shapetype",[gI("v:stroke",null,{joinstyle:"miter"}),gI("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];BB<1e3*e;)BB+=1e3;return t.forEach((function(e){var t=FM(e[0]),r={color2:"#BEFF82",type:"gradient"};"gradient"==r.type&&(r.angle="-180");var n="gradient"==r.type?gI("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=gI("v:fill",n,r);++BB,a=a.concat(["<v:shape"+vI({id:"_x0000_s"+BB,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,gI("v:shadow",null,{on:"t",obscured:"t"}),gI("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",xI("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),xI("x:AutoFill","False"),xI("x:Row",String(t.r)),xI("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])})),a.push("</xml>"),a.join("")}function zB(e,t,r,n){var a,s=Array.isArray(e);t.forEach((function(t){var i=FM(t.ref);if(s?(e[i.r]||(e[i.r]=[]),a=e[i.r][i.c]):a=e[t.ref],!a){a={t:"z"},s?e[i.r][i.c]=a:e[t.ref]=a;var o=zM(e["!ref"]||"BDWGO1000001:A1");o.s.r>i.r&&(o.s.r=i.r),o.e.r<i.r&&(o.e.r=i.r),o.s.c>i.c&&(o.s.c=i.c),o.e.c<i.c&&(o.e.c=i.c);var l=UM(o);l!==e["!ref"]&&(e["!ref"]=l)}a.c||(a.c=[]);var c={a:t.author,t:t.t,r:t.r,T:r};t.h&&(c.h=t.h);for(var d=a.c.length-1;d>=0;--d){if(!r&&a.c[d].T)return;r&&!a.c[d].T&&a.c.splice(d,1)}if(r&&n)for(d=0;d<n.length;++d)if(c.a==n[d].id){c.a=n[d].name||c.a;break}a.c.push(c)}))}function VB(e){var t=[LR,gI("comments",null,{xmlns:MI[0]})],r=[];return t.push("<authors>"),e.forEach((function(e){e[1].forEach((function(e){var n=QR(e.a);-1==r.indexOf(n)&&(r.push(n),t.push("<author>"+n+"</author>")),e.T&&e.ID&&-1==r.indexOf("tc="+e.ID)&&(r.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))}))})),0==r.length&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach((function(e){var n=0,a=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?n=r.indexOf("tc="+e[1][0].ID):e[1].forEach((function(e){e.a&&(n=r.indexOf(QR(e.a))),a.push(e.t||"")})),t.push('<comment ref="'+e[0]+'" authorId="'+n+'"><text>'),a.length<=1)t.push(xI("t",QR(a[0]||"")));else{for(var s="Comment:\n    "+a[0]+"\n",i=1;i<a.length;++i)s+="Reply:\n    "+a[i]+"\n";t.push(xI("t",QR(s)))}t.push("</text></comment>")})),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function HB(e,t,r){var n=[LR,gI("ThreadedComments",null,{xmlns:EI}).replace(/[\/]>/,">")];return e.forEach((function(e){var a="";(e[1]||[]).forEach((function(s,i){if(s.T){s.a&&-1==t.indexOf(s.a)&&t.push(s.a);var o={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};0==i?a=o.id:o.parentId=a,s.ID=o.id,s.a&&(o.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),n.push(gI("threadedComment",xI("text",s.t||""),o))}else delete s.ID}))})),n.push("</ThreadedComments>"),n.join("")}var $B=KM;function WB(e){var t=EM(),r=[];return TM(t,628),TM(t,630),e.forEach((function(e){e[1].forEach((function(e){r.indexOf(e.a)>-1||(r.push(e.a.slice(0,54)),TM(t,632,function(e){return YM(e.slice(0,54))}(e.a)))}))})),TM(t,631),TM(t,633),e.forEach((function(e){e[1].forEach((function(n){n.iauthor=r.indexOf(n.a);var a={s:FM(e[0]),e:FM(e[0])};TM(t,635,function(e,t){return null==t&&(t=CM(36)),t.write_shift(4,e[1].iauthor),pO(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([a,n])),n.t&&n.t.length>0&&TM(t,637,ZM(n)),TM(t,636),delete n.iauthor}))})),TM(t,634),TM(t,629),t.end()}var qB=["xlsb","xlsm","xlam","biff8","xla"];var GB=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(e,r,n,a){var s=!1,i=!1;0==n.length?i=!0:"["==n.charAt(0)&&(i=!0,n=n.slice(1,-1)),0==a.length?s=!0:"["==a.charAt(0)&&(s=!0,a=a.slice(1,-1));var o=n.length>0?0|parseInt(n,10):0,l=a.length>0?0|parseInt(a,10):0;return s?l+=t.c:--l,i?o+=t.r:--o,r+(s?"":"$")+OM(l)+(i?"":"$")+IM(o)}return function(n,a){return t=a,n.replace(e,r)}}(),KB=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,YB=function(){return function(e,t){return e.replace(KB,(function(e,r,n,a,s,i){var o=MM(a)-(n?0:t.c),l=RM(i)-(s?0:t.r);return r+"R"+(0==l?"":s?l+1:"["+l+"]")+"C"+(0==o?"":n?o+1:"["+o+"]")}))}}();function XB(e,t){return e.replace(KB,(function(e,r,n,a,s,i){return r+("$"==n?n+a:OM(MM(a)+t.c))+("$"==s?s+i:IM(RM(i)+t.r))}))}function QB(e,t,r){var n=BM(t).s,a=FM(r);return XB(e,{r:a.r-n.r,c:a.c-n.c})}function JB(e){return e.replace(/_xlfn\./g,"")}function ZB(e){e.l+=1}function eU(e,t){var r=e.read_shift(1==t?1:2);return[16383&r,r>>14&1,r>>15&1]}function tU(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return rU(e);12==r.biff&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=eU(e,2),o=eU(e,2);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function rU(e){var t=eU(e,2),r=eU(e,2),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function nU(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return function(e){var t=eU(e,2),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}(e);var n=e.read_shift(r&&12==r.biff?4:2),a=eU(e,2);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function aU(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:255&r,fQuoted:!!(16384&r),cRel:r>>15,rRel:r>>15}}function sU(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function iU(e){return[e.read_shift(1),e.read_shift(1)]}function oU(e,t){var r=[e.read_shift(1)];if(12==t)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2}switch(r[0]){case 4:r[1]=vF(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:r[1]=TO[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:r[1]=xO(e);break;case 2:r[1]=TF(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function lU(e,t,r){for(var n=e.read_shift(12==r.biff?4:2),a=[],s=0;s!=n;++s)a.push((12==r.biff?mO:UF)(e,8));return a}function cU(e,t,r){var n=0,a=0;12==r.biff?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,0==--a&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=oU(e,r.biff);return i}function dU(e,t,r){return e.l+=2,[aU(e)]}function uU(e){return e.l+=6,[]}function hU(e){return e.l+=2,[yF(e),1&e.read_shift(2)]}var fU=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var mU={1:{n:"PtgExp",f:function(e,t,r){return e.l++,r&&12==r.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(r&&2==r.biff?1:2)]}},2:{n:"PtgTbl",f:SM},3:{n:"PtgAdd",f:ZB},4:{n:"PtgSub",f:ZB},5:{n:"PtgMul",f:ZB},6:{n:"PtgDiv",f:ZB},7:{n:"PtgPower",f:ZB},8:{n:"PtgConcat",f:ZB},9:{n:"PtgLt",f:ZB},10:{n:"PtgLe",f:ZB},11:{n:"PtgEq",f:ZB},12:{n:"PtgGe",f:ZB},13:{n:"PtgGt",f:ZB},14:{n:"PtgNe",f:ZB},15:{n:"PtgIsect",f:ZB},16:{n:"PtgUnion",f:ZB},17:{n:"PtgRange",f:ZB},18:{n:"PtgUplus",f:ZB},19:{n:"PtgUminus",f:ZB},20:{n:"PtgPercent",f:ZB},21:{n:"PtgParen",f:ZB},22:{n:"PtgMissArg",f:ZB},23:{n:"PtgStr",f:function(e,t,r){return e.l++,jF(e,0,r)}},26:{n:"PtgSheet",f:function(e,t,r){return e.l+=5,e.l+=2,e.l+=2==r.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,r){return e.l+=2==r.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,TO[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,xO(e)}},32:{n:"PtgArray",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=2==r.biff?6:12==r.biff?14:7,[n]}},33:{n:"PtgFunc",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[OU[a],MU[a],n]}},34:{n:"PtgFuncVar",f:function(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[88==n?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[a,(0===s[0]?MU:IU)[s[1]]]}},35:{n:"PtgName",f:function(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[n,0,s]}},36:{n:"PtgRef",f:function(e,t,r){var n=(96&e[e.l])>>5;return e.l+=1,[n,nU(e,0,r)]}},37:{n:"PtgArea",f:function(e,t,r){return[(96&e[e.l++])>>5,tU(e,r.biff>=2&&r.biff,r)]}},38:{n:"PtgMemArea",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=r&&2==r.biff?3:4,[n,e.read_shift(r&&2==r.biff?1:2)]}},39:{n:"PtgMemErr",f:SM},40:{n:"PtgMemNoMem",f:SM},41:{n:"PtgMemFunc",f:function(e,t,r){return[e.read_shift(1)>>>5&3,e.read_shift(r&&2==r.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,12==r.biff&&(e.l+=2),[n]}},43:{n:"PtgAreaErr",f:function(e,t,r){var n=(96&e[e.l++])>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}},44:{n:"PtgRefN",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var a=function(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return function(e){var t=e.read_shift(2),r=e.read_shift(1),n=(32768&t)>>15,a=(16384&t)>>14;return t&=16383,1==n&&t>=8192&&(t-=16384),1==a&&r>=128&&(r-=256),{r:t,c:r,cRel:a,rRel:n}}(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(16384&s)>>14,o=(32768&s)>>15;if(s&=16383,1==o)for(;a>524287;)a-=1048576;if(1==i)for(;s>8191;)s-=16384;return{r:a,c:s,cRel:i,rRel:o}}(e,0,r);return[n,a]}},45:{n:"PtgAreaN",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=function(e,t,r){if(r.biff<8)return rU(e);var n=e.read_shift(12==r.biff?4:2),a=e.read_shift(12==r.biff?4:2),s=eU(e,2),i=eU(e,2);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}(e,0,r);return[n,a]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,r){return 5==r.biff?function(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,r){var n=(96&e[e.l])>>5;e.l+=1;var a=e.read_shift(2);return r&&5==r.biff&&(e.l+=12),[n,a,nU(e,0,r)]}},59:{n:"PtgArea3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=e.read_shift(2,"i");if(r)switch(r.biff){case 5:e.l+=12;break;case 12:0}return[n,a,tU(e,0,r)]}},60:{n:"PtgRefErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[n,a]}},61:{n:"PtgAreaErr3d",f:function(e,t,r){var n=(96&e[e.l++])>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[n,a]}},255:{}},pU={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},xU={1:{n:"PtgElfLel",f:hU},2:{n:"PtgElfRw",f:dU},3:{n:"PtgElfCol",f:dU},6:{n:"PtgElfRwV",f:dU},7:{n:"PtgElfColV",f:dU},10:{n:"PtgElfRadical",f:dU},11:{n:"PtgElfRadicalS",f:uU},13:{n:"PtgElfColS",f:uU},15:{n:"PtgElfColSV",f:uU},16:{n:"PtgElfRadicalLel",f:hU},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2);return{ixti:t,coltype:3&r,rt:fU[r>>2&31],idx:n,c:a,C:s}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},vU={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=r&&2==r.biff?3:4,[n]}},2:{n:"PtgAttrIf",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,r){e.l+=2;for(var n=e.read_shift(r&&2==r.biff?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&2==r.biff?1:2));return a}},8:{n:"PtgAttrGoto",f:function(e,t,r){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(r&&2==r.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,r){e.l+=r&&2==r.biff?3:4}},32:{n:"PtgAttrBaxcel",f:sU},33:{n:"PtgAttrBaxcel",f:sU},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),iU(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),iU(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function gU(e,t,r,n){if(n.biff<8)return SM(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=cU(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=lU(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&12==n.biff&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return 0!==(t=a-e.l)&&s.push(SM(e,t)),s}function yU(e,t,r){for(var n,a,s=e.l+t,i=[];s!=e.l;)t=s-e.l,a=e[e.l],n=mU[a]||mU[pU[a]],24!==a&&25!==a||(n=(24===a?xU:vU)[e[e.l+1]]),n&&n.f?i.push([n.n,n.f(e,t,r)]):SM(e,t);return i}function bU(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)if(2===i[0])a.push('"'+i[1].replace(/"/g,'""')+'"');else a.push(i[1]);else a.push("")}t.push(a.join(","))}return t.join(";")}var wU={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function NU(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=-1==n[1]?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return null!=r.SID?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=-1==n[1]?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map((function(e){return e.Name})).join(";;");default:return e[n[0]][0][3]?(a=-1==n[1]?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function jU(e,t,r){var n=NU(e,t,r);return"#REF"==n?n:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(n,r)}function SU(e,t,r,n,a){var s,i,o,l,c=a&&a.biff||8,d={s:{c:0,r:0},e:{c:0,r:0}},u=[],h=0,f=0,m="";if(!e[0]||!e[0][0])return"";for(var p=-1,x="",v=0,g=e[0].length;v<g;++v){var y=e[0][v];switch(y[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(s=u.pop(),i=u.pop(),p>=0){switch(e[0][p][1][0]){case 0:x=wR(" ",e[0][p][1][1]);break;case 1:x=wR("\r",e[0][p][1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}i+=x,p=-1}u.push(i+wU[y[0]]+s);break;case"PtgIsect":s=u.pop(),i=u.pop(),u.push(i+" "+s);break;case"PtgUnion":s=u.pop(),i=u.pop(),u.push(i+","+s);break;case"PtgRange":s=u.pop(),i=u.pop(),u.push(i+":"+s);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=DM(y[1][1],d,a),u.push(PM(o,c));break;case"PtgRefN":o=r?DM(y[1][1],r,a):y[1][1],u.push(PM(o,c));break;case"PtgRef3d":h=y[1][1],o=DM(y[1][2],d,a);m=jU(n,h,a);u.push(m+"!"+PM(o,c));break;case"PtgFunc":case"PtgFuncVar":var b=y[1][0],w=y[1][1];b||(b=0);var N=0==(b&=127)?[]:u.slice(-b);u.length-=b,"User"===w&&(w=N.shift()),u.push(w+"("+N.join(",")+")");break;case"PtgBool":u.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":u.push(y[1]);break;case"PtgNum":u.push(String(y[1]));break;case"PtgStr":u.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=AM(y[1][1],r?{s:r}:d,a),u.push(_M(l,a));break;case"PtgArea":l=AM(y[1][1],d,a),u.push(_M(l,a));break;case"PtgArea3d":h=y[1][1],l=y[1][2],m=jU(n,h,a),u.push(m+"!"+_M(l,a));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgName":f=y[1][2];var j=(n.names||[])[f-1]||(n[0]||[])[f],S=j?j.Name:"SH33TJSNAME"+String(f);S&&"_xlfn."==S.slice(0,6)&&!a.xlfn&&(S=S.slice(6)),u.push(S);break;case"PtgNameX":var C,k=y[1][1];if(f=y[1][2],!(a.biff<=5)){var E="";if(14849==((n[k]||[])[0]||[])[0]||(1025==((n[k]||[])[0]||[])[0]?n[k][f]&&n[k][f].itab>0&&(E=n.SheetNames[n[k][f].itab-1]+"!"):E=n.SheetNames[f-1]+"!"),n[k]&&n[k][f])E+=n[k][f].Name;else if(n[0]&&n[0][f])E+=n[0][f].Name;else{var T=(NU(n,k,a)||"").split(";;");T[f-1]?E=T[f-1]:E+="SH33TJSERRX"}u.push(E);break}k<0&&(k=-k),n[k]&&(C=n[k][f]),C||(C={Name:"SH33TJSERRY"}),u.push(C.Name);break;case"PtgParen":var D="(",A=")";if(p>=0){switch(x="",e[0][p][1][0]){case 2:D=wR(" ",e[0][p][1][1])+D;break;case 3:D=wR("\r",e[0][p][1][1])+D;break;case 4:A=wR(" ",e[0][p][1][1])+A;break;case 5:A=wR("\r",e[0][p][1][1])+A;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}p=-1}u.push(D+u.pop()+A);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":u.push("#REF!");break;case"PtgExp":o={c:y[1][1],r:y[1][0]};var P={c:r.c,r:r.r};if(n.sharedf[LM(o)]){var _=n.sharedf[LM(o)];u.push(SU(_,d,P,n,a))}else{var R=!1;for(s=0;s!=n.arrayf.length;++s)if(i=n.arrayf[s],!(o.c<i[0].s.c||o.c>i[0].e.c)&&!(o.r<i[0].s.r||o.r>i[0].e.r)){u.push(SU(i[1],d,P,n,a)),R=!0;break}R||u.push(y[1])}break;case"PtgArray":u.push("{"+bU(y[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=v;break;case"PtgMissArg":u.push("");break;case"PtgList":u.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(y))}if(3!=a.biff&&p>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][v][0])){var I=!0;switch((y=e[0][p])[1][0]){case 4:I=!1;case 0:x=wR(" ",y[1][1]);break;case 5:I=!1;case 1:x=wR("\r",y[1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}u.push((I?x:"")+u.pop()+(I?"":x)),p=-1}}if(u.length>1&&a.WTF)throw new Error("bad formula stack");return u[0]}function CU(e,t,r){var n,a=e.l+t,s=2==r.biff?1:2,i=e.read_shift(s);if(65535==i)return[[],SM(e,t-2)];var o=yU(e,i,r);return t!==i+s&&(n=gU(e,t-i-s,o,r)),e.l=a,[o,n]}function kU(e,t,r){var n,a=e.l+t,s=e.read_shift(2),i=yU(e,s,r);return 65535==s?[[],SM(e,t-2)]:(t!==s+2&&(n=gU(e,a-s-2,i,r)),[i,n])}function EU(e,t,r){var n=e.l+t,a=OF(e);2==r.biff&&++e.l;var s=function(e){var t;if(65535!==hM(e,e.l+6))return[xO(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=1===e[e.l+2],e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}(e),i=e.read_shift(1);2!=r.biff&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=function(e,t,r){var n,a=e.l+t,s=2==r.biff?1:2,i=e.read_shift(s);if(65535==i)return[[],SM(e,t-2)];var o=yU(e,i,r);return t!==i+s&&(n=gU(e,t-i-s,o,r)),e.l=a,[o,n]}(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function TU(e,t,r,n,a){var s=FF(t,r,a),i=function(e){if(null==e){var t=CM(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return vO("number"==typeof e?e:0)}(e.v),o=CM(6);o.write_shift(2,33),o.write_shift(4,0);for(var l=CM(e.bf.length),c=0;c<e.bf.length;++c)l[c]=e.bf[c];return n_([s,i,o,l])}function DU(e,t,r){var n=e.read_shift(4),a=yU(e,n,r),s=e.read_shift(4);return[a,s>0?gU(e,s,a,r):null]}var AU=DU,PU=DU,_U=DU,RU=DU,IU={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},MU={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},OU={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function FU(e){return"of:"==e.slice(0,3)&&(e=e.slice(3)),61==e.charCodeAt(0)&&61==(e=e.slice(1)).charCodeAt(0)&&(e=e.slice(1)),(e=(e=(e=e.replace(/COM\.MICROSOFT\./g,"")).replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,(function(e,t){return t.replace(/\./g,"")}))).replace(/\[.(#[A-Z]*[?!])\]/g,"$1")).replace(/[;~]/g,",").replace(/\|/g,";")}function LU(e){var t=e.split(":");return[t[0].split(".")[0],t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function BU(e){return e.replace(/\./,"!")}var UU={},zU={},VU="undefined"!==typeof Map;function HU(e,t,r){var n=0,a=e.length;if(r){if(VU?r.has(t):Object.prototype.hasOwnProperty.call(r,t))for(var s=VU?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t:t},e.Count++,e.Unique++,r&&(VU?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function $U(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(QL=t.MDW),null!=t.width?r.customWidth=1:null!=t.wpx?n=ZL(t.wpx):null!=t.wch&&(n=t.wch),n>-1?(r.width=eB(n),r.customWidth=1):null!=t.width&&(r.width=t.width),t.hidden&&(r.hidden=!0),null!=t.level&&(r.outlineLevel=r.level=t.level),r}function WU(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(r=[1,1,1,1,.5,.5]),null==e.left&&(e.left=r[0]),null==e.right&&(e.right=r[1]),null==e.top&&(e.top=r[2]),null==e.bottom&&(e.bottom=r[3]),null==e.header&&(e.header=r[4]),null==e.footer&&(e.footer=r[5])}}function qU(e,t,r){var n=r.revssf[null!=t.z?t.z:"General"],a=60,s=e.length;if(null==n&&r.ssf)for(;a<392;++a)if(null==r.ssf[a]){K_(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function GU(e,t,r,n,a,s){try{n.cellNF&&(e.z=p_[t])}catch(ZJ){if(n.WTF)throw ZJ}if("z"!==e.t||n.cellStyles){if("d"===e.t&&"string"===typeof e.v&&(e.v=gR(e.v)),(!n||!1!==n.cellText)&&"z"!==e.t)try{if(null==p_[t]&&K_(Q_[t]||"General",t),"e"===e.t)e.w=e.w||TO[e.v];else if(0===t)if("n"===e.t)(0|e.v)===e.v?e.w=e.v.toString(10):e.w=C_(e.v);else if("d"===e.t){var i=cR(e.v);e.w=(0|i)===i?i.toString(10):C_(i)}else{if(void 0===e.v)return"";e.w=k_(e.v,zU)}else"d"===e.t?e.w=G_(t,cR(e.v),zU):e.w=G_(t,e.v,zU)}catch(ZJ){if(n.WTF)throw ZJ}if(n.cellStyles&&null!=r)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=XL(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=XL(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(ZJ){if(n.WTF&&s.Fills)throw ZJ}}}function KU(e,t,r){if(e&&e["!ref"]){var n=zM(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}var YU=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,XU=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,QU=/<(?:\w:)?hyperlink [^>]*>/gm,JU=/"(\w*:\w*)"/,ZU=/<(?:\w:)?col\b[^>]*[\/]?>/g,ez=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,tz=/<(?:\w:)?pageMargins[^>]*\/>/g,rz=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,nz=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,az=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function sz(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",d="",u=e.match(XU);u?(c=e.slice(0,u.index),d=e.slice(u.index+u[0].length)):c=d=e;var h=c.match(rz);h?iz(h[0],o,a,r):(h=c.match(nz))&&function(e,t,r,n,a){iz(e.slice(0,e.indexOf(">")),r,n,a)}(h[0],h[1],o,a,r);var f=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(f>0){var m=c.slice(f,f+50).match(JU);m&&function(e,t){var r=zM(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=UM(r))}(o,m[1])}var p=c.match(az);p&&p[1]&&function(e,t){t.Views||(t.Views=[{}]);(e.match(cz)||[]).forEach((function(e,r){var n=$R(e);t.Views[r]||(t.Views[r]={}),+n.zoomScale&&(t.Views[r].zoom=+n.zoomScale),rI(n.rightToLeft)&&(t.Views[r].RTL=!0)}))}(p[1],a);var x=[];if(t.cellStyles){var v=c.match(ZU);v&&function(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=$R(t[n],!0);a.hidden&&(a.hidden=rI(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,rB(a.width)),nB(a);s<=i;)e[s++]=bR(a)}}(x,v)}u&&uz(u[1],o,t,l,s,i);var g=d.match(ez);g&&(o["!autofilter"]=function(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}(g[0]));var y=[],b=d.match(YU);if(b)for(f=0;f!=b.length;++f)y[f]=zM(b[f].slice(b[f].indexOf('"')+1));var w=d.match(QU);w&&function(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=$R(oI(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+KR(s.location))):(s.Target="#"+KR(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=zM(s.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var d=LM({c:c,r:l});n?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}(o,w,n);var N=d.match(tz);if(N&&(o["!margins"]=function(e){var t={};return["left","right","top","bottom","header","footer"].forEach((function(r){e[r]&&(t[r]=parseFloat(e[r]))})),t}($R(N[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=UM(l)),t.sheetRows>0&&o["!ref"]){var j=zM(o["!ref"]);t.sheetRows<=+j.e.r&&(j.e.r=t.sheetRows-1,j.e.r>l.e.r&&(j.e.r=l.e.r),j.e.r<j.s.r&&(j.s.r=j.e.r),j.e.c>l.e.c&&(j.e.c=l.e.c),j.e.c<j.s.c&&(j.s.c=j.e.c),o["!fullref"]=o["!ref"],o["!ref"]=UM(j))}return x.length>0&&(o["!cols"]=x),y.length>0&&(o["!merges"]=y),o}function iz(e,t,r,n){var a=$R(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=KR(oI(a.codeName)))}var oz=["objects","scenarios","selectLockedCells","selectUnlockedCells"],lz=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];var cz=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function dz(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var a="",s=e.t,i=e.v;if("z"!==e.t)switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=TO[e.v];break;case"d":n&&n.cellDates?a=gR(e.v,-1).toISOString():((e=bR(e)).t="n",a=""+(e.v=cR(gR(e.v)))),"undefined"===typeof e.z&&(e.z=p_[14]);break;default:a=e.v}var o=xI("v",QR(a)),l={r:t},c=qU(n.cellXfs,e,n);switch(0!==c&&(l.s=c),e.t){case"n":case"z":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=xI("v",""+HU(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str"}if(e.t!=s&&(e.t=s,e.v=i),"string"==typeof e.f&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=gI("f",QR(e.f),d)+(null!=e.v?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),gI("c",o,l)}var uz=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=cI("v"),i=cI("f");return function(o,l,c,d,u,h){for(var f,m,p,x,v,g=0,y="",b=[],w=[],N=0,j=0,S=0,C="",k=0,E=0,T=0,D=0,A=Array.isArray(h.CellXf),P=[],_=[],R=Array.isArray(l),I=[],M={},O=!1,F=!!c.sheetStubs,L=o.split(t),B=0,U=L.length;B!=U;++B){var z=(y=L[B].trim()).length;if(0!==z){var V=0;e:for(g=0;g<z;++g)switch(y[g]){case">":if("/"!=y[g-1]){++g;break e}if(c&&c.cellStyles){if(k=null!=(m=$R(y.slice(V,g),!0)).r?parseInt(m.r,10):k+1,E=-1,c.sheetRows&&c.sheetRows<k)continue;M={},O=!1,m.ht&&(O=!0,M.hpt=parseFloat(m.ht),M.hpx=iB(M.hpt)),"1"==m.hidden&&(O=!0,M.hidden=!0),null!=m.outlineLevel&&(O=!0,M.level=+m.outlineLevel),O&&(I[k-1]=M)}break;case"<":V=g}if(V>=g)break;if(k=null!=(m=$R(y.slice(V,g),!0)).r?parseInt(m.r,10):k+1,E=-1,!(c.sheetRows&&c.sheetRows<k)){d.s.r>k-1&&(d.s.r=k-1),d.e.r<k-1&&(d.e.r=k-1),c&&c.cellStyles&&(M={},O=!1,m.ht&&(O=!0,M.hpt=parseFloat(m.ht),M.hpx=iB(M.hpt)),"1"==m.hidden&&(O=!0,M.hidden=!0),null!=m.outlineLevel&&(O=!0,M.level=+m.outlineLevel),O&&(I[k-1]=M)),b=y.slice(g).split(e);for(var H=0;H!=b.length&&"<"==b[H].trim().charAt(0);++H);for(b=b.slice(H),g=0;g!=b.length;++g)if(0!==(y=b[g].trim()).length){if(w=y.match(r),N=g,j=0,S=0,y="<c "+("<"==y.slice(0,1)?">":"")+y,null!=w&&2===w.length){for(N=0,C=w[1],j=0;j!=C.length&&!((S=C.charCodeAt(j)-64)<1||S>26);++j)N=26*N+S;E=--N}else++E;for(j=0;j!=y.length&&62!==y.charCodeAt(j);++j);if(++j,(m=$R(y.slice(0,j),!0)).r||(m.r=LM({r:k-1,c:E})),f={t:""},null!=(w=(C=y.slice(j)).match(s))&&""!==w[1]&&(f.v=KR(w[1])),c.cellFormula){if(null!=(w=C.match(i))&&""!==w[1]){if(f.f=KR(oI(w[1])).replace(/\r\n/g,"\n"),c.xlfn||(f.f=JB(f.f)),w[0].indexOf('t="array"')>-1)f.F=(C.match(a)||[])[1],f.F.indexOf(":")>-1&&P.push([zM(f.F),f.F]);else if(w[0].indexOf('t="shared"')>-1){x=$R(w[0]);var $=KR(oI(w[1]));c.xlfn||($=JB($)),_[parseInt(x.si,10)]=[x,$,m.r]}}else(w=C.match(/<f[^>]*\/>/))&&_[(x=$R(w[0])).si]&&(f.f=QB(_[x.si][1],_[x.si][2],m.r));var W=FM(m.r);for(j=0;j<P.length;++j)W.r>=P[j][0].s.r&&W.r<=P[j][0].e.r&&W.c>=P[j][0].s.c&&W.c<=P[j][0].e.c&&(f.F=P[j][1])}if(null==m.t&&void 0===f.v)if(f.f||f.F)f.v=0,f.t="n";else{if(!F)continue;f.t="z"}else f.t=m.t||"n";switch(d.s.c>E&&(d.s.c=E),d.e.c<E&&(d.e.c=E),f.t){case"n":if(""==f.v||null==f.v){if(!F)continue;f.t="z"}else f.v=parseFloat(f.v);break;case"s":if("undefined"==typeof f.v){if(!F)continue;f.t="z"}else p=UU[parseInt(f.v,10)],f.v=p.t,f.r=p.r,c.cellHTML&&(f.h=p.h);break;case"str":f.t="s",f.v=null!=f.v?oI(f.v):"",c.cellHTML&&(f.h=eI(f.v));break;case"inlineStr":w=C.match(n),f.t="s",null!=w&&(p=EL(w[1]))?(f.v=p.t,c.cellHTML&&(f.h=p.h)):f.v="";break;case"b":f.v=rI(f.v);break;case"d":c.cellDates?f.v=gR(f.v,1):(f.v=cR(gR(f.v,1)),f.t="n");break;case"e":c&&!1===c.cellText||(f.w=f.v),f.v=DO[f.v]}if(T=D=0,v=null,A&&void 0!==m.s&&null!=(v=h.CellXf[m.s])&&(null!=v.numFmtId&&(T=v.numFmtId),c.cellStyles&&null!=v.fillId&&(D=v.fillId)),GU(f,T,D,c,u,h),c.cellDates&&A&&"n"==f.t&&H_(p_[T])&&(f.t="d",f.v=fR(f.v)),m.cm&&c.xlmeta){var q=(c.xlmeta.Cell||[])[+m.cm-1];q&&"XLDAPR"==q.type&&(f.D=!0)}if(R){var G=FM(m.r);l[G.r]||(l[G.r]=[]),l[G.r][G.c]=f}else l[m.r]=f}}}}I.length>0&&(l["!rows"]=I)}}();function hz(e,t,r,n){var a,s=[LR,gI("worksheet",null,{xmlns:MI[0],"xmlns:r":PI})],i=r.SheetNames[e],o="",l=r.Sheets[i];null==l&&(l={});var c=l["!ref"]||"A1",d=zM(c);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=UM(d)}n||(n={}),l["!comments"]=[];var u=[];!function(e,t,r,n,a){var s=!1,i={},o=null;if("xlsx"!==n.bookType&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch(ZJ){}s=!0,i.codeName=lI(QR(l))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),o=(o||"")+gI("outlinePr",null,c)}(s||o)&&(a[a.length]=gI("sheetPr",o,i))}(l,r,e,t,s),s[s.length]=gI("dimension",null,{ref:c}),s[s.length]=function(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),gI("sheetViews",gI("sheetView",null,a),{})}(0,0,0,r),t.sheetFormat&&(s[s.length]=gI("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=l["!cols"]&&l["!cols"].length>0&&(s[s.length]=function(e,t){for(var r,n=["<cols>"],a=0;a!=t.length;++a)(r=t[a])&&(n[n.length]=gI("col",null,$U(a,r)));return n[n.length]="</cols>",n.join("")}(0,l["!cols"])),s[a=s.length]="<sheetData/>",l["!links"]=[],null!=l["!ref"]&&(o=function(e,t){var r,n,a=[],s=[],i=zM(e["!ref"]),o="",l="",c=[],d=0,u=0,h=e["!rows"],f=Array.isArray(e),m={r:l},p=-1;for(u=i.s.c;u<=i.e.c;++u)c[u]=OM(u);for(d=i.s.r;d<=i.e.r;++d){for(s=[],l=IM(d),u=i.s.c;u<=i.e.c;++u){r=c[u]+l;var x=f?(e[d]||[])[u]:e[r];void 0!==x&&null!=(o=dz(x,r,e,t))&&s.push(o)}(s.length>0||h&&h[d])&&(m={r:l},h&&h[d]&&((n=h[d]).hidden&&(m.hidden=1),p=-1,n.hpx?p=sB(n.hpx):n.hpt&&(p=n.hpt),p>-1&&(m.ht=p,m.customHeight=1),n.level&&(m.outlineLevel=n.level)),a[a.length]=gI("row",s.join(""),m))}if(h)for(;d<h.length;++d)h&&h[d]&&(m={r:d+1},(n=h[d]).hidden&&(m.hidden=1),p=-1,n.hpx?p=sB(n.hpx):n.hpt&&(p=n.hpt),p>-1&&(m.ht=p,m.customHeight=1),n.level&&(m.outlineLevel=n.level),a[a.length]=gI("row","",m));return a.join("")}(l,t,0,0),o.length>0&&(s[s.length]=o)),s.length>a+1&&(s[s.length]="</sheetData>",s[a]=s[a].replace("/>",">")),l["!protect"]&&(s[s.length]=function(e){var t={sheet:1};return oz.forEach((function(r){null!=e[r]&&e[r]&&(t[r]="1")})),lz.forEach((function(r){null==e[r]||e[r]||(t[r]="0")})),e.password&&(t.password=$L(e.password).toString(16).toUpperCase()),gI("sheetProtection",null,t)}(l["!protect"])),null!=l["!autofilter"]&&(s[s.length]=function(e,t,r,n){var a="string"==typeof e.ref?e.ref:UM(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=BM(a);i.s.r==i.e.r&&(i.e.r=BM(t["!ref"]).e.r,a=UM(i));for(var o=0;o<s.length;++o){var l=s[o];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),gI("autoFilter",null,{ref:a})}(l["!autofilter"],l,r,e)),null!=l["!merges"]&&l["!merges"].length>0&&(s[s.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+UM(e[r])+'"/>';return t+"</mergeCells>"}(l["!merges"]));var h,f,m=-1,p=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach((function(e){e[1].Target&&(h={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(p=FO(n,-1,QR(e[1].Target).replace(/#.*$/,""),RO.HLINK),h["r:id"]="rId"+p),(m=e[1].Target.indexOf("#"))>-1&&(h.location=QR(e[1].Target.slice(m+1))),e[1].Tooltip&&(h.tooltip=QR(e[1].Tooltip)),s[s.length]=gI("hyperlink",null,h))})),s[s.length]="</hyperlinks>"),delete l["!links"],null!=l["!margins"]&&(s[s.length]=(WU(f=l["!margins"]),gI("pageMargins",null,f))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(s[s.length]=xI("ignoredErrors",gI("ignoredError",null,{numberStoredAsText:1,sqref:c}))),u.length>0&&(p=FO(n,-1,"../drawings/drawing"+(e+1)+".xml",RO.DRAW),s[s.length]=gI("drawing",null,{"r:id":"rId"+p}),l["!drawing"]=u),l["!comments"].length>0&&(p=FO(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",RO.VML),s[s.length]=gI("legacyDrawing",null,{"r:id":"rId"+p}),l["!legacy"]=p),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function fz(e,t,r,n){var a=function(e,t,r){var n=CM(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=20*sB(a.hpx):a.hpt&&(s=20*a.hpt),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var u=-1,h=-1,f=d<<10;f<d+1<<10;++f)c.c=f,(Array.isArray(r)?(r[c.r]||[])[c.c]:r[LM(c)])&&(u<0&&(u=f),h=f);u<0||(++o,n.write_shift(4,u),n.write_shift(4,h))}var m=n.l;return n.l=l,n.write_shift(4,o),n.l=m,n.length>n.l?n.slice(0,n.l):n}(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&TM(e,0,a)}var mz=mO,pz=pO;function xz(e){return[rO(e),xO(e),"n"]}var vz=mO,gz=pO;var yz=["left","right","top","bottom","header","footer"];function bz(e,t,r,n,a,s,i){if(void 0===t.v)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":(t=bR(t)).z=t.z||p_[14],t.v=cR(gR(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v}var l={r:r,c:n};switch(l.s=qU(a.cellXfs,t,a),t.l&&s["!links"].push([LM(l),t.l]),t.c&&s["!comments"].push([LM(l),t.c]),t.t){case"s":case"str":return a.bookSST?(o=HU(a.Strings,t.v,a.revStrings),l.t="s",l.v=o,i?TM(e,18,function(e,t,r){return null==r&&(r=CM(8)),nO(t,r),r.write_shift(4,t.v),r}(0,l)):TM(e,7,function(e,t,r){return null==r&&(r=CM(12)),tO(t,r),r.write_shift(4,t.v),r}(0,l))):(l.t="str",i?TM(e,17,function(e,t,r){return null==r&&(r=CM(8+4*e.v.length)),nO(t,r),YM(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,l)):TM(e,6,function(e,t,r){return null==r&&(r=CM(12+4*e.v.length)),tO(t,r),YM(e.v,r),r.length>r.l?r.slice(0,r.l):r}(t,l))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?i?TM(e,13,function(e,t,r){return null==r&&(r=CM(8)),nO(t,r),hO(e.v,r),r}(t,l)):TM(e,2,function(e,t,r){return null==r&&(r=CM(12)),tO(t,r),hO(e.v,r),r}(t,l)):i?TM(e,16,function(e,t,r){return null==r&&(r=CM(12)),nO(t,r),vO(e.v,r),r}(t,l)):TM(e,5,function(e,t,r){return null==r&&(r=CM(16)),tO(t,r),vO(e.v,r),r}(t,l)),!0;case"b":return l.t="b",i?TM(e,15,function(e,t,r){return null==r&&(r=CM(5)),nO(t,r),r.write_shift(1,e.v?1:0),r}(t,l)):TM(e,4,function(e,t,r){return null==r&&(r=CM(9)),tO(t,r),r.write_shift(1,e.v?1:0),r}(t,l)),!0;case"e":return l.t="e",i?TM(e,14,function(e,t,r){return null==r&&(r=CM(8)),nO(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}(t,l)):TM(e,3,function(e,t,r){return null==r&&(r=CM(9)),tO(t,r),r.write_shift(1,e.v),r}(t,l)),!0}return i?TM(e,12,function(e,t,r){return null==r&&(r=CM(4)),nO(t,r)}(0,l)):TM(e,1,function(e,t,r){return null==r&&(r=CM(8)),tO(t,r)}(0,l)),!0}function wz(e,t){var r,n;t&&t["!merges"]&&(TM(e,177,(r=t["!merges"].length,null==n&&(n=CM(4)),n.write_shift(4,r),n)),t["!merges"].forEach((function(t){TM(e,176,gz(t))})),TM(e,178))}function Nz(e,t){t&&t["!cols"]&&(TM(e,390),t["!cols"].forEach((function(t,r){t&&TM(e,60,function(e,t,r){null==r&&(r=CM(18));var n=$U(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,256*(n.width||10)),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),"number"==typeof n.width&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}(r,t))})),TM(e,391))}function jz(e,t){t&&t["!ref"]&&(TM(e,648),TM(e,649,function(e){var t=CM(24);return t.write_shift(4,4),t.write_shift(4,1),pO(e,t),t}(zM(t["!ref"]))),TM(e,650))}function Sz(e,t,r){t["!links"].forEach((function(t){if(t[1].Target){var n=FO(r,-1,t[1].Target.replace(/#.*$/,""),RO.HLINK);TM(e,494,function(e,t){var r=CM(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));pO({s:FM(e[0]),e:FM(e[0])},r),dO("rId"+t,r);var n=e[1].Target.indexOf("#");return YM((-1==n?"":e[1].Target.slice(n+1))||"",r),YM(e[1].Tooltip||"",r),YM("",r),r.slice(0,r.l)}(t,n))}})),delete t["!links"]}function Cz(e,t,r){TM(e,133),TM(e,137,function(e,t,r){null==r&&(r=CM(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}(0,r)),TM(e,138),TM(e,134)}function kz(e,t){var r,n;t["!protect"]&&TM(e,535,(r=t["!protect"],null==n&&(n=CM(66)),n.write_shift(2,r.password?$L(r.password):0),n.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach((function(e){e[1]?n.write_shift(4,null==r[e[0]]||r[e[0]]?0:1):n.write_shift(4,null!=r[e[0]]&&r[e[0]]?0:1)})),n))}function Ez(e,t,r,n){var a=EM(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch(ZJ){}var l,c,d=zM(i["!ref"]||"A1");if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],TM(a,129),(r.vbaraw||i["!outline"])&&TM(a,147,function(e,t,r){null==r&&(r=CM(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return gO({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),sO(e,r),r.slice(0,r.l)}(o,i["!outline"])),TM(a,148,pz(d)),Cz(a,0,r.Workbook),Nz(a,i),function(e,t,r,n){var a,s=zM(t["!ref"]||"A1"),i="",o=[];TM(e,145);var l=Array.isArray(t),c=s.e.r;t["!rows"]&&(c=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=c;++d){i=IM(d),fz(e,t,s,d);var u=!1;if(d<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){d===s.s.r&&(o[h]=OM(h)),a=o[h]+i;var f=l?(t[d]||[])[h]:t[a];u=!!f&&bz(e,f,d,h,n,t,u)}}TM(e,146)}(a,i,0,t),kz(a,i),function(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s="string"===typeof a.ref?a.ref:UM(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=BM(s);o.s.r==o.e.r&&(o.e.r=BM(t["!ref"]).e.r,s=UM(o));for(var l=0;l<i.length;++l){var c=i[l];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),TM(e,161,pO(zM(s))),TM(e,162)}}(a,i,r,e),wz(a,i),Sz(a,i,n),i["!margins"]&&TM(a,476,(l=i["!margins"],null==c&&(c=CM(48)),WU(l),yz.forEach((function(e){vO(l[e],c)})),c)),t&&!t.ignoreEC&&void 0!=t.ignoreEC||jz(a,i),function(e,t,r,n){if(t["!comments"].length>0){var a=FO(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",RO.VML);TM(e,551,dO("rId"+a)),t["!legacy"]=a}}(a,i,e,n),TM(a,130),a.end()}function Tz(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,l=0,c="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach((function(e){var t=function(e){var t,r=[],n=e.match(/^<c:numCache>/);(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/gm)||[]).forEach((function(e){var t=e.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);t&&(r[+t[1]]=n?+t[2]:t[2])}));var a=KR((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/gm)||[]).forEach((function(e){t=e.replace(/<.*?>/g,"")})),[r,a,t]}(e);d.s.r=d.s.c=0,d.e.c=o,c=OM(o),t[0].forEach((function(e,r){i[c+IM(r)]={t:"n",v:e,z:t[1]},l=r})),d.e.r<l&&(d.e.r=l),++o})),o>0&&(i["!ref"]=UM(d)),i}var Dz=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Az=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Pz=[],_z=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Rz(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(null==n[s[0]])n[s[0]]=s[1];else switch(s[2]){case"bool":"string"==typeof n[s[0]]&&(n[s[0]]=rI(n[s[0]]));break;case"int":"string"==typeof n[s[0]]&&(n[s[0]]=parseInt(n[s[0]],10))}}}function Iz(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(null==e[n[0]])e[n[0]]=n[1];else switch(n[2]){case"bool":"string"==typeof e[n[0]]&&(e[n[0]]=rI(e[n[0]]));break;case"int":"string"==typeof e[n[0]]&&(e[n[0]]=parseInt(e[n[0]],10))}}}function Mz(e){Iz(e.WBProps,Dz),Iz(e.CalcPr,_z),Rz(e.WBView,Az),Rz(e.Sheets,Pz),zU.date1904=rI(e.WBProps.date1904)}var Oz="][*?/\\".split("");function Fz(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var r=!0;return Oz.forEach((function(n){if(-1!=e.indexOf(n)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");r=!1}})),r}function Lz(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t,r,n,a=e.Workbook&&e.Workbook.Sheets||[];t=e.SheetNames,r=a,n=!!e.vbaraw,t.forEach((function(e,a){Fz(e);for(var s=0;s<a;++s)if(e==t[s])throw new Error("Duplicate Sheet Name: "+e);if(n){var i=r&&r[a]&&r[a].CodeName||e;if(95==i.charCodeAt(0)&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}}));for(var s=0;s<e.SheetNames.length;++s)KU(e.Sheets[e.SheetNames[s]],e.SheetNames[s],s)}var Bz=/<\w+:workbook/;function Uz(e){var t=[LR];t[t.length]=gI("workbook",null,{xmlns:MI[0],"xmlns:r":PI});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Dz.forEach((function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(n[t[0]]=e.Workbook.WBProps[t[0]])})),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=gI("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&a[s]&&a[s].Hidden;++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:QR(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden"}t[t.length]=gI("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach((function(e){var r={name:e.Name};e.Comment&&(r.comment=e.Comment),null!=e.Sheet&&(r.localSheetId=""+e.Sheet),e.Hidden&&(r.hidden="1"),e.Ref&&(t[t.length]=gI("definedName",QR(e.Ref),r))})),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function zz(e,t){return t||(t=CM(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),dO(e.strRelID,t),YM(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Vz(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function Hz(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var r,n,a=t.Workbook.Sheets,s=0,i=-1,o=-1;s<a.length;++s)!a[s]||!a[s].Hidden&&-1==i?i=s:1==a[s].Hidden&&-1==o&&(o=s);if(!(o>i))TM(e,135),TM(e,158,(r=i,n||(n=CM(29)),n.write_shift(-4,0),n.write_shift(-4,460),n.write_shift(4,28800),n.write_shift(4,17600),n.write_shift(4,500),n.write_shift(4,r),n.write_shift(4,r),n.write_shift(1,120),n.length>n.l?n.slice(0,n.l):n)),TM(e,136)}}function $z(e,t){var r=EM();return TM(r,131),TM(r,128,function(e,t){t||(t=CM(127));for(var r=0;4!=r;++r)t.write_shift(4,0);return YM("SheetJS",t),YM(_P.version,t),YM(_P.version,t),YM("7262",t),t.length>t.l?t.slice(0,t.l):t}()),TM(r,153,function(e,t){t||(t=CM(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),sO(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),Hz(r,e),function(e,t){TM(e,143);for(var r=0;r!=t.SheetNames.length;++r)TM(e,156,zz({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]}));TM(e,144)}(r,e),TM(r,132),r.end()}function Wz(e,t,r){return".bin"===t.slice(-4)?function(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],PV[16]={n:"BrtFRTArchID$",f:Vz},kM(e,(function(e,o,l){switch(l){case 156:i.SheetNames.push(e.name),r.Sheets.push(e);break;case 153:r.WBProps=e;break;case 39:null!=e.Sheet&&(t.SID=e.Sheet),e.Ref=SU(e.Ptg,0,null,i,t),delete t.SID,delete e.Ptg,s.push(e);break;case 1036:case 361:case 2071:case 158:case 143:case 664:case 353:case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:case 16:break;case 357:case 358:case 355:case 667:i[0].length?i.push([l,e]):i[0]=[l,e],i[i.length-1].XTI=[];break;case 362:0===i.length&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(e),i.XTI=i.XTI.concat(e);break;case 35:case 37:n.push(l),a=!0;break;case 36:case 38:n.pop(),a=!1;break;default:if(o.T);else if(!a||t.WTF&&37!=n[n.length-1]&&35!=n[n.length-1])throw new Error("Unexpected record 0x"+l.toString(16))}}),t),Mz(r),r.Names=s,r.supbooks=i,r}(e,r):function(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(zR,(function(o,l){var c=$R(o);switch(WR(c[0])){case"<?xml":case"</workbook>":case"<fileVersion/>":case"</fileVersion>":case"<fileSharing":case"<fileSharing/>":case"</workbookPr>":case"<workbookProtection":case"<workbookProtection/>":case"<bookViews":case"<bookViews>":case"</bookViews>":case"</workbookView>":case"<sheets":case"<sheets>":case"</sheets>":case"</sheet>":case"<functionGroups":case"<functionGroups/>":case"<functionGroup":case"<externalReferences":case"</externalReferences>":case"<externalReferences>":case"<externalReference":case"<definedNames/>":case"<definedName/>":case"</calcPr>":case"<oleSize":case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":case"<customWorkbookView":case"</customWorkbookView>":case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":case"<pivotCache":case"<smartTagPr":case"<smartTagPr/>":case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":case"<smartTagType":case"<webPublishing":case"<webPublishing/>":case"<fileRecoveryPr":case"<fileRecoveryPr/>":case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":case"<webPublishObject":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":case"<ArchID":case"<revisionPtr":break;case"<workbook":o.match(Bz)&&(a="xmlns"+o.match(/<(\w+):/)[1]),r.xmlns=c[a];break;case"<fileVersion":delete c[0],r.AppVersion=c;break;case"<workbookPr":case"<workbookPr/>":Dz.forEach((function(e){if(null!=c[e[0]])switch(e[2]){case"bool":r.WBProps[e[0]]=rI(c[e[0]]);break;case"int":r.WBProps[e[0]]=parseInt(c[e[0]],10);break;default:r.WBProps[e[0]]=c[e[0]]}})),c.codeName&&(r.WBProps.CodeName=oI(c.codeName));break;case"<workbookView":case"<workbookView/>":delete c[0],r.WBView.push(c);break;case"<sheet":switch(c.state){case"hidden":c.Hidden=1;break;case"veryHidden":c.Hidden=2;break;default:c.Hidden=0}delete c.state,c.name=KR(oI(c.name)),delete c[0],r.Sheets.push(c);break;case"<definedNames>":case"<definedNames":case"<ext":case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</definedNames>":case"</ext>":case"</AlternateContent>":n=!1;break;case"<definedName":(s={}).Name=oI(c.name),c.comment&&(s.Comment=c.comment),c.localSheetId&&(s.Sheet=+c.localSheetId),rI(c.hidden||"0")&&(s.Hidden=!0),i=l+o.length;break;case"</definedName>":s.Ref=KR(oI(e.slice(i,l))),r.Names.push(s);break;case"<calcPr":case"<calcPr/>":delete c[0],r.CalcPr=c;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+c[0]+" in workbook")}return o})),-1===MI.indexOf(r.xmlns))throw new Error("Unknown Namespace: "+r.xmlns);return Mz(r),r}(e,r)}function qz(e,t,r,n,a,s,i,o){return".bin"===t.slice(-4)?function(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l,c,d,u,h,f,m,p,x,v,g=o.dense?[]:{},y={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=[],w=!1,N=!1,j=[];o.biff=12,o["!row"]=0;var S=0,C=!1,k=[],E={},T=o.supbooks||a.supbooks||[[]];if(T.sharedf=E,T.arrayf=k,T.SheetNames=a.SheetNames||a.Sheets.map((function(e){return e.name})),!o.supbooks&&(o.supbooks=T,a.Names))for(var D=0;D<a.Names.length;++D)T[0][D+1]=a.Names[D];var A,P,_=[],R=[],I=!1;if(PV[16]={n:"BrtShortReal",f:xz},kM(e,(function(e,t,D){if(!N)switch(D){case 148:l=e;break;case 0:c=e,o.sheetRows&&o.sheetRows<=c.r&&(N=!0),x=IM(h=c.r),o["!row"]=c.r,(e.hidden||e.hpt||null!=e.level)&&(e.hpt&&(e.hpx=iB(e.hpt)),R[e.r]=e);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(d={t:e[2]},e[2]){case"n":d.v=e[1];break;case"s":p=UU[e[1]],d.v=p.t,d.r=p.r;break;case"b":d.v=!!e[1];break;case"e":d.v=e[1],!1!==o.cellText&&(d.w=TO[d.v]);break;case"str":d.t="s",d.v=e[1];break;case"is":d.t="s",d.v=e[1].t}if((u=i.CellXf[e[0].iStyleRef])&&GU(d,u.numFmtId,null,o,s,i),f=-1==e[0].c?f+1:e[0].c,o.dense?(g[h]||(g[h]=[]),g[h][f]=d):g[OM(f)+x]=d,o.cellFormula){for(C=!1,S=0;S<k.length;++S){var M=k[S];c.r>=M[0].s.r&&c.r<=M[0].e.r&&f>=M[0].s.c&&f<=M[0].e.c&&(d.F=UM(M[0]),C=!0)}!C&&e.length>3&&(d.f=e[3])}if(y.s.r>c.r&&(y.s.r=c.r),y.s.c>f&&(y.s.c=f),y.e.r<c.r&&(y.e.r=c.r),y.e.c<f&&(y.e.c=f),o.cellDates&&u&&"n"==d.t&&H_(p_[u.numFmtId])){var O=y_(d.v);O&&(d.t="d",d.v=new Date(O.y,O.m-1,O.d,O.H,O.M,O.S,O.u))}A&&("XLDAPR"==A.type&&(d.D=!0),A=void 0),P&&(P=void 0);break;case 1:case 12:if(!o.sheetStubs||w)break;d={t:"z",v:void 0},f=-1==e[0].c?f+1:e[0].c,o.dense?(g[h]||(g[h]=[]),g[h][f]=d):g[OM(f)+x]=d,y.s.r>c.r&&(y.s.r=c.r),y.s.c>f&&(y.s.c=f),y.e.r<c.r&&(y.e.r=c.r),y.e.c<f&&(y.e.c=f),A&&("XLDAPR"==A.type&&(d.D=!0),A=void 0),P&&(P=void 0);break;case 176:j.push(e);break;case 49:A=((o.xlmeta||{}).Cell||[])[e-1];break;case 494:var F=n["!id"][e.relId];for(F?(e.Target=F.Target,e.loc&&(e.Target+="#"+e.loc),e.Rel=F):""==e.relId&&(e.Target="#"+e.loc),h=e.rfx.s.r;h<=e.rfx.e.r;++h)for(f=e.rfx.s.c;f<=e.rfx.e.c;++f)o.dense?(g[h]||(g[h]=[]),g[h][f]||(g[h][f]={t:"z",v:void 0}),g[h][f].l=e):(m=LM({c:f,r:h}),g[m]||(g[m]={t:"z",v:void 0}),g[m].l=e);break;case 426:if(!o.cellFormula)break;k.push(e),(v=o.dense?g[h][f]:g[OM(f)+x]).f=SU(e[1],0,{r:c.r,c:f},T,o),v.F=UM(e[0]);break;case 427:if(!o.cellFormula)break;E[LM(e[0].s)]=e[1],(v=o.dense?g[h][f]:g[OM(f)+x]).f=SU(e[1],0,{r:c.r,c:f},T,o);break;case 60:if(!o.cellStyles)break;for(;e.e>=e.s;)_[e.e--]={width:e.w/256,hidden:!!(1&e.flags),level:e.level},I||(I=!0,rB(e.w/256)),nB(_[e.e+1]);break;case 161:g["!autofilter"]={ref:UM(e)};break;case 476:g["!margins"]=e;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),e.name&&(a.Sheets[r].CodeName=e.name),(e.above||e.left)&&(g["!outline"]={above:e.above,left:e.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),e.RTL&&(a.Views[0].RTL=!0);break;case 485:case 64:case 1053:case 151:case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:w=!0;break;case 36:w=!1;break;case 37:b.push(D),w=!0;break;case 38:b.pop(),w=!1;break;default:if(t.T);else if(!w||o.WTF)throw new Error("Unexpected record 0x"+D.toString(16))}}),o),delete o.supbooks,delete o["!row"],!g["!ref"]&&(y.s.r<2e6||l&&(l.e.r>0||l.e.c>0||l.s.r>0||l.s.c>0))&&(g["!ref"]=UM(l||y)),o.sheetRows&&g["!ref"]){var M=zM(g["!ref"]);o.sheetRows<=+M.e.r&&(M.e.r=o.sheetRows-1,M.e.r>y.e.r&&(M.e.r=y.e.r),M.e.r<M.s.r&&(M.s.r=M.e.r),M.e.c>y.e.c&&(M.e.c=y.e.c),M.e.c<M.s.c&&(M.s.c=M.e.c),g["!fullref"]=g["!ref"],g["!ref"]=UM(M))}return j.length>0&&(g["!merges"]=j),_.length>0&&(g["!cols"]=_),R.length>0&&(g["!rows"]=R),g}(e,n,r,a,s,i,o):sz(e,n,r,a,s,i,o)}function Gz(e,t,r,n,a,s,i,o){return".bin"===t.slice(-4)?function(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=[],o=!1;return kM(e,(function(e,n,l){switch(l){case 550:s["!rel"]=e;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),e.name&&(a.Sheets[r].CodeName=e.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(l);break;case 38:i.pop();break;default:if(n.T>0)i.push(l);else if(n.T<0)i.pop();else if(!o||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}(e,n,r,a,s):function(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s,i={"!type":"chart","!drawel":null,"!rel":""},o=e.match(rz);return o&&iz(o[0],0,a,r),(s=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=s[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}(e,0,r,a,s)}function Kz(e,t,r,n){return".bin"===t.slice(-4)?function(e,t,r){var n={NumberFmt:[]};for(var a in p_)n.NumberFmt[a]=p_[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return kM(e,(function(e,a,o){switch(o){case 44:n.NumberFmt[e[0]]=e[1],K_(e[1],e[0]);break;case 43:n.Fonts.push(e),null!=e.color.theme&&t&&t.themeElements&&t.themeElements.clrScheme&&(e.color.rgb=XL(t.themeElements.clrScheme[e.color.theme].rgb,e.color.tint||0));break;case 1025:case 45:case 46:case 48:case 507:case 572:case 475:case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 47:617==s[s.length-1]&&n.CellXf.push(e);break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(o),i=!0;break;case 38:s.pop(),i=!1;break;default:if(a.T>0)s.push(o);else if(a.T<0)s.pop();else if(!i||r.WTF&&37!=s[s.length-1])throw new Error("Unexpected record 0x"+o.toString(16))}})),n}(e,r,n):dB(e,r,n)}function Yz(e,t,r){return".bin"===t.slice(-4)?function(e,t){var r=[],n=!1;return kM(e,(function(e,a,s){switch(s){case 159:r.Count=e[0],r.Unique=e[1];break;case 19:r.push(e);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(a.T,!n||t.WTF)throw new Error("Unexpected record 0x"+s.toString(16))}})),r}(e,r):function(e,t){var r=[],n="";if(!e)return r;var a=e.match(TL);if(a){n=a[2].replace(DL,"").split(AL);for(var s=0;s!=n.length;++s){var i=EL(n[s].trim(),t);null!=i&&(r[r.length]=i)}a=$R(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}(e,r)}function Xz(e,t,r){return".bin"===t.slice(-4)?function(e,t){var r=[],n=[],a={},s=!1;return kM(e,(function(e,i,o){switch(o){case 632:n.push(e);break;case 635:a=e;break;case 637:a.t=e.t,a.h=e.h,a.r=e.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:case 37:case 38:break;case 35:s=!0;break;case 36:s=!1;break;default:if(i.T);else if(!s||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}})),r}(e,r):function(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach((function(e){if(""!==e&&""!==e.trim()){var t=e.match(/<(?:\w+:)?author[^>]*>(.*)/);t&&r.push(t[1])}}));var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach((function(e){if(""!==e&&""!==e.trim()){var a=e.match(/<(?:\w+:)?comment[^>]*>/);if(a){var s=$R(a[0]),i={author:s.authorId&&r[s.authorId]||"sheetjsghost",ref:s.ref,guid:s.guid},o=FM(s.ref);if(!(t.sheetRows&&t.sheetRows<=o.r)){var l=e.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),c=!!l&&!!l[1]&&EL(l[1])||{r:"",t:"",h:""};i.r=c.r,"<t></t>"==c.r&&(c.t=c.h=""),i.t=(c.t||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t.cellHTML&&(i.h=c.h),n.push(i)}}}})),n}(e,r)}function Qz(e,t,r){return".bin"===t.slice(-4)?function(e){var t=[];return kM(e,(function(e,r,n){if(63===n)t.push(e);else if(!r.T)throw new Error("Unexpected record 0x"+n.toString(16))})),t}(e):function(e){var t=[];if(!e)return t;var r=1;return(e.match(zR)||[]).forEach((function(e){var n=$R(e);switch(n[0]){case"<?xml":case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,t.push(n)}})),t}(e)}function Jz(e,t,r,n){if(".bin"===r.slice(-4))return function(e,t,r,n){if(!e)return e;var a=n||{},s=!1;kM(e,(function(e,t,r){switch(r){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(t.T);else if(!s||a.WTF)throw new Error("Unexpected record 0x"+r.toString(16))}}),a)}(e,0,0,n)}function Zz(e,t,r){return".bin"===t.slice(-4)?function(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return kM(e,(function(e,t,r){switch(r){case 335:n.Types.push({name:e.name});break;case 51:e.forEach((function(e){1==o?n.Cell.push({type:n.Types[e[0]-1].name,index:e[1]}):0==o&&n.Value.push({type:n.Types[e[0]-1].name,index:e[1]})}));break;case 337:o=e?1:0;break;case 338:o=2;break;case 35:s.push(r),i=!0;break;case 36:s.pop(),i=!1;break;default:if(t.T);else if(!i||a.WTF&&35!=s[s.length-1])throw new Error("Unexpected record 0x"+r.toString(16))}})),n}(e,0,r):function(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a,s=!1,i=2;return e.replace(zR,(function(e){var t=$R(e);switch(WR(t[0])){case"<?xml":case"<metadata":case"</metadata>":case"<metadataTypes":case"</metadataTypes>":case"</metadataType>":case"</futureMetadata>":case"<bk>":case"</bk>":case"</rc>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<metadataType":n.Types.push({name:t.name});break;case"<futureMetadata":for(var o=0;o<n.Types.length;++o)n.Types[o].name==t.name&&(a=n.Types[o]);break;case"<rc":1==i?n.Cell.push({type:n.Types[t.t-1].name,index:+t.v}):0==i&&n.Value.push({type:n.Types[t.t-1].name,index:+t.v});break;case"<cellMetadata":i=1;break;case"</cellMetadata>":case"</valueMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+t.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+t[0]+" in metadata")}return e})),n}(e,0,r)}function eV(e,t,r,n,a){return(".bin"===t.slice(-4)?Ez:hz)(e,r,n,a)}function tV(e,t,r){return(".bin"===t.slice(-4)?WB:VB)(e,r)}var rV,nV=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,aV=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function sV(e,t){var r=e.split(/\s+/),n=[];if(t||(n[0]=r[0]),1===r.length)return n;var a,s,i,o=e.match(nV);if(o)for(i=0;i!=o.length;++i)-1===(s=(a=o[i].match(aV))[1].indexOf(":"))?n[a[1]]=a[2].slice(1,a[2].length-1):n["xmlns:"===a[1].slice(0,6)?"xmlns"+a[1].slice(6):a[1].slice(s+1)]=a[2].slice(1,a[2].length-1);return n}function iV(e){var t={};if(1===e.split(/\s+/).length)return t;var r,n,a,s=e.match(nV);if(s)for(a=0;a!=s.length;++a)-1===(n=(r=s[a].match(aV))[1].indexOf(":"))?t[r[1]]=r[2].slice(1,r[2].length-1):t["xmlns:"===r[1].slice(0,6)?"xmlns"+r[1].slice(6):r[1].slice(n+1)]=r[2].slice(1,r[2].length-1);return t}function oV(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=rI(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=gR(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[KR(t)]=a}function lV(e,t,r){if("z"!==e.t){if(!r||!1!==r.cellText)try{"e"===e.t?e.w=e.w||TO[e.v]:"General"===t?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=C_(e.v):e.w=k_(e.v):e.w=function(e,t){var r=rV[e]||KR(e);return"General"===r?k_(t):G_(r,t)}(t||"General",e.v)}catch(ZJ){if(r.WTF)throw ZJ}try{var n=rV[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&"n"==e.t&&H_(n)){var a=y_(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(ZJ){if(r.WTF)throw ZJ}}}function cV(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=oB[n.Pattern]||n.Pattern)}e[t.ID]=t}function dV(e,t,r,n,a,s,i,o,l,c){var d="General",u=n.StyleID,h={};c=c||{};var f=[],m=0;for(void 0===u&&o&&(u=o.StyleID),void 0===u&&i&&(u=i.StyleID);void 0!==s[u]&&(s[u].nf&&(d=s[u].nf),s[u].Interior&&f.push(s[u].Interior),s[u].Parent);)u=s[u].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=rI(e);break;case"String":n.t="s",n.r=tI(KR(e)),n.v=e.indexOf("<")>-1?KR(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":"Z"!=e.slice(-1)&&(e+="Z"),n.v=(gR(e)-new Date(Date.UTC(1899,11,30)))/864e5,n.v!==n.v?n.v=KR(e):n.v<60&&(n.v=n.v-1),d&&"General"!=d||(d="yyyy-mm-dd");case"Number":void 0===n.v&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=DO[e],!1!==c.cellText&&(n.w=e);break;default:""==e&&""==t?n.t="z":(n.t="s",n.v=tI(t||e))}if(lV(n,d,c),!1!==c.cellFormula)if(n.Formula){var p=KR(n.Formula);61==p.charCodeAt(0)&&(p=p.slice(1)),n.f=GB(p,a),delete n.Formula,"RC"==n.ArrayRange?n.F=GB("RC:RC",a):n.ArrayRange&&(n.F=GB(n.ArrayRange,a),l.push([zM(n.F),n.F]))}else for(m=0;m<l.length;++m)a.r>=l[m][0].s.r&&a.r<=l[m][0].e.r&&a.c>=l[m][0].s.c&&a.c<=l[m][0].e.c&&(n.F=l[m][1]);c.cellStyles&&(f.forEach((function(e){!h.patternType&&e.patternType&&(h.patternType=e.patternType)})),n.s=h),void 0!==n.StyleID&&(n.ixfe=n.StyleID)}function uV(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e.v=e.w=e.ixfe=void 0}function hV(e,t){var r=t||{};X_();var n=HP(bI(e));"binary"!=r.type&&"array"!=r.type&&"base64"!=r.type||(n="undefined"!==typeof VP?VP.utils.decode(65001,UP(n)):oI(n));var a,s=n.slice(0,1024).toLowerCase(),i=!1;if((1023&(s=s.replace(/".*?"/g,"")).indexOf(">"))>Math.min(1023&s.indexOf(","),1023&s.indexOf(";"))){var o=bR(r);return o.type="string",bL.to_workbook(n,o)}if(-1==s.indexOf("<?xml")&&["html","table","head","meta","script","style","div"].forEach((function(e){s.indexOf("<"+e)>=0&&(i=!0)})),i)return function(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||0==r.length)throw new Error("Invalid HTML: could not find <table>");if(1==r.length)return $M(HV(r[0],t),t);var n={SheetNames:[],Sheets:{}};return r.forEach((function(e,r){o$(n,HV(e,t),"Sheet"+(r+1))})),n}(n,r);rV={"General Number":"General","General Date":p_[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":p_[15],"Short Date":p_[14],"Long Time":p_[19],"Medium Time":p_[18],"Short Time":p_[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:p_[2],Standard:p_[4],Percent:p_[10],Scientific:p_[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[];var d,u={},h=[],f=r.dense?[]:{},m="",p={},x={},v=sV('<Data ss:Type="String">'),g=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},N={},j={},S="",C=0,k=[],E={},T={},D=0,A=[],P=[],_={},R=[],I=!1,M=[],O=[],F={},L=0,B=0,U={Sheets:[],WBProps:{date1904:!1}},z={};wI.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/gm,"");for(var V="";a=wI.exec(n);)switch(a[3]=(V=a[3]).toLowerCase()){case"data":if("data"==V){if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==a[0].charAt(a[0].length-2)&&c.push([a[3],!0]);break}if(c[c.length-1][1])break;"/"===a[1]?dV(n.slice(g,a.index),S,v,"comment"==c[c.length-1][0]?_:p,{c:y,r:b},N,R[y],x,M,r):(S="",v=sV(a[0]),g=a.index+a[0].length);break;case"cell":if("/"===a[1])if(P.length>0&&(p.c=P),(!r.sheetRows||r.sheetRows>b)&&void 0!==p.v&&(r.dense?(f[b]||(f[b]=[]),f[b][y]=p):f[OM(y)+IM(b)]=p),p.HRef&&(p.l={Target:KR(p.HRef)},p.HRefScreenTip&&(p.l.Tooltip=p.HRefScreenTip),delete p.HRef,delete p.HRefScreenTip),(p.MergeAcross||p.MergeDown)&&(L=y+(0|parseInt(p.MergeAcross,10)),B=b+(0|parseInt(p.MergeDown,10)),k.push({s:{c:y,r:b},e:{c:L,r:B}})),r.sheetStubs)if(p.MergeAcross||p.MergeDown){for(var H=y;H<=L;++H)for(var $=b;$<=B;++$)(H>y||$>b)&&(r.dense?(f[$]||(f[$]=[]),f[$][H]={t:"z"}):f[OM(H)+IM($)]={t:"z"});y=L+1}else++y;else p.MergeAcross?y=L+1:++y;else(p=iV(a[0])).Index&&(y=+p.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),"/>"===a[0].slice(-2)&&++y,P=[];break;case"row":"/"===a[1]||"/>"===a[0].slice(-2)?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),"/>"===a[0].slice(-2)&&(x=sV(a[0])).Index&&(b=+x.Index-1),y=0,++b):((x=sV(a[0])).Index&&(b=+x.Index-1),F={},("0"==x.AutoFitHeight||x.Height)&&(F.hpx=parseInt(x.Height,10),F.hpt=sB(F.hpx),O[b]=F),"1"==x.Hidden&&(F.hidden=!0,O[b]=F));break;case"worksheet":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"));h.push(m),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(f["!ref"]=UM(w),r.sheetRows&&r.sheetRows<=w.e.r&&(f["!fullref"]=f["!ref"],w.e.r=r.sheetRows-1,f["!ref"]=UM(w))),k.length&&(f["!merges"]=k),R.length>0&&(f["!cols"]=R),O.length>0&&(f["!rows"]=O),u[m]=f}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([a[3],!1]),l=sV(a[0]),m=KR(l.Name),f=r.dense?[]:{},k=[],M=[],O=[],z={name:m,Hidden:0},U.Sheets.push(z);break;case"table":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else{if("/>"==a[0].slice(-2))break;c.push([a[3],!1]),R=[],I=!1}break;case"style":"/"===a[1]?cV(N,j,r):j=sV(a[0]);break;case"numberformat":j.nf=KR(sV(a[0]).Format||"General"),rV[j.nf]&&(j.nf=rV[j.nf]);for(var W=0;392!=W&&p_[W]!=j.nf;++W);if(392==W)for(W=57;392!=W;++W)if(null==p_[W]){K_(j.nf,W);break}break;case"column":if("table"!==c[c.length-1][0])break;if((d=sV(a[0])).Hidden&&(d.hidden=!0,delete d.Hidden),d.Width&&(d.wpx=parseInt(d.Width,10)),!I&&d.wpx>10){I=!0,QL=6;for(var q=0;q<R.length;++q)R[q]&&nB(R[q])}I&&nB(d),R[d.Index-1||R.length]=d;for(var G=0;G<+d.Span;++G)R[R.length]=bR(d);break;case"namedrange":if("/"===a[1])break;U.Names||(U.Names=[]);var K=$R(a[0]),Y={Name:K.Name,Ref:GB(K.RefersTo.slice(1),{r:0,c:0})};U.Sheets.length>0&&(Y.Sheet=U.Sheets.length-1),U.Names.push(Y);break;case"namedcell":case"b":case"i":case"u":case"s":case"em":case"h2":case"h3":case"sub":case"sup":case"span":case"alignment":case"borders":case"border":case"protection":case"paragraphs":case"name":case"pixelsperinch":case"null":break;case"font":if("/>"===a[0].slice(-2))break;"/"===a[1]?S+=n.slice(C,a.index):C=a.index+a[0].length;break;case"interior":if(!r.cellStyles)break;j.Interior=sV(a[0]);break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if("/>"===a[0].slice(-2))break;"/"===a[1]?ZO(E,V,n.slice(D,a.index)):D=a.index+a[0].length;break;case"styles":case"workbook":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else c.push([a[3],!1]);break;case"comment":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"));uV(_),P.push(_)}else c.push([a[3],!1]),_={a:(l=sV(a[0])).Author};break;case"autofilter":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else if("/"!==a[0].charAt(a[0].length-2)){var X=sV(a[0]);f["!autofilter"]={ref:GB(X.Range).replace(/\$/g,"")},c.push([a[3],!0])}break;case"datavalidation":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==a[0].charAt(a[0].length-2)&&c.push([a[3],!0]);break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if("/"===a[1]){if((l=c.pop())[0]!==a[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==a[0].charAt(a[0].length-2)&&c.push([a[3],!0]);break;default:if(0==c.length&&"document"==a[3])return rH(n,r);if(0==c.length&&"uof"==a[3])return rH(n,r);var Q=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(a[3]){case"allowpng":case"removepersonalinformation":case"downloadcomponents":case"locationofcomponents":case"colors":case"color":case"index":case"rgb":case"targetscreensize":case"readonlyrecommended":break;default:Q=!1}break;case"componentoptions":switch(a[3]){case"toolbar":case"hideofficelogo":case"spreadsheetautofit":case"label":case"caption":case"maxheight":case"maxwidth":case"nextsheetnumber":break;default:Q=!1}break;case"excelworkbook":switch(a[3]){case"date1904":U.WBProps.date1904=!0;break;case"windowheight":case"windowwidth":case"windowtopx":case"windowtopy":case"tabratio":case"protectstructure":case"protectwindow":case"protectwindows":case"activesheet":case"displayinknotes":case"firstvisiblesheet":case"supbook":case"sheetname":case"sheetindex":case"sheetindexfirst":case"sheetindexlast":case"dll":case"acceptlabelsinformulas":case"donotsavelinkvalues":case"iteration":case"maxiterations":case"maxchange":case"path":case"xct":case"count":case"selectedsheets":case"calculation":case"uncalced":case"startupprompt":case"crn":case"externname":case"formula":case"colfirst":case"collast":case"wantadvise":case"boolean":case"error":case"text":case"ole":case"noautorecover":case"publishobjects":case"donotcalculatebeforesave":case"number":case"refmoder1c1":case"embedsavesmarttags":break;default:Q=!1}break;case"workbookoptions":switch(a[3]){case"owcversion":case"height":case"width":break;default:Q=!1}break;case"worksheetoptions":switch(a[3]){case"visible":if("/>"===a[0].slice(-2));else if("/"===a[1])switch(n.slice(D,a.index)){case"SheetHidden":z.Hidden=1;break;case"SheetVeryHidden":z.Hidden=2}else D=a.index+a[0].length;break;case"header":f["!margins"]||WU(f["!margins"]={},"xlml"),isNaN(+$R(a[0]).Margin)||(f["!margins"].header=+$R(a[0]).Margin);break;case"footer":f["!margins"]||WU(f["!margins"]={},"xlml"),isNaN(+$R(a[0]).Margin)||(f["!margins"].footer=+$R(a[0]).Margin);break;case"pagemargins":var J=$R(a[0]);f["!margins"]||WU(f["!margins"]={},"xlml"),isNaN(+J.Top)||(f["!margins"].top=+J.Top),isNaN(+J.Left)||(f["!margins"].left=+J.Left),isNaN(+J.Right)||(f["!margins"].right=+J.Right),isNaN(+J.Bottom)||(f["!margins"].bottom=+J.Bottom);break;case"displayrighttoleft":U.Views||(U.Views=[]),U.Views[0]||(U.Views[0]={}),U.Views[0].RTL=!0;break;case"freezepanes":case"frozennosplit":case"splithorizontal":case"splitvertical":case"donotdisplaygridlines":case"activerow":case"activecol":case"toprowbottompane":case"leftcolumnrightpane":case"unsynced":case"print":case"printerrors":case"panes":case"scale":case"pane":case"number":case"layout":case"pagesetup":case"selected":case"protectobjects":case"enableselection":case"protectscenarios":case"validprinterinfo":case"horizontalresolution":case"verticalresolution":case"numberofcopies":case"activepane":case"toprowvisible":case"leftcolumnvisible":case"fittopage":case"rangeselection":case"papersizeindex":case"pagelayoutzoom":case"pagebreakzoom":case"filteron":case"fitwidth":case"fitheight":case"commentslayout":case"zoom":case"lefttoright":case"gridlines":case"allowsort":case"allowfilter":case"allowinsertrows":case"allowdeleterows":case"allowinsertcols":case"allowdeletecols":case"allowinserthyperlinks":case"allowformatcells":case"allowsizecols":case"allowsizerows":case"tabcolorindex":case"donotdisplayheadings":case"showpagelayoutzoom":case"blackandwhite":case"donotdisplayzeros":case"displaypagebreak":case"rowcolheadings":case"donotdisplayoutline":case"noorientation":case"allowusepivottables":case"zeroheight":case"viewablerange":case"selection":case"protectcontents":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;default:Q=!1}break;case"pivottable":case"pivotcache":switch(a[3]){case"immediateitemsondrop":case"showpagemultipleitemlabel":case"compactrowindent":case"location":case"pivotfield":case"orientation":case"layoutform":case"layoutsubtotallocation":case"layoutcompactrow":case"position":case"pivotitem":case"datatype":case"datafield":case"sourcename":case"parentfield":case"ptlineitems":case"ptlineitem":case"countofsameitems":case"item":case"itemtype":case"ptsource":case"cacheindex":case"consolidationreference":case"filename":case"reference":case"nocolumngrand":case"norowgrand":case"blanklineafteritems":case"hidden":case"subtotal":case"basefield":case"mapchilditems":case"function":case"refreshonfileopen":case"printsettitles":case"mergelabels":case"defaultversion":case"refreshname":case"refreshdate":case"refreshdatecopy":case"versionlastrefresh":case"versionlastupdate":case"versionupdateablemin":case"versionrefreshablemin":case"calculation":break;default:Q=!1}break;case"pagebreaks":switch(a[3]){case"colbreaks":case"colbreak":case"rowbreaks":case"rowbreak":case"colstart":case"colend":case"rowend":break;default:Q=!1}break;case"autofilter":switch(a[3]){case"autofiltercolumn":case"autofiltercondition":case"autofilterand":case"autofilteror":break;default:Q=!1}break;case"querytable":switch(a[3]){case"id":case"autoformatfont":case"autoformatpattern":case"querysource":case"querytype":case"enableredirections":case"refreshedinxl9":case"urlstring":case"htmltables":case"connection":case"commandtext":case"refreshinfo":case"notitles":case"nextid":case"columninfo":case"overwritecells":case"donotpromptforfile":case"textwizardsettings":case"source":case"number":case"decimal":case"thousandseparator":case"trailingminusnumbers":case"formatsettings":case"fieldtype":case"delimiters":case"tab":case"comma":case"autoformatname":case"versionlastedit":case"versionlastrefresh":break;default:Q=!1}break;case"datavalidation":switch(a[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":case"cellrangelist":break;default:Q=!1}break;case"sorting":case"conditionalformatting":switch(a[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"cellrangelist":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":break;default:Q=!1}break;case"mapinfo":case"schema":case"data":switch(a[3]){case"map":case"entry":case"range":case"xpath":case"field":case"xsdtype":case"filteron":case"aggregate":case"elementtype":case"attributetype":case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":case"row":break;default:Q=!1}break;case"smarttags":break;default:Q=!1}if(Q)break;if(a[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+a[3]+"|"+c.join("|");if("customdocumentproperties"===c[c.length-1][0]){if("/>"===a[0].slice(-2))break;"/"===a[1]?oV(T,V,A,n.slice(D,a.index)):(A=a,D=a.index+a[0].length);break}if(r.WTF)throw"Unrecognized tag: "+a[3]+"|"+c.join("|")}var Z={};return r.bookSheets||r.bookProps||(Z.Sheets=u),Z.SheetNames=h,Z.Workbook=U,Z.SSF=bR(p_),Z.Props=E,Z.Custprops=T,Z}function fV(e,t){switch(IH(t=t||{}),t.type||"base64"){case"base64":return hV(KP(e),t);case"binary":case"buffer":case"file":return hV(e,t);case"array":return hV(t_(e),t)}}function mV(e,t){var r=[];return e.Props&&r.push(function(e,t){var r=[];return aR(JO).map((function(e){for(var t=0;t<UO.length;++t)if(UO[t][1]==e)return UO[t];for(t=0;t<WO.length;++t)if(WO[t][1]==e)return WO[t];throw e})).forEach((function(n){if(null!=e[n[1]]){var a=t&&t.Props&&null!=t.Props[n[1]]?t.Props[n[1]]:e[n[1]];"date"===n[2]&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof a?a=String(a):!0===a||!1===a?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(xI(JO[n[1]]||n[1],a))}})),gI("DocumentProperties",r.join(""),{xmlns:OI})}(e.Props,t)),e.Custprops&&r.push(function(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&aR(e).forEach((function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var n=0;n<UO.length;++n)if(t==UO[n][1])return;for(n=0;n<WO.length;++n)if(t==WO[n][1])return;for(n=0;n<r.length;++n)if(t==r[n])return;var s=e[t],i="string";"number"==typeof s?(i="float",s=String(s)):!0===s||!1===s?(i="boolean",s=s?"1":"0"):s=String(s),a.push(gI(JR(t),s,{"dt:dt":i}))}})),t&&aR(t).forEach((function(r){if(Object.prototype.hasOwnProperty.call(t,r)&&(!e||!Object.prototype.hasOwnProperty.call(e,r))){var n=t[r],s="string";"number"==typeof n?(s="float",n=String(n)):!0===n||!1===n?(s="boolean",n=n?"1":"0"):n instanceof Date?(s="dateTime.tz",n=n.toISOString()):n=String(n),a.push(gI(JR(r),n,{"dt:dt":s}))}})),"<"+n+' xmlns="'+OI+'">'+a.join("")+"</"+n+">"}(e.Props,e.Custprops)),r.join("")}function pV(e){return gI("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+YB(e.Ref,{r:0,c:0})})}function xV(e,t,r,n,a,s,i){if(!e||void 0==e.v&&void 0==e.f)return"";var o={};if(e.f&&(o["ss:Formula"]="="+QR(YB(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=FM(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=QR(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=QR(e.l.Tooltip))),r["!merges"])for(var c=r["!merges"],d=0;d!=c.length;++d)c[d].s.c==i.c&&c[d].s.r==i.r&&(c[d].e.c>c[d].s.c&&(o["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(o["ss:MergeDown"]=c[d].e.r-c[d].s.r));var u="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":u="Number",h=String(e.v);break;case"b":u="Boolean",h=e.v?"1":"0";break;case"e":u="Error",h=TO[e.v];break;case"d":u="DateTime",h=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||p_[14]);break;case"s":u="String",h=((e.v||"")+"").replace(YR,(function(e){return GR[e]})).replace(ZR,(function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"}))}var f=qU(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+f),o["ss:Index"]=i.c+1;var m=null!=e.v?h:"",p="z"==e.t?"":'<Data ss:Type="'+u+'">'+m+"</Data>";return(e.c||[]).length>0&&(p+=e.c.map((function(e){var t=gI("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return gI("Comment",t,{"ss:Author":e.a})})).join("")),gI("Cell",p,o)}function vV(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=iB(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function gV(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?function(e,t,r,n){if(!e)return"";if(!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(pV(o)))}return s.join("")}(s,0,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?function(e,t){if(!e["!ref"])return"";var r=zM(e["!ref"]),n=e["!merges"]||[],a=0,s=[];e["!cols"]&&e["!cols"].forEach((function(e,t){nB(e);var r=!!e.width,n=$U(t,e),a={"ss:Index":t+1};r&&(a["ss:Width"]=JL(n.width)),e.hidden&&(a["ss:Hidden"]="1"),s.push(gI("Column",null,a))}));for(var i=Array.isArray(e),o=r.s.r;o<=r.e.r;++o){for(var l=[vV(o,(e["!rows"]||[])[o])],c=r.s.c;c<=r.e.c;++c){var d=!1;for(a=0;a!=n.length;++a)if(!(n[a].s.c>c)&&!(n[a].s.r>o)&&!(n[a].e.c<c)&&!(n[a].e.r<o)){n[a].s.c==c&&n[a].s.r==o||(d=!0);break}if(!d){var u={r:o,c:c},h=LM(u),f=i?(e[o]||[])[c]:e[h];l.push(xV(f,h,e,t,0,0,u))}}l.push("</Row>"),l.length>2&&s.push(l.join(""))}return s.join("")}(s,t):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(function(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(gI("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(gI("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(gI("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(gI("Visible",1==n.Workbook.Sheets[r].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&(!n.Workbook.Sheets[s]||n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(xI("ProtectContents","True")),e["!protect"].objects&&a.push(xI("ProtectObjects","True")),e["!protect"].scenarios&&a.push(xI("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||a.push(xI("EnableSelection","UnlockedCells")):a.push(xI("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach((function(t){e["!protect"][t[0]]&&a.push("<"+t[1]+"/>")}))),0==a.length?"":gI("WorksheetOptions",a.join(""),{xmlns:FI})}(s,0,e,r)),n.join("")}function yV(e,t){t||(t={}),e.SSF||(e.SSF=bR(p_)),e.SSF&&(X_(),Y_(e.SSF),t.revssf=oR(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],qU(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(mV(e,t)),r.push(""),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(gI("Worksheet",gV(n,t,e),{"ss:Name":QR(e.SheetNames[n])}));return r[2]=function(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach((function(e,t){var n=[];n.push(gI("NumberFormat",null,{"ss:Format":QR(p_[e.numFmtId])}));var a={"ss:ID":"s"+(21+t)};r.push(gI("Style",n.join(""),a))})),gI("Styles",r.join(""))}(0,t),r[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];null==a.Sheet&&(a.Name.match(/^_xlfn\./)||r.push(pV(a)))}return gI("Names",r.join(""))}(e),LR+gI("Workbook",r.join(""),{xmlns:LI,"xmlns:o":OI,"xmlns:x":FI,"xmlns:ss":LI,"xmlns:dt":BI,"xmlns:html":VI})}function bV(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=function(e){return yO(e,1)}(r),r.length-r.l<=4)return t;var n=r.read_shift(4);return 0==n||n>40?t:(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4||1907505652!==(n=r.read_shift(4))?t:(t.UnicodeClipboardFormat=function(e){return yO(e,2)}(r),0==(n=r.read_shift(4))||n>40?t:(r.l-=4,void(t.Reserved2=r.read_shift(0,"lpwstr")))))}var wV=[60,1084,2066,2165,2175];function NV(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var l=hM(r,r.l),c=_V[l],d=0;null!=c&&wV.indexOf(l)>-1;)s=hM(r,r.l+2),d=r.l+4,2066==l?d+=4:2165!=l&&2175!=l||(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,c=_V[l=hM(r,r.l)];var u=n_(i);jM(u,0);var h=0;u.lens=[];for(var f=0;f<i.length;++f)u.lens.push(h),h+=i[f].length;if(u.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+u.length+" < "+n;return t.f(u,u.length,a)}function jV(e,t,r){if("z"!==e.t&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=p_[n])}catch(ZJ){if(t.WTF)throw ZJ}if(!t||!1!==t.cellText)try{"e"===e.t?e.w=e.w||TO[e.v]:0===n||"General"==n?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=C_(e.v):e.w=k_(e.v):e.w=G_(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(ZJ){if(t.WTF)throw ZJ}if(t.cellDates&&n&&"n"==e.t&&H_(p_[n]||String(n))){var a=y_(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function SV(e,t,r){return{v:e,ixfe:t,t:r}}function CV(e,t){var r={opts:{}},n={};var a,s,i,o,l,c,d,u,h=t.dense?[]:{},f={},m={},p=null,x=[],v="",g={},y="",b={},w=[],N=[],j=[],S={Sheets:[],WBProps:{date1904:!1},Views:[{}]},C={},k=function(e){return e<8?EO[e]:e<64&&j[e-8]||EO[e]},E=function(e,t,r){if(!(F>1)&&!(r.sheetRows&&e.r>=r.sheetRows)){if(r.cellStyles&&t.XF&&t.XF.data&&function(e,t,r){var n,a=t.XF.data;a&&a.patternType&&r&&r.cellStyles&&(t.s={},t.s.patternType=a.patternType,(n=YL(k(a.icvFore)))&&(t.s.fgColor={rgb:n}),(n=YL(k(a.icvBack)))&&(t.s.bgColor={rgb:n}))}(0,t,r),delete t.ixfe,delete t.XF,a=e,y=LM(e),m&&m.s&&m.e||(m={s:{r:0,c:0},e:{r:0,c:0}}),e.r<m.s.r&&(m.s.r=e.r),e.c<m.s.c&&(m.s.c=e.c),e.r+1>m.e.r&&(m.e.r=e.r+1),e.c+1>m.e.c&&(m.e.c=e.c+1),r.cellFormula&&t.f)for(var n=0;n<w.length;++n)if(!(w[n][0].s.c>e.c||w[n][0].s.r>e.r)&&!(w[n][0].e.c<e.c||w[n][0].e.r<e.r)){t.F=UM(w[n][0]),w[n][0].s.c==e.c&&w[n][0].s.r==e.r||delete t.f,t.f&&(t.f=""+SU(w[n][1],0,e,I,T));break}r.dense?(h[e.r]||(h[e.r]=[]),h[e.r][e.c]=t):h[y]=t}},T={enc:!1,sbcch:0,snames:[],sharedf:b,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(T.password=t.password);var D=[],A=[],P=[],_=[],R=!1,I=[];I.SheetNames=T.snames,I.sharedf=T.sharedf,I.arrayf=T.arrayf,I.names=[],I.XTI=[];var M,O=0,F=0,L=0,B=[],U=[];T.codepage=1200,LP(1200);for(var z=!1;e.l<e.length-1;){var V=e.l,H=e.read_shift(2);if(0===H&&10===O)break;var $=e.l===e.length?0:e.read_shift(2),W=_V[H];if(W&&W.f){if(t.bookSheets&&133===O&&133!==H)break;if(O=H,2===W.r||12==W.r){var q=e.read_shift(2);if($-=2,!T.enc&&q!==H&&((255&q)<<8|q>>8)!==H)throw new Error("rt mismatch: "+q+"!="+H);12==W.r&&(e.l+=10,$-=10)}var G={};if(G=10===H?W.f(e,$,T):NV(H,W,e,$,T),0==F&&-1===[9,521,1033,2057].indexOf(O))continue;switch(H){case 34:r.opts.Date1904=S.WBProps.date1904=G;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(T.enc||(e.l=0),T.enc=G,!t.password)throw new Error("File is password-protected");if(null==G.valid)throw new Error("Encryption scheme unsupported");if(!G.valid)throw new Error("Password is incorrect");break;case 92:T.lastuser=G;break;case 66:var K=Number(G);switch(K){case 21010:K=1200;break;case 32768:K=1e4;break;case 32769:K=1252}LP(T.codepage=K),z=!0;break;case 317:T.rrtabid=G;break;case 25:T.winlocked=G;break;case 439:r.opts.RefreshAll=G;break;case 12:r.opts.CalcCount=G;break;case 16:r.opts.CalcDelta=G;break;case 17:r.opts.CalcIter=G;break;case 13:r.opts.CalcMode=G;break;case 14:r.opts.CalcPrecision=G;break;case 95:r.opts.CalcSaveRecalc=G;break;case 15:T.CalcRefMode=G;break;case 2211:r.opts.FullCalc=G;break;case 129:G.fDialog&&(h["!type"]="dialog"),G.fBelow||((h["!outline"]||(h["!outline"]={})).above=!0),G.fRight||((h["!outline"]||(h["!outline"]={})).left=!0);break;case 224:N.push(G);break;case 430:I.push([G]),I[I.length-1].XTI=[];break;case 35:case 547:I[I.length-1].push(G);break;case 24:case 536:M={Name:G.Name,Ref:SU(G.rgce,0,null,I,T)},G.itab>0&&(M.Sheet=G.itab-1),I.names.push(M),I[0]||(I[0]=[],I[0].XTI=[]),I[I.length-1].push(G),"_xlnm._FilterDatabase"==G.Name&&G.itab>0&&G.rgce&&G.rgce[0]&&G.rgce[0][0]&&"PtgArea3d"==G.rgce[0][0][0]&&(U[G.itab-1]={ref:UM(G.rgce[0][0][1][2])});break;case 22:T.ExternCount=G;break;case 23:0==I.length&&(I[0]=[],I[0].XTI=[]),I[I.length-1].XTI=I[I.length-1].XTI.concat(G),I.XTI=I.XTI.concat(G);break;case 2196:if(T.biff<8)break;null!=M&&(M.Comment=G[1]);break;case 18:h["!protect"]=G;break;case 19:0!==G&&T.WTF&&console.error("Password verifier: "+G);break;case 133:f[G.pos]=G,T.snames.push(G.name);break;case 10:if(--F)break;if(m.e){if(m.e.r>0&&m.e.c>0){if(m.e.r--,m.e.c--,h["!ref"]=UM(m),t.sheetRows&&t.sheetRows<=m.e.r){var Y=m.e.r;m.e.r=t.sheetRows-1,h["!fullref"]=h["!ref"],h["!ref"]=UM(m),m.e.r=Y}m.e.r++,m.e.c++}D.length>0&&(h["!merges"]=D),A.length>0&&(h["!objects"]=A),P.length>0&&(h["!cols"]=P),_.length>0&&(h["!rows"]=_),S.Sheets.push(C)}""===v?g=h:n[v]=h,h=t.dense?[]:{};break;case 9:case 521:case 1033:case 2057:if(8===T.biff&&(T.biff={9:2,521:3,1033:4}[H]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[G.BIFFVer]||8),T.biffguess=0==G.BIFFVer,0==G.BIFFVer&&4096==G.dt&&(T.biff=5,z=!0,LP(T.codepage=28591)),8==T.biff&&0==G.BIFFVer&&16==G.dt&&(T.biff=2),F++)break;if(h=t.dense?[]:{},T.biff<8&&!z&&(z=!0,LP(T.codepage=t.codepage||1252)),T.biff<5||0==G.BIFFVer&&4096==G.dt){""===v&&(v="Sheet1"),m={s:{r:0,c:0},e:{r:0,c:0}};var X={pos:e.l-$,name:v};f[X.pos]=X,T.snames.push(v)}else v=(f[V]||{name:""}).name;32==G.dt&&(h["!type"]="chart"),64==G.dt&&(h["!type"]="macro"),D=[],A=[],T.arrayf=w=[],P=[],_=[],R=!1,C={Hidden:(f[V]||{hs:0}).hs,name:v};break;case 515:case 3:case 2:"chart"==h["!type"]&&(t.dense?(h[G.r]||[])[G.c]:h[LM({c:G.c,r:G.r})])&&++G.c,c={ixfe:G.ixfe,XF:N[G.ixfe]||{},v:G.val,t:"n"},L>0&&(c.z=B[c.ixfe>>8&63]),jV(c,t,r.opts.Date1904),E({c:G.c,r:G.r},c,t);break;case 5:case 517:c={ixfe:G.ixfe,XF:N[G.ixfe],v:G.val,t:G.t},L>0&&(c.z=B[c.ixfe>>8&63]),jV(c,t,r.opts.Date1904),E({c:G.c,r:G.r},c,t);break;case 638:c={ixfe:G.ixfe,XF:N[G.ixfe],v:G.rknum,t:"n"},L>0&&(c.z=B[c.ixfe>>8&63]),jV(c,t,r.opts.Date1904),E({c:G.c,r:G.r},c,t);break;case 189:for(var Q=G.c;Q<=G.C;++Q){var J=G.rkrec[Q-G.c][0];c={ixfe:J,XF:N[J],v:G.rkrec[Q-G.c][1],t:"n"},L>0&&(c.z=B[c.ixfe>>8&63]),jV(c,t,r.opts.Date1904),E({c:Q,r:G.r},c,t)}break;case 6:case 518:case 1030:if("String"==G.val){p=G;break}if((c=SV(G.val,G.cell.ixfe,G.tt)).XF=N[c.ixfe],t.cellFormula){var Z=G.formula;if(Z&&Z[0]&&Z[0][0]&&"PtgExp"==Z[0][0][0]){var ee=Z[0][0][1][0],te=Z[0][0][1][1],re=LM({r:ee,c:te});b[re]?c.f=""+SU(G.formula,0,G.cell,I,T):c.F=((t.dense?(h[ee]||[])[te]:h[re])||{}).F}else c.f=""+SU(G.formula,0,G.cell,I,T)}L>0&&(c.z=B[c.ixfe>>8&63]),jV(c,t,r.opts.Date1904),E(G.cell,c,t),p=G;break;case 7:case 519:if(!p)throw new Error("String record expects Formula");p.val=G,(c=SV(G,p.cell.ixfe,"s")).XF=N[c.ixfe],t.cellFormula&&(c.f=""+SU(p.formula,0,p.cell,I,T)),L>0&&(c.z=B[c.ixfe>>8&63]),jV(c,t,r.opts.Date1904),E(p.cell,c,t),p=null;break;case 33:case 545:w.push(G);var ne=LM(G[0].s);if(s=t.dense?(h[G[0].s.r]||[])[G[0].s.c]:h[ne],t.cellFormula&&s){if(!p)break;if(!ne||!s)break;s.f=""+SU(G[1],0,G[0],I,T),s.F=UM(G[0])}break;case 1212:if(!t.cellFormula)break;if(y){if(!p)break;b[LM(p.cell)]=G[0],((s=t.dense?(h[p.cell.r]||[])[p.cell.c]:h[LM(p.cell)])||{}).f=""+SU(G[0],0,a,I,T)}break;case 253:c=SV(x[G.isst].t,G.ixfe,"s"),x[G.isst].h&&(c.h=x[G.isst].h),c.XF=N[c.ixfe],L>0&&(c.z=B[c.ixfe>>8&63]),jV(c,t,r.opts.Date1904),E({c:G.c,r:G.r},c,t);break;case 513:t.sheetStubs&&(c={ixfe:G.ixfe,XF:N[G.ixfe],t:"z"},L>0&&(c.z=B[c.ixfe>>8&63]),jV(c,t,r.opts.Date1904),E({c:G.c,r:G.r},c,t));break;case 190:if(t.sheetStubs)for(var ae=G.c;ae<=G.C;++ae){var se=G.ixfe[ae-G.c];c={ixfe:se,XF:N[se],t:"z"},L>0&&(c.z=B[c.ixfe>>8&63]),jV(c,t,r.opts.Date1904),E({c:ae,r:G.r},c,t)}break;case 214:case 516:case 4:(c=SV(G.val,G.ixfe,"s")).XF=N[c.ixfe],L>0&&(c.z=B[c.ixfe>>8&63]),jV(c,t,r.opts.Date1904),E({c:G.c,r:G.r},c,t);break;case 0:case 512:1===F&&(m=G);break;case 252:x=G;break;case 1054:if(4==T.biff){B[L++]=G[1];for(var ie=0;ie<L+163&&p_[ie]!=G[1];++ie);ie>=163&&K_(G[1],L+163)}else K_(G[1],G[0]);break;case 30:B[L++]=G;for(var oe=0;oe<L+163&&p_[oe]!=G;++oe);oe>=163&&K_(G,L+163);break;case 229:D=D.concat(G);break;case 93:A[G.cmo[0]]=T.lastobj=G;break;case 438:T.lastobj.TxO=G;break;case 127:T.lastobj.ImData=G;break;case 440:for(l=G[0].s.r;l<=G[0].e.r;++l)for(o=G[0].s.c;o<=G[0].e.c;++o)(s=t.dense?(h[l]||[])[o]:h[LM({c:o,r:l})])&&(s.l=G[1]);break;case 2048:for(l=G[0].s.r;l<=G[0].e.r;++l)for(o=G[0].s.c;o<=G[0].e.c;++o)(s=t.dense?(h[l]||[])[o]:h[LM({c:o,r:l})])&&s.l&&(s.l.Tooltip=G[1]);break;case 28:if(T.biff<=5&&T.biff>=2)break;s=t.dense?(h[G[0].r]||[])[G[0].c]:h[LM(G[0])];var le=A[G[2]];s||(t.dense?(h[G[0].r]||(h[G[0].r]=[]),s=h[G[0].r][G[0].c]={t:"z"}):s=h[LM(G[0])]={t:"z"},m.e.r=Math.max(m.e.r,G[0].r),m.s.r=Math.min(m.s.r,G[0].r),m.e.c=Math.max(m.e.c,G[0].c),m.s.c=Math.min(m.s.c,G[0].c)),s.c||(s.c=[]),i={a:G[1],t:le.TxO.t},s.c.push(i);break;case 2173:N[G.ixfe],G.ext.forEach((function(e){e[0]}));break;case 125:if(!T.cellStyles)break;for(;G.e>=G.s;)P[G.e--]={width:G.w/256,level:G.level||0,hidden:!!(1&G.flags)},R||(R=!0,rB(G.w/256)),nB(P[G.e+1]);break;case 520:var ce={};null!=G.level&&(_[G.r]=ce,ce.level=G.level),G.hidden&&(_[G.r]=ce,ce.hidden=!0),G.hpt&&(_[G.r]=ce,ce.hpt=G.hpt,ce.hpx=iB(G.hpt));break;case 38:case 39:case 40:case 41:h["!margins"]||WU(h["!margins"]={}),h["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[H]]=G;break;case 161:h["!margins"]||WU(h["!margins"]={}),h["!margins"].header=G.header,h["!margins"].footer=G.footer;break;case 574:G.RTL&&(S.Views[0].RTL=!0);break;case 146:j=G;break;case 2198:u=G;break;case 140:d=G;break;case 442:v?C.CodeName=G||C.name:S.WBProps.CodeName=G||"ThisWorkbook"}}else W||console.error("Missing Info for XLS Record 0x"+H.toString(16)),e.l+=$}return r.SheetNames=aR(f).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return f[e].name})),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&g["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=g)):r.Preamble=g,r.Sheets&&U.forEach((function(e,t){r.Sheets[r.SheetNames[t]]["!autofilter"]=e})),r.Strings=x,r.SSF=bR(p_),T.enc&&(r.Encryption=T.enc),u&&(r.Themes=u),r.Metadata={},void 0!==d&&(r.Metadata.Country=d),I.names.length>0&&(S.Names=I.names),r.Workbook=S,r}var kV="e0859ff2f94f6810ab9108002b27b3d9",EV="02d5cdd59c2e1b10939708002b2cf9ae",TV="05d5cdd59c2e1b10939708002b2cf9ae";function DV(e,t){var r,n,a,s;if(t||(t={}),IH(t),BP(),t.codepage&&FP(t.codepage),e.FullPaths){if(eR.find(e,"/encryption"))throw new Error("File is password-protected");r=eR.find(e,"!CompObj"),n=eR.find(e,"/Workbook")||eR.find(e,"/Book")}else{switch(t.type){case"base64":e=ZP(KP(e));break;case"binary":e=ZP(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e))}jM(e,0),n={content:e}}if(r&&bV(r),t.bookProps&&!t.bookSheets)a={};else{var i=YP?"buffer":"array";if(n&&n.content)a=CV(n.content,t);else if((s=eR.find(e,"PerfectOffice_MAIN"))&&s.content)a=wL.to_workbook(s.content,(t.type=i,t));else{if(!(s=eR.find(e,"NativeContent_MAIN"))||!s.content)throw(s=eR.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");a=wL.to_workbook(s.content,(t.type=i,t))}t.bookVBA&&e.FullPaths&&eR.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=function(e){var t=eR.utils.cfb_new({root:"R"});return e.FullPaths.forEach((function(r,n){if("/"!==r.slice(-1)&&r.match(/_VBA_PROJECT_CUR/)){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");eR.utils.cfb_add(t,a,e.FileIndex[n].content)}})),eR.write(t)}(e))}var o={};return e.FullPaths&&function(e,t,r){var n=eR.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=mF(n,NO,EV);for(var s in a)t[s]=a[s]}catch(ZJ){if(r.WTF)throw ZJ}var i=eR.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=mF(i,jO,kV);for(var l in o)null==t[l]&&(t[l]=o[l])}catch(ZJ){if(r.WTF)throw ZJ}t.HeadingPairs&&t.TitlesOfParts&&(GO(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function AV(e,t){var r=t||{},n=eR.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return eR.utils.cfb_add(n,a,VV(e,r)),8==r.biff&&(e.Props||e.Custprops)&&function(e,t){var r,n=[],a=[],s=[],i=0,o=sR(NO,"n"),l=sR(jO,"n");if(e.Props)for(r=aR(e.Props),i=0;i<r.length;++i)(Object.prototype.hasOwnProperty.call(o,r[i])?n:Object.prototype.hasOwnProperty.call(l,r[i])?a:s).push([r[i],e.Props[r[i]]]);if(e.Custprops)for(r=aR(e.Custprops),i=0;i<r.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},r[i])||(Object.prototype.hasOwnProperty.call(o,r[i])?n:Object.prototype.hasOwnProperty.call(l,r[i])?a:s).push([r[i],e.Custprops[r[i]]]);var c=[];for(i=0;i<s.length;++i)uF.indexOf(s[i][0])>-1||qO.indexOf(s[i][0])>-1||null!=s[i][1]&&c.push(s[i]);a.length&&eR.utils.cfb_add(t,"/\x05SummaryInformation",pF(a,kV,l,jO)),(n.length||c.length)&&eR.utils.cfb_add(t,"/\x05DocumentSummaryInformation",pF(n,EV,o,NO,c.length?c:null,TV))}(e,n),8==r.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach((function(r,n){if(0!=n){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==a.slice(-1)&&eR.utils.cfb_add(e,a,t.FileIndex[n].content)}}))}(n,eR.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),n}var PV={0:{f:function(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,7&s&&(r.level=7&s),16&s&&(r.hidden=!0),32&s&&(r.hpt=a/20),r}},1:{f:function(e){return[eO(e)]}},2:{f:function(e){return[eO(e),uO(e),"n"]}},3:{f:function(e){return[eO(e),e.read_shift(1),"e"]}},4:{f:function(e){return[eO(e),e.read_shift(1),"b"]}},5:{f:function(e){return[eO(e),xO(e),"n"]}},6:{f:function(e){return[eO(e),KM(e),"str"]}},7:{f:function(e){return[eO(e),e.read_shift(4),"s"]}},8:{f:function(e,t,r){var n=e.l+t,a=eO(e);a.r=r["!row"];var s=[a,KM(e),"str"];if(r.cellFormula){e.l+=2;var i=PU(e,n-e.l,r);s[3]=SU(i,0,a,r.supbooks,r)}else e.l=n;return s}},9:{f:function(e,t,r){var n=e.l+t,a=eO(e);a.r=r["!row"];var s=[a,xO(e),"n"];if(r.cellFormula){e.l+=2;var i=PU(e,n-e.l,r);s[3]=SU(i,0,a,r.supbooks,r)}else e.l=n;return s}},10:{f:function(e,t,r){var n=e.l+t,a=eO(e);a.r=r["!row"];var s=[a,e.read_shift(1),"b"];if(r.cellFormula){e.l+=2;var i=PU(e,n-e.l,r);s[3]=SU(i,0,a,r.supbooks,r)}else e.l=n;return s}},11:{f:function(e,t,r){var n=e.l+t,a=eO(e);a.r=r["!row"];var s=[a,e.read_shift(1),"e"];if(r.cellFormula){e.l+=2;var i=PU(e,n-e.l,r);s[3]=SU(i,0,a,r.supbooks,r)}else e.l=n;return s}},12:{f:function(e){return[rO(e)]}},13:{f:function(e){return[rO(e),uO(e),"n"]}},14:{f:function(e){return[rO(e),e.read_shift(1),"e"]}},15:{f:function(e){return[rO(e),e.read_shift(1),"b"]}},16:{f:xz},17:{f:function(e){return[rO(e),KM(e),"str"]}},18:{f:function(e){return[rO(e),e.read_shift(4),"s"]}},19:{f:QM},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=lO(e),i=_U(e,0,r),o=iO(e);e.l=n;var l={Name:s,Ptg:i};return a<268435455&&(l.Sheet=a),o&&(l.Comment=o),l}},40:{},42:{},43:{f:function(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1),700===e.read_shift(2)&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript"}var s=e.read_shift(1);0!=s&&(n.underline=s);var i=e.read_shift(1);i>0&&(n.family=i);var o=e.read_shift(1);switch(o>0&&(n.charset=o),e.l++,n.color=function(e){var t={},r=e.read_shift(1)>>>1,n=e.read_shift(1),a=e.read_shift(2,"i"),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(1);switch(e.l++,r){case 0:t.auto=1;break;case 1:t.index=n;var l=EO[n];l&&(t.rgb=YL(l));break;case 2:t.rgb=YL([s,i,o]);break;case 3:t.theme=n}return 0!=a&&(t.tint=a>0?a/32767:a/32768),t}(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor"}return n.name=KM(e),n}},44:{f:function(e,t){return[e.read_shift(2),KM(e)]}},45:{f:xB},46:{f:bB},47:{f:function(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:uL},62:{f:function(e){return[eO(e),QM(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=LM(r);var n=e.read_shift(1);return 2&n&&(t.l="1"),8&n&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:SM,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var r={},n=e[e.l];return++e.l,r.above=!(64&n),r.left=!(128&n),e.l+=18,r.name=aO(e,t-19),r}},148:{f:mz,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?KM(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(65536&n),r.backupFile=!!(64&n),r.checkCompatibility=!!(4096&n),r.date1904=!!(1&n),r.filterPrivacy=!!(8&n),r.hidePivotFieldList=!!(1024&n),r.promptedSolutions=!!(16&n),r.publishItems=!!(2048&n),r.refreshAllConnections=!!(262144&n),r.saveExternalLinkValues=!!(128&n),r.showBorderUnselectedTables=!!(4&n),r.showInkAnnotation=!!(32&n),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(32768&n),r.updateLinks=["userSet","never","always"][n>>8&3],r}},154:{},155:{},156:{f:function(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=cO(e,t-8),r.name=KM(e),r}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:mO},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:vz},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:KM(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:cO},357:{},358:{},359:{},360:{T:1},361:{},362:{f:iL},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,r){var n=e.l+t,a=fO(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=AU(e,n-e.l,r);i[1]=o}else e.l=n;return i}},427:{f:function(e,t,r){var n=e.l+t,a=[mO(e,16)];if(r.cellFormula){var s=RU(e,n-e.l,r);a[1]=s,e.l=n}else e.l=n;return a}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return yz.forEach((function(r){t[r]=xO(e)})),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var r=e.l+t,n=mO(e,16),a=iO(e),s=KM(e),i=KM(e),o=KM(e);e.l=r;var l={rfx:n,relId:a,loc:s,display:o};return i&&(l.Tooltip=i),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:cO},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:$B},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var r=mO(e,16);return t.rfx=r.s,t.ref=LM(r.s),e.l+=16,t}},636:{T:-1},637:{f:JM},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:KM(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},_V={6:{f:EU},10:{f:xF},12:{f:yF},13:{f:yF},14:{f:vF},15:{f:vF},16:{f:xO},17:{f:vF},18:{f:vF},19:{f:yF},20:{f:rL},21:{f:rL},23:{f:iL},24:{f:sL},25:{f:vF},26:{},27:{},28:{f:function(e,t,r){return function(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=TF(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}(e,0,r)}},29:{},34:{f:vF},35:{f:nL},38:{f:xO},39:{f:xO},40:{f:xO},41:{f:xO},42:{f:vF},43:{f:vF},47:{f:function(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?GL(e,t-2,n):function(e,t,r,n){var a={key:yF(e),verificationBytes:yF(e)};r.password&&(a.verifier=$L(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=qL(r.password))}(e,r.biff,r,n),n}},49:{f:function(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10}return n.name=jF(e,0,r),n}},51:{f:yF},60:{},61:{f:function(e){return{Pos:[e.read_shift(2),e.read_shift(2)],Dim:[e.read_shift(2),e.read_shift(2)],Flags:e.read_shift(2),CurTab:e.read_shift(2),FirstTab:e.read_shift(2),Selected:e.read_shift(2),TabRatio:e.read_shift(2)}}},64:{f:vF},65:{f:function(){}},66:{f:yF},77:{},80:{},81:{},82:{},85:{f:yF},89:{},90:{},91:{},92:{f:function(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=TF(e,0,r);return e.read_shift(t+n-e.l),a}},93:{f:function(e,t,r){if(r&&r.biff<8)return function(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((lL[n]||SM)(e,t,r)),{cmo:[a,n,s],ft:i}}(e,t,r);var n=$F(e),a=function(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(qF[a](e,r-e.l))}catch(ZJ){return e.l=r,n}}return e.l!=r&&(e.l=r),n}(e,t-22,n[1]);return{cmo:n,ft:a}}},94:{},95:{f:vF},96:{},97:{},99:{f:vF},125:{f:uL},128:{f:function(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(0!==t[0]&&t[0]--,0!==t[1]&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}},129:{f:function(e,t,r){var n=r&&8==r.biff||2==t?e.read_shift(2):(e.l+=t,0);return{fDialog:16&n,fBelow:64&n,fRight:128&n}}},130:{f:yF},131:{f:vF},132:{f:vF},133:{f:function(e,t,r){var n=e.read_shift(4),a=3&e.read_shift(1),s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule"}var i=jF(e,0,r);return 0===i.length&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}},134:{},140:{f:function(e){var t,r=[0,0];return t=e.read_shift(2),r[0]=SO[t]||t,t=e.read_shift(2),r[1]=SO[t]||t,r}},141:{f:yF},144:{},146:{f:function(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(MF(e));return r}},151:{},152:{},153:{},154:{},155:{},156:{f:yF},157:{},158:{},160:{f:fL},161:{f:function(e,t){var r={};return t<32||(e.l+=16,r.header=xO(e),r.footer=xO(e),e.l+=2),r}},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:function(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(BF(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}},190:{f:function(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}},193:{f:xF},197:{},198:{},199:{},200:{},201:{},202:{f:vF},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:yF},220:{},221:{f:vF},222:{},224:{f:function(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,n.data=function(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return a.patternType=CO[o>>26],n.cellStyles?(a.alc=7&s,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=15&i,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=127&o,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=127&l,a.icvBack=l>>7&127,a.fsxButton=l>>14&1,a):a}(e,0,n.fStyle,r),n}},225:{f:function(e,t){return 0===t||e.read_shift(2),1200}},226:{f:xF},227:{},229:{f:function(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(UF(e));return r}},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:function(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(SF(e));return s.Count=n,s.Unique=a,s}},253:{f:function(e){var t=OF(e);return t.isst=e.read_shift(4),t}},255:{f:function(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:wF},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:vF},353:{f:xF},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:function(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,1025==s||14849==s)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=kF(e,s),o=[];n>e.l;)o.push(EF(e));return[s,a,i,o]}},431:{f:vF},432:{},433:{},434:{},437:{},438:{f:function(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1];-1==[0,5,7,11,12,14].indexOf(s)?e.l+=6:function(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}(e);var i=e.read_shift(2);e.read_shift(2),yF(e);var o=e.read_shift(2);e.l+=o;for(var l=1;l<e.lens.length-1;++l){if(e.l-n!=e.lens[l])throw new Error("TxO: bad continue record");var c=e[e.l];if((a+=kF(e,e.lens[l+1]-e.lens[l]-1)).length>=(c?i:2*i))break}if(a.length!==i&&a.length!==2*i)throw new Error("cchText: "+i+" != "+a.length);return e.l=n+t,{t:a}}catch(ZJ){return e.l=n+t,{t:a}}}},439:{f:vF},440:{f:function(e,t){var r=UF(e);e.l+=16;var n=function(e,t){var r=e.l+t,n=e.read_shift(4);if(2!==n)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,l,c,d,u="";16&a&&(s=PF(e,e.l)),128&a&&(i=PF(e,e.l)),257===(257&a)&&(o=PF(e,e.l)),1===(257&a)&&(l=AF(e,e.l)),8&a&&(u=PF(e,e.l)),32&a&&(c=e.read_shift(16)),64&a&&(d=eF(e)),e.l=r;var h=i||o||l||"";h&&u&&(h+="#"+u),h||(h="#"+u),2&a&&"/"==h.charAt(0)&&"/"!=h.charAt(1)&&(h="file://"+h);var f={Target:h};return c&&(f.guid=c),d&&(f.time=d),s&&(f.Tooltip=s),f}(e,t-24);return[r,n]}},441:{},442:{f:EF},443:{},444:{f:yF},445:{},446:{},448:{f:xF},449:{f:function(e){return e.read_shift(2),e.read_shift(4)},r:2},450:{f:xF},512:{f:ZF},513:{f:hL},515:{f:function(e,t,r){r.biffguess&&2==r.biff&&(r.biff=5);var n=OF(e),a=xO(e);return n.val=a,n}},516:{f:function(e,t,r){r.biffguess&&2==r.biff&&(r.biff=5),e.l;var n=OF(e);2==r.biff&&e.l++;var a=EF(e,e.l,r);return n.val=a,n}},517:{f:tL},519:{f:mL},520:{f:function(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,7&n&&(t.level=7&n),32&n&&(t.hidden=!0),64&n&&(t.hpt=r/20),t}},523:{},545:{f:oL},549:{f:XF},566:{},574:{f:function(e,t,r){return r&&r.biff>=2&&r.biff<5?{}:{RTL:64&e.read_shift(2)}}},638:{f:function(e){var t=e.read_shift(2),r=e.read_shift(2),n=BF(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}},659:{},1048:{},1054:{f:function(e,t,r){return[e.read_shift(2),TF(e,0,r)]}},1084:{},1212:{f:function(e,t,r){var n=VF(e);e.l++;var a=e.read_shift(1);return[kU(e,t-=8,r),a,n]}},2048:{f:function(e,t){e.read_shift(2);var r=UF(e),n=e.read_shift((t-10)/2,"dbcs-cont");return[r,n=n.replace(a_,"")]}},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:GF},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:xF},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:function(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t},r:12},2173:{f:function(e,t){e.l,e.l+=2;var r=e.read_shift(2);e.l+=2;for(var n=e.read_shift(2),a=[];n-- >0;)a.push(OB(e,e.l));return{ixfe:r,ext:a}},r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:vF,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:function(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2);return[kF(e,n,r),kF(e,a,r)]}e.l+=t},r:12},2197:{},2198:{f:function(e,t,r){var n=e.l+t;if(124226!==e.read_shift(4))if(r.cellStyles){var a,s=e.slice(e.l);e.l=n;try{a=OR(s,{type:"array"})}catch(ZJ){return}var i=PR(a,"theme/theme/theme1.xml",!0);if(i)return RB(i,r)}else e.l=n},r:12},2199:{},2200:{},2201:{},2202:{f:function(e){return[0!==e.read_shift(4),0!==e.read_shift(4),e.read_shift(4)]},r:12},2203:{f:xF},2204:{},2205:{},2206:{},2207:{},2211:{f:function(e){var t=function(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}(e);if(2211!=t.type)throw new Error("Invalid Future Record "+t.type);return 0!==e.read_shift(4)}},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:yF},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:function(e,t,r){var n={area:!1};if(5!=r.biff)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,16&a&&(n.area=!0),n}},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:function(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(MF(e));return r}},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:ZF},1:{},2:{f:function(e){var t=OF(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}},3:{f:function(e){var t=OF(e);++e.l;var r=xO(e);return t.t="n",t.val=r,t}},4:{f:function(e,t,r){r.biffguess&&5==r.biff&&(r.biff=2);var n=OF(e);++e.l;var a=TF(e,0,r);return n.t="str",n.val=a,n}},5:{f:tL},7:{f:function(e){var t=e.read_shift(1);return 0===t?(e.l++,""):e.read_shift(t,"sbcs-cont")}},8:{},9:{f:GF},11:{},22:{f:yF},30:{f:JF},31:{},32:{},33:{f:oL},36:{},37:{f:XF},50:{f:function(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}},62:{},52:{},67:{},68:{f:yF},69:{},86:{},126:{},127:{f:function(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:function(e,t,r){var n=e.l+t,a=OF(e),s=e.read_shift(2),i=kF(e,s,r);return e.l=n,a.t="str",a.val=i,a}},223:{},234:{},354:{},421:{},518:{f:EU},521:{f:GF},536:{f:sL},547:{f:nL},561:{},579:{},1030:{f:EU},1033:{f:GF},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function RV(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&cM(r)&&e.push(r)}}function IV(e,t,r){return e||(e=CM(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function MV(e,t,r,n){if(null!=t.v)switch(t.t){case"d":case"n":var a="d"==t.t?cR(gR(t.v)):t.v;return void(a==(0|a)&&a>=0&&a<65536?RV(e,2,function(e,t,r){var n=CM(9);return IV(n,e,t),n.write_shift(2,r),n}(r,n,a)):RV(e,3,function(e,t,r){var n=CM(15);return IV(n,e,t),n.write_shift(8,r,"f"),n}(r,n,a)));case"b":case"e":return void RV(e,5,function(e,t,r,n){var a=CM(9);return IV(a,e,t),NF(r,n||"b",a),a}(r,n,t.v,t.t));case"s":case"str":return void RV(e,4,function(e,t,r){var n=CM(8+2*r.length);return IV(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}(r,n,(t.v||"").slice(0,255)))}RV(e,1,IV(null,r,n))}function OV(e,t){var r=t||{};for(var n=EM(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(0==a&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return RV(n,4==r.biff?1033:3==r.biff?521:9,KF(0,16,r)),function(e,t,r,n){var a,s=Array.isArray(t),i=zM(t["!ref"]||"A1"),o="",l=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),a=UM(i)}for(var c=i.s.r;c<=i.e.r;++c){o=IM(c);for(var d=i.s.c;d<=i.e.c;++d){c===i.s.r&&(l[d]=OM(d)),a=l[d]+o;var u=s?(t[c]||[])[d]:t[a];u&&MV(e,u,c,d)}}}(n,e.Sheets[e.SheetNames[a]],0,r),RV(n,10),n.end()}function FV(e,t,r){RV(e,49,function(e,t){var r=e.name||"Arial",n=t&&5==t.biff,a=CM(n?15+r.length:16+2*r.length);return a.write_shift(2,20*(e.sz||12)),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function LV(e,t){if(t){var r=0;t.forEach((function(t,n){++r<=256&&t&&RV(e,125,function(e,t){var r=CM(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,256*e.width),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}($U(n,t),n))}))}}function BV(e,t,r,n,a){var s=16+qU(a.cellXfs,t,a);if(null!=t.v||t.bf)if(t.bf)RV(e,6,TU(t,r,n,0,s));else switch(t.t){case"d":case"n":RV(e,515,function(e,t,r,n){var a=CM(14);return FF(e,t,n,a),vO(r,a),a}(r,n,"d"==t.t?cR(gR(t.v)):t.v,s));break;case"b":case"e":RV(e,517,function(e,t,r,n,a,s){var i=CM(8);return FF(e,t,n,i),NF(r,s,i),i}(r,n,t.v,s,0,t.t));break;case"s":case"str":if(a.bookSST)RV(e,253,function(e,t,r,n){var a=CM(10);return FF(e,t,n,a),a.write_shift(4,r),a}(r,n,HU(a.Strings,t.v,a.revStrings),s));else RV(e,516,function(e,t,r,n,a){var s=!a||8==a.biff,i=CM(+s+8+(1+s)*r.length);return FF(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}(r,n,(t.v||"").slice(0,255),s,a));break;default:RV(e,513,FF(r,n,s))}else RV(e,513,FF(r,n,s))}function UV(e,t,r){var n,a=EM(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=8==t.biff,u="",h=[],f=zM(i["!ref"]||"A1"),m=d?65536:16384;if(f.e.c>255||f.e.r>=m){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,m-1)}RV(a,2057,KF(0,16,t)),RV(a,13,bF(1)),RV(a,12,bF(100)),RV(a,15,gF(!0)),RV(a,17,gF(!1)),RV(a,16,vO(.001)),RV(a,95,gF(!0)),RV(a,42,gF(!1)),RV(a,43,gF(!1)),RV(a,130,bF(1)),RV(a,128,function(e){var t=CM(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),RV(a,131,gF(!1)),RV(a,132,gF(!1)),d&&LV(a,i["!cols"]),RV(a,512,function(e,t){var r=8!=t.biff&&t.biff?2:4,n=CM(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}(f,t)),d&&(i["!links"]=[]);for(var p=f.s.r;p<=f.e.r;++p){u=IM(p);for(var x=f.s.c;x<=f.e.c;++x){p===f.s.r&&(h[x]=OM(x)),n=h[x]+u;var v=c?(i[p]||[])[x]:i[n];v&&(BV(a,v,p,x,t),d&&v.l&&i["!links"].push([n,v.l]))}}var g=l.CodeName||l.name||s;return d&&RV(a,574,function(e){var t=CM(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&RV(a,229,function(e){var t=CM(2+8*e.length);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)zF(e[r],t);return t}(i["!merges"])),d&&function(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];RV(e,440,cL(n)),n[1].Tooltip&&RV(e,2048,dL(n))}delete t["!links"]}(a,i),RV(a,442,DF(g)),d&&function(e,t){var r=CM(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),RV(e,2151,r),(r=CM(39)).write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),zF(zM(t["!ref"]||"A1"),r),r.write_shift(4,4),RV(e,2152,r)}(a,i),RV(a,10),a.end()}function zV(e,t,r){var n=EM(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=8==r.biff,l=5==r.biff;(RV(n,2057,KF(0,5,r)),"xla"==r.bookType&&RV(n,135),RV(n,225,o?bF(1200):null),RV(n,193,function(e,t){t||(t=CM(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}(2)),l&&RV(n,191),l&&RV(n,192),RV(n,226),RV(n,92,function(e,t){var r=!t||8==t.biff,n=CM(r?112:54);for(n.write_shift(8==t.biff?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}(0,r)),RV(n,66,bF(o?1200:1252)),o&&RV(n,353,bF(0)),o&&RV(n,448),RV(n,317,function(e){for(var t=CM(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}(e.SheetNames.length)),o&&e.vbaraw&&RV(n,211),o&&e.vbaraw)&&RV(n,442,DF(i.CodeName||"ThisWorkbook"));RV(n,156,bF(17)),RV(n,25,gF(!1)),RV(n,18,gF(!1)),RV(n,19,bF(0)),o&&RV(n,431,gF(!1)),o&&RV(n,444,bF(0)),RV(n,61,function(){var e=CM(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),RV(n,64,gF(!1)),RV(n,141,bF(0)),RV(n,34,gF("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&rI(e.Workbook.WBProps.date1904)?"true":"false"}(e))),RV(n,14,gF(!0)),o&&RV(n,439,gF(!1)),RV(n,218,bF(0)),FV(n,0,r),function(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach((function(n){for(var a=n[0];a<=n[1];++a)null!=t[a]&&RV(e,1054,QF(a,t[a],r))}))}(n,e.SSF,r),function(e,t){for(var r=0;r<16;++r)RV(e,224,eL({numFmtId:0,style:!0},0,t));t.cellXfs.forEach((function(r){RV(e,224,eL(r,0,t))}))}(n,r),o&&RV(n,352,gF(!1));var c,d=n.end(),u=EM();o&&RV(u,140,(c||(c=CM(4)),c.write_shift(2,1),c.write_shift(2,1),c)),o&&r.Strings&&function(e,t,r,n){var a=n||(r||[]).length||0;if(a<=8224)return RV(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,l=0,c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c;l<a;){for((d=e.next(4)).write_shift(2,60),c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;d.write_shift(2,c),e.push(r.slice(l,l+c)),l+=c}}}(u,252,function(e){var t=CM(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var r=[],n=0;n<e.length;++n)r[n]=CF(e[n]);var a=n_([t].concat(r));return a.parts=[t.length].concat(r.map((function(e){return e.length}))),a}(r.Strings)),RV(u,10);var h=u.end(),f=EM(),m=0,p=0;for(p=0;p<e.SheetNames.length;++p)m+=(o?12:11)+(o?2:1)*e.SheetNames[p].length;var x=d.length+m+h.length;for(p=0;p<e.SheetNames.length;++p){RV(f,133,YF({pos:x,hs:(s[p]||{}).Hidden||0,dt:0,name:e.SheetNames[p]},r)),x+=t[p].length}var v=f.end();if(m!=v.length)throw new Error("BS8 "+m+" != "+v.length);var g=[];return d.length&&g.push(d),v.length&&g.push(v),h.length&&g.push(h),n_(g)}function VV(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(n&&n["!ref"])BM(n["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}var a=t||{};switch(a.biff||2){case 8:case 5:return function(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=bR(p_)),e&&e.SSF&&(X_(),Y_(e.SSF),r.revssf=oR(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,MH(r),r.cellXfs=[],qU(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=UV(a,r,e);return n.unshift(zV(e,n,r)),n_(n)}(e,t);case 4:case 3:case 2:return OV(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function HV(e,t){var r=t||{};var n=r.dense?[]:{},a=(e=e.replace(/<!--.*?-->/g,"")).match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,l=CR(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,d=0,u=0,h=0,f={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(i=0;i<l.length;++i){var p=l[i].trim(),x=p.slice(0,3).toLowerCase();if("<tr"!=x){if("<td"==x||"<th"==x){var v=p.split(/<\/t[dh]>/i);for(o=0;o<v.length;++o){var g=v[o].trim();if(g.match(/<t[dh]/i)){for(var y=g,b=0;"<"==y.charAt(0)&&(b=y.indexOf(">"))>-1;)y=y.slice(b+1);for(var w=0;w<m.length;++w){var N=m[w];N.s.c==d&&N.s.r<c&&c<=N.e.r&&(d=N.e.c+1,w=-1)}var j=$R(g.slice(0,g.indexOf(">")));h=j.colspan?+j.colspan:1,((u=+j.rowspan)>1||h>1)&&m.push({s:{r:c,c:d},e:{r:c+(u||1)-1,c:d+h-1}});var S=j.t||j["data-t"]||"";if(y.length)if(y=dI(y),f.s.r>c&&(f.s.r=c),f.e.r<c&&(f.e.r=c),f.s.c>d&&(f.s.c=d),f.e.c<d&&(f.e.c=d),y.length){var C={t:"s",v:y};r.raw||!y.trim().length||"s"==S||("TRUE"===y?C={t:"b",v:!0}:"FALSE"===y?C={t:"b",v:!1}:isNaN(NR(y))?isNaN(SR(y).getDate())||(C={t:"d",v:gR(y)},r.cellDates||(C={t:"n",v:cR(C.v)}),C.z=r.dateNF||p_[14]):C={t:"n",v:NR(y)}),r.dense?(n[c]||(n[c]=[]),n[c][d]=C):n[LM({r:c,c:d})]=C,d+=h}else d+=h;else d+=h}}}}else{if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}d=0}}return n["!ref"]=UM(f),m.length&&(n["!merges"]=m),n}function $V(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,c=0;c<a.length;++c)if(!(a[c].s.r>r||a[c].s.c>i)&&!(a[c].e.r<r||a[c].e.c<i)){if(a[c].s.r<r||a[c].s.c<i){o=-1;break}o=a[c].e.r-a[c].s.r+1,l=a[c].e.c-a[c].s.c+1;break}if(!(o<0)){var d=LM({r:r,c:i}),u=n.dense?(e[r]||[])[i]:e[d],h=u&&null!=u.v&&(u.h||eI(u.w||(HM(u),u.w)||""))||"",f={};o>1&&(f.rowspan=o),l>1&&(f.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":u&&(f["data-t"]=u&&u.t||"z",null!=u.v&&(f["data-v"]=u.v),null!=u.z&&(f["data-z"]=u.z),u.l&&"#"!=(u.l.Target||"#").charAt(0)&&(h='<a href="'+u.l.Target+'">'+h+"</a>")),f.id=(n.id||"sjs")+"-"+d,s.push(gI("td",h,f))}}return"<tr>"+s.join("")+"</tr>"}var WV='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',qV="</body></html>";function GV(e,t,r){return[].join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function KV(e,t){var r=t||{},n=null!=r.header?r.header:WV,a=null!=r.footer?r.footer:qV,s=[n],i=BM(e["!ref"]);r.dense=Array.isArray(e),s.push(GV(0,0,r));for(var o=i.s.r;o<=i.e.r;++o)s.push($V(e,i,o,r));return s.push("</table>"+a),s.join("")}function YV(e,t,r){var n=r||{};var a=0,s=0;if(null!=n.origin)if("number"==typeof n.origin)a=n.origin;else{var i="string"==typeof n.origin?FM(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=BM(e["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),-1==a&&(c.e.r=a=d.e.r+1)}var u=[],h=0,f=e["!rows"]||(e["!rows"]=[]),m=0,p=0,x=0,v=0,g=0,y=0;for(e["!cols"]||(e["!cols"]=[]);m<o.length&&p<l;++m){var b=o[m];if(QV(b)){if(n.display)continue;f[p]={hidden:!0}}var w=b.children;for(x=v=0;x<w.length;++x){var N=w[x];if(!n.display||!QV(N)){var j=N.hasAttribute("data-v")?N.getAttribute("data-v"):N.hasAttribute("v")?N.getAttribute("v"):dI(N.innerHTML),S=N.getAttribute("data-z")||N.getAttribute("z");for(h=0;h<u.length;++h){var C=u[h];C.s.c==v+s&&C.s.r<p+a&&p+a<=C.e.r&&(v=C.e.c+1-s,h=-1)}y=+N.getAttribute("colspan")||1,((g=+N.getAttribute("rowspan")||1)>1||y>1)&&u.push({s:{r:p+a,c:v+s},e:{r:p+a+(g||1)-1,c:v+s+(y||1)-1}});var k={t:"s",v:j},E=N.getAttribute("data-t")||N.getAttribute("t")||"";null!=j&&(0==j.length?k.t=E||"z":n.raw||0==j.trim().length||"s"==E||("TRUE"===j?k={t:"b",v:!0}:"FALSE"===j?k={t:"b",v:!1}:isNaN(NR(j))?isNaN(SR(j).getDate())||(k={t:"d",v:gR(j)},n.cellDates||(k={t:"n",v:cR(k.v)}),k.z=n.dateNF||p_[14]):k={t:"n",v:NR(j)})),void 0===k.z&&null!=S&&(k.z=S);var T="",D=N.getElementsByTagName("A");if(D&&D.length)for(var A=0;A<D.length&&(!D[A].hasAttribute("href")||"#"==(T=D[A].getAttribute("href")).charAt(0));++A);T&&"#"!=T.charAt(0)&&(k.l={Target:T}),n.dense?(e[p+a]||(e[p+a]=[]),e[p+a][v+s]=k):e[LM({c:v+s,r:p+a})]=k,c.e.c<v+s&&(c.e.c=v+s),v+=y}}++p}return u.length&&(e["!merges"]=(e["!merges"]||[]).concat(u)),c.e.r=Math.max(c.e.r,p-1+a),e["!ref"]=UM(c),p>=l&&(e["!fullref"]=UM((c.e.r=o.length-m+p-1+a,c))),e}function XV(e,t){return YV((t||{}).dense?[]:{},e,t)}function QV(e){var t="",r=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}function JV(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,(function(e,t){return Array(parseInt(t,10)+1).join(" ")})).replace(/<text:tab[^>]*\/>/g,"\t").replace(/<text:line-break\/>/g,"\n");return[KR(t.replace(/<[^>]*>/g,""))]}var ZV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function eH(e,t){var r=t||{};var n,a,s,i,o,l,c=bI(e),d=[],u={name:""},h="",f=0,m={},p=[],x=r.dense?[]:{},v={value:""},g="",y=0,b=[],w=-1,N=-1,j={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,C={},k=[],E={},T=[],D=1,A=1,P=[],_={Names:[]},R={},I=["",""],M=[],O={},F="",L=0,B=!1,U=!1,z=0;for(wI.lastIndex=0,c=c.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");o=wI.exec(c);)switch(o[3]=o[3].replace(/_.*$/,"")){case"table":case"\u5de5\u4f5c\u8868":"/"===o[1]?(j.e.c>=j.s.c&&j.e.r>=j.s.r?x["!ref"]=UM(j):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=j.e.r&&(x["!fullref"]=x["!ref"],j.e.r=r.sheetRows-1,x["!ref"]=UM(j)),k.length&&(x["!merges"]=k),T.length&&(x["!rows"]=T),s.name=s["\u540d\u79f0"]||s.name,"undefined"!==typeof JSON&&JSON.stringify(s),p.push(s.name),m[s.name]=x,U=!1):"/"!==o[0].charAt(o[0].length-2)&&(s=$R(o[0],!1),w=N=-1,j.s.r=j.s.c=1e7,j.e.r=j.e.c=0,x=r.dense?[]:{},k=[],T=[],U=!0);break;case"table-row-group":"/"===o[1]?--S:++S;break;case"table-row":case"\u884c":if("/"===o[1]){w+=D,D=1;break}if((i=$R(o[0],!1))["\u884c\u53f7"]?w=i["\u884c\u53f7"]-1:-1==w&&(w=0),(D=+i["number-rows-repeated"]||1)<10)for(z=0;z<D;++z)S>0&&(T[w+z]={level:S});N=-1;break;case"covered-table-cell":"/"!==o[1]&&++N,r.sheetStubs&&(r.dense?(x[w]||(x[w]=[]),x[w][N]={t:"z"}):x[LM({r:w,c:N})]={t:"z"}),g="",b=[];break;case"table-cell":case"\u6570\u636e":if("/"===o[0].charAt(o[0].length-2))++N,v=$R(o[0],!1),A=parseInt(v["number-columns-repeated"]||"1",10),l={t:"z",v:null},v.formula&&0!=r.cellFormula&&(l.f=FU(KR(v.formula))),"string"==(v["\u6570\u636e\u7c7b\u578b"]||v["value-type"])&&(l.t="s",l.v=KR(v["string-value"]||""),r.dense?(x[w]||(x[w]=[]),x[w][N]=l):x[LM({r:w,c:N})]=l),N+=A-1;else if("/"!==o[1]){g="",y=0,b=[],A=1;var V=D?w+D-1:w;if(++N>j.e.c&&(j.e.c=N),N<j.s.c&&(j.s.c=N),w<j.s.r&&(j.s.r=w),V>j.e.r&&(j.e.r=V),M=[],O={},l={t:(v=$R(o[0],!1))["\u6570\u636e\u7c7b\u578b"]||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=KR(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(E={s:{r:w,c:N},e:{r:w+(parseInt(v["number-matrix-rows-spanned"],10)||0)-1,c:N+(parseInt(v["number-matrix-columns-spanned"],10)||0)-1}},l.F=UM(E),P.push([E,l.F])),v.formula)l.f=FU(v.formula);else for(z=0;z<P.length;++z)w>=P[z][0].s.r&&w<=P[z][0].e.r&&N>=P[z][0].s.c&&N<=P[z][0].e.c&&(l.F=P[z][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(E={s:{r:w,c:N},e:{r:w+(parseInt(v["number-rows-spanned"],10)||0)-1,c:N+(parseInt(v["number-columns-spanned"],10)||0)-1}},k.push(E)),v["number-columns-repeated"]&&(A=parseInt(v["number-columns-repeated"],10)),l.t){case"boolean":l.t="b",l.v=rI(v["boolean-value"]);break;case"float":case"percentage":case"currency":l.t="n",l.v=parseFloat(v.value);break;case"date":l.t="d",l.v=gR(v["date-value"]),r.cellDates||(l.t="n",l.v=cR(l.v)),l.z="m/d/yy";break;case"time":l.t="n",l.v=mR(v["time-value"])/86400,r.cellDates&&(l.t="d",l.v=fR(l.v)),l.z="HH:MM:SS";break;case"number":l.t="n",l.v=parseFloat(v["\u6570\u636e\u6570\u503c"]);break;default:if("string"!==l.t&&"text"!==l.t&&l.t)throw new Error("Unsupported value type "+l.t);l.t="s",null!=v["string-value"]&&(g=KR(v["string-value"]),b=[])}}else{if(B=!1,"s"===l.t&&(l.v=g||"",b.length&&(l.R=b),B=0==y),R.Target&&(l.l=R),M.length>0&&(l.c=M,M=[]),g&&!1!==r.cellText&&(l.w=g),B&&(l.t="z",delete l.v),(!B||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=w))for(var H=0;H<D;++H){if(A=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(x[w+H]||(x[w+H]=[]),x[w+H][N]=0==H?l:bR(l);--A>0;)x[w+H][N+A]=bR(l);else for(x[LM({r:w+H,c:N})]=l;--A>0;)x[LM({r:w+H,c:N+A})]=bR(l);j.e.c<=N&&(j.e.c=N)}N+=(A=parseInt(v["number-columns-repeated"]||"1",10))-1,A=0,l={},g="",b=[]}R={};break;case"document":case"document-content":case"\u7535\u5b50\u8868\u683c\u6587\u6863":case"spreadsheet":case"\u4e3b\u4f53":case"scripts":case"styles":case"font-face-decls":case"master-styles":if("/"===o[1]){if((n=d.pop())[0]!==o[3])throw"Bad state: "+n}else"/"!==o[0].charAt(o[0].length-2)&&d.push([o[3],!0]);break;case"annotation":if("/"===o[1]){if((n=d.pop())[0]!==o[3])throw"Bad state: "+n;O.t=g,b.length&&(O.R=b),O.a=F,M.push(O)}else"/"!==o[0].charAt(o[0].length-2)&&d.push([o[3],!1]);F="",L=0,g="",y=0,b=[];break;case"creator":"/"===o[1]?F=c.slice(L,o.index):L=o.index+o[0].length;break;case"meta":case"\u5143\u6570\u636e":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if("/"===o[1]){if((n=d.pop())[0]!==o[3])throw"Bad state: "+n}else"/"!==o[0].charAt(o[0].length-2)&&d.push([o[3],!1]);g="",y=0,b=[];break;case"scientific-number":case"currency-symbol":case"currency-style":case"script":case"libraries":case"automatic-styles":case"default-style":case"page-layout":case"style":case"map":case"font-face":case"paragraph-properties":case"table-properties":case"table-column-properties":case"table-row-properties":case"table-cell-properties":case"fraction":case"boolean-style":case"boolean":case"text-style":case"text-content":case"text-properties":case"embedded-text":case"body":case"\u7535\u5b50\u8868\u683c":case"forms":case"table-column":case"table-header-rows":case"table-rows":case"table-column-group":case"table-header-columns":case"table-columns":case"null-date":case"graphic-properties":case"calculation-settings":case"named-expressions":case"label-range":case"label-ranges":case"named-expression":case"sort":case"sort-by":case"sort-groups":case"tab":case"line-break":case"span":case"s":case"date":case"object":case"title":case"\u6807\u9898":case"desc":case"binary-data":case"table-source":case"scenario":case"iteration":case"content-validations":case"content-validation":case"help-message":case"error-message":case"database-ranges":case"filter":case"filter-and":case"filter-or":case"filter-condition":case"list-level-style-bullet":case"list-level-style-number":case"list-level-properties":case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":case"event-listener":case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":case"config-item":case"page-number":case"page-count":case"time":case"cell-range-source":case"detective":case"operation":case"highlighted-range":case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":case"rect":case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":case"properties":case"property":case"table-protection":case"data-pilot-grand-total":case"office-document-common-attrs":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if("/"===o[1]){if(C[u.name]=h,(n=d.pop())[0]!==o[3])throw"Bad state: "+n}else"/"!==o[0].charAt(o[0].length-2)&&(h="",u=$R(o[0],!1),d.push([o[3],!0]));break;case"number":case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(d[d.length-1][0]){case"time-style":case"date-style":a=$R(o[0],!1),h+=ZV[o[3]]["long"===a.style?1:0]}break;case"text":if("/>"===o[0].slice(-2))break;if("/"===o[1])switch(d[d.length-1][0]){case"number-style":case"date-style":case"time-style":h+=c.slice(f,o.index)}else f=o.index+o[0].length;break;case"named-range":I=LU((a=$R(o[0],!1))["cell-range-address"]);var $={Name:a.name,Ref:I[0]+"!"+I[1]};U&&($.Sheet=p.length),_.Names.push($);break;case"p":case"\u6587\u672c\u4e32":if(["master-styles"].indexOf(d[d.length-1][0])>-1)break;if("/"!==o[1]||v&&v["string-value"])$R(o[0],!1),y=o.index+o[0].length;else{var W=JV(c.slice(y,o.index));g=(g.length>0?g+"\n":"")+W[0]}break;case"database-range":if("/"===o[1])break;try{m[(I=LU($R(o[0])["target-range-address"]))[0]]["!autofilter"]={ref:I[1]}}catch(ZJ){}break;case"a":if("/"!==o[1]){if(!(R=$R(o[0],!1)).href)break;R.Target=KR(R.href),delete R.href,"#"==R.Target.charAt(0)&&R.Target.indexOf(".")>-1?(I=LU(R.Target.slice(1)),R.Target="#"+I[0]+"!"+I[1]):R.Target.match(/^\.\.[\\\/]/)&&(R.Target=R.Target.slice(3))}break;default:switch(o[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"\u8868:":case"\u5b57:":break;default:if(r.WTF)throw new Error(o)}}var q={Sheets:m,SheetNames:p,Workbook:_};return r.bookSheets&&delete q.Sheets,q}function tH(e,t){t=t||{},TR(e,"META-INF/manifest.xml")&&function(e,t){for(var r,n,a=bI(e);r=wI.exec(a);)switch(r[3]){case"manifest":break;case"file-entry":if("/"==(n=$R(r[0],!1)).path&&"application/vnd.oasis.opendocument.spreadsheet"!==n.type)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw r}}(AR(e,"META-INF/manifest.xml"),t);var r=PR(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=eH(oI(r),t);return TR(e,"meta.xml")&&(n.Props=VO(AR(e,"meta.xml"))),n}function rH(e,t){return eH(e,t)}var nH=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+vI({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return LR+t}}(),aH=function(){var e="          <table:table-cell />\n",t=function(t,r,n){var a=[];a.push('      <table:table table:name="'+QR(r.SheetNames[n])+'" table:style-name="ta1">\n');var s=0,i=0,o=BM(t["!ref"]||"A1"),l=t["!merges"]||[],c=0,d=Array.isArray(t);if(t["!cols"])for(i=0;i<=o.e.c;++i)a.push("        <table:table-column"+(t["!cols"][i]?' table:style-name="co'+t["!cols"][i].ods+'"':"")+"></table:table-column>\n");var u="",h=t["!rows"]||[];for(s=0;s<o.s.r;++s)u=h[s]?' table:style-name="ro'+h[s].ods+'"':"",a.push("        <table:table-row"+u+"></table:table-row>\n");for(;s<=o.e.r;++s){for(u=h[s]?' table:style-name="ro'+h[s].ods+'"':"",a.push("        <table:table-row"+u+">\n"),i=0;i<o.s.c;++i)a.push(e);for(;i<=o.e.c;++i){var f=!1,m={},p="";for(c=0;c!=l.length;++c)if(!(l[c].s.c>i)&&!(l[c].s.r>s)&&!(l[c].e.c<i)&&!(l[c].e.r<s)){l[c].s.c==i&&l[c].s.r==s||(f=!0),m["table:number-columns-spanned"]=l[c].e.c-l[c].s.c+1,m["table:number-rows-spanned"]=l[c].e.r-l[c].s.r+1;break}if(f)a.push("          <table:covered-table-cell/>\n");else{var x=LM({r:s,c:i}),v=d?(t[s]||[])[i]:t[x];if(v&&v.f&&(m["table:formula"]=QR(("of:="+v.f.replace(KB,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")),v.F&&v.F.slice(0,x.length)==x)){var g=BM(v.F);m["table:number-matrix-columns-spanned"]=g.e.c-g.s.c+1,m["table:number-matrix-rows-spanned"]=g.e.r-g.s.r+1}if(v){switch(v.t){case"b":p=v.v?"TRUE":"FALSE",m["office:value-type"]="boolean",m["office:boolean-value"]=v.v?"true":"false";break;case"n":p=v.w||String(v.v||0),m["office:value-type"]="float",m["office:value"]=v.v||0;break;case"s":case"str":p=null==v.v?"":v.v,m["office:value-type"]="string";break;case"d":p=v.w||gR(v.v).toISOString(),m["office:value-type"]="date",m["office:date-value"]=gR(v.v).toISOString(),m["table:style-name"]="ce1";break;default:a.push(e);continue}var y=QR(p).replace(/  +/g,(function(e){return'<text:s text:c="'+e.length+'"/>'})).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>");if(v.l&&v.l.Target){var b=v.l.Target;"#"==(b="#"==b.charAt(0)?"#"+BU(b.slice(1)):b).charAt(0)||b.match(/^\w+:/)||(b="../"+b),y=gI("text:a",y,{"xlink:href":b.replace(/&/g,"&amp;")})}a.push("          "+gI("table:table-cell",gI("text:p",y,{}),m)+"\n")}else a.push(e)}}a.push("        </table:table-row>\n")}return a.push("      </table:table>\n"),a.join("")};return function(e,r){var n=[LR],a=vI({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),s=vI({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==r.bookType?(n.push("<office:document"+a+s+">\n"),n.push(BO().replace(/office:document-meta/g,"office:meta"))):n.push("<office:document-content"+a+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var r=0;t.SheetNames.map((function(e){return t.Sheets[e]})).forEach((function(t){if(t&&t["!cols"])for(var n=0;n<t["!cols"].length;++n)if(t["!cols"][n]){var a=t["!cols"][n];if(null==a.width&&null==a.wpx&&null==a.wch)continue;nB(a),a.ods=r;var s=t["!cols"][n].wpx+"px";e.push('  <style:style style:name="co'+r+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+s+'"/>\n'),e.push("  </style:style>\n"),++r}}));var n=0;t.SheetNames.map((function(e){return t.Sheets[e]})).forEach((function(t){if(t&&t["!rows"])for(var r=0;r<t["!rows"].length;++r)if(t["!rows"][r]){t["!rows"][r].ods=n;var a=t["!rows"][r].hpx+"px";e.push('  <style:style style:name="ro'+n+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+a+'"/>\n'),e.push("  </style:style>\n"),++n}})),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(n,e),n.push("  <office:body>\n"),n.push("    <office:spreadsheet>\n");for(var i=0;i!=e.SheetNames.length;++i)n.push(t(e.Sheets[e.SheetNames[i]],e,i));return n.push("    </office:spreadsheet>\n"),n.push("  </office:body>\n"),"fods"==r.bookType?n.push("</office:document>"):n.push("</office:document-content>"),n.join("")}}();function sH(e,t){if("fods"==t.bookType)return aH(e,t);var r=MR(),n="",a=[],s=[];return IR(r,n="mimetype","application/vnd.oasis.opendocument.spreadsheet"),IR(r,n="content.xml",aH(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),IR(r,n="styles.xml",nH(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),IR(r,n="meta.xml",LR+BO()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),IR(r,n="manifest.rdf",function(e){var t,r,n=[LR];n.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var a=0;a!=e.length;++a)n.push(LO(e[a][0],e[a][1])),n.push((t="",r=e[a][0],['  <rdf:Description rdf:about="'+t+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+r+'"/>\n',"  </rdf:Description>\n"].join("")));return n.push(LO("","Document","pkg")),n.push("</rdf:RDF>"),n.join("")}(s)),a.push([n,"application/rdf+xml"]),IR(r,n="META-INF/manifest.xml",function(e){var t=[LR];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(a)),r}function iH(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function oH(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):oI(t_(e))}function lH(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):ZP(lI(e))}function cH(e){var t=e.reduce((function(e,t){return e+t.length}),0),r=new Uint8Array(t),n=0;return e.forEach((function(e){r.set(e,n),n+=e.length})),r}function dH(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>>24}function uH(e,t){var r=t?t[0]:0,n=127&e[r];e:if(e[r++]>=128){if(n|=(127&e[r])<<7,e[r++]<128)break e;if(n|=(127&e[r])<<14,e[r++]<128)break e;if(n|=(127&e[r])<<21,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,28),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,35),++r,e[r++]<128)break e;if(n+=(127&e[r])*Math.pow(2,42),++r,e[r++]<128)break e}return t&&(t[0]=r),n}function hH(e){var t=new Uint8Array(7);t[0]=127&e;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383)break e;if(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)break e;if(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)break e;if(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)break e;if(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103)break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function fH(e){var t=0,r=127&e[t];e:if(e[t++]>=128){if(r|=(127&e[t])<<7,e[t++]<128)break e;if(r|=(127&e[t])<<14,e[t++]<128)break e;if(r|=(127&e[t])<<21,e[t++]<128)break e;r|=(127&e[t])<<28}return r}function mH(e){for(var t=[],r=[0];r[0]<e.length;){var n,a=r[0],s=uH(e,r),i=7&s,o=0;if(0==(s=Math.floor(s/8)))break;switch(i){case 0:for(var l=r[0];e[r[0]++]>=128;);n=e.slice(l,r[0]);break;case 5:o=4,n=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,n=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=uH(e,r),n=e.slice(r[0],r[0]+o),r[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var c={data:n,type:i};null==t[s]?t[s]=[c]:t[s].push(c)}return t}function pH(e){var t=[];return e.forEach((function(e,r){e.forEach((function(e){e.data&&(t.push(hH(8*r+e.type)),2==e.type&&t.push(hH(e.data.length)),t.push(e.data))}))})),cH(t)}function xH(e,t){return(null==e?void 0:e.map((function(e){return t(e.data)})))||[]}function vH(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=uH(e,n),s=mH(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:fH(s[1][0].data),messages:[]};s[2].forEach((function(t){var r=mH(t.data),a=fH(r[3][0].data);i.messages.push({meta:r,data:e.slice(n[0],n[0]+a)}),n[0]+=a})),(null==(t=s[3])?void 0:t[0])&&(i.merge=fH(s[3][0].data)>>>0>0),r.push(i)}return r}function gH(e){var t=[];return e.forEach((function(e){var r=[];r[1]=[{data:hH(e.id),type:0}],r[2]=[],null!=e.merge&&(r[3]=[{data:hH(+!!e.merge),type:0}]);var n=[];e.messages.forEach((function(e){n.push(e.data),e.meta[3]=[{type:0,data:hH(e.data.length)}],r[2].push({data:pH(e.meta),type:2})}));var a=pH(r);t.push(hH(a.length)),t.push(a),n.forEach((function(e){return t.push(e)}))})),cH(t)}function yH(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=uH(t,r),a=[];r[0]<t.length;){var s=3&t[r[0]];if(0!=s){var i=0,o=0;if(1==s?(o=4+(t[r[0]]>>2&7),i=(224&t[r[0]++])<<3,i|=t[r[0]++]):(o=1+(t[r[0]++]>>2),2==s?(i=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(i=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[cH(a)],0==i)throw new Error("Invalid offset 0");if(i>a[0].length)throw new Error("Invalid offset beyond length");if(o>=i)for(a.push(a[0].slice(-i)),o-=i;o>=a[a.length-1].length;)a.push(a[a.length-1]),o-=a[a.length-1].length;a.push(a[0].slice(-i,-i+o))}else{var l=t[r[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[r[0]],c>1&&(l|=t[r[0]+1]<<8),c>2&&(l|=t[r[0]+2]<<16),c>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=c}a.push(t.slice(r[0],r[0]+l)),r[0]+=l}}var d=cH(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function bH(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(yH(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return cH(t)}function wH(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=hH(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=255&i,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return cH(t)}function NH(e,t,r){var n,a=iH(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);switch(1&s&&(c=function(e,t){for(var r=(127&e[t+15])<<7|e[t+14]>>1,n=1&e[t+14],a=t+13;a>=t;--a)n=256*n+e[a];return(128&e[t+15]?-n:n)*Math.pow(10,r-6176)}(e,i),i+=16),2&s&&(d=a.getFloat64(i,!0),i+=8),4&s&&(u.setTime(u.getTime()+1e3*a.getFloat64(i,!0)),i+=8),8&s&&(l=a.getUint32(i,!0),i+=4),16&s&&(o=a.getUint32(i,!0),i+=4),e[1]){case 0:break;case 2:case 10:n={t:"n",v:c};break;case 3:n={t:"s",v:t[l]};break;case 5:n={t:"d",v:u};break;case 6:n={t:"b",v:d>0};break;case 7:n={t:"n",v:d/86400};break;case 8:n={t:"e",v:0};break;case 9:if(!(o>-1))throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&s," : ").concat(e.slice(0,4)));n={t:"s",v:r[o]};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&s," : ").concat(e.slice(0,4)))}return n}function jH(e,t){var r=new Uint8Array(32),n=iH(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,function(e,t,r){var n=Math.floor(0==r?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(127&n)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=255&a;e[t+15]|=r>=0?0:128}(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function SH(e,t){var r=new Uint8Array(32),n=iH(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function CH(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return function(e,t,r,n){var a,s=iH(e),i=s.getUint32(4,!0),o=(n>1?12:8)+4*dH(i&(n>1?3470:398)),l=-1,c=-1,d=NaN,u=new Date(2001,0,1);switch(512&i&&(l=s.getUint32(o,!0),o+=4),o+=4*dH(i&(n>1?12288:4096)),16&i&&(c=s.getUint32(o,!0),o+=4),32&i&&(d=s.getFloat64(o,!0),o+=8),64&i&&(u.setTime(u.getTime()+1e3*s.getFloat64(o,!0)),o+=8),e[2]){case 0:break;case 2:a={t:"n",v:d};break;case 3:a={t:"s",v:t[c]};break;case 5:a={t:"d",v:u};break;case 6:a={t:"b",v:d>0};break;case 7:a={t:"n",v:d/86400};break;case 8:a={t:"e",v:0};break;case 9:if(l>-1)a={t:"s",v:r[l]};else if(c>-1)a={t:"s",v:t[c]};else{if(isNaN(d))throw new Error("Unsupported cell type ".concat(e.slice(0,4)));a={t:"n",v:d}}break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return a}(e,t,r,e[0]);case 5:return NH(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function kH(e){return uH(mH(e)[1][0].data)}function EH(e,t){var r=mH(t.data),n=fH(r[1][0].data),a=r[3],s=[];return(a||[]).forEach((function(t){var r=mH(t.data),a=fH(r[1][0].data)>>>0;switch(n){case 1:s[a]=oH(r[3][0].data);break;case 8:var i=mH(e[kH(r[9][0].data)][0].data),o=e[kH(i[1][0].data)][0],l=fH(o.meta[1][0].data);if(2001!=l)throw new Error("2000 unexpected reference to ".concat(l));var c=mH(o.data);s[a]=c[3].map((function(e){return oH(e.data)})).join("")}})),s}function TH(e,t){var r,n=mH(t.data),a=(null==(r=null==n?void 0:n[7])?void 0:r[0])?fH(n[7][0].data)>>>0>0?1:0:-1,s=xH(n[5],(function(e){return function(e,t){var r,n,a,s,i,o,l,c,d,u,h,f,m,p,x,v,g=mH(e),y=fH(g[1][0].data)>>>0,b=fH(g[2][0].data)>>>0,w=(null==(n=null==(r=g[8])?void 0:r[0])?void 0:n.data)&&fH(g[8][0].data)>0||!1;if((null==(s=null==(a=g[7])?void 0:a[0])?void 0:s.data)&&0!=t)x=null==(o=null==(i=g[7])?void 0:i[0])?void 0:o.data,v=null==(c=null==(l=g[6])?void 0:l[0])?void 0:c.data;else{if(!(null==(u=null==(d=g[4])?void 0:d[0])?void 0:u.data)||1==t)throw"NUMBERS Tile missing ".concat(t," cell storage");x=null==(f=null==(h=g[4])?void 0:h[0])?void 0:f.data,v=null==(p=null==(m=g[3])?void 0:m[0])?void 0:p.data}for(var N=w?4:1,j=iH(x),S=[],C=0;C<x.length/2;++C){var k=j.getUint16(2*C,!0);k<65535&&S.push([C,k])}if(S.length!=b)throw"Expected ".concat(b," cells, found ").concat(S.length);var E=[];for(C=0;C<S.length-1;++C)E[S[C][0]]=v.subarray(S[C][1]*N,S[C+1][1]*N);return S.length>=1&&(E[S[S.length-1][0]]=v.subarray(S[S.length-1][1]*N)),{R:y,cells:E}}(e,a)}));return{nrows:fH(n[4][0].data)>>>0,data:s.reduce((function(e,t){return e[t.R]||(e[t.R]=[]),t.cells.forEach((function(r,n){if(e[t.R][n])throw new Error("Duplicate cell r=".concat(t.R," c=").concat(n));e[t.R][n]=r})),e}),[])}}function DH(e,t){var r={"!ref":"A1"},n=e[kH(mH(t.data)[2][0].data)],a=fH(n[0].meta[1][0].data);if(6001!=a)throw new Error("6000 unexpected reference to ".concat(a));return function(e,t,r){var n,a=mH(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(fH(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(fH(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=UM(s);var i=mH(a[4][0].data),o=EH(e,e[kH(i[4][0].data)][0]),l=(null==(n=i[17])?void 0:n[0])?EH(e,e[kH(i[17][0].data)][0]):[],c=mH(i[3][0].data),d=0;c[1].forEach((function(t){var n=mH(t.data),a=e[kH(n[2][0].data)][0],s=fH(a.meta[1][0].data);if(6002!=s)throw new Error("6001 unexpected reference to ".concat(s));var i=TH(0,a);i.data.forEach((function(e,t){e.forEach((function(e,n){var a=LM({r:d+t,c:n}),s=CH(e,o,l);s&&(r[a]=s)}))})),d+=i.nrows}))}(e,n[0],r),r}function AH(e,t){var r={SheetNames:[],Sheets:{}};if(xH(mH(t.data)[1],kH).forEach((function(t){e[t].forEach((function(t){if(2==fH(t.meta[1][0].data)){var n=function(e,t){var r,n=mH(t.data),a={name:(null==(r=n[1])?void 0:r[0])?oH(n[1][0].data):"",sheets:[]};return xH(n[2],kH).forEach((function(t){e[t].forEach((function(t){6e3==fH(t.meta[1][0].data)&&a.sheets.push(DH(e,t))}))})),a}(e,t);n.sheets.forEach((function(e,t){o$(r,e,0==t?n.name:n.name+"_"+t,!0)}))}}))})),0==r.SheetNames.length)throw new Error("Empty NUMBERS file");return r}function PH(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach((function(e){if(e.match(/\.iwpv2/))throw new Error("Unsupported password protection")})),e.FileIndex.forEach((function(e){if(e.name.match(/\.iwa$/)){var t,r;try{t=bH(e.content)}catch(ZJ){return console.log("?? "+e.content.length+" "+(ZJ.message||ZJ))}try{r=vH(t)}catch(ZJ){return console.log("## "+(ZJ.message||ZJ))}r.forEach((function(e){s[e.id]=e.messages,i.push(e.id)}))}})),!i.length)throw new Error("File has no messages");var o=(null==(a=null==(n=null==(r=null==(t=null==s?void 0:s[1])?void 0:t[0])?void 0:r.meta)?void 0:n[1])?void 0:a[0].data)&&1==fH(s[1][0].meta[1][0].data)&&s[1][0];if(o||i.forEach((function(e){s[e].forEach((function(e){if(1==fH(e.meta[1][0].data)>>>0){if(o)throw new Error("Document has multiple roots");o=e}}))})),!o)throw new Error("Cannot find Document root");return AH(s,o)}function _H(e,t,r){var n,a,s,i;if(!(null==(n=e[6])?void 0:n[0])||!(null==(a=e[7])?void 0:a[0]))throw"Mutation only works on post-BNC storages!";if((null==(i=null==(s=e[8])?void 0:s[0])?void 0:i.data)&&fH(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var o=0,l=iH(e[7][0].data),c=0,d=[],u=iH(e[4][0].data),h=0,f=[],m=0;m<t.length;++m)if(null!=t[m]){var p,x;switch(l.setUint16(2*m,c,!0),u.setUint16(2*m,h,!0),typeof t[m]){case"string":p=jH({t:"s",v:t[m]},r),x=SH({t:"s",v:t[m]},r);break;case"number":p=jH({t:"n",v:t[m]},r),x=SH({t:"n",v:t[m]},r);break;case"boolean":p=jH({t:"b",v:t[m]},r),x=SH({t:"b",v:t[m]},r);break;default:throw new Error("Unsupported value "+t[m])}d.push(p),c+=p.length,f.push(x),h+=x.length,++o}else l.setUint16(2*m,65535,!0),u.setUint16(2*m,65535);for(e[2][0].data=hH(o);m<e[7][0].data.length/2;++m)l.setUint16(2*m,65535,!0),u.setUint16(2*m,65535,!0);return e[6][0].data=cH(d),e[3][0].data=cH(f),o}function RH(e){return function(t){for(var r=0;r!=e.length;++r){var n=e[r];void 0===t[n[0]]&&(t[n[0]]=n[1]),"n"===n[2]&&(t[n[0]]=Number(t[n[0]]))}}}function IH(e){RH([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function MH(e){RH([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function OH(e,t,r,n,a,s,i,o,l,c,d,u){try{s[n]=MO(PR(e,r,!0),t);var h,f=AR(e,t);switch(o){case"sheet":h=qz(f,t,a,l,s[n],c,d,u);break;case"chart":if(!(h=Gz(f,t,a,l,s[n],c))||!h["!drawel"])break;var m=FR(h["!drawel"].Target,t),p=IO(m),x=function(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}(PR(e,m,!0),MO(PR(e,p,!0),m)),v=FR(x,m),g=IO(v);h=Tz(PR(e,v,!0),0,0,MO(PR(e,g,!0),v),0,h);break;case"macro":b=t,s[n],b.slice(-4),h={"!type":"macro"};break;case"dialog":h=function(e,t){return t.slice(-4),{"!type":"dialog"}}(0,t,0,0,s[n]);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=h;var y=[];s&&s[n]&&aR(s[n]).forEach((function(r){var a="";if(s[n][r].Type==RO.CMNT){a=FR(s[n][r].Target,t);var i=Xz(AR(e,a,!0),a,l);if(!i||!i.length)return;zB(h,i,!1)}s[n][r].Type==RO.TCMNT&&(a=FR(s[n][r].Target,t),y=y.concat(function(e,t){var r=[],n=!1,a={},s=0;return e.replace(zR,(function(i,o){var l=$R(i);switch(WR(l[0])){case"<?xml":case"<ThreadedComments":case"</ThreadedComments>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<threadedComment":a={author:l.personId,guid:l.id,ref:l.ref,T:1};break;case"</threadedComment>":null!=a.t&&r.push(a);break;case"<text>":case"<text":s=o+i.length;break;case"</text>":a.t=e.slice(s,o).replace(/\r\n/g,"\n").replace(/\r/g,"\n");break;case"<mentions":case"<mentions>":case"<ext":n=!0;break;case"</mentions>":case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i})),r}(AR(e,a,!0),l)))})),y&&y.length&&zB(h,y,!0,l.people||[])}catch(ZJ){if(l.WTF)throw ZJ}var b}function FH(e){return"/"==e.charAt(0)?e.slice(1):e}function LH(e,t){if(X_(),IH(t=t||{}),TR(e,"META-INF/manifest.xml"))return tH(e,t);if(TR(e,"objectdata.xml"))return tH(e,t);if(TR(e,"Index/Document.iwa")){if("undefined"==typeof Uint8Array)throw new Error("NUMBERS file parsing requires Uint8Array support");if(e.FileIndex)return PH(e);var r=eR.utils.cfb_new();return RR(e).forEach((function(t){IR(r,t,_R(e,t))})),PH(r)}if(!TR(e,"[Content_Types].xml")){if(TR(e,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(TR(e,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");throw new Error("Unsupported ZIP file")}var n,a,s=RR(e),i=function(e){var t={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};if(!e||!e.match)return t;var r={};if((e.match(zR)||[]).forEach((function(e){var n=$R(e);switch(n[0].replace(VR,"<")){case"<?xml":break;case"<Types":t.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":void 0!==t[AO[n.ContentType]]&&t[AO[n.ContentType]].push(n.PartName)}})),t.xmlns!==CI)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}(PR(e,"[Content_Types].xml")),o=!1;if(0===i.workbooks.length&&AR(e,a="xl/workbook.xml",!0)&&i.workbooks.push(a),0===i.workbooks.length){if(!AR(e,a="xl/workbook.bin",!0))throw new Error("Could not find workbook");i.workbooks.push(a),o=!0}"bin"==i.workbooks[0].slice(-3)&&(o=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(UU=[],i.sst)try{UU=Yz(AR(e,FH(i.sst)),i.sst,t)}catch(ZJ){if(t.WTF)throw ZJ}t.cellStyles&&i.themes.length&&(l=function(e,t,r){return RB(e,r)}(PR(e,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],t)),i.style&&(c=Kz(AR(e,FH(i.style)),i.style,l,t))}i.links.map((function(r){try{MO(PR(e,IO(FH(r))),r);return Jz(AR(e,FH(r)),0,r,t)}catch(ZJ){}}));var d=Wz(AR(e,FH(i.workbooks[0])),i.workbooks[0],t),u={},h="";i.coreprops.length&&((h=AR(e,FH(i.coreprops[0]),!0))&&(u=VO(h)),0!==i.extprops.length&&(h=AR(e,FH(i.extprops[0]),!0))&&function(e,t,r){var n={};t||(t={}),e=oI(e),WO.forEach((function(r){var a=(e.match(cI(r[0]))||[])[1];switch(r[2]){case"string":a&&(t[r[1]]=KR(a));break;case"bool":t[r[1]]="true"===a;break;case"raw":var s=e.match(new RegExp("<"+r[0]+"[^>]*>([\\s\\S]*?)</"+r[0]+">"));s&&s.length>0&&(n[r[1]]=s[1])}})),n.HeadingPairs&&n.TitlesOfParts&&GO(n.HeadingPairs,n.TitlesOfParts,t,r)}(h,u,t));var f={};t.bookSheets&&!t.bookProps||0!==i.custprops.length&&(h=PR(e,FH(i.custprops[0]),!0))&&(f=function(e,t){var r={},n="",a=e.match(YO);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=$R(i);switch(o[0]){case"<?xml":case"<Properties":break;case"<property":n=KR(o.name);break;case"</property>":n=null;break;default:if(0===i.indexOf("<vt:")){var l=i.split(">"),c=l[0].slice(4),d=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":case"cy":case"error":r[n]=KR(d);break;case"bool":r[n]=rI(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=gR(d);break;default:if("/"==c.slice(-1))break;t.WTF&&"undefined"!==typeof console&&console.warn("Unexpected",i,c,l)}}else if("</"===i.slice(0,2));else if(t.WTF)throw new Error(i)}}return r}(h,t));var m={};if((t.bookSheets||t.bookProps)&&(d.Sheets?n=d.Sheets.map((function(e){return e.name})):u.Worksheets&&u.SheetNames.length>0&&(n=u.SheetNames),t.bookProps&&(m.Props=u,m.Custprops=f),t.bookSheets&&"undefined"!==typeof n&&(m.SheetNames=n),t.bookSheets?m.SheetNames:t.bookProps))return m;n={};var p={};t.bookDeps&&i.calcchain&&(p=Qz(AR(e,FH(i.calcchain)),i.calcchain));var x,v,g=0,y={},b=d.Sheets;u.Worksheets=b.length,u.SheetNames=[];for(var w=0;w!=b.length;++w)u.SheetNames[w]=b[w].name;var N=o?"bin":"xml",j=i.workbooks[0].lastIndexOf("/"),S=(i.workbooks[0].slice(0,j+1)+"_rels/"+i.workbooks[0].slice(j+1)+".rels").replace(/^\//,"");TR(e,S)||(S="xl/_rels/workbook."+N+".rels");var C=MO(PR(e,S,!0),S.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(t.xlmeta=Zz(AR(e,FH(i.metadata[0])),i.metadata[0],t)),(i.people||[]).length>=1&&(t.people=function(e,t){var r=[],n=!1;return e.replace(zR,(function(e){var a=$R(e);switch(WR(a[0])){case"<?xml":case"<personList":case"</personList>":case"</person>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return e})),r}(AR(e,FH(i.people[0])),t)),C&&(C=function(e,t){if(!e)return 0;try{e=t.map((function(t){return t.id||(t.id=t.strRelID),[t.name,e["!id"][t.id].Target,(r=e["!id"][t.id].Type,RO.WS.indexOf(r)>-1?"sheet":RO.CS&&r==RO.CS?"chart":RO.DS&&r==RO.DS?"dialog":RO.MS&&r==RO.MS?"macro":r&&r.length?r:"sheet")];var r}))}catch(ZJ){return null}return e&&0!==e.length?e:null}(C,d.Sheets));var k=AR(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=u.Worksheets;++g){var E="sheet";if(C&&C[g]?(x="xl/"+C[g][1].replace(/[\/]?xl\//,""),TR(e,x)||(x=C[g][1]),TR(e,x)||(x=S.replace(/_rels\/.*$/,"")+C[g][1]),E=C[g][2]):x=(x="xl/worksheets/sheet"+(g+1-k)+"."+N).replace(/sheet0\./,"sheet."),v=x.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&null!=t.sheets)switch(typeof t.sheets){case"number":if(g!=t.sheets)continue e;break;case"string":if(u.SheetNames[g].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var T=!1,D=0;D!=t.sheets.length;++D)"number"==typeof t.sheets[D]&&t.sheets[D]==g&&(T=1),"string"==typeof t.sheets[D]&&t.sheets[D].toLowerCase()==u.SheetNames[g].toLowerCase()&&(T=1);if(!T)continue e}}OH(e,x,v,u.SheetNames[g],g,y,n,E,t,d,l,c)}return m={Directory:i,Workbook:d,Props:u,Custprops:f,Deps:p,Sheets:n,SheetNames:u.SheetNames,Strings:UU,Styles:c,Themes:l,SSF:bR(p_)},t&&t.bookFiles&&(e.files?(m.keys=s,m.files=e.files):(m.keys=[],m.files={},e.FullPaths.forEach((function(t,r){t=t.replace(/^Root Entry[\/]/,""),m.keys.push(t),m.files[t]=e.FileIndex[r]})))),t&&t.bookVBA&&(i.vba.length>0?m.vbaraw=AR(e,FH(i.vba[0]),!0):i.defaults&&"application/vnd.ms-office.vbaProject"===i.defaults.bin&&(m.vbaraw=AR(e,"xl/vbaProject.bin",!0))),m}function BH(e,t){var r=t||{},n="Workbook",a=eR.find(e,n);try{if(n="/!DataSpaces/Version",!(a=eR.find(e,n))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(function(e){var t={};t.id=e.read_shift(0,"lpp4"),t.R=OL(e,4),t.U=OL(e,4),t.W=OL(e,4)}(a.content),n="/!DataSpaces/DataSpaceMap",!(a=eR.find(e,n))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=function(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(FL(e));return t}(a.content);if(1!==s.length||1!==s[0].comps.length||0!==s[0].comps[0].t||"StrongEncryptionDataSpace"!==s[0].name||"EncryptedPackage"!==s[0].comps[0].v)throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",!(a=eR.find(e,n))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=function(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}(a.content);if(1!=i.length||"StrongEncryptionTransform"!=i[0])throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",!(a=eR.find(e,n))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);LL(a.content)}catch(ZJ){}if(n="/EncryptionInfo",!(a=eR.find(e,n))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=function(e){var t=OL(e);switch(t.Minor){case 2:return[t.Minor,zL(e)];case 3:return[t.Minor,VL()];case 4:return[t.Minor,HL(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}(a.content);if(n="/EncryptedPackage",!(a=eR.find(e,n))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(4==o[0]&&"undefined"!==typeof decrypt_agile)return decrypt_agile(o[1],a.content,r.password||"",r);if(2==o[0]&&"undefined"!==typeof decrypt_std76)return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function UH(e,t){return"ods"==t.bookType?sH(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=BM(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(UM(n)));var s=ZH(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach((function(e){return e.forEach((function(e){"string"==typeof e&&i.push(e)}))}));var o={},l=[],c=eR.read(t.numbers,{type:"base64"});c.FileIndex.map((function(e,t){return[e,c.FullPaths[t]]})).forEach((function(e){var t=e[0],r=e[1];2==t.type&&t.name.match(/\.iwa/)&&vH(bH(t.content)).forEach((function(e){l.push(e.id),o[e.id]={deps:[],location:r,type:fH(e.messages[0].meta[1][0].data)}}))})),l.sort((function(e,t){return e-t}));var d=l.filter((function(e){return e>1})).map((function(e){return[e,hH(e)]}));c.FileIndex.map((function(e,t){return[e,c.FullPaths[t]]})).forEach((function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&vH(bH(t.content)).forEach((function(e){e.messages.forEach((function(t){d.forEach((function(t){e.messages.some((function(e){return 11006!=fH(e.meta[1][0].data)&&function(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}(e.data,t[1])}))&&o[t[0]].deps.push(e.id)}))}))}))}));for(var u,h=eR.find(c,o[1].location),f=vH(bH(h.content)),m=0;m<f.length;++m){var p=f[m];1==p.id&&(u=p)}var x=kH(mH(u.messages[0].data)[1][0].data);for(f=vH(bH((h=eR.find(c,o[x].location)).content)),m=0;m<f.length;++m)(p=f[m]).id==x&&(u=p);for(x=kH(mH(u.messages[0].data)[2][0].data),f=vH(bH((h=eR.find(c,o[x].location)).content)),m=0;m<f.length;++m)(p=f[m]).id==x&&(u=p);for(x=kH(mH(u.messages[0].data)[2][0].data),f=vH(bH((h=eR.find(c,o[x].location)).content)),m=0;m<f.length;++m)(p=f[m]).id==x&&(u=p);var v=mH(u.messages[0].data);v[6][0].data=hH(n.e.r+1),v[7][0].data=hH(n.e.c+1);for(var g=kH(v[46][0].data),y=eR.find(c,o[g].location),b=vH(bH(y.content)),w=0;w<b.length&&b[w].id!=g;++w);if(b[w].id!=g)throw"Bad ColumnRowUIDMapArchive";var N=mH(b[w].messages[0].data);N[1]=[],N[2]=[],N[3]=[];for(var j=0;j<=n.e.c;++j){var S=[];S[1]=S[2]=[{type:0,data:hH(j+420690)}],N[1].push({type:2,data:pH(S)}),N[2].push({type:0,data:hH(j)}),N[3].push({type:0,data:hH(j)})}N[4]=[],N[5]=[],N[6]=[];for(var C=0;C<=n.e.r;++C)(S=[])[1]=S[2]=[{type:0,data:hH(C+726270)}],N[4].push({type:2,data:pH(S)}),N[5].push({type:0,data:hH(C)}),N[6].push({type:0,data:hH(C)});b[w].messages[0].data=pH(N),y.content=wH(gH(b)),y.size=y.content.length,delete v[46];var k=mH(v[4][0].data);k[7][0].data=hH(n.e.r+1);var E=kH(mH(k[1][0].data)[2][0].data);if((b=vH(bH((y=eR.find(c,o[E].location)).content)))[0].id!=E)throw"Bad HeaderStorageBucket";var T=mH(b[0].messages[0].data);for(C=0;C<s.length;++C){var D=mH(T[2][0].data);D[1][0].data=hH(C),D[4][0].data=hH(s[C].length),T[2][C]={type:T[2][0].type,data:pH(D)}}b[0].messages[0].data=pH(T),y.content=wH(gH(b)),y.size=y.content.length;var A=kH(k[2][0].data);if((b=vH(bH((y=eR.find(c,o[A].location)).content)))[0].id!=A)throw"Bad HeaderStorageBucket";for(T=mH(b[0].messages[0].data),j=0;j<=n.e.c;++j)(D=mH(T[2][0].data))[1][0].data=hH(j),D[4][0].data=hH(n.e.r+1),T[2][j]={type:T[2][0].type,data:pH(D)};b[0].messages[0].data=pH(T),y.content=wH(gH(b)),y.size=y.content.length;var P=kH(k[4][0].data);!function(){for(var e,t=eR.find(c,o[P].location),r=vH(bH(t.content)),n=0;n<r.length;++n){var a=r[n];a.id==P&&(e=a)}var s=mH(e.messages[0].data);s[3]=[];var l=[];i.forEach((function(e,t){l[1]=[{type:0,data:hH(t)}],l[2]=[{type:0,data:hH(1)}],l[3]=[{type:2,data:lH(e)}],s[3].push({type:2,data:pH(l)})})),e.messages[0].data=pH(s);var d=wH(gH(r));t.content=d,t.size=t.content.length}();var _=mH(k[3][0].data),R=_[1][0];delete _[2];var I=mH(R.data),M=kH(I[2][0].data);!function(){for(var e,t=eR.find(c,o[M].location),r=vH(bH(t.content)),a=0;a<r.length;++a){var l=r[a];l.id==M&&(e=l)}var d=mH(e.messages[0].data);delete d[6],delete _[7];var u=new Uint8Array(d[5][0].data);d[5]=[];for(var h=0,f=0;f<=n.e.r;++f){var m=mH(u);h+=_H(m,s[f],i),m[1][0].data=hH(f),d[5].push({data:pH(m),type:2})}d[1]=[{type:0,data:hH(n.e.c+1)}],d[2]=[{type:0,data:hH(n.e.r+1)}],d[3]=[{type:0,data:hH(h)}],d[4]=[{type:0,data:hH(n.e.r+1)}],e.messages[0].data=pH(d);var p=wH(gH(r));t.content=p,t.size=t.content.length}(),R.data=pH(I),k[3][0].data=pH(_),v[4][0].data=pH(k),u.messages[0].data=pH(v);var O=wH(gH(f));return h.content=O,h.size=h.content.length,c}(e,t):"xlsb"==t.bookType?function(e,t){BB=1024,e&&!e.SSF&&(e.SSF=bR(p_));e&&e.SSF&&(X_(),Y_(e.SSF),t.revssf=oR(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,VU?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xlsb"==t.bookType?"bin":"xml",n=qB.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};MH(t=t||{});var s=MR(),i="",o=0;t.cellXfs=[],qU(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(IR(s,i="docProps/core.xml",$O(e.Props,t)),a.coreprops.push(i),FO(t.rels,2,i,RO.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,IR(s,i,KO(e.Props)),a.extprops.push(i),FO(t.rels,3,i,RO.EXT_PROPS),e.Custprops!==e.Props&&aR(e.Custprops||{}).length>0&&(IR(s,i="docProps/custom.xml",XO(e.Custprops)),a.custprops.push(i),FO(t.rels,4,i,RO.CUST_PROPS));for(o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},u=e.Sheets[e.SheetNames[o-1]];(u||{})["!type"];if(IR(s,i="xl/worksheets/sheet"+o+"."+r,eV(o-1,i,t,e,d)),a.sheets.push(i),FO(t.wbrels,-1,"worksheets/sheet"+o+"."+r,RO.WS[0]),u){var h=u["!comments"],f=!1,m="";h&&h.length>0&&(IR(s,m="xl/comments"+o+"."+r,tV(h,m,t)),a.comments.push(m),FO(d,-1,"../comments"+o+"."+r,RO.CMNT),f=!0),u["!legacy"]&&f&&IR(s,"xl/drawings/vmlDrawing"+o+".vml",UB(o,u["!comments"])),delete u["!comments"],delete u["!legacy"]}d["!id"].rId1&&IR(s,IO(i),OO(d))}null!=t.Strings&&t.Strings.length>0&&(IR(s,i="xl/sharedStrings."+r,function(e,t,r){return(".bin"===t.slice(-4)?IL:_L)(e,r)}(t.Strings,i,t)),a.strs.push(i),FO(t.wbrels,-1,"sharedStrings."+r,RO.SST));IR(s,i="xl/workbook."+r,function(e,t,r){return(".bin"===t.slice(-4)?$z:Uz)(e,r)}(e,i,t)),a.workbooks.push(i),FO(t.rels,1,i,RO.WB),IR(s,i="xl/theme/theme1.xml",IB(e.Themes,t)),a.themes.push(i),FO(t.wbrels,-1,"theme/theme1.xml",RO.THEME),IR(s,i="xl/styles."+r,function(e,t,r){return(".bin"===t.slice(-4)?SB:uB)(e,r)}(e,i,t)),a.styles.push(i),FO(t.wbrels,-1,"styles."+r,RO.STY),e.vbaraw&&n&&(IR(s,i="xl/vbaProject.bin",e.vbaraw),a.vba.push(i),FO(t.wbrels,-1,"vbaProject.bin",RO.VBA));return IR(s,i="xl/metadata."+r,function(e){return(".bin"===e.slice(-4)?FB:LB)()}(i)),a.metadata.push(i),FO(t.wbrels,-1,"metadata."+r,RO.XLMETA),IR(s,"[Content_Types].xml",_O(a,t)),IR(s,"_rels/.rels",OO(t.rels)),IR(s,"xl/_rels/workbook."+r+".rels",OO(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t):zH(e,t)}function zH(e,t){BB=1024,e&&!e.SSF&&(e.SSF=bR(p_)),e&&e.SSF&&(X_(),Y_(e.SSF),t.revssf=oR(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,VU?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=qB.indexOf(t.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};MH(t=t||{});var s=MR(),i="",o=0;if(t.cellXfs=[],qU(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),IR(s,i="docProps/core.xml",$O(e.Props,t)),a.coreprops.push(i),FO(t.rels,2,i,RO.CORE_PROPS),i="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var l=[],c=0;c<e.SheetNames.length;++c)2!=(e.Workbook.Sheets[c]||{}).Hidden&&l.push(e.SheetNames[c]);e.Props.SheetNames=l}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,IR(s,i,KO(e.Props)),a.extprops.push(i),FO(t.rels,3,i,RO.EXT_PROPS),e.Custprops!==e.Props&&aR(e.Custprops||{}).length>0&&(IR(s,i="docProps/custom.xml",XO(e.Custprops)),a.custprops.push(i),FO(t.rels,4,i,RO.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},h=e.Sheets[e.SheetNames[o-1]];(h||{})["!type"];if(IR(s,i="xl/worksheets/sheet"+o+"."+r,hz(o-1,t,e,u)),a.sheets.push(i),FO(t.wbrels,-1,"worksheets/sheet"+o+"."+r,RO.WS[0]),h){var f=h["!comments"],m=!1,p="";if(f&&f.length>0){var x=!1;f.forEach((function(e){e[1].forEach((function(e){1==e.T&&(x=!0)}))})),x&&(IR(s,p="xl/threadedComments/threadedComment"+o+"."+r,HB(f,d,t)),a.threadedcomments.push(p),FO(u,-1,"../threadedComments/threadedComment"+o+"."+r,RO.TCMNT)),IR(s,p="xl/comments"+o+"."+r,VB(f)),a.comments.push(p),FO(u,-1,"../comments"+o+"."+r,RO.CMNT),m=!0}h["!legacy"]&&m&&IR(s,"xl/drawings/vmlDrawing"+o+".vml",UB(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&IR(s,IO(i),OO(u))}return null!=t.Strings&&t.Strings.length>0&&(IR(s,i="xl/sharedStrings."+r,_L(t.Strings,t)),a.strs.push(i),FO(t.wbrels,-1,"sharedStrings."+r,RO.SST)),IR(s,i="xl/workbook."+r,Uz(e)),a.workbooks.push(i),FO(t.rels,1,i,RO.WB),IR(s,i="xl/theme/theme1.xml",IB(e.Themes,t)),a.themes.push(i),FO(t.wbrels,-1,"theme/theme1.xml",RO.THEME),IR(s,i="xl/styles."+r,uB(e,t)),a.styles.push(i),FO(t.wbrels,-1,"styles."+r,RO.STY),e.vbaraw&&n&&(IR(s,i="xl/vbaProject.bin",e.vbaraw),a.vba.push(i),FO(t.wbrels,-1,"vbaProject.bin",RO.VBA)),IR(s,i="xl/metadata."+r,LB()),a.metadata.push(i),FO(t.wbrels,-1,"metadata."+r,RO.XLMETA),d.length>1&&(IR(s,i="xl/persons/person.xml",function(e){var t=[LR,gI("personList",null,{xmlns:EI,"xmlns:x":MI[0]}).replace(/[\/]>/,">")];return e.forEach((function(e,r){t.push(gI("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:e,providerId:"None"}))})),t.push("</personList>"),t.join("")}(d)),a.people.push(i),FO(t.wbrels,-1,"persons/person.xml",RO.PEOPLE)),IR(s,"[Content_Types].xml",_O(a,t)),IR(s,"_rels/.rels",OO(t.rels)),IR(s,"xl/_rels/workbook.xml.rels",OO(t.wbrels)),delete t.revssf,delete t.ssf,s}function VH(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=KP(e.slice(0,12));break;case"binary":r=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function HH(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return fV(e.slice(r),t);default:break e}return bL.to_workbook(e,t)}function $H(e,t,r,n){return n?(r.type="string",bL.to_workbook(e,r)):bL.to_workbook(t,r)}function WH(e,t){BP();var r=t||{};if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer)return WH(new Uint8Array(e),((r=bR(r)).type="array",r));"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&!r.type&&(r.type="undefined"!==typeof Deno?"buffer":"array");var n,a=e,s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),zU={},r.dateNF&&(zU.dateNF=r.dateNF),r.type||(r.type=YP&&Buffer.isBuffer(e)?"buffer":"base64"),"file"==r.type&&(r.type=YP?"buffer":"binary",a=function(e){if("undefined"!==typeof tR)return tR.readFileSync(e);if("undefined"!==typeof Deno)return Deno.readFileSync(e);if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(ZJ){if(!ZJ.message||!ZJ.message.match(/onstruct/))throw ZJ}throw new Error("Cannot access file "+e)}(e),"undefined"===typeof Uint8Array||YP||(r.type="array")),"string"==r.type&&(s=!0,r.type="binary",r.codepage=65001,a=function(e){return e.match(/[^\x00-\x7F]/)?lI(e):e}(e)),"array"==r.type&&"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&"undefined"!==typeof ArrayBuffer){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return(r=bR(r)).type="array",WH(r_(a),r)}switch((n=VH(a,r))[0]){case 208:if(207===n[1]&&17===n[2]&&224===n[3]&&161===n[4]&&177===n[5]&&26===n[6]&&225===n[7])return function(e,t){return eR.find(e,"EncryptedPackage")?BH(e,t):DV(e,t)}(eR.read(a,r),r);break;case 9:if(n[1]<=8)return DV(a,r);break;case 60:return fV(a,r);case 73:if(73===n[1]&&42===n[2]&&0===n[3])throw new Error("TIFF Image File is not a spreadsheet");if(68===n[1])return function(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=vL.to_workbook(e,r);return r.WTF=n,a}catch(ZJ){if(r.WTF=n,!ZJ.message.match(/SYLK bad record ID/)&&n)throw ZJ;return bL.to_workbook(e,t)}}(a,r);break;case 84:if(65===n[1]&&66===n[2]&&76===n[3])return gL.to_workbook(a,r);break;case 80:return 75===n[1]&&n[2]<9&&n[3]<9?function(e,t){var r=e,n=t||{};return n.type||(n.type=YP&&Buffer.isBuffer(e)?"buffer":"base64"),LH(OR(r,n),n)}(a,r):$H(e,a,r,s);case 239:return 60===n[3]?fV(a,r):$H(e,a,r,s);case 255:if(254===n[1])return function(e,t){var r=e;return"base64"==t.type&&(r=KP(r)),r=VP.utils.decode(1200,r.slice(2),"str"),t.type="binary",HH(r,t)}(a,r);if(0===n[1]&&2===n[2]&&0===n[3])return wL.to_workbook(a,r);break;case 0:if(0===n[1]){if(n[2]>=2&&0===n[3])return wL.to_workbook(a,r);if(0===n[2]&&(8===n[3]||9===n[3]))return wL.to_workbook(a,r)}break;case 3:case 131:case 139:case 140:return xL.to_workbook(a,r);case 123:if(92===n[1]&&114===n[2]&&116===n[3])return KL.to_workbook(a,r);break;case 10:case 13:case 32:return function(e,t){var r="",n=VH(e,t);switch(t.type){case"base64":r=KP(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=yR(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==n[0]&&187==n[1]&&191==n[2]&&(r=oI(r)),t.type="binary",HH(r,t)}(a,r);case 137:if(80===n[1]&&78===n[2]&&71===n[3])throw new Error("PNG Image File is not a spreadsheet")}return pL.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?xL.to_workbook(a,r):$H(e,a,r,s)}function qH(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return nR(t.file,eR.write(e,{type:YP?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return eR.write(e,t)}function GH(e,t){var r={},n=YP?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?eR.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if("undefined"!==typeof Deno&&"string"==typeof a){if("binary"==t.type||"base64"==t.type)return a;a=new Uint8Array(e_(a))}return t.password&&"undefined"!==typeof encrypt_agile?qH(encrypt_agile(a,t.password),t):"file"===t.type?nR(t.file,a):"string"==t.type?oI(a):a}function KH(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return GP(lI(n));case"binary":return lI(n);case"string":return e;case"file":return nR(t.file,n,"utf8");case"buffer":return YP?XP(n,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(n):KH(n,{type:"binary"}).split("").map((function(e){return e.charCodeAt(0)}))}throw new Error("Unrecognized type "+t.type)}function YH(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return"base64"==t.type?GP(r):"string"==t.type?oI(r):r;case"file":return nR(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function XH(e,t){BP(),Lz(e);var r=bR(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),"array"==r.type){r.type="binary";var n=XH(e,r);return r.type="array",e_(n)}var a=0;if(r.sheet&&(a="number"==typeof r.sheet?r.sheet:e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return KH(yV(e,r),r);case"slk":case"sylk":return KH(vL.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return KH(KV(e.Sheets[e.SheetNames[a]],r),r);case"txt":return function(e,t){switch(t.type){case"base64":return GP(e);case"binary":case"string":return e;case"file":return nR(t.file,e,"binary");case"buffer":return YP?XP(e,"binary"):e.split("").map((function(e){return e.charCodeAt(0)}))}throw new Error("Unrecognized type "+t.type)}(n$(e.Sheets[e.SheetNames[a]],r),r);case"csv":return KH(r$(e.Sheets[e.SheetNames[a]],r),r,"\ufeff");case"dif":return KH(gL.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return YH(xL.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return KH(bL.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return KH(KL.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return KH(yL.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return KH(sH(e,r),r);case"wk1":return YH(wL.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return YH(wL.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),YH(VV(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),function(e,t){var r=t||{};return qH(AV(e,r),r)}(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var r=bR(t||{});return GH(UH(e,r),r)}(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function QH(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function JH(e,t,r,n,a,s,i,o){var l=IM(r),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),u=!0,h=1===a?[]:{};if(1!==a)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch(ZJ){h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var f=t.s.c;f<=t.e.c;++f){var m=i?e[r][f]:e[n[f]+l];if(void 0!==m&&void 0!==m.t){var p=m.v;switch(m.t){case"z":if(null==p)break;continue;case"e":p=0==p?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(null!=s[f]){if(null==p)if("e"==m.t&&null===p)h[s[f]]=null;else if(void 0!==c)h[s[f]]=c;else{if(!d||null!==p)continue;h[s[f]]=null}else h[s[f]]=d&&("n"!==m.t||"n"===m.t&&!1!==o.rawNumbers)?p:HM(m,p,o);null!=p&&(u=!1)}}else{if(void 0===c)continue;null!=s[f]&&(h[s[f]]=c)}}return{row:h,isempty:u}}function ZH(e,t){if(null==e||null==e["!ref"])return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},d=null!=c.range?c.range:e["!ref"];switch(1===c.header?n=1:"A"===c.header?n=2:Array.isArray(c.header)?n=3:null==c.header&&(n=0),typeof d){case"string":l=zM(d);break;case"number":(l=zM(e["!ref"])).s.r=d;break;default:l=d}n>0&&(a=0);var u=IM(l.s.r),h=[],f=[],m=0,p=0,x=Array.isArray(e),v=l.s.r,g=0,y={};x&&!e[v]&&(e[v]=[]);var b=c.skipHidden&&e["!cols"]||[],w=c.skipHidden&&e["!rows"]||[];for(g=l.s.c;g<=l.e.c;++g)if(!(b[g]||{}).hidden)switch(h[g]=OM(g),r=x?e[v][g]:e[h[g]+u],n){case 1:s[g]=g-l.s.c;break;case 2:s[g]=h[g];break;case 3:s[g]=c.header[g-l.s.c];break;default:if(null==r&&(r={w:"__EMPTY",t:"s"}),o=i=HM(r,null,c),p=y[i]||0){do{o=i+"_"+p++}while(y[o]);y[i]=p,y[o]=1}else y[i]=1;s[g]=o}for(v=l.s.r+a;v<=l.e.r;++v)if(!(w[v]||{}).hidden){var N=JH(e,l,v,h,n,s,x,c);(!1===N.isempty||(1===n?!1!==c.blankrows:c.blankrows))&&(f[m++]=N.row)}return f.length=m,f}var e$=/"/g;function t$(e,t,r,n,a,s,i,o){for(var l=!0,c=[],d="",u=IM(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var f=o.dense?(e[r]||[])[h]:e[n[h]+u];if(null==f)d="";else if(null!=f.v){l=!1,d=""+(o.rawNumbers&&"n"==f.t?f.v:HM(f,null,o));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||34===p||o.forceQuotes){d='"'+d.replace(e$,'""')+'"';break}"ID"==d&&(d='"ID"')}else null==f.f||f.F?d="":(l=!1,(d="="+f.f).indexOf(",")>=0&&(d='"'+d.replace(e$,'""')+'"'));c.push(d)}return!1===o.blankrows&&l?null:c.join(i)}function r$(e,t){var r=[],n=null==t?{}:t;if(null==e||null==e["!ref"])return"";var a=zM(e["!ref"]),s=void 0!==n.FS?n.FS:",",i=s.charCodeAt(0),o=void 0!==n.RS?n.RS:"\n",l=o.charCodeAt(0),c=new RegExp(("|"==s?"\\|":s)+"+$"),d="",u=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],f=n.skipHidden&&e["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(h[m]||{}).hidden||(u[m]=OM(m));for(var p=0,x=a.s.r;x<=a.e.r;++x)(f[x]||{}).hidden||null!=(d=t$(e,a,x,u,i,l,s,n))&&(n.strip&&(d=d.replace(c,"")),(d||!1!==n.blankrows)&&r.push((p++?o:"")+d));return delete n.dense,r.join("")}function n$(e,t){t||(t={}),t.FS="\t",t.RS="\n";var r=r$(e,t);if("undefined"==typeof VP||"string"==t.type)return r;var n=VP.utils.encode(1200,r,"str");return String.fromCharCode(255)+String.fromCharCode(254)+n}function a$(e,t,r){var n,a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&null!=a.origin)if("number"==typeof a.origin)o=a.origin;else{var c="string"==typeof a.origin?FM(a.origin):a.origin;o=c.r,l=c.c}var d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var u=zM(i["!ref"]);d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),-1==o&&(o=u.e.r+1,d.e.r=o+t.length-1+s)}else-1==o&&(o=0,d.e.r=t.length-1+s);var h=a.header||[],f=0;t.forEach((function(e,t){aR(e).forEach((function(r){-1==(f=h.indexOf(r))&&(h[f=h.length]=r);var c=e[r],d="z",u="",m=LM({c:l+f,r:o+t+s});n=s$(i,m),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?d="n":"boolean"==typeof c?d="b":"string"==typeof c?d="s":c instanceof Date?(d="d",a.cellDates||(d="n",c=cR(c)),u=a.dateNF||p_[14]):null===c&&a.nullError&&(d="e",c=0),n?(n.t=d,n.v=c,delete n.w,delete n.R,u&&(n.z=u)):i[m]=n={t:d,v:c},u&&(n.z=u)):i[m]=c}))})),d.e.c=Math.max(d.e.c,l+h.length-1);var m=IM(o);if(s)for(f=0;f<h.length;++f)i[OM(f+l)+m]={t:"s",v:h[f]};return i["!ref"]=UM(d),i}function s$(e,t,r){if("string"==typeof t){if(Array.isArray(e)){var n=FM(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return s$(e,LM("number"!=typeof t?t:{r:t,c:r||0}))}function i$(){return{SheetNames:[],Sheets:{}}}function o$(e,t,r,n){var a=1;if(!r)for(;a<=65535&&-1!=e.SheetNames.indexOf(r="Sheet"+a);++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&-1!=e.SheetNames.indexOf(r=i+a);++a);}if(Fz(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function l$(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}var c$={encode_col:OM,encode_row:IM,encode_cell:LM,encode_range:UM,decode_col:MM,decode_row:RM,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:FM,decode_range:BM,format_cell:HM,sheet_add_aoa:WM,sheet_add_json:a$,sheet_add_dom:YV,aoa_to_sheet:qM,json_to_sheet:function(e,t){return a$(null,e,t)},table_to_sheet:XV,table_to_book:function(e,t){return $M(XV(e,t),t)},sheet_to_csv:r$,sheet_to_txt:n$,sheet_to_json:ZH,sheet_to_html:KV,sheet_to_formulae:function(e){var t,r="",n="";if(null==e||null==e["!ref"])return[];var a,s=zM(e["!ref"]),i="",o=[],l=[],c=Array.isArray(e);for(a=s.s.c;a<=s.e.c;++a)o[a]=OM(a);for(var d=s.s.r;d<=s.e.r;++d)for(i=IM(d),a=s.s.c;a<=s.e.c;++a)if(r=o[a]+i,n="",void 0!==(t=c?(e[d]||[])[a]:e[r])){if(null!=t.F){if(r=t.F,!t.f)continue;n=t.f,-1==r.indexOf(":")&&(r=r+":"+r)}if(null!=t.f)n=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)n=""+t.v;else if("b"==t.t)n=t.v?"TRUE":"FALSE";else if(void 0!==t.w)n="'"+t.w;else{if(void 0===t.v)continue;n="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=r+"="+n}return l},sheet_to_row_object_array:ZH,sheet_get_cell:s$,book_new:i$,book_append_sheet:o$,book_set_sheet_visibility:function(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:l$,cell_set_internal_link:function(e,t,r){return l$(e,"#"+t,r)},cell_add_comment:function(e,t,r){e.c||(e.c=[]),e.c.push({t:t,a:r||"SheetJS"})},sheet_set_array_formula:function(e,t,r,n){for(var a="string"!=typeof t?t:zM(t),s="string"==typeof t?t:UM(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var l=s$(e,i,o);l.t="n",l.F=s,delete l.v,i==a.s.r&&o==a.s.c&&(l.f=r,n&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};_P.version;const d$=rm("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]),u$=rm("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);var h$="Checkbox",[f$,m$]=$n(h$),[p$,x$]=f$(h$),v$=t.forwardRef(((e,r)=>{const{__scopeCheckbox:n,name:a,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[f,m]=t.useState(null),p=_r(r,(e=>m(e))),x=t.useRef(!1),v=!f||(u||!!f.closest("form")),[g=!1,y]=Si({prop:s,defaultProp:i,onChange:d}),b=t.useRef(g);return t.useEffect((()=>{const e=f?.form;if(e){const t=()=>y(b.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}}),[f,y]),(0,Rr.jsxs)(p$,{scope:n,state:g,disabled:l,children:[(0,Rr.jsx)(qn.button,{type:"button",role:"checkbox","aria-checked":w$(g)?"mixed":g,"aria-required":o,"data-state":N$(g),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:p,onKeyDown:Hn(e.onKeyDown,(e=>{"Enter"===e.key&&e.preventDefault()})),onClick:Hn(e.onClick,(e=>{y((e=>!!w$(e)||!e)),v&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())}))}),v&&(0,Rr.jsx)(b$,{control:f,bubbles:!x.current,name:a,value:c,checked:g,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:!w$(i)&&i})]})}));v$.displayName=h$;var g$="CheckboxIndicator",y$=t.forwardRef(((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,s=x$(g$,r);return(0,Rr.jsx)(Ni,{present:n||w$(s.state)||!0===s.state,children:(0,Rr.jsx)(qn.span,{"data-state":N$(s.state),"data-disabled":s.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})}));y$.displayName=g$;var b$=e=>{const{control:r,checked:n,bubbles:a=!0,defaultChecked:s,...i}=e,o=t.useRef(null),l=Xy(n),c=Js(r);t.useEffect((()=>{const e=o.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&r){const t=new Event("click",{bubbles:a});e.indeterminate=w$(n),r.call(e,!w$(n)&&n),e.dispatchEvent(t)}}),[l,n,a]);const d=t.useRef(!w$(n)&&n);return(0,Rr.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??d.current,...i,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function w$(e){return"indeterminate"===e}function N$(e){return w$(e)?"indeterminate":e?"checked":"unchecked"}var j$=v$,S$=y$;const C$=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(j$,{ref:t,className:Un("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...n,children:(0,Rr.jsx)(S$,{className:Un("flex items-center justify-center text-current"),children:(0,Rr.jsx)(il,{className:"h-4 w-4"})})})}));function k$(e){let{open:r,onOpenChange:n,data:a=[],columns:s,fileName:i="export",formatters:o={},title:l="Export Data",fetchData:c,isFetchData:d=!1}=e;const[u,h]=(0,t.useState)(s.map((e=>e.header))),[f,m]=(0,t.useState)(a),[p,x]=(0,t.useState)(!1),v=rt();(0,t.useEffect)((()=>{d&&r&&c&&(x(!0),v(c()).unwrap().then((e=>{m(e)})).catch((e=>{console.error("Error fetching data:",e)})).finally((()=>{x(!1)})))}),[c,v,d,r]),(0,t.useEffect)((()=>{d||m(a)}),[a,d]);const g={totalRecords:f.length,totalColumns:u.length};return(0,Rr.jsx)(WN,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(XN,{className:"max-w-2xl p-0 gap-0",children:[(0,Rr.jsx)(QN,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:(0,Rr.jsx)(ZN,{className:"text-base font-semibold",children:l})}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsx)("div",{className:"flex-1",children:p?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 min-h-[300px]",children:[(0,Rr.jsx)(um,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,Rr.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading data..."})]}):(0,Rr.jsx)("div",{className:"p-4",children:(0,Rr.jsx)("div",{className:"space-y-6",children:(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Rr.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Select Columns to Export"}),(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>{u.length===s.length?h([]):h(s.map((e=>e.header)))},className:"h-6 px-2",children:u.length===s.length?"Deselect All":"Select All"})]}),(0,Rr.jsx)("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 rounded-lg p-4",children:s.map((e=>(0,Rr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Rr.jsx)(C$,{id:e.header,checked:u.includes(e.header),onCheckedChange:()=>{return t=e.header,void h((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}}),(0,Rr.jsxs)("label",{htmlFor:e.header,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:[e.header,"currency"===e.format&&(0,Rr.jsx)("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Currency)"})]})]},e.header)))})]})})})}),(0,Rr.jsxs)("div",{className:"border-t bg-gray-100 grid grid-cols-3",children:[(0,Rr.jsx)("div",{className:"px-3 col-span-2 py-2 bg-gray-50 border-b flex items-center justify-between text-sm text-muted-foreground",children:(0,Rr.jsxs)("div",{className:"flex items-center gap-6",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(d$,{className:"h-4 w-4"}),(0,Rr.jsxs)("span",{children:["Records: ",(0,Rr.jsx)("span",{className:"font-medium text-foreground",children:g.totalRecords})]})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(u$,{className:"h-4 w-4"}),(0,Rr.jsxs)("span",{children:["Selected Columns: ",(0,Rr.jsx)("span",{className:"font-medium text-foreground",children:g.totalColumns})]})]})]})}),(0,Rr.jsxs)("div",{className:"p-3 flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>n(!1),children:"Cancel"}),(0,Rr.jsxs)(Vn,{size:"sm",onClick:()=>{const e=s.filter((e=>u.includes(e.header))),t=f.map((t=>{const r={};return e.forEach((e=>{let{header:n,field:a}=e,s=a.split(".").reduce(((e,t)=>null===e||void 0===e?void 0:e[t]),t)||"-";o[n]&&(s=o[n](s)),r[n]=s})),r})),r={};e.forEach((e=>{let{header:t}=e;r[t]=""})),t.push(r);const a={};e.forEach(((e,t)=>{let{header:r,field:n,addTotal:s,format:i}=e;if(0===t)a[r]=`Total (Count: ${f.length})`;else if(s){const e=f.reduce(((e,t)=>{const r=n.split(".").reduce(((e,t)=>null===e||void 0===e?void 0:e[t]),t);return e+(Number(r)||0)}),0);a[r]=e}else a[r]=""})),t.push(a);const l=c$.json_to_sheet(t),c=c$.book_new();c$.book_append_sheet(c,l,"Sheet1"),l["!cols"]=e.map((e=>{let{width:t}=e;return{wch:t||20}})),t.forEach(((t,r)=>{e.forEach(((e,t)=>{let{header:n,format:a}=e;const s=c$.encode_cell({r:r,c:t});l[s]&&"number"===typeof l[s].v&&("currency"===a||n.toLowerCase().includes("balance")||n.toLowerCase().includes("amount"))&&(l[s].z='"\u20b9"#,##0.00')}))}));const d=t.length-1;e.forEach(((e,t)=>{const r=c$.encode_cell({r:d,c:t});l[r]&&(l[r].s={font:{bold:!0}})})),function(e,t,r){var n=r||{};n.type="file",n.file=t,QH(n),XH(e,n)}(c,`${i}.xlsx`),n(!1)},className:"bg-blue-600 text-white hover:bg-blue-700",disabled:0===u.length||p||!f.length,children:[p?(0,Rr.jsx)(um,{className:"mr-2 h-4 w-4 animate-spin"}):(0,Rr.jsx)(DP,{className:"mr-2 h-4 w-4"}),"Export to Excel"]})]})]})]})})}function E$(){const e=Z(),r=rt(),[n,a]=Pe(),{toast:s}=$g(),i=(0,t.useRef)(!0),[o,l]=(0,t.useState)(!1),{bills:c}=$e((e=>e.bill)),[d,u]=(0,t.useState)(""),[h,f]=(0,t.useState)(""),[m,p]=(0,t.useState)("invoice"),x=n.get("dateFilter")||"today",v=n.get("from"),g=n.get("to"),[y,b]=(0,t.useState)("all"),[w,N]=(0,t.useState)(x),[j,S]=(0,t.useState)({from:v?new Date(v):new Date,to:g?new Date(g):new Date});(0,t.useEffect)((()=>{const e=setTimeout((()=>{f(d)}),500);return()=>clearTimeout(e)}),[d]),(0,t.useEffect)((()=>{if(!h.trim())return void(i.current||C({startDate:j.from,endDate:j.to}));(async()=>{try{await r(Zh({query:h,searchType:m})).unwrap()}catch(eZ){s({title:"Error",description:"Failed to search bills",variant:"destructive"})}})(),i.current=!1}),[h,m,r]);const C=(0,t.useCallback)((async e=>{try{await r(Jh({startDate:jc(e.startDate,"yyyy-MM-dd"),endDate:jc(e.endDate,"yyyy-MM-dd"),filter:"all"!==y?y:void 0})).unwrap()}catch(eZ){s({title:"Error fetching bills",description:eZ.message,variant:"destructive"})}}),[r,y]);(0,t.useEffect)((()=>{const e=n.get("from"),t=n.get("to"),r=n.get("dateFilter");if(!e||!t){const e=new Date,t=jc(e,"yyyy-MM-dd");return a((e=>(e.set("from",t),e.set("to",t),e.set("dateFilter","today"),e))),S({from:e,to:e}),N("today"),void C({startDate:e,endDate:e})}try{const n=new Date(e),a=new Date(t);if(isNaN(n.getTime())||isNaN(a.getTime()))throw new Error("Invalid date in URL parameters");S({from:n,to:a}),r&&N(r),C({startDate:n,endDate:a})}catch(eZ){const t=new Date,r=jc(t,"yyyy-MM-dd");a((e=>(e.set("from",r),e.set("to",r),e.set("dateFilter","today"),e))),S({from:t,to:t}),N("today"),C({startDate:t,endDate:t}),s({title:"Invalid date parameters",description:"Reset to today's date",variant:"destructive"})}}),[]);const k=(0,t.useCallback)((e=>{if(null!==e&&void 0!==e&&e.from&&null!==e&&void 0!==e&&e.to)try{const t=new Date(e.from),r=new Date(e.to);if(isNaN(t.getTime())||isNaN(r.getTime()))throw new Error("Invalid date selection");const n=jc(t,"yyyy-MM-dd"),s=jc(r,"yyyy-MM-dd");S({from:t,to:r}),N("custom"),a((e=>(e.set("from",n),e.set("to",s),e.set("dateFilter","custom"),e)))}catch(eZ){s({title:"Error",description:"Invalid date selection",variant:"destructive"})}}),[a,s]),E=(0,t.useCallback)((e=>{if(N(e),"custom"===e)return;let t={from:new Date,to:new Date};try{switch(e){case"today":t={from:new Date,to:new Date};break;case"yesterday":{const e=Lc(new Date,1);t={from:e,to:e};break}case"thisWeek":t={from:zl(new Date,{weekStartsOn:1}),to:zc(new Date,{weekStartsOn:1})};break;case"thisMonth":t={from:Cc(new Date),to:kc(new Date)}}const r=jc(t.from,"yyyy-MM-dd"),n=jc(t.to,"yyyy-MM-dd");S(t),a((t=>(t.set("from",r),t.set("to",n),t.set("dateFilter",e),t))),C({startDate:t.from,endDate:t.to})}catch(eZ){s({title:"Error",description:"Error setting date range",variant:"destructive"})}}),[C,a]),T=(0,t.useMemo)((()=>c?"all"===y?c:c.filter((e=>"sales"===y?"return"!==e.saleType:"return"===e.saleType)):[]),[c,y]),D=e=>{b(e)},A=(0,t.useMemo)((()=>(T||[]).reduce(((e,t)=>{var r;return t?(e.count++,e.salesAmount+=(null===(r=t.billSummary)||void 0===r?void 0:r.grandTotal)||0,e.amountPaid+=t.amountPaid||0,e):e}),{count:0,salesAmount:0,amountPaid:0})),[T]);return(0,Rr.jsxs)("div",{className:"relative p-4 space-y-2",children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>e("/"),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-2xl font-bold",children:"Sales Transactions"})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-right",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"",children:A.count}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Sales Count"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"",children:PP(A.salesAmount)}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Sales Amount"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"",children:PP(A.amountPaid)}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Amount Paid"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:" text-red-500",children:PP(A.salesAmount-A.amountPaid)}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"To Receive"})]})]})]}),(0,Rr.jsxs)("div",{className:"flex gap-2",children:[(0,Rr.jsx)("div",{className:"relative",children:(0,Rr.jsxs)("div",{className:"relative flex items-center bg-white rounded-lg border border-slate-200 hover:border-slate-300 transition-colors overflow-hidden",children:[(0,Rr.jsx)("div",{className:"relative flex items-center border-r border-slate-200",children:(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsx)(Vn,{variant:"ghost",className:"h-9 w-[120px] border-0 bg-transparent hover:bg-slate-100 focus:ring-0 focus:ring-offset-0 justify-start px-3",children:"invoice"===m?"Invoice No":"Customer"})}),(0,Rr.jsxs)(_g,{align:"start",className:"w-[120px]",children:[(0,Rr.jsx)(Rg,{onSelect:()=>p("invoice"),children:"Invoice No"}),(0,Rr.jsx)(Rg,{onSelect:()=>p("customer"),children:"Customer"})]})]})}),(0,Rr.jsxs)("div",{className:"flex-1 relative flex items-center",children:[(0,Rr.jsx)("div",{className:"absolute left-3 flex items-center pointer-events-none",children:(0,Rr.jsx)(VN,{className:"h-4 w-4 text-slate-400"})}),(0,Rr.jsx)(Gf,{className:"w-full h-9 pl-10 pr-10 border-0 focus-visible:ring-0 placeholder:text-slate-400",placeholder:`Search by ${"invoice"===m?"invoice number":"customer name"}...`,value:d,onChange:e=>{return t=e.target.value,void u(t);var t}}),d&&(0,Rr.jsx)("div",{className:"absolute right-3 flex items-center",children:(0,Rr.jsx)(Vn,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-slate-100 rounded-full",onClick:()=>{u(""),C({startDate:j.from,endDate:j.to})},children:(0,Rr.jsx)(jN,{className:"h-4 w-4 text-blue-500"})})})]})]})}),(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"outline",className:"w-[150px]",children:[(0,Rr.jsx)(Bw,{className:"mr-2 h-4 w-4"}),"today"===w?"Today":"yesterday"===w?"Yesterday":"thisWeek"===w?"This Week":"thisMonth"===w?"This Month":"Custom"]})}),(0,Rr.jsxs)(_g,{children:[(0,Rr.jsx)(Rg,{onSelect:()=>E("today"),children:"Today"}),(0,Rr.jsx)(Rg,{onSelect:()=>E("yesterday"),children:"Yesterday"}),(0,Rr.jsx)(Rg,{onSelect:()=>E("thisWeek"),children:"This Week"}),(0,Rr.jsx)(Rg,{onSelect:()=>E("thisMonth"),children:"This Month"}),(0,Rr.jsx)(Rg,{onSelect:()=>E("custom"),children:"Custom"})]})]}),"custom"===w&&(0,Rr.jsx)("div",{className:"relative w-[300px]",children:(0,Rr.jsx)(AP,{from:j.from,to:j.to,onSelect:k,onSearch:()=>{C({startDate:j.from,endDate:j.to})},onCancel:()=>{S({from:new Date,to:new Date}),N("today"),a((e=>(e.delete("from"),e.delete("to"),e.delete("dateFilter"),e.delete("filter"),e)))},className:"border border-slate-200 rounded-md hover:border-slate-300 transition-colors"})}),(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"outline",className:"w-[120px]",children:[(0,Rr.jsx)(HN,{className:"mr-2 h-4 w-4"}),"all"===y?"All":"sales"===y?"Sales":"Returns"]})}),(0,Rr.jsxs)(_g,{children:[(0,Rr.jsx)(Rg,{onSelect:()=>D("all"),children:"All"}),(0,Rr.jsx)(Rg,{onSelect:()=>D("sales"),children:"Sales"}),(0,Rr.jsx)(Rg,{onSelect:()=>D("returns"),children:"Returns"})]})]}),(0,Rr.jsxs)("div",{className:"flex-1 flex justify-end gap-2",children:[(0,Rr.jsxs)(Vn,{variant:"outline",onClick:()=>e("/sales/create-sell-invoice"),className:"flex items-center gap-2",children:[(0,Rr.jsx)(Aw,{className:"h-4 w-4"}),"Create Sales Invoice"]}),(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsx)(Vn,{variant:"outline",children:(0,Rr.jsx)(EP,{className:"h-4 w-4"})})}),(0,Rr.jsxs)(_g,{align:"end",children:[(0,Rr.jsxs)(Rg,{onClick:()=>l(!0),children:[(0,Rr.jsx)(TP,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,Rr.jsxs)(Rg,{children:[(0,Rr.jsx)(DP,{className:"mr-2 h-4 w-4"}),"Import"]})]})]})]})]}),(0,Rr.jsx)("div",{className:"relative overflow-x-auto border-t",children:0===T.length?(0,Rr.jsx)("div",{className:"flex flex-col items-center justify-center py-16 text-muted-foreground",children:d?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(VN,{className:"h-12 w-12 mb-4 text-gray-400"}),(0,Rr.jsxs)("p",{className:"text-lg",children:['No sales bills found for "',d,'"']}),(0,Rr.jsx)("p",{className:"text-sm",children:"Try searching with a different invoice number or customer name"})]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(am,{className:"h-12 w-12 mb-4 text-gray-400"}),(0,Rr.jsx)("p",{className:"text-lg",children:"No sales bills found"}),(0,Rr.jsx)("p",{className:"text-sm",children:"Create a new sales invoice to get started"})]})}):(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:"pl-5",children:"S.NO"}),(0,Rr.jsx)(Tw,{children:"INVOICE NO"}),(0,Rr.jsx)(Tw,{children:"CUSTOMER Name"}),(0,Rr.jsx)(Tw,{children:"INVOICE DATE"}),(0,Rr.jsx)(Tw,{children:"BILLED ON"}),(0,Rr.jsx)(Tw,{children:"BILL TOTAL"}),(0,Rr.jsx)(Tw,{children:"Due Amt"}),(0,Rr.jsx)(Tw,{children:"Status"})]})}),(0,Rr.jsx)(Cw,{className:"border",children:T.map(((t,r)=>{var n,a;return(0,Rr.jsxs)(Ew,{className:"group cursor-pointer",onClick:()=>e(`/sales/${t._id}`),children:[(0,Rr.jsxs)(Dw,{className:"font-medium pl-5",children:[r+1," ","return"===(null===t||void 0===t?void 0:t.saleType)&&(0,Rr.jsx)("span",{className:"text-red-500",children:"R"})]}),(0,Rr.jsx)(Dw,{className:"font-medium",children:null===t||void 0===t?void 0:t.invoiceNumber}),(0,Rr.jsxs)(Dw,{children:[(0,Rr.jsx)("div",{className:"font-medium capitalize",children:null===t||void 0===t?void 0:t.customerName}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:null===t||void 0===t?void 0:t.mob})]}),(0,Rr.jsxs)(Dw,{className:"font-medium",children:[(0,Rr.jsx)("p",{children:new Date(null===t||void 0===t?void 0:t.invoiceDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"2-digit"})}),(0,Rr.jsxs)("p",{className:"text-xs text-gray-500",children:["By : ",null===t||void 0===t?void 0:t.createdByName]})]}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsxs)("div",{className:"font-medium",children:[(0,Rr.jsx)("p",{children:new Date(null===t||void 0===t?void 0:t.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"2-digit"})}),(0,Rr.jsx)("span",{className:"text-xs text-gray-500",children:jc(new Date(null===t||void 0===t?void 0:t.createdAt),"hh:mm a")})]})}),(0,Rr.jsx)(Dw,{className:"font-medium",children:PP((null===t||void 0===t||null===(n=t.billSummary)||void 0===n?void 0:n.grandTotal)||0)}),(0,Rr.jsxs)(Dw,{children:[(0,Rr.jsx)("div",{className:"font-medium",children:PP(((null===t||void 0===t||null===(a=t.billSummary)||void 0===a?void 0:a.grandTotal)||0)-((null===t||void 0===t?void 0:t.amountPaid)||0))}),(null===t||void 0===t?void 0:t.paymentDueDate)&&(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(null===t||void 0===t?void 0:t.paymentDueDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"2-digit"})})]}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)("div",{className:"flex items-center gap-2",children:(0,Rr.jsx)(qw,{variant:"paid"===(null===t||void 0===t?void 0:t.paymentStatus)?"success":"destructive",children:"paid"===(null===t||void 0===t?void 0:t.paymentStatus)?"Paid":"Due"})})})]},null===t||void 0===t?void 0:t._id)}))})]})}),(0,Rr.jsx)(k$,{open:o,onOpenChange:l,data:T,columns:[{header:"Invoice No",field:"invoiceNumber",width:15},{header:"Customer Name",field:"customerName",width:25},{header:"Mobile",field:"mob",width:15},{header:"Invoice Date",field:"invoiceDate",width:15},{header:"Created By",field:"createdByName",width:20},{header:"Bill Total",field:"billSummary.grandTotal",width:15,format:"currency",addTotal:!0},{header:"Amount Paid",field:"amountPaid",width:15,format:"currency",addTotal:!0},{header:"Due Amount",field:"dueAmount",width:15,format:"currency",addTotal:!0},{header:"Payment Status",field:"paymentStatus",width:15}],formatters:{"Invoice Date":e=>new Date(e).toLocaleDateString("en-IN"),"Due Amount":(e,t)=>{var r;return((null===(r=t.billSummary)||void 0===r?void 0:r.grandTotal)||0)-(t.amountPaid||0)},"Payment Status":e=>(null===e||void 0===e?void 0:e.charAt(0).toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))||"-"},fileName:"sales_transactions",title:"Export Sales Transactions"})]})}function T$(){const e=Z(),r=rt(),[n,a]=Pe(),{toast:s}=$g(),i=(0,t.useRef)(!0),[o,l]=(0,t.useState)(!1),{purchaseBills:c,fetchStatus:d,searchStatus:u,error:h}=$e((e=>e.purchaseBill)),[f,m]=(0,t.useState)(""),[p,x]=(0,t.useState)(""),[v,g]=(0,t.useState)("invoice"),[y,b]=(0,t.useState)(c),w=n.get("dateFilter")||"today",N=n.get("from"),j=n.get("to"),[S,C]=(0,t.useState)(w),[k,E]=(0,t.useState)({from:N?new Date(N):new Date,to:j?new Date(j):new Date});(0,t.useEffect)((()=>{const e=setTimeout((()=>{x(f)}),500);return()=>clearTimeout(e)}),[f]),(0,t.useEffect)((()=>{(async()=>{if(!i.current||(i.current=!1,p.trim()))if(p.trim())try{await r(hf({query:p,searchType:v})).unwrap()}catch(eZ){s({title:"Error",description:"Failed to search purchase bills",variant:"destructive"})}else await T({startDate:k.from,endDate:k.to})})()}),[p,v]);const T=async e=>{try{await r(uf({startDate:jc(e.startDate,"yyyy-MM-dd"),endDate:jc(e.endDate,"yyyy-MM-dd")})).unwrap()}catch(eZ){s({title:"Error fetching purchase bills",description:eZ.message,variant:"destructive"})}};(0,t.useEffect)((()=>{b(c)}),[c]);(0,t.useEffect)((()=>{const e=n.get("from"),t=n.get("to"),i=n.get("dateFilter");if(!e||!t){const e=new Date,t=jc(e,"yyyy-MM-dd");return a((e=>(e.set("from",t),e.set("to",t),e.set("dateFilter","today"),e))),E({from:e,to:e}),C("today"),void r(uf({startDate:e,endDate:e})).unwrap().catch((e=>{s({title:"Error fetching purchase bills",description:e.message,variant:"destructive"})}))}try{const n=new Date(e),a=new Date(t);if(isNaN(n.getTime())||isNaN(a.getTime()))throw new Error("Invalid date in URL parameters");E({from:n,to:a}),i&&C(i),r(uf({startDate:n,endDate:a})).unwrap().catch((e=>{s({title:"Error fetching purchase bills",description:e.message,variant:"destructive"})}))}catch(eZ){const t=new Date,n=jc(t,"yyyy-MM-dd");a((e=>(e.set("from",n),e.set("to",n),e.set("dateFilter","today"),e))),E({from:t,to:t}),C("today"),r(uf({startDate:t,endDate:t})).unwrap().catch((e=>{s({title:"Error fetching purchase bills",description:e.message,variant:"destructive"})})),s({title:"Invalid date parameters",description:"Reset to today's date",variant:"destructive"})}}),[]);const D=(0,t.useCallback)((e=>{if(null===e||void 0===e||!e.from||null===e||void 0===e||!e.to)return void console.error("fetchBills called with invalid range:",e);const t=e.from,n=e.to;r(uf({startDate:jc(t,"yyyy-MM-dd"),endDate:jc(n,"yyyy-MM-dd")})).unwrap().then((t=>{b(t),E(e)})).catch((e=>{console.error("Failed to fetch purchase bills:",e)}))}),[r]);(0,t.useEffect)((()=>{var e,t;if(!k.from||!k.to)return;(!k||(null===(e=k.from)||void 0===e?void 0:e.getTime())!==k.from.getTime()||(null===(t=k.to)||void 0===t?void 0:t.getTime())!==k.to.getTime())&&D(k)}),[k,D]);const A=(y||[]).reduce(((e,t)=>{var r;return t?(e.count++,e.purchaseAmount+=(null===(r=t.billSummary)||void 0===r?void 0:r.grandTotal)||0,e.amountPaid+=t.amountPaid||0,e):e}),{count:0,purchaseAmount:0,amountPaid:0}),P=()=>{if(!f.trim())return y||[];const e=f.toLowerCase();return(y||[]).filter((t=>{var r,n;if(!t)return!1;switch(v){case"invoice":return null===(r=t.invoiceNumber)||void 0===r?void 0:r.toLowerCase().includes(e);case"distributor":return null===(n=t.distributorName)||void 0===n?void 0:n.toLowerCase().includes(e);default:return!1}}))};return(0,Rr.jsxs)("div",{className:"relative p-4 space-y-2",children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>e("/"),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-2xl font-bold",children:"Purchases Transactions"})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-right",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"font-semibold",children:A.count}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Purc Count"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"font-semibold",children:PP(A.purchaseAmount)}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Purc Amount"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"font-semibold",children:PP(A.amountPaid)}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Amount Paid"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"font-semibold text-pink-500",children:PP(A.purchaseAmount-A.amountPaid)}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"To Pay"})]})]})]}),(0,Rr.jsxs)("div",{className:"flex gap-2 border-b border-slate-200 pb-2",children:[(0,Rr.jsx)("div",{className:"relative",children:(0,Rr.jsxs)("div",{className:"relative flex items-center bg-white rounded-lg border border-slate-200 hover:border-slate-300 transition-colors overflow-hidden",children:[(0,Rr.jsx)("div",{className:"relative flex items-center border-r border-slate-200",children:(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsx)(Vn,{variant:"ghost",className:"h-9 w-[120px] border-0 bg-transparent hover:bg-slate-100 focus:ring-0 focus:ring-offset-0 justify-start px-3",children:"invoice"===v?"Invoice No":"Distributor"})}),(0,Rr.jsxs)(_g,{align:"start",className:"w-[120px]",children:[(0,Rr.jsx)(Rg,{onSelect:()=>g("invoice"),children:"Invoice No"}),(0,Rr.jsx)(Rg,{onSelect:()=>g("distributor"),children:"Distributor"})]})]})}),(0,Rr.jsxs)("div",{className:"flex-1 relative flex items-center",children:[(0,Rr.jsx)("div",{className:"absolute left-3 flex items-center pointer-events-none",children:(0,Rr.jsx)(VN,{className:"h-4 w-4 text-slate-400"})}),(0,Rr.jsx)(Gf,{className:"w-full h-9 pl-10 pr-10 border-0 focus-visible:ring-0 placeholder:text-slate-400",placeholder:`Search by ${"invoice"===v?"invoice number":"distributor name"}...`,value:f,onChange:e=>{return t=e.target.value,void m(t);var t}}),f&&(0,Rr.jsx)("div",{className:"absolute right-3 flex items-center",children:(0,Rr.jsx)(Vn,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-slate-100 rounded-full",onClick:()=>{m(""),T({startDate:k.from,endDate:k.to})},children:(0,Rr.jsx)(jN,{className:"h-4 w-4 text-blue-500"})})})]})]})}),(0,Rr.jsxs)(fw,{value:S,onValueChange:e=>{if(C(e),"custom"===e)return;let t={from:new Date,to:new Date};try{switch(e){case"today":t={from:new Date,to:new Date};break;case"yesterday":{const e=Lc(new Date,1);t={from:e,to:e};break}case"thisWeek":t={from:zl(new Date,{weekStartsOn:1}),to:zc(new Date,{weekStartsOn:1})};break;case"thisMonth":t={from:Cc(new Date),to:kc(new Date)}}const n=jc(t.from,"yyyy-MM-dd"),i=jc(t.to,"yyyy-MM-dd");E(t),a((t=>(t.set("from",n),t.set("to",i),t.set("dateFilter",e),t))),r(uf({startDate:t.from,endDate:t.to})).unwrap().catch((e=>{s({title:"Error fetching purchase bills",description:e.message,variant:"destructive"})}))}catch(eZ){s({title:"Error",description:"Error setting date range",variant:"destructive"})}},children:[(0,Rr.jsx)(pw,{className:"w-[150px]",children:(0,Rr.jsx)(mw,{placeholder:"Select range"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"today",children:"Today"}),(0,Rr.jsx)(yw,{value:"yesterday",children:"Yesterday"}),(0,Rr.jsx)(yw,{value:"thisWeek",children:"This Week"}),(0,Rr.jsx)(yw,{value:"thisMonth",children:"This Month"}),(0,Rr.jsx)(yw,{value:"custom",children:"Custom"})]})]}),"custom"===S&&(0,Rr.jsx)("div",{className:"relative w-[300px]",children:(0,Rr.jsx)(AP,{from:k.from,to:k.to,onSelect:e=>{if(null!==e&&void 0!==e&&e.from&&null!==e&&void 0!==e&&e.to)try{const t=new Date(e.from),n=new Date(e.to);if(isNaN(t.getTime())||isNaN(n.getTime()))throw new Error("Invalid date selection");const i=jc(t,"yyyy-MM-dd"),o=jc(n,"yyyy-MM-dd");E({from:t,to:n}),C("custom"),a((e=>(e.set("from",i),e.set("to",o),e.set("dateFilter","custom"),e))),r(uf({startDate:t,endDate:n})).unwrap().catch((e=>{s({title:"Error fetching purchase bills",description:e.message,variant:"destructive"})}))}catch(eZ){s({title:"Error",description:"Invalid date selection",variant:"destructive"})}},onSearch:()=>{if(!k.to){const e={from:k.from.toISOString(),to:k.from.toISOString()};r(E(e))}},onCancel:()=>{const e={from:Lc(new Date,7),to:new Date},t={from:e.from.toISOString(),to:e.to.toISOString()};r(E(t))},className:"border border-slate-200 rounded-md hover:border-slate-300 transition-colors"})}),(0,Rr.jsxs)("div",{className:"flex-1 flex justify-end gap-2",children:[(0,Rr.jsxs)(Vn,{variant:"outline",onClick:()=>e("/purchase/create-purchase-invoice"),children:[(0,Rr.jsx)(Aw,{className:"h-4 w-4 mr-2"}),"Create Purchase Invoice"]}),(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsx)(Vn,{variant:"outline",children:(0,Rr.jsx)(EP,{className:"h-4 w-4"})})}),(0,Rr.jsx)(_g,{align:"end",children:(0,Rr.jsxs)(Rg,{onClick:()=>l(!0),children:[(0,Rr.jsx)(TP,{className:"mr-2 h-4 w-4"}),"Export"]})})]})]})]}),(0,Rr.jsx)("div",{className:"relative overflow-x-auto",children:0===y.length?(0,Rr.jsx)("div",{className:"flex flex-col items-center justify-center py-16 text-muted-foreground",children:f?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(VN,{className:"h-12 w-12 mb-4 text-gray-400"}),(0,Rr.jsxs)("p",{className:"text-lg",children:['No purchase bills found for "',f,'"']}),(0,Rr.jsx)("p",{className:"text-sm",children:"Try searching with a different invoice number or distributor name"})]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(am,{className:"h-12 w-12 mb-4"}),(0,Rr.jsx)("p",{className:"text-lg",children:"No purchase bills found"}),(0,Rr.jsx)("p",{className:"text-sm",children:"Create a new purchase invoice to get started"})]})}):(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:"pl-5",children:"S.NO"}),(0,Rr.jsx)(Tw,{children:"INVOICE NO"}),(0,Rr.jsx)(Tw,{children:"DISTRIBUTOR / GSTIN"}),(0,Rr.jsx)(Tw,{children:"INVOICE DATE"}),(0,Rr.jsx)(Tw,{children:"GST"}),(0,Rr.jsx)(Tw,{children:"BILLED ON"}),(0,Rr.jsx)(Tw,{children:"BILL TOTAL"}),(0,Rr.jsx)(Tw,{children:"Due Amt"}),(0,Rr.jsx)(Tw,{children:"STATUS"})]})}),(0,Rr.jsx)(Cw,{className:"border",children:P().map(((t,r)=>{var n,a;return(0,Rr.jsxs)(Ew,{className:"group cursor-pointer",onClick:()=>e(`/purchase/${t._id}`),children:[(0,Rr.jsx)(Dw,{className:"font-medium pl-5",children:r+1}),(0,Rr.jsx)(Dw,{className:"font-medium",children:t.invoiceNumber}),(0,Rr.jsxs)(Dw,{children:[(0,Rr.jsx)("div",{className:"font-medium",children:t.distributorName}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:t.mob})]}),(0,Rr.jsxs)(Dw,{className:"font-medium",children:[(0,Rr.jsx)("p",{children:new Date(t.invoiceDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"2-digit"})}),(0,Rr.jsxs)("p",{className:"text-xs text-gray-500",children:["By : ",t.createdByName]})]}),(0,Rr.jsx)(Dw,{children:t.withGst?"With GST":"Without GST"}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsxs)("div",{className:"font-medium",children:[(0,Rr.jsx)("p",{className:"uppercase",children:jc(new Date(t.createdAt),"dd-MM-yyyy")})," ",jc(new Date(t.createdAt),"hh:mm a")]})}),(0,Rr.jsx)(Dw,{className:"font-medium",children:PP((null===(n=t.billSummary)||void 0===n?void 0:n.grandTotal)||0)}),(0,Rr.jsxs)(Dw,{children:[(0,Rr.jsx)("div",{className:"font-medium",children:PP(((null===(a=t.billSummary)||void 0===a?void 0:a.grandTotal)||0)-(t.amountPaid||0))}),t.paymentDueDate&&(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(t.paymentDueDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"2-digit"})})]}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)("div",{className:"flex items-center gap-2",children:(0,Rr.jsx)(qw,{variant:"paid"===t.paymentStatus?"success":"destructive",children:"paid"===t.paymentStatus?"Paid":"Due"})})})]},t._id)}))})]})}),(0,Rr.jsx)(k$,{open:o,onOpenChange:l,data:P(),columns:[{header:"Invoice No",field:"invoiceNumber",width:15},{header:"Distributor Name",field:"distributorName",width:25},{header:"Mobile",field:"mob",width:15},{header:"Invoice Date",field:"invoiceDate",width:15},{header:"Created By",field:"createdByName",width:20},{header:"GST Type",field:"withGst",width:15},{header:"Bill Total",field:"billSummary.grandTotal",width:15,format:"currency",addTotal:!0},{header:"Amount Paid",field:"amountPaid",width:15,format:"currency",addTotal:!0},{header:"Due Amount",field:"dueAmount",width:15,format:"currency",addTotal:!0},{header:"Payment Status",field:"paymentStatus",width:15}],formatters:{"Invoice Date":e=>new Date(e).toLocaleDateString("en-IN"),"GST Type":e=>e?"With GST":"Without GST","Due Amount":(e,t)=>{var r;return((null===(r=t.billSummary)||void 0===r?void 0:r.grandTotal)||0)-(t.amountPaid||0)},"Payment Status":e=>(null===e||void 0===e?void 0:e.charAt(0).toUpperCase())+(null===e||void 0===e?void 0:e.slice(1))||"-"},fileName:"purchase_transactions",title:"Export Purchase Transactions"})]})}C$.displayName=j$.displayName;const D$=()=>{const[e,r]=(0,t.useState)([]),[n,a]=(0,t.useState)({from:Lc(new Date,7),to:new Date}),[s,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)("debitNote"),u=Z(),{toast:h}=$g(),f=async()=>{try{i(!0);let e=`${Nu}/api/purchase/returns`;if(n.from&&n.to){const t=jc(n.from,"yyyy-MM-dd");e+=`?startDate=${t}&endDate=${jc(n.to,"yyyy-MM-dd")}`}const t=await fetch(e,{headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error("Failed to fetch purchase returns");const a=await t.json();r(a)}catch(e){h({title:"Error",description:e.message,variant:"destructive"})}finally{i(!1)}};(0,t.useEffect)((()=>{f()}),[]);const m=e.reduce(((e,t)=>(e.count++,e.totalAmount+=t.billSummary.grandTotal||0,e.completedAmount+="completed"===t.paymentStatus?t.billSummary.grandTotal:0,e)),{count:0,totalAmount:0,completedAmount:0});return(0,Rr.jsxs)("div",{className:"relative p-4 space-y-4",children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>u(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-2xl font-semibold",children:"Purchase Returns"})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-right",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"font-semibold",children:m.count}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Returns"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"font-semibold",children:PP(m.totalAmount)}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Amount"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"font-semibold",children:PP(m.completedAmount)}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Completed Amount"})]})]})]}),(0,Rr.jsxs)("div",{className:"flex gap-4",children:[(0,Rr.jsx)("div",{className:"relative flex-1",children:(0,Rr.jsxs)("div",{className:"relative flex items-center bg-white rounded-lg border border-slate-200 hover:border-slate-300 transition-colors overflow-hidden",children:[(0,Rr.jsx)("div",{className:"relative flex items-center px-3 border-r border-slate-200",children:(0,Rr.jsxs)(fw,{defaultValue:"debitNote",onValueChange:e=>d(e),children:[(0,Rr.jsx)(pw,{className:"h-9 w-[120px] border-0 bg-transparent hover:bg-slate-100 focus:ring-0 focus:ring-offset-0",children:(0,Rr.jsx)(mw,{placeholder:"Search by"})}),(0,Rr.jsxs)(gw,{align:"start",className:"w-[120px]",children:[(0,Rr.jsx)(yw,{value:"debitNote",className:"text-sm",children:"Debit Note"}),(0,Rr.jsx)(yw,{value:"distributor",className:"text-sm",children:"Distributor"}),(0,Rr.jsx)(yw,{value:"invoice",className:"text-sm",children:"Invoice No"})]})]})}),(0,Rr.jsxs)("div",{className:"flex-1 relative flex items-center",children:[(0,Rr.jsx)("div",{className:"absolute left-3 flex items-center pointer-events-none",children:(0,Rr.jsx)(VN,{className:"h-4 w-4 text-slate-400"})}),(0,Rr.jsx)(Gf,{className:"w-full h-9 pl-10 pr-10 border-0 focus-visible:ring-0 placeholder:text-slate-400",placeholder:`Search by ${"debitNote"===c?"debit note number":"distributor"===c?"distributor name":"invoice number"}...`,value:o,onChange:e=>l(e.target.value)}),o&&(0,Rr.jsx)("div",{className:"absolute right-3 flex items-center",children:(0,Rr.jsx)(Vn,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-slate-100 rounded-full",onClick:()=>l(""),children:(0,Rr.jsx)(jN,{className:"h-3 w-3 text-slate-500"})})})]})]})}),(0,Rr.jsx)("div",{className:"relative w-[300px]",children:(0,Rr.jsx)(AP,{from:n.from,to:n.to,onSelect:e=>{a(e)},onSearch:()=>{f()},onCancel:()=>{a({from:Lc(new Date,7),to:new Date})},className:"border border-slate-200 rounded-md hover:border-slate-300 transition-colors"})}),(0,Rr.jsx)(Vn,{className:"w-[200px]",onClick:()=>u("/purchase/return/create"),children:"Create Return"})]}),(0,Rr.jsx)("div",{className:"relative overflow-x-auto",children:0===e.length?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-muted-foreground",children:[(0,Rr.jsx)(am,{className:"h-12 w-12 mb-4"}),(0,Rr.jsx)("p",{className:"text-lg",children:"No purchase returns found"}),(0,Rr.jsx)("p",{className:"text-sm",children:"Create a new purchase return to get started"})]}):(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{children:"DEBIT NOTE NO."}),(0,Rr.jsx)(Tw,{children:"DISTRIBUTOR"}),(0,Rr.jsx)(Tw,{children:"RETURN DATE"}),(0,Rr.jsx)(Tw,{children:"ORIGINAL INVOICE"}),(0,Rr.jsx)(Tw,{children:"TOTAL ITEMS"}),(0,Rr.jsx)(Tw,{children:"TOTAL AMOUNT"})]})}),(0,Rr.jsxs)(Cw,{children:[(o?e.filter((e=>{const t=o.toLowerCase();switch(c){case"debitNote":return e.debitNoteNumber.toLowerCase().includes(t);case"distributor":return e.distributorName.toLowerCase().includes(t);case"invoice":return e.originalInvoiceNumber.toLowerCase().includes(t);default:return!0}})):e).map((e=>(0,Rr.jsxs)(Ew,{className:"group cursor-pointer",onClick:()=>u(`/purchase/return/${e._id}`),children:[(0,Rr.jsx)(Dw,{className:"font-medium",children:e.debitNoteNumber}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)("div",{className:"font-medium",children:e.distributorName})}),(0,Rr.jsx)(Dw,{children:jc(new Date(e.returnDate),"dd/MMM/yy")}),(0,Rr.jsx)(Dw,{children:e.originalInvoiceNumber}),(0,Rr.jsx)(Dw,{children:e.billSummary.productCount}),(0,Rr.jsx)(Dw,{className:"font-medium",children:PP(e.billSummary.grandTotal)})]},e._id))),s&&(0,Rr.jsx)(Ew,{children:(0,Rr.jsx)(Dw,{colSpan:7,className:"text-center py-8",children:"Loading..."})})]})]})})]})},A$={name:"",mob:"",email:"",openBalance:"",balance_type:"collect",gstin:"",DLNumber:"",address:"",bankDetails:{accountNumber:"",ifsc:""}};function P$(e){let{open:r,onOpenChange:n,onSuccess:a,distributorToEdit:s,initialData:i}=e;const o=(0,t.useRef)([]),l=rt(),{createDistributorStatus:c,updateDistributorStatus:d}=$e((e=>e.distributor)),{toast:u}=$g(),h=["name","openBalance","balance_type","mob","email","gstin","DLNumber","accountNumber","ifsc","address","save_button"],f=(e,t)=>{if("Enter"===e.key){e.preventDefault();const a=h.indexOf(t);if(e.shiftKey){if(a>0){var r;const e=h[a-1];null===(r=o.current[e])||void 0===r||r.focus()}}else if(a<h.length-1){var n;const e=h[a+1];null===(n=o.current[e])||void 0===n||n.focus()}}},[m,p]=(0,t.useState)(A$);(0,t.useEffect)((()=>{var e,t;s?p({...s,balance_type:s.openBalance>=0?"collect":"pay",openBalance:Math.abs(s.openBalance||0).toString(),bankDetails:{accountNumber:(null===(e=s.bankDetails)||void 0===e?void 0:e.accountNumber)||"",ifsc:(null===(t=s.bankDetails)||void 0===t?void 0:t.ifsc)||""}}):p(i?{...A$,...i,bankDetails:{accountNumber:i.accountNumber||"",ifsc:i.ifsc||""}}:A$)}),[s,i]);const x=e=>{const{name:t,value:r}=e.target;p("accountNumber"===t||"ifsc"===t?{...m,bankDetails:{...m.bankDetails,[t]:r}}:{...m,[t]:r})};(0,t.useEffect)((()=>{const e=setTimeout((()=>{var e;r&&o.current.name&&(null===(e=o.current.name)||void 0===e||e.focus())}),100);return()=>clearTimeout(e)}),[r]);const v="loading"===c||"loading"===d;return(0,Rr.jsx)(WN,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(XN,{className:"max-w-4xl p-0 gap-0 font-roboto",children:[(0,Rr.jsx)(QN,{className:"px-6 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:(0,Rr.jsx)(ZN,{className:"font-medium",children:s?"Edit Distributor":"Create Distributor"})}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsx)("form",{id:"createDistributorForm",onSubmit:async e=>{e.preventDefault();try{const e={...m};let t,r=Number(e.openBalance);"pay"===e.balance_type&&r>0?r=-r:"collect"===e.balance_type&&r<0&&(r=Math.abs(r)),e.openBalance=r,s?(t=await l(bh({id:s._id,distributorData:e})).unwrap(),u({title:"Distributor updated successfully",variant:"success"})):(t=await l(mh(e)).unwrap(),u({title:"Distributor created successfully",variant:"success"})),n(!1),null===a||void 0===a||a(t),s||p(A$)}catch(t){u({title:s?"Failed to update distributor":"Failed to create distributor",variant:"destructive"})}},className:"p-6",children:(0,Rr.jsxs)("div",{className:"space-y-6",children:[(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Rr.jsxs)("div",{className:"flex-1",children:[(0,Rr.jsxs)(yN,{htmlFor:"name",className:"text-xs font-medium",children:["Distributor Name",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{id:"name",name:"name",value:m.name,onChange:x,onKeyDown:e=>f(e,"name"),ref:e=>o.current.name=e,placeholder:"Enter Distributor name",required:!0,className:"h-8 mt-1.5 text-sm font-semibold p-2 border rounded-md"})]}),(0,Rr.jsxs)("div",{className:"w-[180px]",children:[(0,Rr.jsx)(yN,{htmlFor:"openBalance",className:"text-xs font-medium",children:"Balance"}),(0,Rr.jsx)(Gf,{id:"openBalance",name:"openBalance",type:"number",value:m.openBalance,onChange:x,onKeyDown:e=>f(e,"openBalance"),ref:e=>o.current.openBalance=e,placeholder:"\u20b9 0",className:"h-8 mt-1.5 text-sm font-semibold p-2 border rounded-md"})]}),(0,Rr.jsxs)("div",{className:"w-[160px]",children:[(0,Rr.jsx)(yN,{className:"text-xs font-medium ",children:"Type"}),(0,Rr.jsxs)(fw,{value:m.balance_type,onValueChange:e=>((e,t)=>{p({...m,[e]:t})})("balance_type",e),children:[(0,Rr.jsx)(pw,{className:"h-8 mt-1.5 text-sm",ref:e=>o.current.balance_type=e,onKeyDown:e=>f(e,"balance_type"),children:(0,Rr.jsx)(mw,{placeholder:"Select"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"collect",children:"To Collect"}),(0,Rr.jsx)(yw,{value:"pay",children:"To Pay"})]})]})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"mob",className:"text-xs font-medium ",children:"Mobile Number"}),(0,Rr.jsx)(Gf,{id:"mob",name:"mob",value:m.mob,onChange:x,onKeyDown:e=>f(e,"mob"),ref:e=>o.current.mob=e,placeholder:"Enter mobile",className:"h-8 mt-1.5 text-sm font-semibold p-2 border rounded-md"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"email",className:"text-xs font-medium ",children:"Email"}),(0,Rr.jsx)(Gf,{id:"email",name:"email",type:"email",value:m.email,onChange:x,onKeyDown:e=>f(e,"email"),ref:e=>o.current.email=e,placeholder:"Enter email",className:"h-8 mt-1.5 text-sm font-semibold p-2 border rounded-md"})]})]})]}),(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"gstin",className:"text-xs font-medium ",children:"GSTIN"}),(0,Rr.jsx)(Gf,{id:"gstin",name:"gstin",value:m.gstin,onChange:x,onKeyDown:e=>f(e,"gstin"),ref:e=>o.current.gstin=e,placeholder:"ex: 29XXXXX9438X1XX",className:"h-8 mt-1 text-sm font-semibold p-2 border rounded-md"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"DLNumber",className:"text-xs font-medium ",children:"Drug License Number"}),(0,Rr.jsx)(Gf,{id:"DLNumber",name:"DLNumber",value:m.DLNumber,onChange:x,onKeyDown:e=>f(e,"DLNumber"),ref:e=>o.current.DLNumber=e,placeholder:"Enter DL Number",className:"h-8 mt-1 text-sm font-semibold p-2 border rounded-md"})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"accountNumber",className:"text-xs font-medium",children:"Bank Account Number"}),(0,Rr.jsx)(Gf,{id:"accountNumber",name:"accountNumber",value:m.bankDetails.accountNumber,onChange:x,onKeyDown:e=>f(e,"accountNumber"),ref:e=>o.current.accountNumber=e,placeholder:"Enter account number",className:"h-8 mt-1 text-sm font-semibold p-2 border rounded-md"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"ifsc",className:"text-xs font-medium",children:"IFSC Code"}),(0,Rr.jsx)(Gf,{id:"ifsc",name:"ifsc",value:m.bankDetails.ifsc,onChange:x,onKeyDown:e=>f(e,"ifsc"),ref:e=>o.current.ifsc=e,placeholder:"Enter IFSC code",className:"h-8 mt-1 text-sm font-semibold p-2 border rounded-md uppercase"})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"address",className:"text-xs font-medium ",children:"Address Details"}),(0,Rr.jsx)(wN,{id:"address",name:"address",className:"w-full h-[60px] p-2 mt-1 rounded-md border border-input text-sm font-semibold resize-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter complete address",value:m.address,onChange:x,onKeyDown:e=>f(e,"address"),ref:e=>o.current.address=e})]})]})]})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-50 border-t flex items-center justify-end gap-3",children:[(0,Rr.jsx)(Vn,{type:"button",variant:"outline",onClick:()=>n(!1),className:"h-8 text-sm px-4",children:"Cancel"}),(0,Rr.jsx)(Vn,{type:"submit",form:"createDistributorForm",ref:e=>o.current.save_button=e,disabled:v,className:"h-8 px-10 text-sm bg-blue-600 text-white hover:bg-blue-700",children:v?"Saving...":"Save"})]})]})})}const _$=rm("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),R$=rm("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const I$="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function M$(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function O$(e){return"nodeType"in e}function F$(e){var t,r;return e?M$(e)?e:O$(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function L$(e){const{Document:t}=F$(e);return e instanceof t}function B$(e){return!M$(e)&&e instanceof F$(e).HTMLElement}function U$(e){return e instanceof F$(e).SVGElement}function z$(e){return e?M$(e)?e.document:O$(e)?L$(e)?e:B$(e)||U$(e)?e.ownerDocument:document:document:document}const V$=I$?t.useLayoutEffect:t.useEffect;function H$(e){const r=(0,t.useRef)(e);return V$((()=>{r.current=e})),(0,t.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return null==r.current?void 0:r.current(...t)}),[])}function $$(e,r){void 0===r&&(r=[e]);const n=(0,t.useRef)(e);return V$((()=>{n.current!==e&&(n.current=e)}),r),n}function W$(e,r){const n=(0,t.useRef)();return(0,t.useMemo)((()=>{const t=e(n.current);return n.current=t,t}),[...r])}function q$(e){const r=H$(e),n=(0,t.useRef)(null),a=(0,t.useCallback)((e=>{e!==n.current&&(null==r||r(e,n.current)),n.current=e}),[]);return[n,a]}function G$(e){const r=(0,t.useRef)();return(0,t.useEffect)((()=>{r.current=e}),[e]),r.current}let K$={};function Y$(e,r){return(0,t.useMemo)((()=>{if(r)return r;const t=null==K$[e]?0:K$[e]+1;return K$[e]=t,e+"-"+t}),[e,r])}function X$(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce(((t,r)=>{const n=Object.entries(r);for(const[a,s]of n){const r=t[a];null!=r&&(t[a]=r+e*s)}return t}),{...t})}}const Q$=X$(1),J$=X$(-1);function Z$(e){if(!e)return!1;const{KeyboardEvent:t}=F$(e.target);return t&&e instanceof t}function eW(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=F$(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const tW=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[tW.Translate.toString(e),tW.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),rW="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function nW(e){return e.matches(rW)?e:e.querySelector(rW)}const aW={display:"none"};function sW(e){let{id:r,value:n}=e;return t.createElement("div",{id:r,style:aW},n)}function iW(e){let{id:r,announcement:n,ariaLiveType:a="assertive"}=e;return t.createElement("div",{id:r,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":a,"aria-atomic":!0},n)}const oW=(0,t.createContext)(null);const lW={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},cW={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function dW(e){let{announcements:r=cW,container:n,hiddenTextDescribedById:a,screenReaderInstructions:s=lW}=e;const{announce:i,announcement:o}=function(){const[e,r]=(0,t.useState)("");return{announce:(0,t.useCallback)((e=>{null!=e&&r(e)}),[]),announcement:e}}(),l=Y$("DndLiveRegion"),[c,d]=(0,t.useState)(!1);if((0,t.useEffect)((()=>{d(!0)}),[]),function(e){const r=(0,t.useContext)(oW);(0,t.useEffect)((()=>{if(!r)throw new Error("useDndMonitor must be used within a children of <DndContext>");return r(e)}),[e,r])}((0,t.useMemo)((()=>({onDragStart(e){let{active:t}=e;i(r.onDragStart({active:t}))},onDragMove(e){let{active:t,over:n}=e;r.onDragMove&&i(r.onDragMove({active:t,over:n}))},onDragOver(e){let{active:t,over:n}=e;i(r.onDragOver({active:t,over:n}))},onDragEnd(e){let{active:t,over:n}=e;i(r.onDragEnd({active:t,over:n}))},onDragCancel(e){let{active:t,over:n}=e;i(r.onDragCancel({active:t,over:n}))}})),[i,r])),!c)return null;const u=t.createElement(t.Fragment,null,t.createElement(sW,{id:a,value:s.draggable}),t.createElement(iW,{id:l,announcement:o}));return n?(0,ge.createPortal)(u,n):u}var uW;function hW(){}function fW(e,r){return(0,t.useMemo)((()=>({sensor:e,options:null!=r?r:{}})),[e,r])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(uW||(uW={}));const mW=Object.freeze({x:0,y:0});function pW(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function xW(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function vW(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function gW(e){let{left:t,top:r,height:n,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+n},{x:t+a,y:r+n}]}function yW(e,t){if(!e||0===e.length)return null;const[r]=e;return t?r[t]:r}function bW(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}const wW=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=bW(t,t.left,t.top),s=[];for(const i of n){const{id:e}=i,t=r.get(e);if(t){const r=pW(bW(t),a);s.push({id:e,data:{droppableContainer:i,value:r}})}}return s.sort(xW)};function NW(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=a-n,o=s-r;if(n<a&&r<s){const r=t.width*t.height,n=e.width*e.height,a=i*o;return Number((a/(r+n-a)).toFixed(4))}return 0}const jW=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=[];for(const s of n){const{id:e}=s,n=r.get(e);if(n){const r=NW(n,t);r>0&&a.push({id:e,data:{droppableContainer:s,value:r}})}}return a.sort(vW)};function SW(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:mW}function CW(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce(((t,r)=>({...t,top:t.top+e*r.y,bottom:t.bottom+e*r.y,left:t.left+e*r.x,right:t.right+e*r.x})),{...t})}}const kW=CW(1);function EW(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const TW={ignoreTransform:!1};function DW(e,t){void 0===t&&(t=TW);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:n}=F$(e).getComputedStyle(e);t&&(r=function(e,t,r){const n=EW(t);if(!n)return e;const{scaleX:a,scaleY:s,x:i,y:o}=n,l=e.left-i-(1-a)*parseFloat(r),c=e.top-o-(1-s)*parseFloat(r.slice(r.indexOf(" ")+1)),d=a?e.width/a:e.width,u=s?e.height/s:e.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}(r,t,n))}const{top:n,left:a,width:s,height:i,bottom:o,right:l}=r;return{top:n,left:a,width:s,height:i,bottom:o,right:l}}function AW(e){return DW(e,{ignoreTransform:!0})}function PW(e,t){const r=[];return e?function n(a){if(null!=t&&r.length>=t)return r;if(!a)return r;if(L$(a)&&null!=a.scrollingElement&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!B$(a)||U$(a))return r;if(r.includes(a))return r;const s=F$(e).getComputedStyle(a);return a!==e&&function(e,t){void 0===t&&(t=F$(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const n=t[e];return"string"===typeof n&&r.test(n)}))}(a,s)&&r.push(a),function(e,t){return void 0===t&&(t=F$(e).getComputedStyle(e)),"fixed"===t.position}(a,s)?r:n(a.parentNode)}(e):r}function _W(e){const[t]=PW(e,1);return null!=t?t:null}function RW(e){return I$&&e?M$(e)?e:O$(e)?L$(e)||e===z$(e).scrollingElement?window:B$(e)?e:null:null:null}function IW(e){return M$(e)?e.scrollX:e.scrollLeft}function MW(e){return M$(e)?e.scrollY:e.scrollTop}function OW(e){return{x:IW(e),y:MW(e)}}var FW;function LW(e){return!(!I$||!e)&&e===document.scrollingElement}function BW(e){const t={x:0,y:0},r=LW(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(FW||(FW={}));const UW={x:.2,y:.2};function zW(e,t,r,n,a){let{top:s,left:i,right:o,bottom:l}=r;void 0===n&&(n=10),void 0===a&&(a=UW);const{isTop:c,isBottom:d,isLeft:u,isRight:h}=BW(e),f={x:0,y:0},m={x:0,y:0},p=t.height*a.y,x=t.width*a.x;return!c&&s<=t.top+p?(f.y=FW.Backward,m.y=n*Math.abs((t.top+p-s)/p)):!d&&l>=t.bottom-p&&(f.y=FW.Forward,m.y=n*Math.abs((t.bottom-p-l)/p)),!h&&o>=t.right-x?(f.x=FW.Forward,m.x=n*Math.abs((t.right-x-o)/x)):!u&&i<=t.left+x&&(f.x=FW.Backward,m.x=n*Math.abs((t.left+x-i)/x)),{direction:f,speed:m}}function VW(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}function HW(e){return e.reduce(((e,t)=>Q$(e,OW(t))),mW)}function $W(e,t){if(void 0===t&&(t=DW),!e)return;const{top:r,left:n,bottom:a,right:s}=t(e);_W(e)&&(a<=0||s<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const WW=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+IW(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+MW(t)),0)}]];class qW{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=PW(t),n=HW(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,s,i]of WW)for(const e of s)Object.defineProperty(this,e,{get:()=>{const t=i(r),s=n[a]-t;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class GW{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function KW(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return"number"===typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}var YW,XW;function QW(e){e.preventDefault()}function JW(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(YW||(YW={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(XW||(XW={}));const ZW={start:[XW.Space,XW.Enter],cancel:[XW.Esc],end:[XW.Space,XW.Enter,XW.Tab]},eq=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case XW.Right:return{...r,x:r.x+25};case XW.Left:return{...r,x:r.x-25};case XW.Down:return{...r,y:r.y+25};case XW.Up:return{...r,y:r.y-25}}};class tq{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new GW(z$(t)),this.windowListeners=new GW(F$(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(YW.Resize,this.handleCancel),this.windowListeners.add(YW.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(YW.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&$W(r),t(mW)}handleKeyDown(e){if(Z$(e)){const{active:t,context:r,options:n}=this.props,{keyboardCodes:a=ZW,coordinateGetter:s=eq,scrollBehavior:i="smooth"}=n,{code:o}=e;if(a.end.includes(o))return void this.handleEnd(e);if(a.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:l}=r.current,c=l?{x:l.left,y:l.top}:mW;this.referenceCoordinates||(this.referenceCoordinates=c);const d=s(e,{active:t,context:r.current,currentCoordinates:c});if(d){const t=J$(d,c),n={x:0,y:0},{scrollableAncestors:a}=r.current;for(const r of a){const a=e.code,{isTop:s,isRight:o,isLeft:l,isBottom:c,maxScroll:u,minScroll:h}=BW(r),f=VW(r),m={x:Math.min(a===XW.Right?f.right-f.width/2:f.right,Math.max(a===XW.Right?f.left:f.left+f.width/2,d.x)),y:Math.min(a===XW.Down?f.bottom-f.height/2:f.bottom,Math.max(a===XW.Down?f.top:f.top+f.height/2,d.y))},p=a===XW.Right&&!o||a===XW.Left&&!l,x=a===XW.Down&&!c||a===XW.Up&&!s;if(p&&m.x!==d.x){const e=r.scrollLeft+t.x,s=a===XW.Right&&e<=u.x||a===XW.Left&&e>=h.x;if(s&&!t.y)return void r.scrollTo({left:e,behavior:i});n.x=s?r.scrollLeft-e:a===XW.Right?r.scrollLeft-u.x:r.scrollLeft-h.x,n.x&&r.scrollBy({left:-n.x,behavior:i});break}if(x&&m.y!==d.y){const e=r.scrollTop+t.y,s=a===XW.Down&&e<=u.y||a===XW.Up&&e>=h.y;if(s&&!t.x)return void r.scrollTo({top:e,behavior:i});n.y=s?r.scrollTop-e:a===XW.Down?r.scrollTop-u.y:r.scrollTop-h.y,n.y&&r.scrollBy({top:-n.y,behavior:i});break}}this.handleMove(e,Q$(J$(d,this.referenceCoordinates),n))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function rq(e){return Boolean(e&&"distance"in e)}function nq(e){return Boolean(e&&"delay"in e)}tq.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=ZW,onActivation:a}=t,{active:s}=r;const{code:i}=e.nativeEvent;if(n.start.includes(i)){const t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class aq{constructor(e,t,r){var n;void 0===r&&(r=function(e){const{EventTarget:t}=F$(e);return e instanceof t?e:z$(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:s}=a;this.props=e,this.events=t,this.document=z$(s),this.documentListeners=new GW(this.document),this.listeners=new GW(r),this.windowListeners=new GW(F$(s)),this.initialCoordinates=null!=(n=eW(a))?n:mW,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(YW.Resize,this.handleCancel),this.windowListeners.add(YW.DragStart,QW),this.windowListeners.add(YW.VisibilityChange,this.handleCancel),this.windowListeners.add(YW.ContextMenu,QW),this.documentListeners.add(YW.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(nq(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(rq(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(YW.Click,JW,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(YW.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:n,props:a}=this,{onMove:s,options:{activationConstraint:i}}=a;if(!n)return;const o=null!=(t=eW(e))?t:mW,l=J$(n,o);if(!r&&i){if(rq(i)){if(null!=i.tolerance&&KW(l,i.tolerance))return this.handleCancel();if(KW(l,i.distance))return this.handleStart()}return nq(i)&&KW(l,i.tolerance)?this.handleCancel():void this.handlePending(i,l)}e.cancelable&&e.preventDefault(),s(o)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===XW.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const sq={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class iq extends aq{constructor(e){const{event:t}=e,r=z$(t.target);super(e,sq,r)}}iq.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!(!r.isPrimary||0!==r.button)&&(null==n||n({event:r}),!0)}}];const oq={move:{name:"mousemove"},end:{name:"mouseup"}};var lq;!function(e){e[e.RightClick=2]="RightClick"}(lq||(lq={}));(class extends aq{constructor(e){super(e,oq,z$(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button!==lq.RightClick&&(null==n||n({event:r}),!0)}}];const cq={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var dq,uq;function hq(e){let{acceleration:r,activator:n=dq.Pointer,canScroll:a,draggingRect:s,enabled:i,interval:o=5,order:l=uq.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:h,threshold:f}=e;const m=function(e){let{delta:t,disabled:r}=e;const n=G$(t);return W$((e=>{if(r||!n||!e)return fq;const a={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[FW.Backward]:e.x[FW.Backward]||-1===a.x,[FW.Forward]:e.x[FW.Forward]||1===a.x},y:{[FW.Backward]:e.y[FW.Backward]||-1===a.y,[FW.Forward]:e.y[FW.Forward]||1===a.y}}}),[r,t,n])}({delta:h,disabled:!i}),[p,x]=function(){const e=(0,t.useRef)(null),r=(0,t.useCallback)(((t,r)=>{e.current=setInterval(t,r)}),[]);return[r,(0,t.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),v=(0,t.useRef)({x:0,y:0}),g=(0,t.useRef)({x:0,y:0}),y=(0,t.useMemo)((()=>{switch(n){case dq.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case dq.DraggableRect:return s}}),[n,s,c]),b=(0,t.useRef)(null),w=(0,t.useCallback)((()=>{const e=b.current;if(!e)return;const t=v.current.x*g.current.x,r=v.current.y*g.current.y;e.scrollBy(t,r)}),[]),N=(0,t.useMemo)((()=>l===uq.TreeOrder?[...d].reverse():d),[l,d]);(0,t.useEffect)((()=>{if(i&&d.length&&y){for(const e of N){if(!1===(null==a?void 0:a(e)))continue;const t=d.indexOf(e),n=u[t];if(!n)continue;const{direction:s,speed:i}=zW(e,n,y,r,f);for(const e of["x","y"])m[e][s[e]]||(i[e]=0,s[e]=0);if(i.x>0||i.y>0)return x(),b.current=e,p(w,o),v.current=i,void(g.current=s)}v.current={x:0,y:0},g.current={x:0,y:0},x()}else x()}),[r,w,a,x,i,o,JSON.stringify(y),JSON.stringify(m),p,d,N,u,JSON.stringify(f)])}(class extends aq{constructor(e){super(e,cq)}static setup(){return window.addEventListener(cq.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(cq.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:a}=r;return!(a.length>1)&&(null==n||n({event:r}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(dq||(dq={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(uq||(uq={}));const fq={x:{[FW.Backward]:!1,[FW.Forward]:!1},y:{[FW.Backward]:!1,[FW.Forward]:!1}};var mq,pq;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(mq||(mq={})),function(e){e.Optimized="optimized"}(pq||(pq={}));const xq=new Map;function vq(e,t){return W$((r=>e?r||("function"===typeof t?t(e):e):null),[t,e])}function gq(e){let{callback:r,disabled:n}=e;const a=H$(r),s=(0,t.useMemo)((()=>{if(n||"undefined"===typeof window||"undefined"===typeof window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(a)}),[n]);return(0,t.useEffect)((()=>()=>null==s?void 0:s.disconnect()),[s]),s}function yq(e){return new qW(DW(e),e)}function bq(e,r,n){void 0===r&&(r=yq);const[a,s]=(0,t.useState)(null);function i(){s((t=>{if(!e)return null;var a;if(!1===e.isConnected)return null!=(a=null!=t?t:n)?a:null;const s=r(e);return JSON.stringify(t)===JSON.stringify(s)?t:s}))}const o=function(e){let{callback:r,disabled:n}=e;const a=H$(r),s=(0,t.useMemo)((()=>{if(n||"undefined"===typeof window||"undefined"===typeof window.MutationObserver)return;const{MutationObserver:e}=window;return new e(a)}),[a,n]);return(0,t.useEffect)((()=>()=>null==s?void 0:s.disconnect()),[s]),s}({callback(t){if(e)for(const r of t){const{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){i();break}}}}),l=gq({callback:i});return V$((()=>{i(),e?(null==l||l.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==o||o.disconnect())}),[e]),a}const wq=[];function Nq(e,r){void 0===r&&(r=[]);const n=(0,t.useRef)(null);return(0,t.useEffect)((()=>{n.current=null}),r),(0,t.useEffect)((()=>{const t=e!==mW;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?J$(e,n.current):mW}function jq(e){return(0,t.useMemo)((()=>e?function(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}(e):null),[e])}const Sq=[];function Cq(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return B$(t)?t:e}const kq=[{sensor:iq,options:{}},{sensor:tq,options:{}}],Eq={current:{}},Tq={draggable:{measure:AW},droppable:{measure:AW,strategy:mq.WhileDragging,frequency:pq.Optimized},dragOverlay:{measure:DW}};class Dq extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}const Aq={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Dq,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:hW},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Tq,measureDroppableContainers:hW,windowRect:null,measuringScheduled:!1},Pq={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:hW,draggableNodes:new Map,over:null,measureDroppableContainers:hW},_q=(0,t.createContext)(Pq),Rq=(0,t.createContext)(Aq);function Iq(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Dq}}}function Mq(e,t){switch(t.type){case uW.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case uW.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case uW.DragEnd:case uW.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case uW.RegisterDroppable:{const{element:r}=t,{id:n}=r,a=new Dq(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case uW.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=t,s=e.droppable.containers.get(r);if(!s||n!==s.key)return e;const i=new Dq(e.droppable.containers);return i.set(r,{...s,disabled:a}),{...e,droppable:{...e.droppable,containers:i}}}case uW.UnregisterDroppable:{const{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const s=new Dq(e.droppable.containers);return s.delete(r),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Oq(e){let{disabled:r}=e;const{active:n,activatorEvent:a,draggableNodes:s}=(0,t.useContext)(_q),i=G$(a),o=G$(null==n?void 0:n.id);return(0,t.useEffect)((()=>{if(!r&&!a&&i&&null!=o){if(!Z$(i))return;if(document.activeElement===i.target)return;const e=s.get(o);if(!e)return;const{activatorNode:t,node:r}=e;if(!t.current&&!r.current)return;requestAnimationFrame((()=>{for(const e of[t.current,r.current]){if(!e)continue;const t=nW(e);if(t){t.focus();break}}}))}}),[a,r,s,o,i]),null}function Fq(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...n})),r):r}const Lq=(0,t.createContext)({...mW,scaleX:1,scaleY:1});var Bq;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(Bq||(Bq={}));const Uq=(0,t.memo)((function(e){var r,n,a,s;let{id:i,accessibility:o,autoScroll:l=!0,children:c,sensors:d=kq,collisionDetection:u=jW,measuring:h,modifiers:f,...m}=e;const p=(0,t.useReducer)(Mq,void 0,Iq),[x,v]=p,[g,y]=function(){const[e]=(0,t.useState)((()=>new Set)),r=(0,t.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]),n=(0,t.useCallback)((t=>{let{type:r,event:n}=t;e.forEach((e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)}))}),[e]);return[n,r]}(),[b,w]=(0,t.useState)(Bq.Uninitialized),N=b===Bq.Initialized,{draggable:{active:j,nodes:S,translate:C},droppable:{containers:k}}=x,E=null!=j?S.get(j):null,T=(0,t.useRef)({initial:null,translated:null}),D=(0,t.useMemo)((()=>{var e;return null!=j?{id:j,data:null!=(e=null==E?void 0:E.data)?e:Eq,rect:T}:null}),[j,E]),A=(0,t.useRef)(null),[P,_]=(0,t.useState)(null),[R,I]=(0,t.useState)(null),M=$$(m,Object.values(m)),O=Y$("DndDescribedBy",i),F=(0,t.useMemo)((()=>k.getEnabled()),[k]),L=(B=h,(0,t.useMemo)((()=>({draggable:{...Tq.draggable,...null==B?void 0:B.draggable},droppable:{...Tq.droppable,...null==B?void 0:B.droppable},dragOverlay:{...Tq.dragOverlay,...null==B?void 0:B.dragOverlay}})),[null==B?void 0:B.draggable,null==B?void 0:B.droppable,null==B?void 0:B.dragOverlay]));var B;const{droppableRects:U,measureDroppableContainers:z,measuringScheduled:V}=function(e,r){let{dragging:n,dependencies:a,config:s}=r;const[i,o]=(0,t.useState)(null),{frequency:l,measure:c,strategy:d}=s,u=(0,t.useRef)(e),h=function(){switch(d){case mq.Always:return!1;case mq.BeforeDragging:return n;default:return!n}}(),f=$$(h),m=(0,t.useCallback)((function(e){void 0===e&&(e=[]),f.current||o((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[f]),p=(0,t.useRef)(null),x=W$((t=>{if(h&&!n)return xq;if(!t||t===xq||u.current!==e||null!=i){const t=new Map;for(let r of e){if(!r)continue;if(i&&i.length>0&&!i.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}const e=r.node.current,n=e?new qW(c(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t}),[e,i,n,h,c]);return(0,t.useEffect)((()=>{u.current=e}),[e]),(0,t.useEffect)((()=>{h||m()}),[n,h]),(0,t.useEffect)((()=>{i&&i.length>0&&o(null)}),[JSON.stringify(i)]),(0,t.useEffect)((()=>{h||"number"!==typeof l||null!==p.current||(p.current=setTimeout((()=>{m(),p.current=null}),l))}),[l,h,m,...a]),{droppableRects:x,measureDroppableContainers:m,measuringScheduled:null!=i}}(F,{dragging:N,dependencies:[C.x,C.y],config:L.droppable}),H=function(e,t){const r=null!=t?e.get(t):void 0,n=r?r.node.current:null;return W$((e=>{var r;return null==t?null:null!=(r=null!=n?n:e)?r:null}),[n,t])}(S,j),$=(0,t.useMemo)((()=>R?eW(R):null),[R]),W=function(){const e=!1===(null==P?void 0:P.autoScrollEnabled),t="object"===typeof l?!1===l.enabled:!1===l,r=N&&!e&&!t;if("object"===typeof l)return{...l,enabled:r};return{enabled:r}}(),q=function(e,t){return vq(e,t)}(H,L.draggable.measure);!function(e){let{activeNode:r,measure:n,initialRect:a,config:s=!0}=e;const i=(0,t.useRef)(!1),{x:o,y:l}="boolean"===typeof s?{x:s,y:s}:s;V$((()=>{if(!o&&!l||!r)return void(i.current=!1);if(i.current||!a)return;const e=null==r?void 0:r.node.current;if(!e||!1===e.isConnected)return;const t=SW(n(e),a);if(o||(t.x=0),l||(t.y=0),i.current=!0,Math.abs(t.x)>0||Math.abs(t.y)>0){const r=_W(e);r&&r.scrollBy({top:t.y,left:t.x})}}),[r,o,l,a,n])}({activeNode:null!=j?S.get(j):null,config:W.layoutShiftCompensation,initialRect:q,measure:L.draggable.measure});const G=bq(H,L.draggable.measure,q),K=bq(H?H.parentElement:null),Y=(0,t.useRef)({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),X=k.getNodeFor(null==(r=Y.current.over)?void 0:r.id),Q=function(e){let{measure:r}=e;const[n,a]=(0,t.useState)(null),s=gq({callback:(0,t.useCallback)((e=>{for(const{target:t}of e)if(B$(t)){a((e=>{const n=r(t);return e?{...e,width:n.width,height:n.height}:n}));break}}),[r])}),i=(0,t.useCallback)((e=>{const t=Cq(e);null==s||s.disconnect(),t&&(null==s||s.observe(t)),a(t?r(t):null)}),[r,s]),[o,l]=q$(i);return(0,t.useMemo)((()=>({nodeRef:o,rect:n,setRef:l})),[n,o,l])}({measure:L.dragOverlay.measure}),J=null!=(n=Q.nodeRef.current)?n:H,Z=N?null!=(a=Q.rect)?a:G:null,ee=Boolean(Q.nodeRef.current&&Q.rect),te=SW(re=ee?null:G,vq(re));var re;const ne=jq(J?F$(J):null),ae=function(e){const r=(0,t.useRef)(e),n=W$((t=>e?t&&t!==wq&&e&&r.current&&e.parentNode===r.current.parentNode?t:PW(e):wq),[e]);return(0,t.useEffect)((()=>{r.current=e}),[e]),n}(N?null!=X?X:H:null),se=function(e,r){void 0===r&&(r=DW);const[n]=e,a=jq(n?F$(n):null),[s,i]=(0,t.useState)(Sq);function o(){i((()=>e.length?e.map((e=>LW(e)?a:new qW(r(e),e))):Sq))}const l=gq({callback:o});return V$((()=>{null==l||l.disconnect(),o(),e.forEach((e=>null==l?void 0:l.observe(e)))}),[e]),s}(ae),ie=Fq(f,{transform:{x:C.x-te.x,y:C.y-te.y,scaleX:1,scaleY:1},activatorEvent:R,active:D,activeNodeRect:G,containerNodeRect:K,draggingNodeRect:Z,over:Y.current.over,overlayNodeRect:Q.rect,scrollableAncestors:ae,scrollableAncestorRects:se,windowRect:ne}),oe=$?Q$($,C):null,le=function(e){const[r,n]=(0,t.useState)(null),a=(0,t.useRef)(e),s=(0,t.useCallback)((e=>{const t=RW(e.target);t&&n((e=>e?(e.set(t,OW(t)),new Map(e)):null))}),[]);return(0,t.useEffect)((()=>{const t=a.current;if(e!==t){r(t);const i=e.map((e=>{const t=RW(e);return t?(t.addEventListener("scroll",s,{passive:!0}),[t,OW(t)]):null})).filter((e=>null!=e));n(i.length?new Map(i):null),a.current=e}return()=>{r(e),r(t)};function r(e){e.forEach((e=>{const t=RW(e);null==t||t.removeEventListener("scroll",s)}))}}),[s,e]),(0,t.useMemo)((()=>e.length?r?Array.from(r.values()).reduce(((e,t)=>Q$(e,t)),mW):HW(e):mW),[e,r])}(ae),ce=Nq(le),de=Nq(le,[G]),ue=Q$(ie,ce),he=Z?kW(Z,ie):null,fe=D&&he?u({active:D,collisionRect:he,droppableRects:U,droppableContainers:F,pointerCoordinates:oe}):null,me=yW(fe,"id"),[pe,xe]=(0,t.useState)(null),ve=function(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}(ee?ie:Q$(ie,de),null!=(s=null==pe?void 0:pe.rect)?s:null,G),ye=(0,t.useRef)(null),be=(0,t.useCallback)(((e,t)=>{let{sensor:r,options:n}=t;if(null==A.current)return;const a=S.get(A.current);if(!a)return;const s=e.nativeEvent,i=new r({active:A.current,activeNode:a,event:s,options:n,context:Y,onAbort(e){if(!S.get(e))return;const{onDragAbort:t}=M.current,r={id:e};null==t||t(r),g({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!S.get(e))return;const{onDragPending:a}=M.current,s={id:e,constraint:t,initialCoordinates:r,offset:n};null==a||a(s),g({type:"onDragPending",event:s})},onStart(e){const t=A.current;if(null==t)return;const r=S.get(t);if(!r)return;const{onDragStart:n}=M.current,a={activatorEvent:s,active:{id:t,data:r.data,rect:T}};(0,ge.unstable_batchedUpdates)((()=>{null==n||n(a),w(Bq.Initializing),v({type:uW.DragStart,initialCoordinates:e,active:t}),g({type:"onDragStart",event:a}),_(ye.current),I(s)}))},onMove(e){v({type:uW.DragMove,coordinates:e})},onEnd:o(uW.DragEnd),onCancel:o(uW.DragCancel)});function o(e){return async function(){const{active:t,collisions:r,over:n,scrollAdjustedTranslate:a}=Y.current;let i=null;if(t&&a){const{cancelDrop:o}=M.current;if(i={activatorEvent:s,active:t,collisions:r,delta:a,over:n},e===uW.DragEnd&&"function"===typeof o){await Promise.resolve(o(i))&&(e=uW.DragCancel)}}A.current=null,(0,ge.unstable_batchedUpdates)((()=>{v({type:e}),w(Bq.Uninitialized),xe(null),_(null),I(null),ye.current=null;const t=e===uW.DragEnd?"onDragEnd":"onDragCancel";if(i){const e=M.current[t];null==e||e(i),g({type:t,event:i})}}))}}ye.current=i}),[S]),we=(0,t.useCallback)(((e,t)=>(r,n)=>{const a=r.nativeEvent,s=S.get(n);if(null!==A.current||!s||a.dndKit||a.defaultPrevented)return;const i={active:s};!0===e(r,t.options,i)&&(a.dndKit={capturedBy:t.sensor},A.current=n,be(r,t))}),[S,be]),Ne=function(e,r){return(0,t.useMemo)((()=>e.reduce(((e,t)=>{const{sensor:n}=t;return[...e,...n.activators.map((e=>({eventName:e.eventName,handler:r(e.handler,t)})))]}),[])),[e,r])}(d,we);!function(e){(0,t.useEffect)((()=>{if(!I$)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(d),V$((()=>{G&&b===Bq.Initializing&&w(Bq.Initialized)}),[G,b]),(0,t.useEffect)((()=>{const{onDragMove:e}=M.current,{active:t,activatorEvent:r,collisions:n,over:a}=Y.current;if(!t||!r)return;const s={active:t,activatorEvent:r,collisions:n,delta:{x:ue.x,y:ue.y},over:a};(0,ge.unstable_batchedUpdates)((()=>{null==e||e(s),g({type:"onDragMove",event:s})}))}),[ue.x,ue.y]),(0,t.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:a}=Y.current;if(!e||null==A.current||!t||!a)return;const{onDragOver:s}=M.current,i=n.get(me),o=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,l={active:e,activatorEvent:t,collisions:r,delta:{x:a.x,y:a.y},over:o};(0,ge.unstable_batchedUpdates)((()=>{xe(o),null==s||s(l),g({type:"onDragOver",event:l})}))}),[me]),V$((()=>{Y.current={activatorEvent:R,active:D,activeNode:H,collisionRect:he,collisions:fe,droppableRects:U,draggableNodes:S,draggingNode:J,draggingNodeRect:Z,droppableContainers:k,over:pe,scrollableAncestors:ae,scrollAdjustedTranslate:ue},T.current={initial:Z,translated:he}}),[D,H,fe,he,S,J,Z,U,k,pe,ae,ue]),hq({...W,delta:C,draggingRect:he,pointerCoordinates:oe,scrollableAncestors:ae,scrollableAncestorRects:se});const je=(0,t.useMemo)((()=>({active:D,activeNode:H,activeNodeRect:G,activatorEvent:R,collisions:fe,containerNodeRect:K,dragOverlay:Q,draggableNodes:S,droppableContainers:k,droppableRects:U,over:pe,measureDroppableContainers:z,scrollableAncestors:ae,scrollableAncestorRects:se,measuringConfiguration:L,measuringScheduled:V,windowRect:ne})),[D,H,G,R,fe,K,Q,S,k,U,pe,z,ae,se,L,V,ne]),Se=(0,t.useMemo)((()=>({activatorEvent:R,activators:Ne,active:D,activeNodeRect:G,ariaDescribedById:{draggable:O},dispatch:v,draggableNodes:S,over:pe,measureDroppableContainers:z})),[R,Ne,D,G,v,O,S,pe,z]);return t.createElement(oW.Provider,{value:y},t.createElement(_q.Provider,{value:Se},t.createElement(Rq.Provider,{value:je},t.createElement(Lq.Provider,{value:ve},c)),t.createElement(Oq,{disabled:!1===(null==o?void 0:o.restoreFocus)})),t.createElement(dW,{...o,hiddenTextDescribedById:O}))})),zq=(0,t.createContext)(null),Vq="button";function Hq(e){let{id:r,data:n,disabled:a=!1,attributes:s}=e;const i=Y$("Draggable"),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:h,over:f}=(0,t.useContext)(_q),{role:m=Vq,roleDescription:p="draggable",tabIndex:x=0}=null!=s?s:{},v=(null==c?void 0:c.id)===r,g=(0,t.useContext)(v?Lq:zq),[y,b]=q$(),[w,N]=q$(),j=function(e,r){return(0,t.useMemo)((()=>e.reduce(((e,t)=>{let{eventName:n,handler:a}=t;return e[n]=e=>{a(e,r)},e}),{})),[e,r])}(o,r),S=$$(n);V$((()=>(h.set(r,{id:r,key:i,node:y,activatorNode:w,data:S}),()=>{const e=h.get(r);e&&e.key===i&&h.delete(r)})),[h,r]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:(0,t.useMemo)((()=>({role:m,tabIndex:x,"aria-disabled":a,"aria-pressed":!(!v||m!==Vq)||void 0,"aria-roledescription":p,"aria-describedby":u.draggable})),[a,m,x,v,p,u.draggable]),isDragging:v,listeners:a?void 0:j,node:y,over:f,setNodeRef:b,setActivatorNodeRef:N,transform:g}}function $q(){return(0,t.useContext)(Rq)}const Wq={timeout:25};function qq(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function Gq(e,t){return e.reduce(((e,r,n)=>{const a=t.get(r);return a&&(e[n]=a),e}),Array(e.length))}function Kq(e){return null!==e&&e>=0}const Yq=e=>{let{rects:t,activeIndex:r,overIndex:n,index:a}=e;const s=qq(t,n,r),i=t[a],o=s[a];return o&&i?{x:o.left-i.left,y:o.top-i.top,scaleX:o.width/i.width,scaleY:o.height/i.height}:null};const Xq="Sortable",Qq=t.createContext({activeIndex:-1,containerId:Xq,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Yq,disabled:{draggable:!1,droppable:!1}});function Jq(e){let{children:r,id:n,items:a,strategy:s=Yq,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:u}=$q(),h=Y$(Xq,n),f=Boolean(null!==l.rect),m=(0,t.useMemo)((()=>a.map((e=>"object"===typeof e&&"id"in e?e.id:e))),[a]),p=null!=o,x=o?m.indexOf(o.id):-1,v=d?m.indexOf(d.id):-1,g=(0,t.useRef)(m),y=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(m,g.current),b=-1!==v&&-1===x||y,w=function(e){return"boolean"===typeof e?{draggable:e,droppable:e}:e}(i);V$((()=>{y&&p&&u(m)}),[y,m,p,u]),(0,t.useEffect)((()=>{g.current=m}),[m]);const N=(0,t.useMemo)((()=>({activeIndex:x,containerId:h,disabled:w,disableTransforms:b,items:m,overIndex:v,useDragOverlay:f,sortedRects:Gq(m,c),strategy:s})),[x,h,w.draggable,w.droppable,b,m,v,c,f,s]);return t.createElement(Qq.Provider,{value:N},r)}const Zq=e=>{let{id:t,items:r,activeIndex:n,overIndex:a}=e;return qq(r,n,a).indexOf(t)},eG=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:a,items:s,newIndex:i,previousItems:o,previousContainerId:l,transition:c}=e;return!(!c||!n)&&((o===s||a!==i)&&(!!r||i!==a&&t===l))},tG={duration:200,easing:"ease"},rG="transform",nG=tW.Transition.toString({property:rG,duration:0,easing:"linear"}),aG={roleDescription:"sortable"};function sG(e){let{animateLayoutChanges:r=eG,attributes:n,disabled:a,data:s,getNewIndex:i=Zq,id:o,strategy:l,resizeObserverConfig:c,transition:d=tG}=e;const{items:u,containerId:h,activeIndex:f,disabled:m,disableTransforms:p,sortedRects:x,overIndex:v,useDragOverlay:g,strategy:y}=(0,t.useContext)(Qq),b=function(e,t){var r,n;if("boolean"===typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(r=null==e?void 0:e.draggable)?r:t.draggable,droppable:null!=(n=null==e?void 0:e.droppable)?n:t.droppable}}(a,m),w=u.indexOf(o),N=(0,t.useMemo)((()=>({sortable:{containerId:h,index:w,items:u},...s})),[h,s,w,u]),j=(0,t.useMemo)((()=>u.slice(u.indexOf(o))),[u,o]),{rect:S,node:C,isOver:k,setNodeRef:E}=function(e){let{data:r,disabled:n=!1,id:a,resizeObserverConfig:s}=e;const i=Y$("Droppable"),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=(0,t.useContext)(_q),u=(0,t.useRef)({disabled:n}),h=(0,t.useRef)(!1),f=(0,t.useRef)(null),m=(0,t.useRef)(null),{disabled:p,updateMeasurementsFor:x,timeout:v}={...Wq,...s},g=$$(null!=x?x:a),y=gq({callback:(0,t.useCallback)((()=>{h.current?(null!=m.current&&clearTimeout(m.current),m.current=setTimeout((()=>{d(Array.isArray(g.current)?g.current:[g.current]),m.current=null}),v)):h.current=!0}),[v]),disabled:p||!o}),b=(0,t.useCallback)(((e,t)=>{y&&(t&&(y.unobserve(t),h.current=!1),e&&y.observe(e))}),[y]),[w,N]=q$(b),j=$$(r);return(0,t.useEffect)((()=>{y&&w.current&&(y.disconnect(),h.current=!1,y.observe(w.current))}),[w,y]),(0,t.useEffect)((()=>(l({type:uW.RegisterDroppable,element:{id:a,key:i,disabled:n,node:w,rect:f,data:j}}),()=>l({type:uW.UnregisterDroppable,key:i,id:a}))),[a]),(0,t.useEffect)((()=>{n!==u.current.disabled&&(l({type:uW.SetDroppableDisabled,id:a,key:i,disabled:n}),u.current.disabled=n)}),[a,i,n,l]),{active:o,rect:f,isOver:(null==c?void 0:c.id)===a,node:w,over:c,setNodeRef:N}}({id:o,data:N,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...c}}),{active:T,activatorEvent:D,activeNodeRect:A,attributes:P,setNodeRef:_,listeners:R,isDragging:I,over:M,setActivatorNodeRef:O,transform:F}=Hq({id:o,data:N,attributes:{...aG,...n},disabled:b.draggable}),L=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,t.useMemo)((()=>e=>{r.forEach((t=>t(e)))}),r)}(E,_),B=Boolean(T),U=B&&!p&&Kq(f)&&Kq(v),z=!g&&I,V=z&&U?F:null,H=U?null!=V?V:(null!=l?l:y)({rects:x,activeNodeRect:A,activeIndex:f,overIndex:v,index:w}):null,$=Kq(f)&&Kq(v)?i({id:o,items:u,activeIndex:f,overIndex:v}):w,W=null==T?void 0:T.id,q=(0,t.useRef)({activeId:W,items:u,newIndex:$,containerId:h}),G=u!==q.current.items,K=r({active:T,containerId:h,isDragging:I,isSorting:B,id:o,index:w,items:u,newIndex:q.current.newIndex,previousItems:q.current.items,previousContainerId:q.current.containerId,transition:d,wasDragging:null!=q.current.activeId}),Y=function(e){let{disabled:r,index:n,node:a,rect:s}=e;const[i,o]=(0,t.useState)(null),l=(0,t.useRef)(n);return V$((()=>{if(!r&&n!==l.current&&a.current){const e=s.current;if(e){const t=DW(a.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&o(r)}}n!==l.current&&(l.current=n)}),[r,n,a,s]),(0,t.useEffect)((()=>{i&&o(null)}),[i]),i}({disabled:!K,index:w,node:C,rect:S});return(0,t.useEffect)((()=>{B&&q.current.newIndex!==$&&(q.current.newIndex=$),h!==q.current.containerId&&(q.current.containerId=h),u!==q.current.items&&(q.current.items=u)}),[B,$,h,u]),(0,t.useEffect)((()=>{if(W===q.current.activeId)return;if(null!=W&&null==q.current.activeId)return void(q.current.activeId=W);const e=setTimeout((()=>{q.current.activeId=W}),50);return()=>clearTimeout(e)}),[W]),{active:T,activeIndex:f,attributes:P,data:N,rect:S,index:w,newIndex:$,items:u,isOver:k,isSorting:B,isDragging:I,listeners:R,node:C,overIndex:v,over:M,setNodeRef:L,setActivatorNodeRef:O,setDroppableNodeRef:E,setDraggableNodeRef:_,transform:null!=Y?Y:H,transition:function(){if(Y||G&&q.current.newIndex===w)return nG;if(z&&!Z$(D)||!d)return;if(B||K)return tW.Transition.toString({...d,property:rG});return}()}}function iG(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"===typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const oG=[XW.Down,XW.Right,XW.Up,XW.Left],lG=(e,t)=>{let{context:{active:r,collisionRect:n,droppableRects:a,droppableContainers:s,over:i,scrollableAncestors:o}}=t;if(oG.includes(e.code)){if(e.preventDefault(),!r||!n)return;const t=[];s.getEnabled().forEach((r=>{if(!r||null!=r&&r.disabled)return;const s=a.get(r.id);if(s)switch(e.code){case XW.Down:n.top<s.top&&t.push(r);break;case XW.Up:n.top>s.top&&t.push(r);break;case XW.Left:n.left>s.left&&t.push(r);break;case XW.Right:n.left<s.left&&t.push(r)}}));const l=(e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=gW(t),s=[];for(const i of n){const{id:e}=i,t=r.get(e);if(t){const r=gW(t),n=a.reduce(((e,t,n)=>e+pW(r[n],t)),0),o=Number((n/4).toFixed(4));s.push({id:e,data:{droppableContainer:i,value:o}})}}return s.sort(xW)})({active:r,collisionRect:n,droppableRects:a,droppableContainers:t,pointerCoordinates:null});let c=yW(l,"id");if(c===(null==i?void 0:i.id)&&l.length>1&&(c=l[1].id),null!=c){const e=s.get(r.id),t=s.get(c),i=t?a.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&i&&e&&t){const r=PW(l).some(((e,t)=>o[t]!==e)),a=cG(e,t),s=function(e,t){if(!iG(e)||!iG(t))return!1;if(!cG(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=r||!a?{x:0,y:0}:{x:s?n.width-i.width:0,y:s?n.height-i.height:0},d={x:i.left,y:i.top};return c.x&&c.y?d:J$(d,c)}}}};function cG(e,t){return!(!iG(e)||!iG(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}const dG="excel-",uG="target-",hG=e=>{let{id:t,children:r}=e;const{attributes:n,listeners:a,setNodeRef:s,transform:i,transition:o,isDragging:l}=sG({id:t}),c={transform:tW.Transform.toString(i),transition:o,opacity:l?.5:1,display:"inline-block"};return(0,Rr.jsx)("div",{ref:s,style:c,...n,...a,className:"touch-none",children:(0,Rr.jsx)(qw,{variant:"outline",className:"cursor-grab text-sm border-gray-300",children:r})})},fG=e=>{let{id:t,children:r,mappedExcelColumn:n,onRemoveMapping:a}=e;const{setNodeRef:s,isOver:i}=sG({id:t}),o={border:i?"2px dashed green":"1px solid #e0e0e0",padding:"12px",margin:"4px 0",borderRadius:"4px",minHeight:"40px",backgroundColor:i?"#e6ffe6":"#f9f9f9",display:"flex",justifyContent:"space-between",alignItems:"center"};return(0,Rr.jsxs)("div",{ref:s,style:o,children:[(0,Rr.jsx)("div",{children:r})," ",(0,Rr.jsx)("div",{className:"ml-2 text-sm flex items-center",children:n?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:[(0,Rr.jsx)("span",{className:"font-mono",children:"->"})," ",n]}),(0,Rr.jsx)(Vn,{variant:"ghost",size:"sm",className:"ml-1 p-0 h-auto hover:bg-red-100",onClick:()=>a(t),children:(0,Rr.jsx)(_$,{className:"h-4 w-4 text-red-500"})})]}):(0,Rr.jsx)("span",{className:"text-gray-400 italic",children:"-> (Drop here)"})})]})};function mG(e){let{open:r,onOpenChange:n,importFunction:a,title:s="Import Data",columns:i=[],customValidation:o}=e;const l=(0,t.useRef)(null),{toast:c}=$g(),[d,u]=(0,t.useState)(null),[h,f]=(0,t.useState)(null),[m,p]=(0,t.useState)(null),[x,v]=(0,t.useState)(null),[g,y]=(0,t.useState)([]),[b,w]=(0,t.useState)(!1),N=rt(),[j,S]=(0,t.useState)(!1),[C,k]=(0,t.useState)({}),[E,T]=(0,t.useState)([]),D=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,t.useMemo)((()=>[...r].filter((e=>null!=e))),[...r])}(fW(iq),fW(tq,{coordinateGetter:lG})),A=e=>{const t=i.filter((e=>!0===e.required)).map((e=>e.field)).every((t=>e[t]&&null!==e[t]));w(t)},P=e=>{const t=e.startsWith(uG)?e.substring(7):e;k((e=>{const r={...e},n=r[t];return n&&(T((e=>(e.includes(n)?e:[...e,n]).sort())),delete r[t]),A(r),r}))};(0,t.useEffect)((()=>{if(m&&m.length>0){const e=_(m);if(e)return c({title:"Validation Error",description:e,variant:"destructive"}),void f(null);const t=R(m);f(t)}else f(null)}),[m,C,i,c,o]);const _=e=>Array.isArray(e)&&0!==e.length?null:"No data found in the Excel file",R=e=>e.filter((e=>i.filter((e=>!0===e.required)).map((e=>e.field)).some((t=>{const r=C[t];return r&&e[r]&&""!==e[r].toString().trim()})))).map((e=>{const t={};return i.forEach((r=>{const n=C[r.field];if(!n)return;let a=e[n];const s=r.field.split("."),i=s.pop();let o=t;s.forEach((e=>{o[e]||(o[e]={}),o=o[e]})),void 0!==a&&null!==a&&("currency"===r.format||"number"===r.format?a=parseFloat(a)||0:"string"===r.format?a=a.toString():"boolean"===r.format&&(a=Boolean(a))),r.formatter&&"function"===typeof r.formatter&&(a=r.formatter(a,e)),o[i]=a})),t}));return(0,Rr.jsx)(WN,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(XN,{className:"max-w-4xl p-0 gap-0",onInteractOutside:e=>e.preventDefault(),children:[(0,Rr.jsx)(QN,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:(0,Rr.jsx)(ZN,{className:"text-base font-semibold",children:s})}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsx)(dp,{className:"h-[calc(100vh-200px)]",children:(0,Rr.jsx)("div",{className:"flex-1",children:j?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 min-h-[300px]",children:[(0,Rr.jsx)(um,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,Rr.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Importing data..."})]}):(0,Rr.jsx)("div",{className:"p-0",children:(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsx)("div",{className:" rounded-lg p-4",children:i.length>0&&(0,Rr.jsx)(Rr.Fragment,{children:(0,Rr.jsx)(Uq,{sensors:D,collisionDetection:wW,onDragEnd:e=>{const{active:t,over:r}=e;if(t&&r&&t.id!==r.id){if(!t.id.toString().startsWith(dG)||!r.id.toString().startsWith(uG))return void console.error("Dnd item ID prefix mismatch:",t.id,r.id);const e=t.id.toString().substring(6),n=r.id.toString().substring(7);k((t=>{const r={...t};for(const n in r)r[n]===e&&delete r[n];return r[n]=e,A(r),r})),T((t=>t.filter((t=>t!==e))))}},children:(0,Rr.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Target Columns (Drop here)"}),(0,Rr.jsxs)(Jq,{items:i.map((e=>`${uG}${e.field}`)),strategy:Yq,children:[" ",(0,Rr.jsx)("div",{className:"space-y-2 grid grid-cols-3 gap-2 text-sm",children:i.map((e=>(0,Rr.jsx)(fG,{id:`${uG}${e.field}`,mappedExcelColumn:C[e.field],onRemoveMapping:P,children:(0,Rr.jsxs)("span",{className:e.required?"font-semibold":"",children:[e.header,e.required&&(0,Rr.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]})},`${uG}${e.field}`)))})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Excel File Columns (Drag from here)"}),0===g.length&&d&&(0,Rr.jsx)("p",{className:"text-xs text-gray-500",children:"No columns found in the uploaded file or file not processed yet."}),!d&&(0,Rr.jsx)("p",{className:"text-xs text-gray-500",children:"Upload an Excel file to see its columns."}),(0,Rr.jsx)(Jq,{items:E.map((e=>`${dG}${e}`)),strategy:Yq,children:(0,Rr.jsxs)("div",{className:"p-2 border rounded-md min-h-[100px] bg-gray-100 flex flex-wrap gap-2",children:[E.map((e=>(0,Rr.jsx)(hG,{id:`${dG}${e}`,children:e},`${dG}${e}`))),0===E.length&&g.length>0&&(0,Rr.jsx)("p",{className:"text-xs text-gray-500 p-2 col-span-4",children:"All Excel columns have been mapped or there are no unmapped columns left."})]})})]})]})})})})})})})}),(0,Rr.jsxs)("div",{className:"border-t bg-gray-100 grid grid-cols-5",children:[(0,Rr.jsx)("div",{className:"px-3 col-span-4 py-2 bg-gray-50 border-b flex items-center justify-between text-sm text-muted-foreground",children:(0,Rr.jsxs)("div",{className:"flex items-center gap-10",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(d$,{className:"h-4 w-4"}),(0,Rr.jsxs)("span",{children:["Records to Import: ",(0,Rr.jsx)("span",{className:"font-medium text-foreground",children:h?h.length:0})]})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2 ",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[" ",(0,Rr.jsx)(u$,{className:"h-4 w-4"}),"File: "]}),(0,Rr.jsxs)(Vn,{variant:"outline",onClick:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.click()},disabled:j,className:"w-full border-primary px-2",size:"sm",children:[(0,Rr.jsx)(NN,{className:"mr-2 h-4 w-4"}),d?d.name:"Select Excel File"]}),(0,Rr.jsx)("input",{type:"file",ref:l,className:"hidden",accept:".xlsx, .xls",onChange:async e=>{const t=e.target.files[0];if(!t)return u(null),p(null),y([]),T([]),k({}),v(null),w(!1),void(l.current&&(l.current.value=""));if(u(t),!t.name.match(/\.(xlsx|xls)$/))return c({title:"Invalid File",description:"Please select an Excel file (.xlsx or .xls)",variant:"destructive"}),u(null),p(null),y([]),T([]),k({}),v(null),w(!1),void(l.current&&(l.current.value=""));try{const e=new FileReader;e.onload=async e=>{try{const t=WH(new Uint8Array(e.target.result),{type:"array"}),r=t.SheetNames[0],n=t.Sheets[r],a=c$.sheet_to_json(n);p(a);const s=(e=>{if(!e||0===e.length)return y([]),T([]),k({}),w(!1),null;const t=Object.keys(e[0]);y(t),T(t),k({});const r={},n=[...t];i.forEach((e=>{const a=t.find((t=>t===e.header));if(a){r[e.field]=a;const t=n.indexOf(a);t>-1&&n.splice(t,1)}})),k(r),T(n),A(r);const a=i.map((e=>e.header)),s=Object.values(r);return{total:a.length,matching:s.length,matchedColumns:s,missingColumns:a.filter((e=>!s.includes(e)))}})(a);v(s)}catch(t){c({title:"Processing Failed",description:t.message||"Failed to process Excel file",variant:"destructive"}),p(null)}},e.readAsArrayBuffer(t)}catch(r){c({title:"File Read Failed",description:r.message||"Failed to read Excel file",variant:"destructive"}),p(null)}}})]}),x&&(0,Rr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[b?(0,Rr.jsx)(R$,{className:"h-4 w-4 text-green-500"}):(0,Rr.jsx)(_$,{className:"h-4 w-4 text-red-500"}),(0,Rr.jsxs)("span",{children:["Required Columns Mapped: ",b?"Yes":"No"]})]})]})}),(0,Rr.jsxs)("div",{className:"p-3 flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>n(!1),children:"Cancel"}),(0,Rr.jsxs)(Vn,{size:"sm",onClick:async()=>{if(h)try{S(!0),await N(a(h)).unwrap(),c({title:"Import Successful",variant:"success",description:`Successfully imported ${h.length} records`}),u(null),f(null),l.current&&(l.current.value=""),n(!1)}catch(e){c({title:"Import Failed",description:e.message||"Failed to import data",variant:"destructive"})}finally{S(!1)}else c({title:"No Data Available",description:"Please select and process a file first",variant:"destructive"})},className:"bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400",disabled:!h||j||!b,children:[j?(0,Rr.jsx)(um,{className:"mr-2 h-4 w-4 animate-spin"}):(0,Rr.jsx)(NN,{className:"mr-2 h-4 w-4"}),"Import Data"]})]})]})]})})}const pG=[{header:"Distributor Name",field:"name",width:25,required:!0},{header:"Mobile Number",field:"mob",width:15,required:!1},{header:"Address",field:"address",width:30,required:!1},{header:"Account Number",field:"bankDetails.accountNumber",width:20,required:!1},{header:"IFSC Code",field:"bankDetails.ifsc",width:15,required:!1},{header:"Balance",field:"currentBalance",width:15,format:"currency",required:!1},{header:"GSTIN",field:"gstin",required:!1},{header:"PAN Number",field:"panNumber",required:!1},{header:"DL Number",field:"DLNumber",required:!1}];function xG(){const e=rt(),{distributors:r,fetchStatus:n}=$e((e=>e.distributor)),a=Z(),[s,i]=(0,t.useState)(""),[o,l]=(0,t.useState)("name"),[c,d]=(0,t.useState)("all"),[u,h]=(0,t.useState)(!1),[f,m]=(0,t.useState)(!1),[p,x]=(0,t.useState)(!1),{importStatus:v}=$e((e=>e.exportImport));(0,t.useEffect)((()=>{"idle"===n&&e(ph())}),[e,n]);const g={count:r.length,toCollect:r.filter((e=>e.currentBalance>0)).reduce(((e,t)=>e+t.currentBalance),0),toPay:r.filter((e=>e.currentBalance<0)).reduce(((e,t)=>e+Math.abs(t.currentBalance)),0),totalBalance:r.reduce(((e,t)=>e+(t.currentBalance||0)),0)},y=()=>{let e=r;return"all"!==c&&(e=e.filter((e=>"due"===c?e.currentBalance>0:"pay"===c?e.currentBalance<0:"zero"!==c||0===e.currentBalance))),s&&(e=e.filter((e=>{return"name"===o?e.name.toLowerCase().includes(s.toLowerCase()):"mobile"!==o||(null===(t=e.mob)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase()));var t}))),e};return(0,Rr.jsxs)("div",{className:"relative p-2 space-y-4",children:["loading"===v&&(0,Rr.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,Rr.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:(0,Rr.jsx)(Hy,{text:"Importing distributors..."})})}),(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>a(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-2xl font-semibold",children:"Distributors"})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-right",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"font-semibold",children:g.count}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Distributors"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"font-semibold text-green-600",children:PP(g.toCollect)}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"To Collect"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"font-semibold text-red-600",children:PP(g.toPay)}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"To Pay"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"font-semibold",children:PP(g.totalBalance)}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Net Balance"})]})]})]}),(0,Rr.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,Rr.jsxs)("div",{className:"flex gap-2",children:[(0,Rr.jsxs)(fw,{value:o,onValueChange:e=>{l(e),i("")},children:[(0,Rr.jsx)(pw,{className:"w-[100px] focus:ring-0",children:(0,Rr.jsx)(mw,{placeholder:"Search by"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"name",children:"Name"}),(0,Rr.jsx)(yw,{value:"mobile",children:"Mobile"})]})]}),(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{className:"w-[250px] pl-8",placeholder:`Search ${"name"===o?"distributor name":"mobile number"}...`,value:s,onChange:e=>i(e.target.value)}),(0,Rr.jsx)(VN,{className:"h-4 w-4 absolute left-2.5 top-1/2 -translate-y-1/2 text-muted-foreground"}),s&&(0,Rr.jsx)(Vn,{variant:"ghost",size:"sm",className:"h-full aspect-square absolute right-0 top-0 hover:bg-transparent",onClick:()=>{i("")},children:(0,Rr.jsx)(jN,{className:"h-4 w-4 text-muted-foreground"})})]})]}),(0,Rr.jsxs)(fw,{value:c,onValueChange:d,children:[(0,Rr.jsx)(pw,{className:"w-[150px] focus:ring-0",children:(0,Rr.jsx)(mw,{placeholder:"Filter by balance"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"all",children:"All Distributors"}),(0,Rr.jsx)(yw,{value:"due",children:"To Collect"}),(0,Rr.jsx)(yw,{value:"pay",children:"To Pay"}),(0,Rr.jsx)(yw,{value:"zero",children:"Zero Balance"})]})]}),(0,Rr.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,Rr.jsxs)(Vn,{onClick:()=>h(!0),children:[(0,Rr.jsx)(Aw,{className:"h-4 w-4 mr-2"}),"Create Distributor"]}),(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsx)(Vn,{variant:"outline",size:"icon",children:(0,Rr.jsx)(EP,{className:"h-4 w-4"})})}),(0,Rr.jsxs)(_g,{align:"end",children:[(0,Rr.jsxs)(Rg,{onClick:()=>x(!0),disabled:"loading"===v,children:[(0,Rr.jsx)(NN,{className:"h-4 w-4 mr-2"}),"Import"]}),(0,Rr.jsxs)(Rg,{onClick:()=>m(!0),disabled:0===y().length,children:[(0,Rr.jsx)(TP,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})]})]}),(0,Rr.jsx)("div",{className:"relative overflow-x-auto",children:0===y().length?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-muted-foreground",children:[(0,Rr.jsx)(am,{className:"h-12 w-12 mb-4"}),(0,Rr.jsx)("p",{className:"text-lg",children:"No distributors found"}),(0,Rr.jsx)("p",{className:"text-sm",children:s?"Try adjusting your search terms":"Create a new distributor to get started"}),(0,Rr.jsx)(Vn,{className:"mt-4",onClick:()=>h(!0),children:"Create Distributor"})]}):(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{children:"DISTRIBUTOR NAME"}),(0,Rr.jsx)(Tw,{children:"MOBILE NUMBER"}),(0,Rr.jsx)(Tw,{children:"ADDRESS"}),(0,Rr.jsx)(Tw,{className:"text-right",children:" BALANCE (\u20b9)"})]})}),(0,Rr.jsx)(Cw,{children:y().map((e=>(0,Rr.jsxs)(Ew,{className:"group cursor-pointer",onClick:()=>a(`/distributors/${e._id}`),children:[(0,Rr.jsx)(Dw,{className:"font-medium",children:e.name}),(0,Rr.jsx)(Dw,{children:e.mob||"-"}),(0,Rr.jsx)(Dw,{children:e.address||"-"}),(0,Rr.jsx)(Dw,{className:"text-right font-bold",children:(0,Rr.jsxs)("span",{className:e.currentBalance>0?"text-green-600":e.currentBalance<0?"text-red-600":"",children:[e.currentBalance>0?"\u2193 ":e.currentBalance<0?"\u2191 ":"",Math.abs(e.currentBalance||0)]})})]},e._id)))})]})}),(0,Rr.jsx)(P$,{open:u,onOpenChange:h}),(0,Rr.jsx)(mG,{open:p,onOpenChange:x,importFunction:Lf,title:"Import Distributors",columns:pG}),(0,Rr.jsx)(k$,{open:f,onOpenChange:m,data:y(),columns:pG,formatters:{Balance:e=>e||0},fileName:"distributors",title:"Export Distributors Data"})]})}var vG="Radio",[gG,yG]=$n(vG),[bG,wG]=gG(vG),NG=t.forwardRef(((e,r)=>{const{__scopeRadio:n,name:a,checked:s=!1,required:i,disabled:o,value:l="on",onCheck:c,form:d,...u}=e,[h,f]=t.useState(null),m=_r(r,(e=>f(e))),p=t.useRef(!1),x=!h||(d||!!h.closest("form"));return(0,Rr.jsxs)(bG,{scope:n,checked:s,disabled:o,children:[(0,Rr.jsx)(qn.button,{type:"button",role:"radio","aria-checked":s,"data-state":kG(s),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:m,onClick:Hn(e.onClick,(e=>{s||c?.(),x&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())}))}),x&&(0,Rr.jsx)(CG,{control:h,bubbles:!p.current,name:a,value:l,checked:s,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})}));NG.displayName=vG;var jG="RadioIndicator",SG=t.forwardRef(((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,s=wG(jG,r);return(0,Rr.jsx)(Ni,{present:n||s.checked,children:(0,Rr.jsx)(qn.span,{"data-state":kG(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t})})}));SG.displayName=jG;var CG=e=>{const{control:r,checked:n,bubbles:a=!0,...s}=e,i=t.useRef(null),o=Xy(n),l=Js(r);return t.useEffect((()=>{const e=i.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==n&&r){const t=new Event("click",{bubbles:a});r.call(e,n),e.dispatchEvent(t)}}),[o,n,a]),(0,Rr.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function kG(e){return e?"checked":"unchecked"}var EG=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],TG="RadioGroup",[DG,AG]=$n(TG,[gx,yG]),PG=gx(),_G=yG(),[RG,IG]=DG(TG),MG=t.forwardRef(((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:s,required:i=!1,disabled:o=!1,orientation:l,dir:c,loop:d=!0,onValueChange:u,...h}=e,f=PG(r),m=Sm(c),[p,x]=Si({prop:s,defaultProp:a,onChange:u});return(0,Rr.jsx)(RG,{scope:r,name:n,required:i,disabled:o,value:p,onValueChange:x,children:(0,Rr.jsx)(Ex,{asChild:!0,...f,orientation:l,dir:m,loop:d,children:(0,Rr.jsx)(qn.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":o?"":void 0,dir:m,...h,ref:t})})})}));MG.displayName=TG;var OG="RadioGroupItem",FG=t.forwardRef(((e,r)=>{const{__scopeRadioGroup:n,disabled:a,...s}=e,i=IG(OG,n),o=i.disabled||a,l=PG(n),c=_G(n),d=t.useRef(null),u=_r(r,d),h=i.value===s.value,f=t.useRef(!1);return t.useEffect((()=>{const e=e=>{EG.includes(e.key)&&(f.current=!0)},t=()=>f.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),(0,Rr.jsx)(Tx,{asChild:!0,...l,focusable:!o,active:h,children:(0,Rr.jsx)(NG,{disabled:o,required:i.required,checked:h,...c,...s,name:i.name,ref:u,onCheck:()=>i.onValueChange(s.value),onKeyDown:Hn((e=>{"Enter"===e.key&&e.preventDefault()})),onFocus:Hn(s.onFocus,(()=>{f.current&&d.current?.click()}))})})}));FG.displayName=OG;var LG=t.forwardRef(((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=_G(r);return(0,Rr.jsx)(SG,{...a,...n,ref:t})}));LG.displayName="RadioGroupIndicator";var BG=MG,UG=FG,zG=LG;const VG=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(BG,{className:Un("grid gap-2",r),...n,ref:t})}));VG.displayName=BG.displayName;const HG=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(UG,{ref:t,className:Un("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),...n,children:(0,Rr.jsx)(zG,{className:"flex items-center justify-center",children:(0,Rr.jsx)(il,{className:"h-3.5 w-3.5 fill-primary"})})})}));HG.displayName=UG.displayName;var $G="Switch",[WG,qG]=$n($G),[GG,KG]=WG($G),YG=t.forwardRef(((e,r)=>{const{__scopeSwitch:n,name:a,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[f,m]=t.useState(null),p=_r(r,(e=>m(e))),x=t.useRef(!1),v=!f||(u||!!f.closest("form")),[g=!1,y]=Si({prop:s,defaultProp:i,onChange:d});return(0,Rr.jsxs)(GG,{scope:n,checked:g,disabled:l,children:[(0,Rr.jsx)(qn.button,{type:"button",role:"switch","aria-checked":g,"aria-required":o,"data-state":ZG(g),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:p,onClick:Hn(e.onClick,(e=>{y((e=>!e)),v&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())}))}),v&&(0,Rr.jsx)(JG,{control:f,bubbles:!x.current,name:a,value:c,checked:g,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})}));YG.displayName=$G;var XG="SwitchThumb",QG=t.forwardRef(((e,t)=>{const{__scopeSwitch:r,...n}=e,a=KG(XG,r);return(0,Rr.jsx)(qn.span,{"data-state":ZG(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})}));QG.displayName=XG;var JG=e=>{const{control:r,checked:n,bubbles:a=!0,...s}=e,i=t.useRef(null),o=Xy(n),l=Js(r);return t.useEffect((()=>{const e=i.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==n&&r){const t=new Event("click",{bubbles:a});r.call(e,n),e.dispatchEvent(t)}}),[o,n,a]),(0,Rr.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ZG(e){return e?"checked":"unchecked"}var eK=YG,tK=QG;const rK=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(eK,{className:Un("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...n,ref:t,children:(0,Rr.jsx)(tK,{className:Un("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}));rK.displayName=eK.displayName;const nK=rm("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),aK=rm("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),sK=rm("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),iK=rm("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),oK=rm("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),lK=(0,t.forwardRef)(((e,r)=>{let{suggestions:n=[],placeholder:a,value:s,setValue:i,onSuggestionSelect:o,showAmount:l=!1,onKeyDown:c,disabled:d=!1}=e;const[u,h]=(0,t.useState)([]),[f,m]=(0,t.useState)(!1),[p,x]=(0,t.useState)(-1),v=(0,t.useRef)(null),g=(0,t.useRef)(null),y=(0,t.useRef)(null);(0,t.useEffect)((()=>{r&&("function"===typeof r?r(y.current):r.current=y.current)}),[r]),(0,t.useEffect)((()=>{const e=n.filter((e=>e.name.toLowerCase().includes((s||"").toLowerCase())));h(e),x(-1)}),[s]);(0,t.useEffect)((()=>{if(p>=0&&v.current){const e=v.current.children[p];e&&e.scrollIntoView({block:"nearest"})}}),[p]);return(0,Rr.jsxs)("div",{className:"relative w-full max-w-md",onBlur:e=>{requestAnimationFrame((()=>{const t=e.relatedTarget;g.current&&(g.current.contains(t)||t===y.current)||m(!1)}))},children:[" ",(0,Rr.jsx)("div",{className:"relative ",children:(0,Rr.jsx)(Gf,{ref:y,type:"text",disabled:d,value:s,onChange:e=>{i(e.target.value),m(!0)},onKeyDown:e=>{"ArrowDown"===e.key?(e.preventDefault(),x((e=>e<u.length-1?e+1:e))):"ArrowUp"===e.key?(e.preventDefault(),x((e=>e>0?e-1:-1))):"Enter"===e.key?p>=0?(e.preventDefault(),i(u[p].name),m(!1),o&&o(u[p]),y.current&&y.current.focus()):c&&c(e):"Escape"===e.key&&(e.preventDefault(),m(!1))},onFocus:()=>{m(!0)},placeholder:a||"Search or type",className:"pr-8 hover:cursor-pointer font-semibold",role:"combobox","aria-autocomplete":"list","aria-expanded":f,"aria-controls":f?"suggestion-listbox":void 0,"aria-activedescendant":p>=0?`suggestion-item-${p}`:void 0})}),f&&u.length>0&&(0,Rr.jsx)("div",{ref:g,className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",tabIndex:-1,children:(0,Rr.jsx)("ul",{ref:v,id:"suggestion-listbox",role:"listbox",children:u.map(((e,t)=>(0,Rr.jsx)("li",{id:`suggestion-item-${t}`,role:"option","aria-selected":t===p,onClick:()=>(e=>{i(e.name),m(!1),o&&o(e),y.current&&y.current.focus()})(e),onMouseEnter:()=>x(t),className:"px-4 py-2 font-semibold cursor-pointer hover:bg-blue-100 focus:bg-blue-100 focus:outline-none "+(t===p?"bg-blue-200":""),children:(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsx)("span",{className:"capitalize text-sm",children:e.name}),l&&void 0!==(null===e||void 0===e?void 0:e.currentBalance)&&(0,Rr.jsx)(qw,{variant:(null===e||void 0===e?void 0:e.currentBalance)<=0?"destructive":"success",className:"font-medium",children:PP((null===e||void 0===e?void 0:e.currentBalance)||0)})]})},e._id)))})})]})}));lK.displayName="SearchSuggestion";const cK=lK,dK={name:"",mfcName:"",mrp:"",pack:"",composition:"",medicine_form:"",form_primary_pack:1,location:""},uK=["name","medicine_form","mfcName","pack","composition","location","submitButton"],hK=Tu.map((e=>({_id:e.medicine_form,name:`${e.medicine_form}${e.short_medicine_form?` (${e.short_medicine_form})`:""}`,...e})));function fK(e){let{open:r,onOpenChange:n,inventoryDetails:a,onProductCreated:s,initialProductName:i}=e;const o=(0,t.useRef)([]),{toast:l}=$g(),c=rt(),[d,u]=(0,t.useState)(!1),[h,f]=(0,t.useState)(dK),[m,p]=(0,t.useState)("");(0,t.useEffect)((()=>{if(a){const e=a.category||"",t=Tu.find((t=>t.medicine_form===e));f({name:a.name||"",mfcName:a.mfcName||"",mrp:a.mrp||"",pack:a.pack||"",composition:a.composition||"",medicine_form:e,location:(null===a||void 0===a?void 0:a.location)||""}),p(t?`${t.medicine_form}${t.short_medicine_form?` (${t.short_medicine_form})`:""}`:e)}}),[a]),(0,t.useEffect)((()=>{r&&!a&&i?(f((e=>({...e,name:i}))),setTimeout((()=>{var e;null===(e=o.current.name)||void 0===e||e.focus()}),0)):!r||a||i||setTimeout((()=>{var e;null===(e=o.current.name)||void 0===e||e.focus()}),0),r||a||(f(dK),p(""))}),[r,a,i,o]);const x=async e=>{e.preventDefault(),u(!0);const t={...h,category:h.medicine_form},r=Ih(a?{...t,_id:a._id}:t);c(r).unwrap().then((e=>{l({title:a?"Product updated successfully":"New product added successfully",variant:"success"}),n(!1),s&&!a&&s(e),a||(f(dK),p(""))})).catch((e=>{l({title:a?"Failed to update product":"Failed to add new product",variant:"destructive"})})).finally((()=>{u(!1)}))},v=(e,t)=>{if("Enter"===e.key){e.preventDefault();const a=uK.indexOf(t);if(e.shiftKey){if(a>0){var r;const e=uK[a-1];null===(r=o.current[e])||void 0===r||r.focus()}}else if(a<uK.length-1){var n;const e=uK[a+1];null===(n=o.current[e])||void 0===n||n.focus()}}};return(0,Rr.jsx)(WN,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(XN,{className:"max-w-2xl p-0 gap-0",children:[(0,Rr.jsx)(QN,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:(0,Rr.jsx)(ZN,{className:"text-base font-semibold",children:a?"Edit Product":"Create New Product"})}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsx)("form",{onSubmit:x,className:"space-y-5",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:["Product Name",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{id:"name","data-dialog-autofocus":!i&&!a,placeholder:"Enter Product Name",value:h.name,onChange:e=>f({...h,name:e.target.value}),required:!0,onKeyDown:e=>v(e,"name"),ref:e=>o.current.name=e,className:"h-9 font-semibold"})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"medicine-form",className:"text-sm font-medium text-gray-700",children:["Product Category",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(cK,{id:"medicine-form",suggestions:hK,placeholder:"Search or select category",value:m,setValue:p,onSuggestionSelect:e=>{const t=Tu.find((t=>t.medicine_form===e.medicine_form));f((e=>({...e,medicine_form:t.medicine_form,pack:(null===t||void 0===t?void 0:t.form_primary_pack)||1})))},onKeyDown:e=>v(e,"medicine_form"),ref:e=>o.current.medicine_form=e,className:"h-9 font-semibold"})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"mfcName",className:"text-sm font-medium text-gray-700",children:["Company Name",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{id:"mfcName",placeholder:"Enter Company Name",required:!0,value:h.mfcName,onChange:e=>f({...h,mfcName:e.target.value}),onKeyDown:e=>v(e,"mfcName"),ref:e=>o.current.mfcName=e,className:"h-9 font-semibold"})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"pack",className:"text-sm font-medium text-gray-700",children:["Units Per Pack",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{id:"pack",placeholder:"No of Tablets in a Strip",type:"number",required:!0,value:h.pack,onChange:e=>f({...h,pack:e.target.value}),onKeyDown:e=>v(e,"pack"),ref:e=>o.current.pack=e,className:"h-9 font-semibold"})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:"composition",className:"text-sm font-medium text-gray-700",children:"Composition"}),(0,Rr.jsx)(Gf,{id:"composition",placeholder:"Enter Composition",value:h.composition,onChange:e=>f({...h,composition:e.target.value}),onKeyDown:e=>v(e,"composition"),ref:e=>o.current.composition=e,className:"h-9 font-semibold"})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:"location",className:"text-sm font-medium text-gray-700",children:"Location"}),(0,Rr.jsx)(Gf,{id:"location",placeholder:"Enter Storage Location",value:h.location,onChange:e=>f({...h,location:e.target.value}),onKeyDown:e=>v(e,"location"),ref:e=>o.current.location=e,className:"h-9 font-semibold"})]})]})})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:e=>{e.preventDefault(),n(!1)},disabled:d,className:"",children:"Cancel"}),(0,Rr.jsx)(Vn,{id:"submitButton",type:"submit",size:"sm",onClick:x,disabled:d,ref:e=>o.current.submitButton=e,className:"bg-blue-600 text-white hover:bg-blue-700",children:d?a?"Updating...":"Creating...":a?"Update":"Create"})]})]})})}const mK=(0,t.forwardRef)(((e,r)=>{let{value:n,setValue:a,onSuggestionSelect:s,inputRef:i}=e;const[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(0),[f,m]=(0,t.useState)(!1),p=(0,t.useRef)(null),x=(0,t.useRef)(null),v=(0,t.useRef)(null),{items:g,itemsStatus:y}=$e((e=>e.inventory)),b=rt();(0,t.useEffect)((()=>{i&&("function"===typeof i?i(v.current):i.hasOwnProperty("current")&&(i.current||(i.current={}),i.current.product=v.current))}),[i]),(0,t.useEffect)((()=>{"idle"===y&&b(Mh())}),[y,b]),(0,t.useEffect)((()=>{const e=g.filter((e=>e.name.toLowerCase().includes((n||"").toLowerCase())));l(e),h(0)}),[n,g]);const w=e=>{var t,r;(a(e.name),d(!1),s&&s(e),null!==i&&void 0!==i&&null!==(t=i.current)&&void 0!==t&&t.batchNumber)?i.current.batchNumber.focus():null===(r=v.current)||void 0===r||r.focus()};(0,t.useEffect)((()=>{var e;u>=0&&null!==(e=p.current)&&void 0!==e&&e.children[u]&&p.current.children[u].scrollIntoView({block:"nearest"})}),[u]);return(0,Rr.jsxs)("div",{className:"relative w-full",onBlur:e=>{requestAnimationFrame((()=>{const t=e.relatedTarget;x.current&&x.current.contains(t)||d(!1)}))},children:[(0,Rr.jsxs)("div",{className:"relative ",children:[(0,Rr.jsx)(Gf,{ref:v,type:"text",value:n,onChange:e=>{a(e.target.value),d(!0)},onKeyDown:e=>{c&&0!==o.length&&("ArrowDown"===e.key?(e.preventDefault(),h((e=>e<o.length-1?e+1:0))):"ArrowUp"===e.key?(e.preventDefault(),h((e=>e>0?e-1:o.length-1))):"Enter"===e.key&&u>=0?(e.preventDefault(),w(o[u])):"Escape"===e.key&&(e.preventDefault(),d(!1)))},onFocus:()=>{(n||o.length>0)&&d(!0)},autoComplete:"off",placeholder:"Search product",className:"h-8 w-full border-[1px] border-gray-300 px-2",role:"combobox","aria-autocomplete":"list","aria-expanded":c,"aria-controls":"suggestion-listbox","aria-activedescendant":u>=0?`suggestion-item-${u}`:void 0}),(0,Rr.jsx)(VN,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 opacity-50 pointer-events-none"})]}),c&&(0,Rr.jsxs)("div",{ref:x,className:"absolute z-10 w-[600px] mt-1 bg-white border border-gray-300 rounded-sm shadow-lg",tabIndex:-1,children:[(0,Rr.jsxs)("div",{className:"w-full grid grid-cols-7 border-b-[1px] border-muted-foreground px-4 py-1 sticky top-0 bg-white z-10 text-[12px]",children:[(0,Rr.jsx)("div",{className:"col-span-2 ",children:"PRODUCT"}),(0,Rr.jsx)("div",{}),(0,Rr.jsx)("div",{className:" font-semibold",children:"BATCHES"}),(0,Rr.jsx)("div",{className:" font-semibold col-span-2",children:"QUANTITY"}),(0,Rr.jsx)("div",{className:" font-semibold",children:"LOCATION"})]}),(0,Rr.jsxs)(dp,{className:(o.length>5?"h-[300px]":"max-h-[300px]")+" pr-2",children:["loading"===y&&(0,Rr.jsx)("div",{className:"p-4 text-center text-gray-500",children:"Loading..."}),"loading"!==y&&o.length>0?(0,Rr.jsx)("ul",{ref:p,id:"suggestion-listbox",role:"listbox",children:o.map(((e,t)=>{var r;return(0,Rr.jsxs)("li",{id:`suggestion-item-${t}`,role:"option","aria-selected":t===u,onClick:()=>w(e),onMouseEnter:()=>h(t),className:"w-full grid grid-cols-7 border-b-[1px] border-muted px-4 py-2 cursor-pointer hover:bg-blue-100 focus:bg-blue-100 focus:outline-none "+(t===u?"bg-blue-200":""),children:[(0,Rr.jsxs)("div",{className:"col-span-2 ",children:[(0,Rr.jsx)("div",{className:"text-sm uppercase font-medium",children:null===e||void 0===e?void 0:e.name}),(0,Rr.jsx)("div",{className:"text-[10px] tracking-wide",children:null===e||void 0===e?void 0:e.mfcName})]}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(qw,{variant:(null===e||void 0===e?void 0:e.quantity)>0?"success":"destructive",className:"mt-1 h-5 text-xs rounded-xl",children:(null===e||void 0===e?void 0:e.quantity)>0?"In Stock":"Out Stock"})}),(0,Rr.jsx)("div",{className:"text-sm",children:null!==e&&void 0!==e&&null!==(r=e.batch)&&void 0!==r&&r.length?`${e.batch.length} batch${1!==e.batch.length?"es":""}`:"-"}),(0,Rr.jsx)("div",{className:"text-sm col-span-2",children:ku(null===e||void 0===e?void 0:e.quantity,null===e||void 0===e?void 0:e.pack)}),(0,Rr.jsx)("div",{className:"text-sm text-center",children:(null===e||void 0===e?void 0:e.location)||"-"})]},e._id)}))}):"loading"!==y&&(0,Rr.jsx)("div",{className:"p-4 text-center text-gray-500",role:"status",children:"No products found matching your search."}),"loading"!==y&&0===o.length&&(0,Rr.jsx)("div",{className:"p-4 text-center",children:(0,Rr.jsx)("button",{onClick:()=>m(!0),className:"text-blue-600 hover:underline",children:"Create New Product"})})]})]}),(0,Rr.jsx)(fK,{open:f,onOpenChange:m,onProductCreated:e=>{s&&s(e),a(e.name),d(!1),m(!1),b(Mh())},initialProductName:n})]})}));mK.displayName="SearchSuggestion";const pK=mK,xK=(0,t.forwardRef)(((e,r)=>{let{value:n,setValue:a,onSuggestionSelect:s,inventoryId:i,inputRef:o,disabled:l,onKeyDown:c}=e;const[d,u]=(0,t.useState)([]),[h,f]=(0,t.useState)(!1),[m,p]=(0,t.useState)(0),x=(0,t.useRef)(null),v=(0,t.useRef)(null),{toast:g}=$g(),[y,b]=(0,t.useState)([]);(0,t.useEffect)((()=>{i?(async()=>{try{const e=await fetch(`${Nu}/api/inventory/batches/${i}`,{credentials:"include"});if(!e.ok)throw new Error("Something went wrong");const t=await e.json();b(t)}catch(eZ){g({variant:"destructive",title:"Unable to fetch batches"})}})():b([])}),[i]);const w=(0,t.useMemo)((()=>y.filter((e=>{var t,r;return null===e||void 0===e||null===(t=e.batchNumber)||void 0===t||null===(r=t.toLowerCase())||void 0===r?void 0:r.includes((n||"").toLowerCase())})).sort(((e,t)=>{var r,n;if((null===e||void 0===e?void 0:e.quantity)<=0!==(null===t||void 0===t?void 0:t.quantity)<=0)return(null===e||void 0===e?void 0:e.quantity)<=0?1:-1;const[a,s]=(null===e||void 0===e||null===(r=e.expiry)||void 0===r?void 0:r.split("/").map(Number))||[0,0],[i,o]=(null===t||void 0===t||null===(n=t.expiry)||void 0===n?void 0:n.split("/").map(Number))||[0,0];return s!==o?s-o:a-i}))),[n,y]);(0,t.useEffect)((()=>{u(w),p(0)}),[w]);const N=(0,t.useCallback)((e=>{a(e.target.value),f(!0)}),[a,f]);(0,t.useEffect)((()=>{if(m>=0&&x.current){const e=x.current.children[m];e&&e.scrollIntoView({block:"nearest"})}}),[m]);return(0,Rr.jsxs)("div",{className:"relative w-full",onBlur:e=>{requestAnimationFrame((()=>{const t=e.relatedTarget;v.current&&v.current.contains(t)||f(!1)}))},children:[(0,Rr.jsx)("div",{className:"relative ",children:(0,Rr.jsx)(Gf,{id:"batch-number-input",disabled:l,ref:r,type:"text",value:n,onChange:N,autoComplete:"off",onKeyDown:e=>{if(c&&c(e),"ArrowDown"===e.key)e.preventDefault(),p((e=>e<d.length-1?e+1:e));else if("ArrowUp"===e.key)e.preventDefault(),p((e=>e>0?e-1:-1));else if("Enter"===e.key){var t,r;if(e.shiftKey)return e.preventDefault(),void(null!==o&&void 0!==o&&null!==(t=o.current)&&void 0!==t&&t.product&&o.current.product.focus());if(m>=0&&d.length>0)e.preventDefault(),a(null===(r=d[m])||void 0===r?void 0:r.batchNumber),f(!1),s&&s(d[m])}},onFocus:()=>f(!0),placeholder:"batch no",className:"h-8 w-full border-[1px] border-gray-300 px-2"})}),h&&d.length>0&&(0,Rr.jsx)("div",{ref:v,className:"absolute z-10 w-[700px] mt-1 bg-white border border-gray-300 rounded-sm shadow-lg",tabIndex:-1,children:(0,Rr.jsx)(dp,{className:(d.length>5?"h-[300px]":"max-h-300")+" pr-2",children:(0,Rr.jsx)("ul",{ref:x,children:d.map(((e,t)=>(0,Rr.jsxs)("li",{onClick:()=>(e=>{a(e.batchNumber),f(!1),s&&s(e)})(e),className:"w-full grid grid-cols-8 border-b-[1px] border-muted px-4 py-2 hover:bg-blue-200 cursor-pointer "+(t===m?"bg-blue-200":""),children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-xs text-gray-500",children:"BATCH NO"}),(0,Rr.jsx)("div",{className:"text-sm uppercase font-medium",children:null===e||void 0===e?void 0:e.batchNumber})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-xs text-gray-500",children:"PACK"}),(0,Rr.jsx)("div",{className:"text-sm uppercase font-medium",children:null===e||void 0===e?void 0:e.pack})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-xs text-gray-500",children:"EXPIRY"}),(0,Rr.jsx)("div",{className:"text-sm uppercase font-medium",children:null===e||void 0===e?void 0:e.expiry})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-xs text-gray-500",children:"MRP"}),(0,Rr.jsxs)("div",{className:"text-sm uppercase font-medium",children:["\u20b9",null===e||void 0===e?void 0:e.mrp]})]}),(0,Rr.jsxs)("div",{className:"col-span-2",children:[(0,Rr.jsx)("div",{className:"text-xs text-gray-500",children:"STOCKS"}),(0,Rr.jsx)("div",{className:"text-sm uppercase font-medium",children:(null===e||void 0===e?void 0:e.quantity)<=0?(0,Rr.jsx)(qw,{variant:"destructive",children:"OUT OF STOCKS"}):(0,Rr.jsx)(qw,{variant:"success",className:"font-medium",children:ku(null===e||void 0===e?void 0:e.quantity,null===e||void 0===e?void 0:e.pack)})})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-xs text-gray-500",children:"PURC. RATE"}),(0,Rr.jsxs)("div",{className:"text-sm uppercase font-medium",children:["\u20b9",null===e||void 0===e?void 0:e.purchaseRate]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-xs text-gray-500",children:"SALE RATE"}),(0,Rr.jsxs)("div",{className:"text-sm uppercase font-medium",children:["\u20b9",null===e||void 0===e?void 0:e.saleRate]})]})]},e._id)))})})})]})})),vK=xK;function gK(e){let{inputRef:r,products:n,setProducts:a,handleKeyDown:s,saleType:i,viewMode:o}=e;const{toast:l}=$g(),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)({types:"return"===i?"return":"sale"}),[f,m]=(0,t.useState)(""),[p,x]=(0,t.useState)("");(0,t.useEffect)((()=>{h((e=>({...e,types:"return"===i?"return":"sale"}))),n.length>0&&a((e=>e.map((e=>{const t="return"===i?"return":"sale",r=Number((null===e||void 0===e?void 0:e.packs)||0),n=Number((null===e||void 0===e?void 0:e.loose)||0),a=Number((null===e||void 0===e?void 0:e.pack)||1),s=Number((null===e||void 0===e?void 0:e.saleRate)||0),o=("return"===t?-1:1)*Cu((a*r+n)*(s/a));return{...e,types:t,amount:o}}))))}),[i,a]);const v=(e,t)=>{const r={...u,[e]:t};if("mrp"===e){const e=Number(u.discount||0);r.saleRate=e>0?(t*(1-e/100)).toFixed(2):t}if("saleRate"===e){const e=Number(r.mrp||0);if(e>0){const n=(e-Number(t))/e*100;r.discount=n.toFixed(2)}}if("discount"===e){const e=Number(r.mrp||0),n=Number(t||0);e>0&&(r.saleRate=(e*(1-n/100)).toFixed(2))}if((null!==r&&void 0!==r&&r.packs||null!==r&&void 0!==r&&r.loose)&&null!==r&&void 0!==r&&r.mrp){const e=Number((null===r||void 0===r?void 0:r.packs)||0),t=Number((null===r||void 0===r?void 0:r.loose)||0),n=Number((null===r||void 0===r?void 0:r.pack)||1),a=n*e+t,s=a*(Number((null===r||void 0===r?void 0:r.saleRate)||0)/n);r.amount=("return"===r.types?-1:1)*Cu(s),r.quantity=a}else r.amount="";h(r)},g=(e,t)=>{const n=["product","batchNumber","HSN","pack","expiry","mrp","packs","loose","saleRate","discount","gstPer","add"];if("Enter"===e.key){if(e.preventDefault(),e.shiftKey){const e=n.indexOf(t);if(e>0){const t=n[e-1];r.current[t]&&r.current[t].focus()}return}const a=n.indexOf(t);if(-1===a)return;if("add"===t)return void y();for(let e=a+1;e<n.length;e++){const t=n[e];if((!u[t]||""===String(u[t]).trim()||"add"===t)&&r.current[t])return void r.current[t].focus()}r.current.add&&r.current.add.focus()}},y=()=>{if(!u.productName)return l({variant:"destructive",title:"Please select item"}),void(r.current.product&&r.current.product.focus());if(!u.batchNumber&&!p)return l({variant:"destructive",title:"Please select batch"}),void(r.current.batchNumber&&r.current.batchNumber.focus());if((null===u||void 0===u||!u.quantity)&&!(null!==u&&void 0!==u&&u.packs||null!==u&&void 0!==u&&u.loose))return l({variant:"destructive",title:"Please add quantity (packs or loose)"}),void(r.current.packs&&r.current.packs.focus());if("return"!==u.types&&u.expiry){const e=u.expiry.split("/");if(2!==e.length)return void l({variant:"destructive",title:"Invalid expiry date format (MM/YY)."});{const t=parseInt(e[0],10),r=parseInt(e[1],10);if(!(!isNaN(t)&&!isNaN(r)&&t>=1&&t<=12&&r>=0&&r<=99))return void l({variant:"destructive",title:"Invalid expiry date format (MM/YY)."});{const e=new Date(2e3+r,t,1),n=new Date;if(n.setHours(0,0,0,0),n>=e)return void l({variant:"destructive",title:"Product has expired."})}}}const{pack:e,currentStocks:t,quantity:n}=u;if(t<n&&"sale"===(null===u||void 0===u?void 0:u.types))return void l({title:`${ku(t,e)} are in stocks`,variant:"destructive"});const s=Number(u.pack||1),o=Number(u.packs||0),c=Number(u.loose||0);u.packs=o+Math.floor(c/s),u.loose=c%s,u.batchNumber?a((e=>[...e,u])):a((e=>[...e,{...u,batchNumber:p}])),h({types:"return"===i?"return":"sale"}),m(""),x(""),r.current.product&&r.current.product.focus()},b=e=>{const t=n.filter(((t,r)=>r!==e));a(t)};return(0,t.useEffect)((()=>{if(u.batchNumber&&u.batchId){const e=new KeyboardEvent("keydown",{key:"Enter"});g(e,"batchNumber")}}),[u.batchNumber,u.batchId]),(0,Rr.jsxs)("div",{className:"w-full border-[1px] border-inherit py-4 rounded-sm space-y-2",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-16 w-full space-x-1 ",children:[(0,Rr.jsxs)("div",{className:"col-span-3 grid grid-cols-6",children:[(0,Rr.jsx)("div",{className:"text-xs font-semibold text-center",children:"#"}),(0,Rr.jsx)("div",{className:"text-xs font-semibold col-span-5",children:"PRODUCT"})]}),(0,Rr.jsx)("div",{className:"col-span-2",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold tracking-wide",children:"BATCH"})}),(0,Rr.jsx)("div",{className:" ",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"HSN"})}),(0,Rr.jsx)("div",{className:" ",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"PACK"})}),(0,Rr.jsx)("div",{className:" ",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"EXPIRY"})}),(0,Rr.jsx)("div",{className:" ",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"MRP"})}),(0,Rr.jsx)("div",{className:" ",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"PACKS"})}),(0,Rr.jsx)("div",{className:" ",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"LOOSE"})}),(0,Rr.jsx)("div",{className:" ",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"SALE RATE"})}),(0,Rr.jsx)("div",{className:" ",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"DISC"})}),(0,Rr.jsx)("div",{className:" ",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"GST"})}),(0,Rr.jsx)("div",{className:" ",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"AMT"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"EDIT ALL"})})]}),!o&&(0,Rr.jsxs)("div",{className:"grid grid-cols-16 w-full space-x-1 font-semibold",children:[(0,Rr.jsxs)("div",{className:"col-span-3 grid grid-cols-6",children:[(0,Rr.jsx)("div",{className:"flex items-center justify-center",children:"return"===i&&(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)("span",{className:"text-red-500 text-sm",children:"R"}),(0,Rr.jsx)(C$,{checked:"return"===u.types,onCheckedChange:e=>{v("types",e?"return":"sale")}})]})}),(0,Rr.jsx)("div",{className:"col-span-5",children:(0,Rr.jsx)(pK,{inputRef:r,value:f,setValue:m,onSuggestionSelect:e=>{h((t=>({...t,productName:e.name,mfcName:e.mfcName,inventoryId:e._id,HSN:e.HSN||"",pack:e.pack||1,location:e.location||"",types:"return"===i?"return":"sale"}))),m(e.name),null!==r&&void 0!==r&&r.current.batchNumber&&r.current.batchNumber.focus()}})})]}),(0,Rr.jsx)("div",{className:"col-span-2",children:(0,Rr.jsx)(vK,{inputRef:r,value:p,setValue:x,onSuggestionSelect:e=>{let t=0,r=e.saleRate||e.mrp;var n;e.mrp&&e.saleRate&&(n=(e.mrp-e.saleRate)/e.mrp*100,t=Math.round(100*(n+Number.EPSILON))/100),h((n=>{const a=Number((null===n||void 0===n?void 0:n.packs)||0),s=Number((null===n||void 0===n?void 0:n.loose)||0),o=e.pack||n.pack||1;let l="";if(a||s){const e=(o*a+s)*(r/o);l=("return"===n.types?-1:1)*Cu(e)}return{...n,batchNumber:e.batchNumber,batchId:e._id,mrp:e.mrp||n.mrp,expiry:e.expiry||n.expiry,saleRate:r,gstPer:e.gstPer||n.gstPer,HSN:e.HSN||n.HSN,pack:o,currentStocks:e.quantity,discount:t,types:n.types||("return"===i?"return":"sale"),amount:l,quantity:a||s?o*a+s:void 0}}))},inventoryId:null===u||void 0===u?void 0:u.inventoryId,ref:e=>r.current.batchNumber=e})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{ref:e=>r.current.HSN=e,onChange:e=>v("HSN",e.target.value),value:u.HSN||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1",onKeyDown:e=>g(e,"HSN")})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 tracking-widest opacity-80",children:"1x"}),(0,Rr.jsx)(Gf,{ref:e=>r.current.pack=e,onChange:e=>v("pack",e.target.value),value:u.pack||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pl-7",onKeyDown:e=>g(e,"pack")})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{ref:e=>r.current.expiry=e,onChange:e=>v("expiry",e.target.value),value:u.expiry||"",type:"text",placeholder:"MM/YY",className:"h-8 w-full border-[1px] border-gray-300 px-2",onKeyDown:e=>g(e,"expiry")})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("div",{className:"relative",children:(0,Rr.jsx)(Gf,{ref:e=>r.current.mrp=e,onChange:e=>v("mrp",e.target.value),value:u.mrp||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 text-right",onKeyDown:e=>g(e,"mrp")})})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{ref:e=>r.current.packs=e,onChange:e=>v("packs",e.target.value),value:u.packs||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1",onKeyDown:e=>g(e,"packs")})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{ref:e=>r.current.loose=e,onChange:e=>v("loose",e.target.value),value:u.loose||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1",onKeyDown:e=>g(e,"loose")})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-500 z-10",children:"\u20b9"}),(0,Rr.jsx)(Gf,{ref:e=>r.current.saleRate=e,onChange:e=>v("saleRate",e.target.value),value:u.saleRate||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 pl-5",onKeyDown:e=>g(e,"saleRate")})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{ref:e=>r.current.discount=e,onChange:e=>v("discount",e.target.value),value:u.discount||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pr-5",onKeyDown:e=>g(e,"discount")}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:"%"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{ref:e=>r.current.gstPer=e,onChange:e=>v("gstPer",e.target.value),value:u.gstPer||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pr-5",onKeyDown:e=>g(e,"gstPer")}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:"%"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{readOnly:!0,value:u.amount||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1",disabled:!0})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Vn,{onClick:y,className:"h-8 focus:bg-blue-800 focus:text-white bg",ref:e=>r.current.add=e,children:"Add"})})]}),(0,Rr.jsx)("div",{className:"w-full space-y-2",children:0!==n.length&&n.map(((e,t)=>{var a,s;return(0,Rr.jsxs)("div",{className:"grid grid-cols-16 w-full space-x-1 font-semibold",children:[(0,Rr.jsxs)("div",{className:"col-span-3 grid grid-cols-6",children:[(0,Rr.jsxs)("div",{className:"items-center font-semibold justify-center flex",children:[t+1,".",(0,Rr.jsx)("span",{className:"text-sm text-red-500",children:"return"===e.types&&"R"})]}),(0,Rr.jsx)(Gf,{disabled:!0,value:null===e||void 0===e?void 0:e.productName,type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-2 col-span-5 uppercase"})]}),(0,Rr.jsx)("div",{className:"col-span-2",children:(0,Rr.jsx)(Gf,{disabled:c,type:"text",value:(null===e||void 0===e?void 0:e.batchNumber)||"",className:"h-8 w-full border-[1px] border-gray-300 px-1 uppercase"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{disabled:c,value:(null===e||void 0===e?void 0:e.HSN)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 tracking-widest opacity-80",children:"1x"}),(0,Rr.jsx)(Gf,{disabled:c,ref:e=>r.current.pack=e,onChange:e=>v("pack",e.target.value),value:e.pack||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pl-7"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{disabled:c,value:e.expiry||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-2"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("div",{className:"relative",children:(0,Rr.jsx)(Gf,{disabled:c,value:(null===e||void 0===e||null===(a=e.mrp)||void 0===a?void 0:a.toFixed(2))||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 text-right rounded-sm"})})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{disabled:c,value:(null===e||void 0===e?void 0:e.packs)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{disabled:c,value:(null===e||void 0===e?void 0:e.loose)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("div",{className:"relative",children:(0,Rr.jsx)(Gf,{disabled:c,value:(null===(s=Number((null===e||void 0===e?void 0:e.saleRate)||0))||void 0===s?void 0:s.toFixed(2))||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 text-right rounded-sm"})})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{disabled:c,value:(null===e||void 0===e?void 0:e.discount)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pr-5"}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:"%"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{disabled:c,value:(null===e||void 0===e?void 0:e.gstPer)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pr-5"}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:"%"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{disabled:!0,value:(null===e||void 0===e?void 0:e.amount)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1"})}),(0,Rr.jsxs)("div",{className:"flex gap-4 items-center justify-center",children:[(0,Rr.jsx)("button",{disabled:o,onClick:()=>(e=>{const t=n[e];h(t),x(null===t||void 0===t?void 0:t.batchNumber),m((null===t||void 0===t?void 0:t.productName)||(null===t||void 0===t?void 0:t.product)),b(e)})(t),children:(0,Rr.jsx)(iK,{className:"h-4 w-4"})}),(0,Rr.jsx)("button",{disabled:o,onClick:()=>b(t),children:(0,Rr.jsx)(oK,{className:"h-4 w-4"})})]})]},null===e||void 0===e?void 0:e.inventoryId)}))})]})}const yK=["name","openBalance","balance_type","mob","address","submitButton"];function bK(e){let{open:r,onOpenChange:n,onSuccess:a,editingCustomer:s=null,initialData:i=null}=e;const o=rt(),{toast:l}=$g(),[c,d]=(0,t.useState)(!1),u=(0,t.useRef)({}),[h,f]=(0,t.useState)({name:"",mob:"",address:"",openBalance:"",balance_type:"collect"});(0,t.useEffect)((()=>{f(s?{name:s.name,mob:s.mob,address:s.address,openBalance:Math.abs(s.currentBalance)||"",balance_type:s.openBalance<0?"pay":"collect"}:i?{name:i.name||"",mob:i.mob||"",address:i.address||"",openBalance:i.openBalance||""}:{name:"",mob:"",address:"",openBalance:"",balance_type:"collect"})}),[s,i]);const m=(e,t)=>{if("Enter"===e.key){e.preventDefault();const a=yK.indexOf(t);if(e.shiftKey){if(a>0){var r;const e=yK[a-1];null===(r=u.current[e])||void 0===r||r.focus()}}else if(a<yK.length-1){var n;const e=yK[a+1];null===(n=u.current[e])||void 0===n||n.focus()}}},p=async e=>{e.preventDefault();try{let e;d(!0);const t={...h};let r=Number(t.openBalance);"pay"===t.balance_type&&r>0?r=-r:"collect"===t.balance_type&&r<0&&(r=Math.abs(r)),t.openBalance=r,s?(e=await o(Vh({id:s._id,customerData:t})).unwrap(),l({title:"Success",description:"Customer updated successfully",variant:"success"})):(e=await o(zh(t)).unwrap(),l({title:"Success",description:"Customer created successfully",variant:"success"})),null===a||void 0===a||a(e),n(!1)}catch(t){l({title:"Error",description:t.message||`Failed to ${s?"update":"create"} customer`,variant:"destructive"})}finally{d(!1)}},x=(e,t)=>{f((r=>({...r,[e]:t})))};return(0,Rr.jsx)(WN,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(XN,{className:"max-w-2xl p-0 gap-0",children:[(0,Rr.jsx)(QN,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:(0,Rr.jsx)(ZN,{className:"text-base font-semibold",children:s?"Edit Customer":"Create New Customer"})}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsx)("form",{onSubmit:p,className:"space-y-5",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:["Customer Name",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{id:"name","data-dialog-autofocus":"true",value:h.name,onChange:e=>x("name",e.target.value),placeholder:"Enter customer name",required:!0,className:"h-9",onKeyDown:e=>m(e,"name"),ref:e=>u.current.name=e})]}),(0,Rr.jsxs)("div",{className:"flex gap-2",children:[(0,Rr.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,Rr.jsx)(yN,{htmlFor:"openBalance",className:"text-sm font-medium text-gray-700",children:"Balance"}),(0,Rr.jsx)(Gf,{id:"openBalance",type:"number",value:h.openBalance,onChange:e=>x("openBalance",e.target.value),placeholder:"\u20b9 0",className:"h-9",onKeyDown:e=>m(e,"openBalance"),ref:e=>u.current.openBalance=e})]}),(0,Rr.jsxs)("div",{className:"space-y-2 w-[120px]",children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium text-gray-700",children:"Type"}),(0,Rr.jsxs)(fw,{value:h.balance_type,onValueChange:e=>x("balance_type",e),children:[(0,Rr.jsx)(pw,{className:"h-9",ref:e=>u.current.balance_type=e,onKeyDown:e=>m(e,"balance_type"),children:(0,Rr.jsx)(mw,{placeholder:"Select"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"collect",children:"To Collect"}),(0,Rr.jsx)(yw,{value:"pay",children:"To Pay"})]})]})]})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"mobile",className:"text-sm font-medium text-gray-700",children:["Mobile Number",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{id:"mobile",value:h.mob,onChange:e=>x("mob",e.target.value),placeholder:"Enter mobile number",required:!0,className:"h-9",onKeyDown:e=>m(e,"mob"),ref:e=>u.current.mob=e})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:"address",className:"text-sm font-medium text-gray-700",children:"Address"}),(0,Rr.jsx)(wN,{id:"address",value:h.address,onChange:e=>x("address",e.target.value),placeholder:"Enter address",className:"h-9",onKeyDown:e=>m(e,"address"),ref:e=>u.current.address=e})]})]})})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>n(!1),disabled:c,children:"Cancel"}),(0,Rr.jsx)(Vn,{type:"submit",size:"sm",onClick:p,disabled:c,className:"bg-blue-600 text-white hover:bg-blue-700",ref:e=>u.current.submitButton=e,children:c?s?"Updating...":"Creating...":s?"Update":"Create"})]})]})})}const wK=(0,t.forwardRef)(((e,r)=>{let{placeholder:n,value:a,setValue:s,onSuggestionSelect:i,onKeyDown:o,onNewCustomerClick:l,disabled:c}=e;const d=rt(),{customers:u,status:h}=$e((e=>e.customers)),[f,m]=(0,t.useState)([]),[p,x]=(0,t.useState)(!1),[v,g]=(0,t.useState)(-1),y=(0,t.useRef)(null);(0,t.useEffect)((()=>{"idle"===h&&d(Bh())}),[d]),(0,t.useEffect)((()=>{const e=u.filter((e=>e.name.toLowerCase().includes((a||"").toLowerCase())));m([...e,{name:a,index:"new"}]),a.length>=3?g(0):g(-1)}),[a,u]);return(0,t.useEffect)((()=>{if(v>=0&&y.current){const e=y.current.children[v];e&&e.scrollIntoView({block:"nearest"})}}),[v]),(0,Rr.jsxs)("div",{className:"relative w-full",children:[(0,Rr.jsx)("div",{className:"relative",children:(0,Rr.jsx)(Gf,{ref:r,type:"text",value:a,onChange:e=>{s(e.target.value),x(e.target.value.length>=3)},disabled:c,onKeyDown:e=>{"ArrowDown"===e.key?(e.preventDefault(),g((e=>e<f.length-1?e+1:e))):"ArrowUp"===e.key?(e.preventDefault(),g((e=>e>0?e-1:-1))):"Enter"===e.key?v>=0?(e.preventDefault(),s(f[v].name),x(!1),i&&i(f[v])):o&&o(e):"F2"===e.key&&(e.preventDefault(),l&&l())},onFocus:()=>{a.length>=3&&x(!0)},onBlur:()=>setTimeout((()=>x(!1)),200),placeholder:n||"Search customer",className:"h-8 w-full border-[1px] border-gray-300 px-2"})}),p&&(0,Rr.jsxs)("div",{className:"absolute z-10 w-[600px] mt-1 bg-white border border-gray-300 rounded-sm shadow-lg",children:[(0,Rr.jsxs)("div",{className:"w-full grid grid-cols-6 border-b-[1px] border-muted-foreground px-4 py-2",children:[(0,Rr.jsx)("div",{className:"col-span-2 text-xs ",children:"Customer Name"}),(0,Rr.jsx)("div",{className:"text-xs ",children:"Mob Number"}),(0,Rr.jsx)("div",{className:"text-xs ",children:"Address"}),(0,Rr.jsx)("div",{className:"text-xs text-center ",children:"Balance"}),(0,Rr.jsx)("div",{className:"text-xs text-center",children:"Last Purchased"})]}),(0,Rr.jsx)(dp,{className:(f.length>5?"h-[300px]":"max-h-300")+" pr-2",children:(0,Rr.jsx)("ul",{ref:y,children:f.map(((e,t)=>(0,Rr.jsxs)("li",{onClick:()=>{return s((t=e).name),x(!1),i&&i(t),void(r&&r.current&&r.current.focus());var t},className:"w-full grid grid-cols-6 border-b-[1px] border-muted px-4 py-2 hover:bg-blue-200 "+(t===v?"bg-blue-200":""),children:[(0,Rr.jsx)("div",{className:`text-sm uppercase ${"new"===(null===e||void 0===e?void 0:e.index)?"col-span-4 text-primary":"col-span-2"} `,children:"new"===(null===e||void 0===e?void 0:e.index)?`Create New Cusomter "${null===e||void 0===e?void 0:e.name}"`:null===e||void 0===e?void 0:e.name}),(0,Rr.jsx)("div",{className:"text-sm",children:null===e||void 0===e?void 0:e.mob}),(0,Rr.jsx)("div",{className:"text-xs "+("new"===(null===e||void 0===e?void 0:e.index)?"text-primary text-end":""),children:"new"===(null===e||void 0===e?void 0:e.index)?"Press :  ALT+N":null===e||void 0===e?void 0:e.address}),(0,Rr.jsx)("div",{className:"text-sm text-center",children:null===e||void 0===e?void 0:e.balance}),(0,Rr.jsx)("div",{className:"text-sm text-center",children:null===e||void 0===e?void 0:e.lastInvoice})]},e._id||t)))})})]})]})})),NK=(0,t.forwardRef)(((e,r)=>{let{placeholder:n,value:a,setValue:s,onSuggestionSelect:i,onKeyDown:o,disabled:l=!1}=e;const[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)("");return(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(wK,{ref:r,placeholder:n,value:a,setValue:s,onSuggestionSelect:e=>{"new"===e.index?(h(a),d(!0)):null===i||void 0===i||i(e)},onKeyDown:o,onNewCustomerClick:()=>{h(a),d(!0)},disabled:l}),(0,Rr.jsx)(bK,{open:c,onOpenChange:d,onSuccess:e=>{s(e.name),null===i||void 0===i||i(e),d(!1)},initialData:{name:u}})]})})),jK=rm("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),SK=rm("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]);function CK(e){let{open:r,onOpenChange:n,onSelect:a,search:s,setSearch:i}=e;const[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),{items:u,itemsStatus:h}=$e((e=>e.inventory)),f=rt(),m=(0,t.useRef)();(0,t.useEffect)((()=>{c&&r||setTimeout((()=>{null!==m&&void 0!==m&&m.current&&(null===m||void 0===m||m.current.focus())}),0)}),[r,c]),(0,t.useEffect)((()=>{"idle"===h&&f(Mh())}),[f,h]),(0,t.useEffect)((()=>{const e=e=>{"F2"===e.key&&r&&(e.preventDefault(),d(!0))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[r]),(0,t.useEffect)((()=>{const e=null===u||void 0===u?void 0:u.filter((e=>{var t,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===s||void 0===s?void 0:s.toLowerCase()))||(null===(r=e.mfcName)||void 0===r?void 0:r.toLowerCase().includes(null===s||void 0===s?void 0:s.toLowerCase()))}));e.length>0?l(e[0]._id):l(null)}),[s,r,u]);const p=null===u||void 0===u?void 0:u.filter((e=>{var t,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===s||void 0===s?void 0:s.toLowerCase()))||(null===(r=e.mfcName)||void 0===r?void 0:r.toLowerCase().includes(null===s||void 0===s?void 0:s.toLowerCase()))})),x=e=>{null===a||void 0===a||a(e),n(!1)};return(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(WN,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(XN,{className:"max-w-3xl p-0 gap-0",onKeyDown:e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key){var t;e.preventDefault();const r=p.findIndex((e=>e._id===o));let n;n="ArrowDown"===e.key?r<p.length-1?r+1:0:r>0?r-1:p.length-1;const a=p[n]._id;l(a),null===(t=document.getElementById(a))||void 0===t||t.scrollIntoView({behavior:"smooth",block:"nearest"})}else if("Enter"===e.key){if(0===p.length)return void d(!0);o&&(x(p.find((e=>e._id===o))),n(!1))}else"Escape"===e.key&&n(!1)},children:[(0,Rr.jsx)(QN,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:(0,Rr.jsx)("div",{children:(0,Rr.jsx)(ZN,{className:"text-base font-semibold",children:"Select a Product"})})}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsxs)("div",{className:" py-2 px-4 flex justify-between",children:[(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(VN,{className:"absolute left-2.5 top-2 h-4 w-4 text-gray-400"}),(0,Rr.jsx)(Gf,{autoFocus:!0,placeholder:"Search products...",className:"pl-8 h-8 text-sm border rounded-md focus:ring-2 focus:ring-blue-500 font-semibold",value:s,onChange:e=>i(e.target.value),ref:m})]}),(0,Rr.jsx)("div",{className:"flex items-center gap-2",children:(0,Rr.jsxs)(Vn,{size:"sm",variant:"outline",className:"px-2",onClick:()=>d(!0),children:[(0,Rr.jsx)(Aw,{className:"h-3 w-3"}),"Add Product (F2)"]})})]}),(0,Rr.jsxs)("div",{className:"relative mx-4",children:[(0,Rr.jsx)(jw,{children:(0,Rr.jsx)(Sw,{className:"sticky top-0  z-10",children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:"w-[30%] text-left text-sm font-semibold h-8",children:"PRODUCT NAME"}),(0,Rr.jsx)(Tw,{className:"w-[30%] text-left text-sm font-semibold h-8",children:"COMPANY"}),(0,Rr.jsx)(Tw,{className:"w-[10%] text-sm font-semibold text-center h-8",children:"PACK"}),(0,Rr.jsx)(Tw,{className:"w-[20%] text-sm font-semibold text-center h-8",children:"STATUS"}),(0,Rr.jsx)(Tw,{className:"w-[10%] text-sm font-semibold text-center h-8",children:"LOCATION"})]})})}),(0,Rr.jsx)(dp,{className:"h-[400px] pr-2 py-1",children:(0,Rr.jsx)(jw,{children:(0,Rr.jsx)(Cw,{children:p.length>0?p.map((e=>(0,Rr.jsxs)(Ew,{id:e._id,className:Un("cursor-pointer hover:bg-blue-50 transition-colors",o===e._id&&"bg-blue-200"),onClick:()=>x(e),children:[(0,Rr.jsx)(Dw,{className:"w-[30%] py-3",children:(0,Rr.jsx)("div",{className:"font-medium",children:e.name})}),(0,Rr.jsx)(Dw,{className:"w-[30%] py-3",children:(0,Rr.jsx)("div",{className:"text-sm text-gray-600",children:e.mfcName})}),(0,Rr.jsx)(Dw,{className:"w-[10%] py-3 text-center",children:e.pack}),(0,Rr.jsx)(Dw,{className:"w-[20%] py-3 text-center",children:(0,Rr.jsx)(qw,{variant:e.quantity>0?"success":"destructive",children:e.quantity>0?"In Stock":"Out of Stock"})}),(0,Rr.jsx)(Dw,{className:"w-[10%] py-3 text-center",children:null===e||void 0===e?void 0:e.location})]},e._id))):(0,Rr.jsx)(Ew,{children:(0,Rr.jsx)(Dw,{colSpan:5,className:"text-center py-8",children:(0,Rr.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,Rr.jsx)(SK,{className:"h-12 w-12 text-gray-400"}),(0,Rr.jsx)("div",{className:"text-gray-500",children:"No products found"}),(0,Rr.jsx)(Vn,{size:"sm",onClick:()=>{d(!0)},className:"bg-blue-600 text-white hover:bg-blue-700",children:"Add new product"})]})})})})})})]}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 text-xs text-gray-600 flex items-center justify-center gap-3",children:[(0,Rr.jsx)("span",{children:"Add New - F2"}),(0,Rr.jsx)("span",{children:"|"}),(0,Rr.jsx)("span",{children:"Navigate - \u2191\u2193"}),(0,Rr.jsx)("span",{children:"|"}),(0,Rr.jsx)("span",{children:"Select - Enter"}),(0,Rr.jsx)("span",{children:"|"}),(0,Rr.jsx)("span",{children:"Close - ESC"})]})]})}),(0,Rr.jsx)(fK,{open:c,onOpenChange:d,initialProductName:s})]})}const kK=rm("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),EK=e=>{let t=e.replace(/\D/g,"");return 1===t.length&&Number(t)>1?t="0"+t+"/":t.length>2?t=t.substring(0,2)+"/"+t.substring(2,4):2===t.length&&2===e.length?t+="/":2===t.length&&3===e.length&&e.endsWith("/"),t.slice(0,5)};function TK(e){let{inputRef:r,products:n,setProducts:a,viewMode:s,gstMode:i="exclusive",calculateProductAmount:o}=e;const{toast:l}=$g(),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)({}),[f,m]=(0,t.useState)(""),[p,x]=(0,t.useState)(!1),[v,g]=(0,t.useState)(""),[y,b]=(0,t.useState)(null),[w,N]=(0,t.useState)(!1),[j,S]=(0,t.useState)({});(0,t.useEffect)((()=>{if(null!==u&&void 0!==u&&u.quantity&&null!==u&&void 0!==u&&u.purchaseRate&&"function"===typeof o){const e=o(u,i);h((t=>({...t,amount:Cu(e)})))}}),[i,null===u||void 0===u?void 0:u.quantity,null===u||void 0===u?void 0:u.purchaseRate,null===u||void 0===u?void 0:u.discount,null===u||void 0===u?void 0:u.schemeInput1,null===u||void 0===u?void 0:u.schemeInput2,null===u||void 0===u?void 0:u.gstPer,o]);const C=(e,t)=>{const r={...u,[e]:t};if("schemeInput1"===e||"schemeInput2"===e)if(r.schemeInput1&&r.schemeInput2){const e=Number(r.schemeInput1),t=Number(r.schemeInput2);if(e>0&&e+t>0){const n=t/(e+t)*100;r.schemePercent=Cu(n)}else r.schemePercent=""}else r.schemePercent="";if(null!==r&&void 0!==r&&r.quantity&&null!==r&&void 0!==r&&r.purchaseRate&&"function"===typeof o){const e=o(r,i);r.amount=Cu(e)}else r.amount="";h(r)},k=(e,t)=>{const n=["product","batchNumber","HSN","expiry","pack","quantity","free","mrp","purchaseRate","schemeInput1","schemeInput2","discount","gstPer","addButton"];if("Enter"===e.key){if(e.preventDefault(),e.shiftKey){const e=n.indexOf(t);if(e>0){const t=n[e-1];r.current[t]&&r.current[t].focus()}return}const a=n.indexOf(t);if(-1===a)return;if("addButton"===t)return void E();for(let e=a+1;e<n.length;e++){const t=n[e];if((!u[t]||""===String(u[t]).trim()||"addButton"===t)&&r.current[t])return void r.current[t].focus()}r.current.addButton&&r.current.addButton.focus()}},E=()=>{if(!u.productName||!u.inventoryId)return void l({variant:"destructive",title:"Please add product"});if(null===u||void 0===u||!u.quantity)return void l({variant:"destructive",title:"Please add quantity"});if(null===u||void 0===u||!u.expiry)return void l({variant:"destructive",title:"Please add expiry"});{const e=null===u||void 0===u?void 0:u.expiry.split("/");if(1===e.length)return void l({variant:"destructive",title:"Please add expiry"});if(2===e.length){const t=(new Date).getFullYear(),r=(new Date).getMonth(),n=2e3+Number(e[1]),a=Number(e[0]);if(n<t||n===t&&a<r)return void l({variant:"destructive",title:"You cannot add expired product"})}}let e={...u};e.batchNumber||(e.batchNumber=v),a((t=>[...t,e])),g(""),h({}),m(""),r.current.product.focus()};(0,t.useEffect)((()=>{if(u.productName&&u.batchNumber){const e=new KeyboardEvent("keydown",{key:"Enter"});k(e,"batchNumber")}}),[u.batchNumber]);const T=(e,t,r)=>{a((n=>{const a=[...n],s={...a[e],[t]:r};if("quantity"===t||"purchaseRate"===t||"discount"===t||"schemeInput1"===t||"schemeInput2"===t||"gstPer"===t){if("function"===typeof o){const e=o(s,i);s.amount=Cu(e)}if("schemeInput1"===t||"schemeInput2"===t)if(s.schemeInput1&&s.schemeInput2){const e=Number(s.schemeInput1),t=Number(s.schemeInput2);if(e>0&&e+t>0){const r=t/(e+t)*100;s.schemePercent=Cu(r)}else s.schemePercent=""}else s.schemePercent=""}return a[e]=s,a}))};return(0,Rr.jsxs)("div",{className:"w-full border-[1px] border-inherit py-4 rounded-sm",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-[30px_3fr_2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_50px] gap-1 px-2",children:[(0,Rr.jsx)("div",{className:"flex justify-center",children:"#"}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"PRODUCT"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"BATCH"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"HSN"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"EXPIRY"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"PACK"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"QTY"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"FREE"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"MRP(\u20b9)"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"RATE(\u20b9)"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"Scheme"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"SCH%"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"DISC"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"GST"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"AMT"})}),(0,Rr.jsx)("div",{className:"flex items-center justify-center",children:(0,Rr.jsx)(Gf,{type:"checkbox",checked:w,onChange:e=>{N(e.target.checked),e.target.checked?d(!1):(d(!0),b(null))},className:"w-3 h-4",disabled:s})})]}),!s&&(0,Rr.jsxs)("div",{className:"grid grid-cols-[30px_3fr_2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_50px] gap-1 px-2 mt-2 font-semibold",children:[(0,Rr.jsx)("div",{}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{ref:e=>r.current.product=e,onChange:e=>{e.preventDefault();const t=e.target.value;1!==t.length||" "!==t?t.length>0&&" "!==t[0]&&(m(t),x(!0)):x(!0)},onKeyDown:e=>k(e,"product"),value:f,type:"text",placeholder:"Type or Press Space",className:"h-8 w-full border-[1px] border-gray-300 px-2 rounded-sm"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(vK,{inputRef:r,value:v,setValue:g,onSuggestionSelect:e=>{e&&(g(e.batchNumber),h((t=>({...t,batchId:e._id,batchNumber:e.batchNumber,expiry:e.expiry||"",mrp:e.mrp||"",pack:e.pack||t.pack,purchaseRate:e.purchaseRate||"",gstPer:e.gstPer||"",HSN:e.HSN||t.HSN}))))},inventoryId:null===u||void 0===u?void 0:u.inventoryId,ref:e=>r.current.batchNumber=e,onKeyDown:e=>k(e,"batchNumber")})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{id:"HSN",ref:e=>r.current.HSN=e,onKeyDown:e=>k(e,"HSN"),onChange:e=>C("HSN",e.target.value),value:u.HSN||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{ref:e=>r.current.expiry=e,onChange:e=>{const t=EK(e.target.value);C("expiry",t)},onKeyDown:e=>k(e,"expiry"),value:u.expiry||"",type:"text",placeholder:"MM/YY",className:"h-8 w-full border-[1px] border-gray-300 px-2 rounded-sm"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 tracking-widest opacity-80",children:"1x"}),(0,Rr.jsx)(Gf,{ref:e=>r.current.pack=e,onKeyDown:e=>k(e,"pack"),onChange:e=>C("pack",e.target.value),value:u.pack||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pl-7 rounded-sm"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{ref:e=>r.current.quantity=e,onKeyDown:e=>k(e,"quantity"),onChange:e=>C("quantity",e.target.value),value:u.quantity||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{ref:e=>r.current.free=e,onKeyDown:e=>k(e,"free"),onChange:e=>C("free",e.target.value),value:u.free||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("div",{className:"relative",children:(0,Rr.jsx)(Gf,{ref:e=>r.current.mrp=e,onKeyDown:e=>k(e,"mrp"),onChange:e=>C("mrp",e.target.value),value:u.mrp||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm"})})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("div",{className:"relative",children:(0,Rr.jsx)(Gf,{ref:e=>r.current.purchaseRate=e,onKeyDown:e=>k(e,"purchaseRate"),onChange:e=>C("purchaseRate",e.target.value),value:u.purchaseRate||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm"})})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"flex gap-1",children:[(0,Rr.jsx)(Gf,{ref:e=>r.current.schemeInput1=e,onKeyDown:e=>k(e,"schemeInput1"),value:u.schemeInput1||"",onChange:e=>C("schemeInput1",e.target.value),type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm"}),"+",(0,Rr.jsx)(Gf,{ref:e=>r.current.schemeInput2=e,onKeyDown:e=>k(e,"schemeInput2"),value:u.schemeInput2||"",onChange:e=>C("schemeInput2",e.target.value),type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{disabled:!0,value:u.schemePercent||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pr-5 rounded-sm"}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:"%"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{ref:e=>r.current.discount=e,onKeyDown:e=>k(e,"discount"),onChange:e=>C("discount",e.target.value),value:u.discount||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pr-5 rounded-sm"}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:"%"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{ref:e=>r.current.gstPer=e,onKeyDown:e=>k(e,"gstPer"),onChange:e=>C("gstPer",e.target.value),value:u.gstPer||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pr-5 rounded-sm"}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:"%"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{readOnly:!0,value:u.amount||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm",disabled:!0})}),(0,Rr.jsxs)("div",{className:"flex gap-1 items-center ml-2 justify-center",children:[(0,Rr.jsx)("button",{onClick:E,ref:e=>r.current.addButton=e,className:"bg-primary p-1 rounded-sm",title:"Add Item",onKeyDown:e=>k(e,"addButton"),children:(0,Rr.jsx)(Aw,{className:"h-5 w-5 text-white"})}),(0,Rr.jsx)("button",{onClick:()=>{h({}),m(""),g(""),r.current.product.focus()},title:"Clear Field",children:(0,Rr.jsx)(jN,{className:"h-5 w-4"})})]})]}),(0,Rr.jsx)("div",{className:"mt-2",children:0!==n.length&&n.map(((e,t)=>{var l,c,u;return(0,Rr.jsxs)("div",{className:"grid grid-cols-[30px_3fr_2fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_1fr_50px] gap-1 px-2 mt-1 font-semibold",children:[(0,Rr.jsx)("div",{className:"flex justify-center items-center font-semibold",children:t+1}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{disabled:!0,value:null===e||void 0===e?void 0:e.productName,type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-2 rounded-sm"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(vK,{inputRef:r,value:j[t]||(null===e||void 0===e?void 0:e.batchNumber)||"",setValue:e=>{S((r=>({...r,[t]:e}))),T(t,"batchNumber",e)},onSuggestionSelect:e=>((e,t)=>{S((r=>({...r,[t]:e.batchNumber}))),a((r=>{const n=[...r];let a={...n[t],batchId:e._id,batchNumber:e.batchNumber,expiry:e.expiry,mrp:e.mrp,pack:e.pack,purchaseRate:e.purchaseRate};if("function"===typeof o){const e=o(a,i);a.amount=Cu(e)}if(a.schemeInput1&&a.schemeInput2){const e=Number(a.schemeInput1),t=Number(a.schemeInput2);if(e>0&&e+t>0){const r=t/(e+t)*100;a.schemePercent=Cu(r)}else a.schemePercent=""}else a.schemePercent="";return n[t]=a,n}))})(e,t),inventoryId:null===e||void 0===e?void 0:e.inventoryId,disabled:!w&&y!==t})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{disabled:!w&&y!==t,onChange:e=>T(t,"HSN",e.target.value),value:(null===e||void 0===e?void 0:e.HSN)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{disabled:!w&&y!==t,onChange:e=>{const r=EK(e.target.value);T(t,"expiry",r)},value:(null===e||void 0===e?void 0:e.expiry)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-2 rounded-sm"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 tracking-widest opacity-80",children:"1x"}),(0,Rr.jsx)(Gf,{disabled:!w&&y!==t,onChange:e=>T(t,"pack",e.target.value),value:(null===e||void 0===e?void 0:e.pack)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pl-7 rounded-sm"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{disabled:!w&&y!==t,onChange:e=>T(t,"quantity",e.target.value),value:(null===e||void 0===e?void 0:e.quantity)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{disabled:!w&&y!==t,onChange:e=>T(t,"free",e.target.value),value:(null===e||void 0===e?void 0:e.free)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm"})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("div",{className:"relative",children:(0,Rr.jsx)(Gf,{disabled:!w&&y!==t,onChange:e=>T(t,"mrp",e.target.value),value:(null===(l=Number((null===e||void 0===e?void 0:e.mrp)||0))||void 0===l?void 0:l.toFixed(2))||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300  rounded-sm text-right"})})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("div",{className:"relative",children:(0,Rr.jsx)(Gf,{disabled:!w&&y!==t,onChange:e=>T(t,"purchaseRate",e.target.value),value:(null===(c=Number((null===e||void 0===e?void 0:e.purchaseRate)||0))||void 0===c?void 0:c.toFixed(2))||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300  rounded-sm text-right"})})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"flex gap-1",children:[(0,Rr.jsx)(Gf,{disabled:!w&&y!==t,value:(null===e||void 0===e?void 0:e.schemeInput1)||"",onChange:e=>T(t,"schemeInput1",e.target.value),type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm"}),"+",(0,Rr.jsx)(Gf,{disabled:!w&&y!==t,value:(null===e||void 0===e?void 0:e.schemeInput2)||"",onChange:e=>T(t,"schemeInput2",e.target.value),type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 rounded-sm"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{disabled:!0,value:(null===e||void 0===e?void 0:e.schemePercent)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pr-5 rounded-sm"}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:"%"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{disabled:!w&&y!==t,onChange:e=>T(t,"discount",e.target.value),value:(null===e||void 0===e?void 0:e.discount)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pr-5 rounded-sm"}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:"%"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{disabled:!w&&y!==t,onChange:e=>T(t,"gstPer",e.target.value),value:(null===e||void 0===e?void 0:e.gstPer)||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 pr-5 rounded-sm"}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:"%"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{disabled:!0,value:(null===(u=Number((null===e||void 0===e?void 0:e.amount)||0))||void 0===u?void 0:u.toFixed(2))||"",type:"text",className:"h-8 w-full border-[1px] border-gray-300 px-1 text-right rounded-sm"})}),(0,Rr.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[!w&&(0,Rr.jsx)(Rr.Fragment,{children:y===t?(0,Rr.jsx)("button",{onClick:()=>(b(null),void d(!0)),children:(0,Rr.jsx)(kK,{className:"h-4 w-4"})}):(0,Rr.jsx)("button",{disabled:s,onClick:()=>(e=>{b(e),d(!1)})(t),children:(0,Rr.jsx)(iK,{className:"h-4 w-4"})})}),(0,Rr.jsx)("button",{disabled:s,onClick:()=>(e=>{const t=n.filter(((t,r)=>r!==e));a(t)})(t),children:(0,Rr.jsx)(oK,{className:"h-4 w-4"})})]})]},null===e||void 0===e?void 0:e.inventoryId)}))}),(0,Rr.jsx)(CK,{open:p,onOpenChange:x,onSelect:e=>{h((t=>({...t,mfcName:e.mfcName,productName:e.name,inventoryId:e._id,HSN:e.HSN||"",pack:e.pack||1,location:e.location||""}))),m(e.name),setTimeout((()=>{r&&r.current.batchNumber&&r.current.batchNumber.focus()}),100)},search:f,setSearch:m})]})}rm("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);function DK(e){return Array.isArray?Array.isArray(e):"[object Array]"===OK(e)}function AK(e){return"string"===typeof e}function PK(e){return"number"===typeof e}function _K(e){return!0===e||!1===e||function(e){return RK(e)&&null!==e}(e)&&"[object Boolean]"==OK(e)}function RK(e){return"object"===typeof e}function IK(e){return void 0!==e&&null!==e}function MK(e){return!e.trim().length}function OK(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const FK=Object.prototype.hasOwnProperty;class LK{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let r=BK(e);this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function BK(e){let t=null,r=null,n=null,a=1,s=null;if(AK(e)||DK(e))n=e,t=UK(e),r=zK(e);else{if(!FK.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const i=e.name;if(n=i,FK.call(e,"weight")&&(a=e.weight,a<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(i));t=UK(i),r=zK(i),s=e.getFn}return{path:t,id:r,weight:a,src:n,getFn:s}}function UK(e){return DK(e)?e:e.split(".")}function zK(e){return DK(e)?e.join("."):e}const VK={useExtendedSearch:!1,getFn:function(e,t){let r=[],n=!1;const a=(e,t,s)=>{if(IK(e))if(t[s]){const i=e[t[s]];if(!IK(i))return;if(s===t.length-1&&(AK(i)||PK(i)||_K(i)))r.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(i));else if(DK(i)){n=!0;for(let e=0,r=i.length;e<r;e+=1)a(i[e],t,s+1)}else t.length&&a(i,t,s+1)}else r.push(e)};return a(e,AK(t)?t.split("."):t,0),n?r:r[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var HK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...VK};const $K=/[^ ]+/g;class WK{constructor(){let{getFn:e=HK.getFn,fieldNormWeight:t=HK.fieldNormWeight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.norm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const r=new Map,n=Math.pow(10,t);return{get(t){const a=t.match($K).length;if(r.has(a))return r.get(a);const s=1/Math.pow(a,.5*e),i=parseFloat(Math.round(s*n)/n);return r.set(a,i),i},clear(){r.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}setIndexRecords(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}setKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,AK(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();AK(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!IK(e)||MK(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach(((t,n)=>{let a=t.getFn?t.getFn(e):this.getFn(e,t.path);if(IK(a))if(DK(a)){let e=[];const t=[{nestedArrIndex:-1,value:a}];for(;t.length;){const{nestedArrIndex:r,value:n}=t.pop();if(IK(n))if(AK(n)&&!MK(n)){let t={v:n,i:r,n:this.norm.get(n)};e.push(t)}else DK(n)&&n.forEach(((e,r)=>{t.push({nestedArrIndex:r,value:e})}))}r.$[n]=e}else if(AK(a)&&!MK(a)){let e={v:a,n:this.norm.get(a)};r.$[n]=e}})),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function qK(e,t){let{getFn:r=HK.getFn,fieldNormWeight:n=HK.fieldNormWeight}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=new WK({getFn:r,fieldNormWeight:n});return a.setKeys(e.map(BK)),a.setSources(t),a.create(),a}function GK(e){let{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:a=HK.distance,ignoreLocation:s=HK.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t/e.length;if(s)return i;const o=Math.abs(n-r);return a?i+o/a:o?1:i}const KK=32;function YK(e,t,r){let{location:n=HK.location,distance:a=HK.distance,threshold:s=HK.threshold,findAllMatches:i=HK.findAllMatches,minMatchCharLength:o=HK.minMatchCharLength,includeMatches:l=HK.includeMatches,ignoreLocation:c=HK.ignoreLocation}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t.length>KK)throw new Error((e=>`Pattern length exceeds max of ${e}.`)(KK));const d=t.length,u=e.length,h=Math.max(0,Math.min(n,u));let f=s,m=h;const p=o>1||l,x=p?Array(u):[];let v;for(;(v=e.indexOf(t,m))>-1;){let e=GK(t,{currentLocation:v,expectedLocation:h,distance:a,ignoreLocation:c});if(f=Math.min(e,f),m=v+d,p){let e=0;for(;e<d;)x[v+e]=1,e+=1}}m=-1;let g=[],y=1,b=d+u;const w=1<<d-1;for(let j=0;j<d;j+=1){let n=0,s=b;for(;n<s;){GK(t,{errors:j,currentLocation:h+s,expectedLocation:h,distance:a,ignoreLocation:c})<=f?n=s:b=s,s=Math.floor((b-n)/2+n)}b=s;let o=Math.max(1,h-s+1),l=i?u:Math.min(h+s,u)+d,v=Array(l+2);v[l+1]=(1<<j)-1;for(let i=l;i>=o;i-=1){let n=i-1,s=r[e.charAt(n)];if(p&&(x[n]=+!!s),v[i]=(v[i+1]<<1|1)&s,j&&(v[i]|=(g[i+1]|g[i])<<1|1|g[i+1]),v[i]&w&&(y=GK(t,{errors:j,currentLocation:n,expectedLocation:h,distance:a,ignoreLocation:c}),y<=f)){if(f=y,m=n,m<=h)break;o=Math.max(1,2*h-m)}}if(GK(t,{errors:j+1,currentLocation:h,expectedLocation:h,distance:a,ignoreLocation:c})>f)break;g=v}const N={isMatch:m>=0,score:Math.max(.001,y)};if(p){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:HK.minMatchCharLength,r=[],n=-1,a=-1,s=0;for(let i=e.length;s<i;s+=1){let i=e[s];i&&-1===n?n=s:i||-1===n||(a=s-1,a-n+1>=t&&r.push([n,a]),n=-1)}return e[s-1]&&s-n>=t&&r.push([n,s-1]),r}(x,o);e.length?l&&(N.indices=e):N.isMatch=!1}return N}function XK(e){let t={};for(let r=0,n=e.length;r<n;r+=1){const a=e.charAt(r);t[a]=(t[a]||0)|1<<n-r-1}return t}const QK=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class JK{constructor(e){let{location:t=HK.location,threshold:r=HK.threshold,distance:n=HK.distance,includeMatches:a=HK.includeMatches,findAllMatches:s=HK.findAllMatches,minMatchCharLength:i=HK.minMatchCharLength,isCaseSensitive:o=HK.isCaseSensitive,ignoreDiacritics:l=HK.ignoreDiacritics,ignoreLocation:c=HK.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options={location:t,threshold:r,distance:n,includeMatches:a,findAllMatches:s,minMatchCharLength:i,isCaseSensitive:o,ignoreDiacritics:l,ignoreLocation:c},e=o?e:e.toLowerCase(),e=l?QK(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const d=(e,t)=>{this.chunks.push({pattern:e,alphabet:XK(e),startIndex:t})},u=this.pattern.length;if(u>KK){let e=0;const t=u%KK,r=u-t;for(;e<r;)d(this.pattern.substr(e,KK),e),e+=KK;if(t){const e=u-KK;d(this.pattern.substr(e),e)}}else d(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:r,includeMatches:n}=this.options;if(e=t?e:e.toLowerCase(),e=r?QK(e):e,this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:a,distance:s,threshold:i,findAllMatches:o,minMatchCharLength:l,ignoreLocation:c}=this.options;let d=[],u=0,h=!1;this.chunks.forEach((t=>{let{pattern:r,alphabet:f,startIndex:m}=t;const{isMatch:p,score:x,indices:v}=YK(e,r,f,{location:a+m,distance:s,threshold:i,findAllMatches:o,minMatchCharLength:l,includeMatches:n,ignoreLocation:c});p&&(h=!0),u+=x,p&&v&&(d=[...d,...v])}));let f={isMatch:h,score:h?u/this.chunks.length:1};return h&&n&&(f.indices=d),f}}class ZK{constructor(e){this.pattern=e}static isMultiMatch(e){return eY(e,this.multiRegex)}static isSingleMatch(e){return eY(e,this.singleRegex)}search(){}}function eY(e,t){const r=e.match(t);return r?r[1]:null}class tY extends ZK{constructor(e){let{location:t=HK.location,threshold:r=HK.threshold,distance:n=HK.distance,includeMatches:a=HK.includeMatches,findAllMatches:s=HK.findAllMatches,minMatchCharLength:i=HK.minMatchCharLength,isCaseSensitive:o=HK.isCaseSensitive,ignoreDiacritics:l=HK.ignoreDiacritics,ignoreLocation:c=HK.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this._bitapSearch=new JK(e,{location:t,threshold:r,distance:n,includeMatches:a,findAllMatches:s,minMatchCharLength:i,isCaseSensitive:o,ignoreDiacritics:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class rY extends ZK{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,r=0;const n=[],a=this.pattern.length;for(;(t=e.indexOf(this.pattern,r))>-1;)r=t+a,n.push([t,r-1]);const s=!!n.length;return{isMatch:s,score:s?0:1,indices:n}}}const nY=[class extends ZK{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},rY,class extends ZK{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends ZK{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends ZK{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends ZK{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends ZK{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},tY],aY=nY.length,sY=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const iY=new Set([tY.type,rY.type]);class oY{constructor(e){let{isCaseSensitive:t=HK.isCaseSensitive,ignoreDiacritics:r=HK.ignoreDiacritics,includeMatches:n=HK.includeMatches,minMatchCharLength:a=HK.minMatchCharLength,ignoreLocation:s=HK.ignoreLocation,findAllMatches:i=HK.findAllMatches,location:o=HK.location,threshold:l=HK.threshold,distance:c=HK.distance}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:r,includeMatches:n,minMatchCharLength:a,findAllMatches:i,ignoreLocation:s,location:o,threshold:l,distance:c},e=t?e:e.toLowerCase(),e=r?QK(e):e,this.pattern=e,this.query=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map((e=>{let r=e.trim().split(sY).filter((e=>e&&!!e.trim())),n=[];for(let a=0,s=r.length;a<s;a+=1){const e=r[a];let s=!1,i=-1;for(;!s&&++i<aY;){const r=nY[i];let a=r.isMultiMatch(e);a&&(n.push(new r(a,t)),s=!0)}if(!s)for(i=-1;++i<aY;){const r=nY[i];let a=r.isSingleMatch(e);if(a){n.push(new r(a,t));break}}}return n}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:n,ignoreDiacritics:a}=this.options;e=n?e:e.toLowerCase(),e=a?QK(e):e;let s=0,i=[],o=0;for(let l=0,c=t.length;l<c;l+=1){const n=t[l];i.length=0,s=0;for(let t=0,a=n.length;t<a;t+=1){const a=n[t],{isMatch:l,indices:c,score:d}=a.search(e);if(!l){o=0,s=0,i.length=0;break}if(s+=1,o+=d,r){const e=a.constructor.type;iY.has(e)?i=[...i,...c]:i.push(c)}}if(s){let e={isMatch:!0,score:o/s};return r&&(e.indices=i),e}}return{isMatch:!1,score:1}}}const lY=[];function cY(e,t){for(let r=0,n=lY.length;r<n;r+=1){let n=lY[r];if(n.condition(e,t))return new n(e,t)}return new JK(e,t)}const dY="$and",uY="$or",hY="$path",fY="$val",mY=e=>!(!e[dY]&&!e[uY]),pY=e=>({[dY]:Object.keys(e).map((t=>({[t]:e[t]})))});function xY(e,t){let{auto:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e=>{let a=Object.keys(e);const s=(e=>!!e[hY])(e);if(!s&&a.length>1&&!mY(e))return n(pY(e));if((e=>!DK(e)&&RK(e)&&!mY(e))(e)){const n=s?e[hY]:a[0],i=s?e[fY]:e[n];if(!AK(i))throw new Error((e=>`Invalid value for key ${e}`)(n));const o={keyId:zK(n),pattern:i};return r&&(o.searcher=cY(i,t)),o}let i={children:[],operator:a[0]};return a.forEach((t=>{const r=e[t];DK(r)&&r.forEach((e=>{i.children.push(n(e))}))})),i};return mY(e)||(e=pY(e)),n(e)}function vY(e,t){const r=e.matches;t.matches=[],IK(r)&&r.forEach((e=>{if(!IK(e.indices)||!e.indices.length)return;const{indices:r,value:n}=e;let a={indices:r,value:n};e.key&&(a.key=e.key.src),e.idx>-1&&(a.refIndex=e.idx),t.matches.push(a)}))}function gY(e,t){t.score=e.score}class yY{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.options={...HK,...t},this.options.useExtendedSearch,this._keyStore=new LK(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof WK))throw new Error("Incorrect 'index' type");this._myIndex=t||qK(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){IK(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1;const t=[];for(let r=0,n=this._docs.length;r<n;r+=1){const a=this._docs[r];e(a,r)&&(this.removeAt(r),r-=1,n-=1,t.push(a))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e){let{limit:t=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeMatches:r,includeScore:n,shouldSort:a,sortFn:s,ignoreFieldNorm:i}=this.options;let o=AK(e)?AK(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,t){let{ignoreFieldNorm:r=HK.ignoreFieldNorm}=t;e.forEach((e=>{let t=1;e.matches.forEach((e=>{let{key:n,norm:a,score:s}=e;const i=n?n.weight:null;t*=Math.pow(0===s&&i?Number.EPSILON:s,(i||1)*(r?1:a))})),e.score=t}))}(o,{ignoreFieldNorm:i}),a&&o.sort(s),PK(t)&&t>-1&&(o=o.slice(0,t)),function(e,t){let{includeMatches:r=HK.includeMatches,includeScore:n=HK.includeScore}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=[];return r&&a.push(vY),n&&a.push(gY),e.map((e=>{const{idx:r}=e,n={item:t[r],refIndex:r};return a.length&&a.forEach((t=>{t(e,n)})),n}))}(o,this._docs,{includeMatches:r,includeScore:n})}_searchStringList(e){const t=cY(e,this.options),{records:r}=this._myIndex,n=[];return r.forEach((e=>{let{v:r,i:a,n:s}=e;if(!IK(r))return;const{isMatch:i,score:o,indices:l}=t.searchIn(r);i&&n.push({item:r,idx:a,matches:[{score:o,value:r,norm:s,indices:l}]})})),n}_searchLogical(e){const t=xY(e,this.options),r=(e,t,n)=>{if(!e.children){const{keyId:r,searcher:a}=e,s=this._findMatches({key:this._keyStore.get(r),value:this._myIndex.getValueForItemAtKeyId(t,r),searcher:a});return s&&s.length?[{idx:n,item:t,matches:s}]:[]}const a=[];for(let s=0,i=e.children.length;s<i;s+=1){const i=e.children[s],o=r(i,t,n);if(o.length)a.push(...o);else if(e.operator===dY)return[]}return a},n=this._myIndex.records,a={},s=[];return n.forEach((e=>{let{$:n,i:i}=e;if(IK(n)){let e=r(t,n,i);e.length&&(a[i]||(a[i]={idx:i,item:n,matches:[]},s.push(a[i])),e.forEach((e=>{let{matches:t}=e;a[i].matches.push(...t)})))}})),s}_searchObjectList(e){const t=cY(e,this.options),{keys:r,records:n}=this._myIndex,a=[];return n.forEach((e=>{let{$:n,i:s}=e;if(!IK(n))return;let i=[];r.forEach(((e,r)=>{i.push(...this._findMatches({key:e,value:n[r],searcher:t}))})),i.length&&a.push({idx:s,item:n,matches:i})})),a}_findMatches(e){let{key:t,value:r,searcher:n}=e;if(!IK(r))return[];let a=[];if(DK(r))r.forEach((e=>{let{v:r,i:s,n:i}=e;if(!IK(r))return;const{isMatch:o,score:l,indices:c}=n.searchIn(r);o&&a.push({score:l,key:t,value:r,idx:s,norm:i,indices:c})}));else{const{v:e,n:s}=r,{isMatch:i,score:o,indices:l}=n.searchIn(e);i&&a.push({score:o,key:t,value:e,norm:s,indices:l})}return a}}function bY(e){let{open:r,setOpen:n,search:a,setSearch:s,onSelect:i,initialDataForCreate:o}=e;const{distributors:l,fetchStatus:c}=$e((e=>e.distributor)),d=rt(),[u,h]=(0,t.useState)(!1),[f,m]=(0,t.useState)(null),p=(0,t.useRef)();(0,t.useEffect)((()=>{r&&!u&&setTimeout((()=>{null!==p&&void 0!==p&&p.current&&(null===p||void 0===p||p.current.focus())}),0)}),[r,u]),(0,t.useEffect)((()=>{"idle"===c&&d(ph())}),[c]);const x=(l||[]).filter((e=>{var t;return null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===a||void 0===a?void 0:a.toLowerCase())}));(0,t.useEffect)((()=>{const e=(l||[]).filter((e=>{var t;return null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(null===a||void 0===a?void 0:a.toLowerCase())}));e.length>0?m(e[0]._id):m(null)}),[a,r,l]);(0,t.useEffect)((()=>{const e=e=>{"F2"===e.key&&r&&h(!0)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[r,u]);const v={...o||{},name:a||(null===o||void 0===o?void 0:o.name)||""};return(0,Rr.jsxs)(WN,{open:r,onOpenChange:n,children:[(0,Rr.jsxs)(XN,{className:"max-w-3xl p-0 gap-0",onKeyDown:e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();const t=x,r=t.findIndex((e=>e._id===f));if("ArrowDown"===e.key){const e=r<t.length-1?r+1:0;m(t[e]._id)}else{const e=r>0?r-1:t.length-1;m(t[e]._id)}}else if("Enter"===e.key&&f){const e=x.find((e=>e._id===f));e&&(null===i||void 0===i||i(e),n(!1))}else"Escape"===e.key&&n(!1)},children:[(0,Rr.jsx)(QN,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:(0,Rr.jsx)("div",{children:(0,Rr.jsx)(ZN,{className:"text-base font-semibold",children:"Select a Distributor"})})}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsxs)("div",{className:"py-2 px-4 flex justify-between",children:[(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(VN,{className:"absolute left-2.5 top-2 h-4 w-4 text-gray-400"}),(0,Rr.jsx)(Gf,{autoFocus:!0,placeholder:"Search distributors...",className:"pl-8 h-8 text-sm border rounded-md focus:ring-2 focus:ring-blue-500",value:a,onChange:e=>s(e.target.value),ref:p})]}),(0,Rr.jsx)("div",{className:"flex items-center gap-2",children:(0,Rr.jsxs)(Vn,{size:"sm",variant:"outline",className:"px-2",onClick:()=>h(!0),children:[(0,Rr.jsx)(Aw,{className:"h-3 w-3"}),"Add Distributor (F2)"]})})]}),(0,Rr.jsxs)("div",{className:"relative mx-4",children:[(0,Rr.jsx)(jw,{children:(0,Rr.jsx)(Sw,{className:"sticky top-0 z-10",children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:"w-[35%] text-left text-sm font-semibold",children:"DISTRIBUTOR NAME/ADDRESS"}),(0,Rr.jsx)(Tw,{className:"w-[20%] text-left text-sm font-semibold",children:"MOBILE NO"}),(0,Rr.jsx)(Tw,{className:"w-[25%] text-left text-sm font-semibold",children:"GSTIN / DRUG LIC"}),(0,Rr.jsx)(Tw,{className:"w-[20%] text-left text-sm font-semibold",children:"BALANCE"})]})})}),(0,Rr.jsx)(dp,{className:"h-[400px] pr-2 py-1",children:(0,Rr.jsx)(jw,{children:(0,Rr.jsx)(Cw,{children:0===x.length?(0,Rr.jsx)(Ew,{children:(0,Rr.jsx)(Dw,{colSpan:4,className:"h-[300px] text-center",children:(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[(0,Rr.jsx)(SK,{className:"w-12 h-12 mb-2 text-gray-400"}),(0,Rr.jsx)("p",{className:"text-base font-medium",children:"No distributors found"}),(0,Rr.jsx)("p",{className:"text-sm text-gray-400",children:"Add new distributor press F2"})]})})}):x.map((e=>(0,Rr.jsxs)(Ew,{id:e._id,className:Un("cursor-pointer hover:bg-blue-50 transition-colors",f===e._id&&"bg-blue-200"),onClick:()=>{null===i||void 0===i||i(e),n(!1)},children:[(0,Rr.jsx)(Dw,{className:"w-[35%] py-3",children:(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)("div",{className:"font-medium flex items-center gap-1",children:[e.name,e.verified&&(0,Rr.jsx)(qw,{variant:"secondary",className:"bg-green-100 text-green-800 h-5 px-2 rounded-full",children:"\u2713"})]}),(0,Rr.jsx)("div",{className:"text-xs text-gray-500",children:e.address.length>30?`${e.address.substring(0,30)}...`:e.address})]})}),(0,Rr.jsx)(Dw,{className:"w-[20%] py-3",children:e.mob}),(0,Rr.jsx)(Dw,{className:"w-[25%] py-3",children:(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{children:e.gstin}),(0,Rr.jsx)("div",{className:"text-xs text-gray-500",children:e.DLNumber})]})}),(0,Rr.jsx)(Dw,{className:"w-[20%] py-3",children:(0,Rr.jsxs)("span",{className:e.currentBalance>0?"text-green-600":e.currentBalance<0?"text-red-600":"",children:[e.currentBalance>0?"\u2193 ":e.currentBalance<0?"\u2191 ":"",PP(Math.abs(e.currentBalance||0))]})})]},e._id)))})})})]}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 text-xs text-gray-600 flex items-center justify-center gap-3",children:[(0,Rr.jsx)("span",{children:"Add New - F2"}),(0,Rr.jsx)("span",{children:"|"}),(0,Rr.jsx)("span",{children:"Navigate - \u2191\u2193"}),(0,Rr.jsx)("span",{children:"|"}),(0,Rr.jsx)("span",{children:"Select - Enter"}),(0,Rr.jsx)("span",{children:"|"}),(0,Rr.jsx)("span",{children:"Close - ESC"})]})]}),(0,Rr.jsx)(P$,{open:u,onOpenChange:h,onSuccess:e=>{h(!1),null===i||void 0===i||i(e),n(!1)},initialData:v})]})}yY.version="7.1.0",yY.createIndex=qK,yY.parseIndex=function(e){let{getFn:t=HK.getFn,fieldNormWeight:r=HK.fieldNormWeight}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{keys:n,records:a}=e,s=new WK({getFn:t,fieldNormWeight:r});return s.setKeys(n),s.setIndexRecords(a),s},yY.config=HK,yY.parseQuery=xY,function(){lY.push(...arguments)}(oY);const wY=e=>{let{distributorName:r,distributorData:n,onDistributorSelect:a,selectedDistributor:s}=e;const[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(""),{distributors:d}=$e((e=>e.distributor)),u=(0,t.useMemo)((()=>new yY(d||[],{keys:[{name:"name",weight:1}],threshold:.3,distance:100,minMatchCharLength:2,shouldSort:!0,includeScore:!0,includeMatches:!0})),[d]);(0,t.useEffect)((()=>{if(r&&!s){const e=u.search(r).slice(0,1)[0];e&&1-(e.score||0)>=.8&&a(e.item)}}),[r,s,u,a]);const h=()=>{c((null===s||void 0===s?void 0:s.name)||r||""),o(!0)},f={name:r||"",mob:(null===n||void 0===n?void 0:n.distributorMob)||"",email:(null===n||void 0===n?void 0:n.distributorEmail)||"",gstin:(null===n||void 0===n?void 0:n.distributorGstin)||"",DLNumber:(null===n||void 0===n?void 0:n.distributorDlNumber)||"",accountNumber:(null===n||void 0===n?void 0:n.distributorBankNumber)||"",ifsc:(null===n||void 0===n?void 0:n.distributorBankIfsc)||"",address:(null===n||void 0===n?void 0:n.distributorAddress)||""};return(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)("div",{className:"mb-4 border-b pb-4",children:[(0,Rr.jsx)("div",{className:"text-sm font-medium mb-2",children:"DISTRIBUTOR MAPPING"}),(0,Rr.jsx)("div",{className:"flex gap-4 items-center",children:(0,Rr.jsx)("div",{className:"flex-1",children:s?(0,Rr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(qw,{variant:"default",className:"text-sm py-1 px-3 bg-green-100 text-green-800",children:s.name}),(0,Rr.jsxs)("span",{className:"text-sm text-green-700 font-semibold flex items-center gap-1",children:[(0,Rr.jsx)(kK,{className:"h-4 w-4"})," Mapped"]})]}),(0,Rr.jsx)(Vn,{variant:"link",className:"h-auto p-0 text-sm",onClick:h,children:"Change"})]}):(0,Rr.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,Rr.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,Rr.jsx)(Nw,{className:"h-4 w-4"}),(0,Rr.jsx)("span",{children:"No distributor mapped. Try selecting one."})]}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",className:"h-7 gap-1",onClick:h,children:[(0,Rr.jsx)(Aw,{className:"h-4 w-4"}),"Select Distributor"]})]})})})]}),(0,Rr.jsx)(bY,{open:i,setOpen:o,onSelect:e=>{a(e),o(!1)},search:l,setSearch:c,initialDataForCreate:f})]})},NY=e=>{let{open:r,onOpenChange:n,productsToMap:a,inventoryItems:s,onSubmit:i,isLoadingInventory:o,distributorName:l,distributorData:c,onDistributorSelect:d,selectedDistributor:u}=e;const[h,f]=(0,t.useState)([]),[m,p]=(0,t.useState)({}),{toast:x}=$g(),v=(0,t.useMemo)((()=>new yY(s||[],{keys:[{name:"name",weight:1}],threshold:.3,distance:100,minMatchCharLength:2,shouldSort:!0,includeScore:!0,includeMatches:!0})),[s]);(0,t.useEffect)((()=>{if(a){const e=a.map((e=>({llmProduct:e,selectedInventoryItem:null,matchConfidence:0,includeProduct:!0,searchResults:[]}))).map((e=>{var t,r;const n=v.search(e.llmProduct.productName).slice(0,5).map((e=>({item:e.item,confidence:1-(e.score||0),score:e.score||0,matches:e.matches||[]})));return{...e,selectedInventoryItem:(null===(t=n[0])||void 0===t?void 0:t.item)||null,matchConfidence:(null===(r=n[0])||void 0===r?void 0:r.confidence)||0,searchResults:n}}));f(e)}}),[a,v]);if(o)return(0,Rr.jsx)(WN,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(XN,{children:[(0,Rr.jsx)(QN,{children:(0,Rr.jsx)(ZN,{children:"Loading Inventory..."})}),(0,Rr.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,Rr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]})});return(0,Rr.jsx)(Rr.Fragment,{children:(0,Rr.jsx)(WN,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(XN,{className:"max-w-7xl",children:[(0,Rr.jsxs)(QN,{children:[(0,Rr.jsx)(ZN,{className:"text-xl font-semibold",children:"Map Products and Distributor"}),(0,Rr.jsx)(ej,{className:"text-sm text-muted-foreground mt-1",children:"Review and confirm product and distributor mappings from your invoice"})]}),(0,Rr.jsx)(wY,{distributorName:l,distributorData:c,onDistributorSelect:d,selectedDistributor:u}),(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-4  bg-gray-50/80 rounded-md text-sm font-medium text-muted-foreground",children:[(0,Rr.jsx)("div",{className:"col-span-1",children:"#"}),(0,Rr.jsx)("div",{className:"col-span-3",children:"PRODUCTS FROM PDF/IMAGE FILE"}),(0,Rr.jsx)("div",{className:"col-span-2",children:"PACK"}),(0,Rr.jsxs)("div",{className:"col-span-6",children:["SUGGESTED PRODUCT MAPPING"," ",(0,Rr.jsx)("span",{className:"font-bold text-black",children:"FROM INVENTORY"})]})]})}),(0,Rr.jsx)(dp,{className:"h-[50vh]",children:(0,Rr.jsx)("div",{className:"space-y-0.5",children:h.map(((e,t)=>(0,Rr.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-4 pb-1 rounded-md transition-all hover:shadow-sm "+(e.includeProduct?"bg-white":"bg-gray-50/50 opacity-75"),children:[(0,Rr.jsx)("div",{className:"col-span-1 flex items-center text-sm text-muted-foreground",children:t+1}),(0,Rr.jsx)("div",{className:"col-span-3 flex items-center",children:(0,Rr.jsx)("div",{children:(0,Rr.jsx)("div",{className:"font-medium text-sm",children:e.llmProduct.productName})})}),(0,Rr.jsx)("div",{className:"col-span-2 flex items-center font-semibold ",children:(0,Rr.jsx)("div",{className:"text-xs text-muted-foreground text-[16px]",children:e.llmProduct.pack?"1*"+e.llmProduct.pack:"-"})}),(0,Rr.jsxs)("div",{className:"col-span-6 flex items-center justify-between gap-3",children:[(0,Rr.jsx)("div",{className:"flex-1",children:m[t]?(0,Rr.jsxs)("div",{className:"flex gap-2",children:[(0,Rr.jsx)(Gf,{placeholder:"Search inventory...",className:"h-8 text-sm",value:m[t],onChange:e=>((e,t)=>{if(p((r=>({...r,[e]:t}))),!t.trim())return void f((t=>t.map(((t,r)=>r===e?{...t,searchResults:[]}:t))));const r=v.search(t).slice(0,5).map((e=>({item:e.item,confidence:1-(e.score||0),score:e.score||0,matches:e.matches||[]})));f((t=>t.map(((t,n)=>n===e?{...t,searchResults:r}:t))))})(t,e.target.value)}),(0,Rr.jsx)(Vn,{size:"sm",variant:"outline",className:"h-8",children:(0,Rr.jsx)(VN,{className:"h-4 w-4"})})]}):(0,Rr.jsx)("div",{className:"flex gap-2 flex-wrap",children:e.searchResults.length>0?(0,Rr.jsxs)(Rr.Fragment,{children:[e.searchResults.slice(0,3).map(((r,n)=>{var a,s,i;return(0,Rr.jsx)(qw,{variant:(null===(a=e.selectedInventoryItem)||void 0===a?void 0:a._id)===r.item._id?"default":"outline",className:"py-0.5 px-2 cursor-pointer  transition-colors text-xs text-black "+((null===(s=e.selectedInventoryItem)||void 0===s?void 0:s._id)===r.item._id?"bg-green-500/50":""),onClick:()=>{return e=t,n=r.item,a=r.confidence,void f((t=>t.map(((t,r)=>r===e?{...t,selectedInventoryItem:n,matchConfidence:a}:t))));var e,n,a},children:(0,Rr.jsxs)("div",{className:"flex items-center gap-1.5",children:[(null===(i=e.selectedInventoryItem)||void 0===i?void 0:i._id)===r.item._id&&(0,Rr.jsx)(kK,{className:"h-3 w-3"}),(0,Rr.jsx)("span",{children:r.item.name+" "+(r.item.pack?"(1 X "+r.item.pack+")":"")})]})},n)})),(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",className:"h-6 text-xs px-2 hover:bg-primary/5",onClick:()=>p((r=>({...r,[t]:e.llmProduct.productName}))),children:"More"})]}):(0,Rr.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,Rr.jsx)(Nw,{className:"h-4 w-4"}),(0,Rr.jsxs)("span",{children:["No matches found (",(0,Rr.jsx)("span",{className:"font-bold text-black",children:"new"})," ","item will be created automatically)"]})]})})}),(0,Rr.jsx)("div",{className:"flex items-center",children:(0,Rr.jsx)(Vn,{variant:"ghost",size:"sm",onClick:()=>{return e=t,void f((t=>t.map(((t,r)=>r===e?{...t,includeProduct:!t.includeProduct}:t))));var e},className:"h-7 px-2 "+(e.includeProduct?"":"text-muted-foreground"),children:"EXCLUDE"})})]})]},t)))})}),(0,Rr.jsx)(JN,{className:"mt-4 border-t pt-4",children:(0,Rr.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,Rr.jsxs)("div",{className:"text-sm text-muted-foreground",children:[h.filter((e=>e.includeProduct&&e.selectedInventoryItem)).length," ","of ",h.length," products mapped with existing inventory"]}),(0,Rr.jsxs)("div",{className:"flex gap-2",children:[(0,Rr.jsx)(KN,{asChild:!0,children:(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",children:"Cancel"})}),(0,Rr.jsx)(Vn,{onClick:()=>{if(!u||!u._id)return void x({title:"Please create or select a distributor before confirming.",variant:"destructive"});const e=h.filter((e=>e.includeProduct)).map((e=>{const t=e.llmProduct,r=e.selectedInventoryItem;return r?{inventoryId:r._id,productName:r.name,quantity:Number(t.quantity||0),batchNumber:t.batchNumber||"",free:Number(t.free||0),HSN:t.HSN||r.HSN||"",expiry:t.expiry||r.expiry||"",mfcName:t.mfcName||r.mfcName||"",mrp:Number(t.mrp||0),purchaseRate:Number(t.purchaseRate||0),discount:Number(t.discount||0),gstPer:Number(t.gstPer||0),pack:Number(t.pack||1),amount:Number(t.amount||0)}:{productName:t.productName,quantity:Number(t.quantity||0),free:Number(t.free||0),mrp:Number(t.mrp||0),expiry:t.expiry||"",batchNumber:t.batchNumber||"",mfcName:t.mfcName||"",purchaseRate:Number(t.purchaseRate||0),discount:Number(t.discount||0),gstPer:Number(t.gstPer||0),amount:Number(t.amount||0),pack:Number(t.pack||1),HSN:t.HSN||"",mfcName:t.mfcName||""}}));i(e),n(!1)},size:"sm",className:"min-w-[100px]",children:"Confirm"})]})]})})]})})})},jY=e=>{let{open:t,onOpenChange:r,value:n,onChange:a,products:s,setProducts:i,calculateProductAmount:o}=e;const l=e=>{a(e),s&&s.length>0&&"function"===typeof o&&i(s.map((t=>{const r=o(t,e);return{...t,amount:Cu(r)}})))};return(0,Rr.jsx)(WN,{open:t,onOpenChange:r,hideCloseButton:!0,children:(0,Rr.jsxs)(XN,{className:"p-0 gap-0",children:[(0,Rr.jsx)(QN,{className:"px-6 py-4 flex flex-row items-center justify-between bg-gray-100 border-b",children:(0,Rr.jsx)("div",{className:"space-y-0.5",children:(0,Rr.jsx)(ZN,{className:"text-xl font-semibold",children:"Amount Calculation Settings"})})}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsx)("div",{className:"space-y-4",children:(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"How should the amount be calculated for each product?"}),(0,Rr.jsxs)(VG,{className:"space-y-3",value:n,onValueChange:l,children:[(0,Rr.jsxs)(yN,{htmlFor:"settings-exclusive",className:"flex items-center space-x-3 border p-4 rounded-lg cursor-pointer transition-colors "+("exclusive"===n?"bg-blue-100":"hover:bg-gray-50"),onClick:()=>l("exclusive"),children:[(0,Rr.jsx)(HG,{value:"exclusive",id:"settings-exclusive"}),(0,Rr.jsxs)("div",{className:"flex-1",children:[(0,Rr.jsx)("div",{className:"font-medium text-gray-900",children:"Rate"}),(0,Rr.jsx)("div",{className:"text-sm text-gray-500",children:"Shows pure rate \xd7 quantity without any adjustments"})]})]}),(0,Rr.jsxs)(yN,{htmlFor:"settings-inclusive_all",className:"flex items-center space-x-3 border p-4 rounded-lg cursor-pointer transition-colors "+("inclusive_all"===n?"bg-blue-100":"hover:bg-gray-50"),onClick:()=>l("inclusive_all"),children:[(0,Rr.jsx)(HG,{value:"inclusive_all",id:"settings-inclusive_all"}),(0,Rr.jsxs)("div",{className:"flex-1",children:[(0,Rr.jsx)("div",{className:"font-medium text-gray-900",children:"Discounted Rate"}),(0,Rr.jsx)("div",{className:"text-sm text-gray-500",children:"Shows rate after applying discount \xd7 quantity"})]})]}),(0,Rr.jsxs)(yN,{htmlFor:"settings-inclusive_gst",className:"flex items-center space-x-3 border p-4 rounded-lg cursor-pointer transition-colors "+("inclusive_gst"===n?"bg-blue-100":"hover:bg-gray-50"),onClick:()=>l("inclusive_gst"),children:[(0,Rr.jsx)(HG,{value:"inclusive_gst",id:"settings-inclusive_gst"}),(0,Rr.jsxs)("div",{className:"flex-1",children:[(0,Rr.jsx)("div",{className:"font-medium text-gray-900",children:"Discounted Rate + GST"}),(0,Rr.jsx)("div",{className:"text-sm text-gray-500",children:"Shows rate after discount and GST \xd7 quantity"})]})]})]})]})})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-50 text-xs text-gray-600 flex items-center justify-center gap-3 border-t",children:[(0,Rr.jsx)("span",{children:"Select Option - \u2191\u2193"}),(0,Rr.jsx)("span",{children:"|"}),(0,Rr.jsx)("span",{children:"Confirm - Enter"}),(0,Rr.jsx)("span",{children:"|"}),(0,Rr.jsx)("span",{children:"Close - ESC"})]})]})})},SY=["distributorName","invoiceNo","invoiceDate","product","batchNumber","HSN","expiry","pack","quantity","free","mrp","purchaseRate","schemeInput1","schemeInput2","discount","gstPer","addButton"],CY=e=>Math.round(100*(e+Number.EPSILON))/100,kY=(e,t)=>{const r=Number((null===e||void 0===e?void 0:e.quantity)||0),n=Number((null===e||void 0===e?void 0:e.purchaseRate)||0),a=Number((null===e||void 0===e?void 0:e.discount)||0),s=Number((null===e||void 0===e?void 0:e.gstPer)||0),i=Number((null===e||void 0===e?void 0:e.schemeInput1)||0),o=Number((null===e||void 0===e?void 0:e.schemeInput2)||0);let l=r;if(i>0&&i+o>0){l=r*(i/(i+o))}const c=n*(1-a/100);let d;switch(t){case"exclusive":default:d=n*l;break;case"inclusive_all":d=c*l;break;case"inclusive_gst":d=(c+c*(s/100))*l}return CY(d)},EY=e=>{const t=e.reduce(((e,t)=>{const r=Number((null===t||void 0===t?void 0:t.quantity)||0),n=Number((null===t||void 0===t?void 0:t.free)||0),a=Number((null===t||void 0===t?void 0:t.purchaseRate)||0),s=Number((null===t||void 0===t?void 0:t.discount)||0),i=Number((null===t||void 0===t?void 0:t.gstPer)||0),o=Number((null===t||void 0===t?void 0:t.schemeInput1)||0),l=Number((null===t||void 0===t?void 0:t.schemeInput2)||0);let c=r;if(o>0&&o+l>0){c=r*(o/(o+l))}const d=r*a;let u,h;return u=a*(1-s/100)*c,h=u*i/100,e.productCount+=1,e.totalQuantity+=r+n,e.subtotal=e.subtotal+d,e.taxable=e.taxable+u,e.gstAmount=e.gstAmount+h,e.grandTotal=e.grandTotal+u+h,e}),{subtotal:0,discountAmount:0,taxable:0,gstAmount:0,productCount:0,totalQuantity:0,grandTotal:0});t.subtotal=CY(t.subtotal),t.taxable=CY(t.taxable),t.gstAmount=CY(t.gstAmount),t.discountAmount=CY(t.subtotal-t.taxable);const r=t.grandTotal;return t.grandTotal=Math.round(r),t.adjustment=CY(t.grandTotal-r),t};function TY(){const e=Z(),r=(0,t.useRef)([]),n=rt(),[a,s]=(0,t.useState)(),[i,o]=(0,t.useState)([]),{toast:l}=$g(),{createPurchaseBillStatus:c}=$e((e=>e.purchaseBill)),{isCollapsed:d}=$e((e=>e.loader)),{items:u,itemsStatus:h}=$e((e=>e.inventory)),[f,m]=(0,t.useState)(!1),[p,x]=(0,t.useState)(!1),[v,g]=(0,t.useState)(null),[y,b]=(0,t.useState)({per:"",value:""}),[w,N]=(0,t.useState)(!1),[j,S]=(0,t.useState)(null),[C,k]=(0,t.useState)(!1),[E,T]=(0,t.useState)([]),[D,A]=(0,t.useState)(!1),[P,_]=(0,t.useState)(!1),[R,I]=(0,t.useState)({purchaseType:"invoice",distributorName:"",distributorId:"",invoiceNumber:"",invoiceDate:"",withGst:"yes",overallDiscount:"",amountType:"exclusive"}),M=(e,t)=>{I((r=>({...r,[e]:t})))},O=e=>{I(e?t=>({...t,distributorId:e._id,distributorName:e.name}):e=>({...e,distributorId:""}))};(0,t.useEffect)((()=>{j&&("idle"!==h&&"failed"!==h||n(Mh()),I((e=>({...e,distributorName:j.distributorName||"",distributorId:j.distributorId||e.distributorId||"",invoiceNumber:j.invoiceNumber||"",withGst:j.withGst?"yes":"no"}))),s(j.invoiceDate||null),(j.products&&j.products.length>0||j.distributorName&&!j.distributorId&&!R.distributorId)&&(T(j.products||[]),k(!0)))}),[j,n,R.distributorId,h]);const F=(0,t.useMemo)((()=>EY(i)),[i]),[L,B]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=e=>{e.altKey&&"s"===e.key.toLowerCase()&&(e.preventDefault(),U())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[i,R,null===R||void 0===R?void 0:R.invoiceNumber,a,R.distributorName]);const U=async()=>{try{if(B(!0),!R.distributorName||!R.invoiceNumber||!a)throw new Error("Please fill all required fields");if(0===i.length)throw new Error("Please add at least one product");g({invoiceType:"purchase",distributorName:R.distributorName,distributorId:R.distributorId,invoiceNumber:R.invoiceNumber,invoiceDate:a,grandTotal:F.grandTotal,alreadyPaid:0,isNewInvoice:!0}),x(!0)}catch(e){l({title:"Error",description:e.message||"Failed to validate invoice",variant:"destructive"})}finally{B(!1)}},z=()=>{I({purchaseType:"invoice",distributorName:"",distributorId:"",invoiceNumber:"",invoiceDate:"",withGst:"yes",overallDiscount:"",amountType:"exclusive"}),s(null),o([]),x(!1),g(null)},V=(e,t)=>{if("Enter"===e.key){if(e.preventDefault(),e.shiftKey){const e=SY.indexOf(t);if(e>0&&e<SY.indexOf("product")){const t=SY[e-1];t&&r.current[t]&&r.current[t].focus()}return}"product"===t?r.current.product&&r.current.product.focus():t&&r.current[t]&&r.current[t].focus()}},H=e=>{e.altKey&&"s"===e.key&&(e.preventDefault(),U())};(0,t.useEffect)((()=>(document.addEventListener("keydown",H),()=>{document.removeEventListener("keydown",H)})),[R,a,R.distributorName,i]);(0,t.useEffect)((()=>{const e=setTimeout((()=>{r.current.distributorName&&r.current.distributorName.focus()}),100);return()=>clearTimeout(e)}),[]);const $=(e,t)=>{if(null===F||void 0===F||!F.subtotal)return void l({variant:"destructive",message:"Please add at least one product"});const r=Number(t),n=null===F||void 0===F?void 0:F.subtotal;if("per"===e){const e=CY(n*r/100);b({per:r,value:e})}else{const e=CY(r/n*100);b({per:e,value:r})}};return(0,Rr.jsxs)("div",{className:"relative rounded-lg h-[100vh] pt-4 font-semibold\\",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-gray-300",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>e(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-xl font-bold",children:"Add Purchase"})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsxs)(Vn,{variant:"outline",onClick:()=>m(!0),children:[(0,Rr.jsx)(jK,{className:"w-4 h-4"}),"Column Settings"]}),(0,Rr.jsx)(Vn,{className:"gap-2",onClick:U,disabled:L,children:L?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)("span",{className:"animate-spin",children:"\u23f3"}),"Saving..."]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(nK,{className:"w-4 h-4"}),"Save (Alt + S)"]})})]})]}),(0,Rr.jsxs)("div",{className:"grid gap-2",children:[(0,Rr.jsxs)("div",{className:"grid gap-4 grid-cols-4 w-full",children:[(0,Rr.jsxs)("div",{className:"flex gap-8",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"PURCHASE TYPE"}),(0,Rr.jsxs)(VG,{value:null===R||void 0===R?void 0:R.purchaseType,onValueChange:e=>M("purchaseType",e),className:"gap-4 mt-2",children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"invoice",id:"invoice"}),(0,Rr.jsx)(yN,{htmlFor:"invoice",children:"INVOICE"})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"challan",id:"challan"}),(0,Rr.jsx)(yN,{htmlFor:"challan",children:"DELIVERY CHALLAN"})]})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"WITH GST?"}),(0,Rr.jsxs)(VG,{className:"gap-4 mt-2",value:null===R||void 0===R?void 0:R.withGst,onValueChange:e=>M("withGst",e),children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"yes",id:"yes"}),(0,Rr.jsx)(yN,{htmlFor:"yes",children:"YES"})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"no",id:"no"}),(0,Rr.jsx)(yN,{htmlFor:"no",children:"NO"})]})]})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["DISTRIBUTOR NAME",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{ref:e=>r.current.distributorName=e,value:R.distributorName||"",onChange:e=>{e.preventDefault();const t=e.target.value;M("distributorName",t),1===t.length&&(" "===t||" "!==t[0]&&R.distributorName.length<=1)&&A(!0)},onKeyDown:e=>V(e,"invoiceNo"),placeholder:"Type or Press space",className:"appearance-none h-8 w-full font-semibold border-[1px] border-gray-300 px-2 bg-white focus:outline-none focus:ring-0 focus:border-gray-300"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["INVOICE NO",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{ref:e=>r.current.invoiceNo=e,value:null===R||void 0===R?void 0:R.invoiceNumber,onChange:e=>M("invoiceNumber",e.target.value),onKeyDown:e=>V(e,"invoiceDate"),placeholder:"Invoice No",className:"appearance-none font-semibold h-8 w-full border-[1px] border-gray-300 px-2 bg-white focus:outline-none focus:ring-0 focus:border-gray-300"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["INVOICE DATE",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{ref:e=>r.current.invoiceDate=e,type:"date",value:a||"",onChange:e=>{s(e.target.value)},onKeyDown:e=>V(e,"product"),className:"appearance-none font-semibold h-8 w-full border-[1px] border-gray-300 px-2 bg-white focus:outline-none focus:ring-0 focus:border-gray-300"})]})]}),(0,Rr.jsxs)("div",{className:"flex justify-end gap-4 text-sm",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)("div",{className:"w-4 h-4 bg-yellow-200 rounded"}),(0,Rr.jsx)("span",{children:"Near Expiry Batches"})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)("div",{className:"w-4 h-4 bg-rose-200 rounded"}),(0,Rr.jsx)("span",{children:"Expired Batches"})]})]})]}),(0,Rr.jsx)("div",{className:"my-4",children:(0,Rr.jsx)(TK,{inputRef:r,products:i,setProducts:o,gstMode:R.amountType,calculateProductAmount:kY})}),(0,Rr.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,Rr.jsxs)("div",{className:"p-4 border rounded-lg "+(w?"block":"hidden"),children:[(0,Rr.jsxs)("div",{className:"flex justify-between",children:[(0,Rr.jsx)("h3",{className:"mb-4 text-sm font-medium",children:"OVERALL BILL DISCOUNT"}),(0,Rr.jsx)(Vn,{size:"sm",onClick:()=>{const e=Number((null===y||void 0===y?void 0:y.per)||0);e<=0||(o((t=>t.map((t=>{const r=Number(t.discount||0)+e,n={...t,discount:r};return{...t,discount:r,amount:kY(n,R.amountType)}})))),b({per:"",value:""}))},className:"h-5",children:"Apply"})]}),(0,Rr.jsxs)("div",{className:"flex gap-4",children:[(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{placeholder:"Value",className:"w-24 pr-5",value:null===y||void 0===y?void 0:y.per,onChange:e=>$("per",e.target.value)}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:"%"})]}),(0,Rr.jsx)("span",{className:"px-2 py-1",children:"OR"}),(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-500 z-0",children:"\u20b9"}),(0,Rr.jsx)(Gf,{placeholder:"Value",className:"flex-1 pl-5",value:null===y||void 0===y?void 0:y.value,onChange:e=>$("value",e.target.value)})]})]})]}),(0,Rr.jsxs)("div",{className:"p-4 border rounded-lg group hover:shadow-lg transition-shadow duration-200 cursor-pointer",children:[(0,Rr.jsx)("h3",{className:"mb-4 text-sm font-medium text-gray-700 group-hover:text-gray-900",children:"Upload Invoice Image for AI data filling"}),(0,Rr.jsxs)("div",{className:"relative mt-2",children:[(0,Rr.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(!t)return;if(!t.type.startsWith("image/"))return void l({title:"Invalid File Type",description:"Please select an image file.",variant:"destructive"});const r=new FileReader;r.readAsDataURL(t),r.onloadend=async()=>{const e=r.result.split(",")[1];try{_(!0);const r=await n(df({base64Image:e,mimeType:t.type})).unwrap();S(r.extractedData),l({title:"Data Extracted Successfully",description:"The data has been successfully extracted from the image.",variant:"success"})}catch(a){l({title:"Error Extracting Data",description:a.message||"Failed to extract data from the image.",variant:"destructive"})}finally{_(!1)}},r.onerror=()=>{l({title:"Error Reading File",description:"Could not read the selected file.",variant:"destructive"})}},className:"sr-only",id:"imageUploadInput",disabled:P}),(0,Rr.jsx)(yN,{htmlFor:"imageUploadInput",className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 "+(P?"cursor-not-allowed opacity-50":"cursor-pointer"),children:P?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)("span",{className:"animate-spin mr-2 text-violet-700",children:"\u23f3"}),"Processing..."]}):"Upload Invoice Image"}),P&&(0,Rr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/70 rounded-md"})]}),(0,Rr.jsx)("p",{className:"mt-2 text-xs text-gray-500 group-hover:text-gray-600",children:"Upload an image of the invoice for automated data extraction (optional)."})]})]}),(0,Rr.jsxs)("div",{className:`fixed bottom-0 ${d?"w-[calc(100%-95px)]":"w-[calc(100%-225px)]"} text-sm grid grid-cols-8 gap-4 text-white bg-gray-900 rounded-lg transition-all duration-300 text-center`,children:[(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsxs)("div",{children:["Total Products: ",null===F||void 0===F?void 0:F.productCount]}),(0,Rr.jsxs)("div",{children:["Total Quantity: ",null===F||void 0===F?void 0:F.totalQuantity]})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"Subtotal"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===F||void 0===F?void 0:F.subtotal)})]}),(0,Rr.jsxs)("div",{className:"py-2 flex flex-col items-center",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)("span",{children:"(-) Discount"}),(0,Rr.jsx)(rK,{checked:w,onCheckedChange:N,size:"sm",className:"scale-75"})]}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===F||void 0===F?void 0:F.discountAmount)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"Taxable"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===F||void 0===F?void 0:F.taxable)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"(+) GST Amount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===F||void 0===F?void 0:F.gstAmount)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"(-) Adjustment"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===F||void 0===F?void 0:F.adjustment)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"(+) Custom"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(0)})]}),(0,Rr.jsxs)("div",{className:"bg-rose-500 py-2",children:[(0,Rr.jsx)("div",{className:"",children:"Total Amount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===F||void 0===F?void 0:F.grandTotal)})]})]}),(0,Rr.jsx)(jY,{open:f,onOpenChange:m,value:R.amountType,onChange:e=>M("amountType",e),products:i,setProducts:o,calculateProductAmount:kY}),(0,Rr.jsx)(PY,{open:p,onOpenChange:x,invoiceData:v,onSubmit:async t=>{try{const r=i.map((e=>({mfcName:e.mfcName,inventoryId:e.inventoryId,name:e.productName,productName:e.productName,batchNumber:e.batchNumber,batchId:e.batchId,expiry:e.expiry,HSN:e.HSN,mrp:CY(Number(e.mrp)),quantity:Number(e.quantity)*Number(e.pack||1),free:Number(e.free||0)*Number(e.pack||1),pack:Number(e.pack),purchaseRate:CY(Number(e.purchaseRate)),schemeInput1:Number(e.schemeInput1||0),schemeInput2:Number(e.schemeInput2||0),discount:CY(Number(e.discount||0)),gstPer:CY(Number(e.gstPer)),amount:CY(Number(e.amount))}))),s={invoiceType:"PURCHASE",invoiceNumber:R.invoiceNumber,distributorName:R.distributorName,distributorId:R.distributorId,invoiceDate:new Date(a),paymentDueDate:t.dueDate||null,products:r,withGst:"yes"===R.withGst,billSummary:{subtotal:CY(F.subtotal),discountAmount:CY(F.discountAmount),taxableAmount:CY(F.taxable),gstAmount:CY(F.gstAmount),totalQuantity:F.totalQuantity,productCount:F.productCount,grandTotal:CY(F.grandTotal),adjustment:CY(F.adjustment)},amountCalculationType:R.amountType,status:"active",grandTotal:CY(F.grandTotal),amountPaid:"due"===t.status?0:Number(t.amount||0),payment:"paid"===t.status?{amount:Number(t.amount||0),paymentType:t.paymentType,paymentMethod:t.paymentMethod,distributorId:R.distributorId,distributorName:R.distributorName,remarks:t.notes,..."cheque"!==t.paymentMethod&&{accountId:t.accountId},..."cheque"===t.paymentMethod&&{chequeNumber:t.chequeNumber,chequeDate:t.chequeDate,micrCode:t.micrCode}}:null};await n(of(s)).unwrap(),l({title:"Purchase invoice saved successfully",variant:"success"}),z(),e("/purchase")}catch(r){l({title:"Error",description:r.message||"Failed to save invoice",variant:"destructive"})}},billStatus:c}),(0,Rr.jsx)(bY,{open:D,setOpen:A,search:R.distributorName,setSearch:e=>M("distributorName",e),onSelect:e=>{O(e),A(!1),setTimeout((()=>{r.current.invoiceNo&&r.current.invoiceNo.focus()}),0)}}),(0,Rr.jsx)(NY,{open:C,onOpenChange:k,productsToMap:E,inventoryItems:u,onSubmit:e=>{o((t=>[...t,...e])),k(!1),S(null),T([]),l({title:"Products Added",description:`${e.length} products have been mapped and added to the invoice.`,variant:"success"})},isLoadingInventory:"loading"===h||"idle"===h,distributorName:(null===j||void 0===j?void 0:j.distributorName)||"",distributorData:{distributorName:null===j||void 0===j?void 0:j.distributorName,distributorMob:null===j||void 0===j?void 0:j.distributorMob,distributorAddress:null===j||void 0===j?void 0:j.distributorAddress,distributorGstin:null===j||void 0===j?void 0:j.distributorGstin,distributorDlNumber:null===j||void 0===j?void 0:j.distributorDlNumber,distributorEmail:null===j||void 0===j?void 0:j.distributorEmail,distributorBankNumber:null===j||void 0===j?void 0:j.distributorBankNumber,distributorBankIfsc:null===j||void 0===j?void 0:j.distributorBankIfsc},onDistributorSelect:O,selectedDistributor:R.distributorId?{_id:R.distributorId,name:R.distributorName}:null})]})}const DY=rm("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),AY=rm("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);function PY(e){let{open:r,onOpenChange:n,invoiceData:a,onSubmit:s,billStatus:i}=e;const o=rt(),{accounts:l,fetchStatus:c}=$e((e=>e.accounts)),[d,u]=(0,t.useState)(1),[h,f]=(0,t.useState)("paid"),[m,p]=(0,t.useState)(),[x,v]=(0,t.useState)(!1),[g,y]=(0,t.useState)(1),b=(0,t.useRef)({}),[w,N]=(0,t.useState)({amount:"",paymentMethod:"",accountId:"",chequeNumber:"",chequeDate:new Date,micrCode:"",transactionNumber:""});(0,t.useEffect)((()=>{"idle"===c&&o(kh()).unwrap().catch((e=>S(e.message)))}),[o,c]);const[j,S]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(r){setTimeout((()=>{null!==a&&void 0!==a&&a.isCashCounter?null!==b&&void 0!==b&&b.current.nextButton&&(null===b||void 0===b||b.current.nextButton.focus()):null!==b&&void 0!==b&&b.current.paymentStatus&&(null===b||void 0===b||b.current.paymentStatus.focus())}),100),S(null),u(null!==a&&void 0!==a&&a.isCashCounter?2:1),v(!1),y(1);const e=((null===a||void 0===a?void 0:a.grandTotal)||0)-((null===a||void 0===a?void 0:a.alreadyPaid)||0);if(N({amount:CY(e),paymentMethod:"",accountId:"",chequeNumber:"",chequeDate:new Date,micrCode:"",transactionNumber:""}),l&&l.length>0&&"paid"===h){const e=l[0];N((t=>({...t,paymentMethod:`ACCOUNT_${e._id}`,accountId:e._id})))}}}),[r,o,l,a]),(0,t.useEffect)((()=>{const e=((null===a||void 0===a?void 0:a.grandTotal)||0)-((null===a||void 0===a?void 0:a.alreadyPaid)||0);N((t=>({...t,amount:"due"===h?0:CY(e),paymentMethod:"due"===h?"":t.paymentMethod,accountId:"due"===h?"":t.accountId})))}),[h,a]);const C=(()=>{const e=(null===a||void 0===a?void 0:a.grandTotal)||0,t=(null===a||void 0===a?void 0:a.alreadyPaid)||0,r=Number((null===w||void 0===w?void 0:w.amount)||0);return CY(e-(t+r))})(),k=e=>{let t,r="";if("CHEQUE"===e)t="CHEQUE",r=null;else if(e.startsWith("ACCOUNT_")){r=e.replace("ACCOUNT_","");const n=l.find((e=>e._id===r));switch(null===n||void 0===n?void 0:n.accountType){case"BANK":default:t="BANK";break;case"UPI":t="UPI";break;case"CASH":t="CASH"}}N((e=>({...e,paymentMethod:t,accountId:r,chequeNumber:"CHEQUE"===t?e.chequeNumber:"",chequeDate:"CHEQUE"===t?e.chequeDate:null,micrCode:"CHEQUE"===t?e.micrCode:"",transactionNumber:""}))),v(!0),u(3),"CHEQUE"===t&&setTimeout((()=>{b.current.chequeNumber&&b.current.chequeNumber.focus()}),100)},E=()=>{if("due"===h)return null!=m;switch(w.paymentMethod){case"CHEQUE":return w.chequeNumber&&""!==w.chequeNumber.trim()&&w.chequeDate;case"BANK":case"UPI":return w.accountId;case"CASH":return w.accountId&&""!==w.accountId.trim();default:return!1}},T=()=>{const e={...w,amount:""===w.amount?0:Number(w.amount),status:h,dueDate:"due"===h||Number(w.amount)<Number(null===a||void 0===a?void 0:a.grandTotal)?m:null,paymentType:"Purchase Invoice",totalPaid:((null===a||void 0===a?void 0:a.alreadyPaid)||0)+Number(w.amount||0)};"due"===h&&(e.paymentMethod="",e.accountId=null,e.transactionNumber="",e.chequeNumber="",e.chequeDate=null,e.micrCode=""),"CHEQUE"===e.paymentMethod&&(e.accountId=null),s(e)},D=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("Enter"===e.key)if(e.preventDefault(),e.stopPropagation(),r){const e="due"===h?"dueDate":"amount";b.current[e]&&b.current[e].focus()}else"dueSubmitButton"===t?"due"===h&&m&&T():"nextButton"===t?b.current.nextButton&&b.current.nextButton.focus():t&&b.current[t]&&b.current[t].focus()},A=()=>{if(1===d)u(2);else if(2===d){if(0===g)k("CHEQUE");else if(g>0&&l[g-1]){const e=l[g-1];k(`ACCOUNT_${e._id}`)}}else 3===d&&E()&&T()},P=e=>{if(2!==d)return;const t=l.length+1;switch(e.key){case"ArrowUp":e.preventDefault(),y((e=>{const r=(e-1+t)%t;if(0===r)N((e=>({...e,paymentMethod:"CHEQUE",accountId:""})));else{const e=l[r-1];N((t=>({...t,paymentMethod:`ACCOUNT_${e._id}`,accountId:e._id})))}return r}));break;case"ArrowDown":e.preventDefault(),y((e=>{const r=(e+1)%t;if(0===r)N((e=>({...e,paymentMethod:"CHEQUE",accountId:""})));else{const e=l[r-1];N((t=>({...t,paymentMethod:`ACCOUNT_${e._id}`,accountId:e._id})))}return r}));break;case"Enter":if(e.preventDefault(),0===g)k("CHEQUE");else{const e=l[g-1];k(`ACCOUNT_${e._id}`)}}};return(0,t.useEffect)((()=>{if(2===d)return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)}),[d,g,l]),(0,t.useEffect)((()=>{if(2===d){const e=l.length+1;if(g>=0&&g<e)if(0===g)N((e=>({...e,paymentMethod:"CHEQUE",accountId:""})));else{const e=l[g-1];N((t=>({...t,paymentMethod:`ACCOUNT_${e._id}`,accountId:e._id})))}}}),[g,d,l]),(0,Rr.jsx)(WN,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(XN,{className:"max-w-[450px] p-0 gap-0 font-semibold",children:[(0,Rr.jsx)(QN,{className:"px-4 py-2.5 flex flex-row items-center bg-gray-100 border-b",children:(0,Rr.jsxs)("div",{className:"flex items-center flex-1",children:[d>1&&(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-8 w-8 mr-2 -ml-2",onClick:()=>{3===d?(v(!1),u(2)):2===d&&(u(1),N((e=>({...e,paymentMethod:"",accountId:""}))))},children:(0,Rr.jsx)(Mw,{className:"h-4 w-4"})}),(0,Rr.jsx)(ZN,{className:"text-base font-semibold",children:1===d?"Add Payment Details":2===d?"Select Payment Method":"Enter Payment Details"})]})}),(0,Rr.jsx)(Hj,{}),j&&(0,Rr.jsx)("div",{className:"p-3 bg-red-50 text-red-600 text-sm",children:j}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(dp,{className:"h-[350px]",children:1===d?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-2 py-2 px-4 bg-gray-50 rounded-lg",children:[(0,Rr.jsxs)("div",{className:"col-span-2",children:[(0,Rr.jsx)(yN,{className:"",children:"sales"===(null===a||void 0===a?void 0:a.invoiceType)?"Customer Name":"Distributor Name"}),(0,Rr.jsx)(Gf,{value:null===a||void 0===a?void 0:a.distributorName,disabled:!0,className:"font-bold border-gray-500"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm",children:"Invoice Number"}),(0,Rr.jsx)(Gf,{value:null===a||void 0===a?void 0:a.invoiceNumber,disabled:!0,className:"font-bold border-gray-500"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm ",children:"Invoice Date"}),(0,Rr.jsx)(Gf,{value:null!==a&&void 0!==a&&a.invoiceDate?jc(new Date(a.invoiceDate),"dd/MM/yyyy"):"-",disabled:!0,className:"font-bold border-gray-500"})]})]}),(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2 px-4 ",children:[(0,Rr.jsx)(yN,{children:"Payment Types"}),(0,Rr.jsxs)(VG,{defaultValue:"due",value:h,onValueChange:f,className:"grid grid-cols-2 gap-4",ref:e=>b.current.paymentStatus=e,onKeyDown:e=>D(e,null,!0),children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(HG,{value:"paid",id:"paid",className:"peer sr-only"}),(0,Rr.jsxs)(yN,{htmlFor:"paid",className:"flex  items-center  justify-center gap-1  border-2 border-muted bg-popover p-2 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[(0,Rr.jsx)(R$,{className:"h-6 w-6 text-green-500"}),(0,Rr.jsx)("div",{className:"space-y-1 text-center",children:"Paid/Cash"})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(HG,{value:"due",id:"due",className:"peer sr-only"}),(0,Rr.jsxs)(yN,{htmlFor:"due",className:"flex items-center justify-center gap-1  border-2 border-muted bg-popover p-2 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[(0,Rr.jsx)(Uw,{className:"h-6 w-6 text-orange-500"}),(0,Rr.jsx)("div",{className:"space-y-1 text-center",children:"Due/Credit"})]})]})]}),(0,Rr.jsx)("p",{className:"text-xs",children:"use arrow key \u2190 \u2192"})]}),"due"===h?(0,Rr.jsxs)("div",{className:"px-4 w-1/2",children:[(0,Rr.jsx)(yN,{children:"Payment Due Date"}),(0,Rr.jsx)(Gf,{type:"date",value:m?jc(m,"yyyy-MM-dd"):"",onChange:e=>{const t=e.target.value,r=t?new Date(t):null;r&&!isNaN(r.getTime())?p(r):p(null)},className:"w-full",onKeyDown:e=>D(e,"dueSubmitButton"),ref:e=>b.current.dueDate=e})]}):(0,Rr.jsx)("div",{className:"space-y-4 px-4",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Amount Paid"}),(0,Rr.jsx)(Gf,{type:"number",placeholder:"Enter amount",value:w.amount,onChange:e=>N({...w,amount:e.target.value}),onKeyDown:e=>{Number(w.amount)<Number(null===a||void 0===a?void 0:a.grandTotal)?D(e,"dueDate2"):D(e,"nextButton")},ref:e=>b.current.amount=e})]}),0!==C&&(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Payment Due Date"}),(0,Rr.jsx)(Gf,{type:"date",value:m?jc(m,"yyyy-MM-dd"):"",onChange:e=>{const t=e.target.value,r=t?new Date(t):null;r&&!isNaN(r.getTime())?p(r):p(null)},className:"w-full",onKeyDown:e=>D(e,"nextButton"),ref:e=>b.current.dueDate2=e})]})]})})]})]}):(0,Rr.jsx)("div",{className:"space-y-3 px-4 mt-2",children:x&&2!==d?(()=>{if(!w.paymentMethod)return null;if("CASH"===w.paymentMethod)return(0,Rr.jsx)("div",{className:"space-y-4",children:(0,Rr.jsx)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-md",children:(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-green-100",children:(0,Rr.jsx)(DY,{size:18,className:"text-green-600"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"Cash Payment"}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ready to submit"})]})]})})});if("CHEQUE"===w.paymentMethod)return(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsx)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-md",children:(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-purple-100",children:(0,Rr.jsx)(sm,{size:18,className:"text-purple-600"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"Cheque Payment"}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter cheque details"})]})]})}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Cheque Number"}),(0,Rr.jsx)(Gf,{placeholder:"Enter cheque number",value:w.chequeNumber,onChange:e=>N({...w,chequeNumber:e.target.value}),onKeyDown:e=>D(e,"micrCode"),ref:e=>b.current.chequeNumber=e,required:!0})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"MICR Code (Optional)"}),(0,Rr.jsx)(Gf,{placeholder:"Enter MICR code",value:w.micrCode,onChange:e=>N({...w,micrCode:e.target.value}),onKeyDown:e=>D(e,"chequeDate"),ref:e=>b.current.micrCode=e})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Cheque Date"}),(0,Rr.jsx)(Gf,{type:"date",value:w.chequeDate?jc(w.chequeDate,"yyyy-MM-dd"):"",onChange:e=>N({...w,chequeDate:new Date(e.target.value)}),className:"w-full",onKeyDown:e=>D(e,"nextField"),ref:e=>b.current.chequeDate=e,required:!0})]})]});if("BANK"===w.paymentMethod||"UPI"===w.paymentMethod){var e,t,r,n;const a=l.find((e=>e._id===w.accountId));return a?(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-100 rounded-md",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-blue-100",children:"BANK"===a.accountType?(0,Rr.jsx)(AY,{size:18,className:"text-blue-600"}):"UPI"===a.accountType?(0,Rr.jsx)(vm,{size:18,className:"text-blue-600"}):(0,Rr.jsx)(Yy,{size:18,className:"text-blue-600"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"BANK"===a.accountType?(null===(e=a.bankDetails)||void 0===e?void 0:e.bankName)||"Bank Account":"UPI"===a.accountType?(null===(t=a.upiDetails)||void 0===t?void 0:t.upiName)||"UPI Account":`${a.accountType} Account`}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"BANK"===a.accountType?null===(r=a.bankDetails)||void 0===r?void 0:r.accountNumber:"UPI"===a.accountType?null===(n=a.upiDetails)||void 0===n?void 0:n.upiId:""})]})]}),(0,Rr.jsxs)("p",{className:"text-sm font-medium text-green-600",children:["\u20b9",a.balance||0]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Transaction Number (Optional)"}),(0,Rr.jsx)(Gf,{placeholder:"Enter transaction number",value:w.transactionNumber,onChange:e=>N({...w,transactionNumber:e.target.value}),onKeyDown:e=>D(e,"amount"),ref:e=>b.current.transactionNumber=e})]})]}):null}})():(0,Rr.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[l.map(((e,t)=>{var r,n,a,s;return(0,Rr.jsx)("div",{className:Un("flex items-center justify-between rounded-md border border-muted bg-popover p-3 hover:bg-blue-100/70 hover:border-blue-600  cursor-pointer transition-all duration-200",g===t+1&&"border-blue-500 bg-blue-100 hover:border-blue-500 hover:bg-blue-100"),onClick:()=>{y(t+1),k(`ACCOUNT_${e._id}`)},children:(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-blue-100",children:"BANK"===e.accountType?(0,Rr.jsx)(AY,{size:18,className:"text-blue-600"}):"UPI"===e.accountType?(0,Rr.jsx)(vm,{size:18,className:"text-blue-600"}):(0,Rr.jsx)(Yy,{size:18,className:"text-blue-600"})}),(0,Rr.jsx)("div",{className:"flex-1",children:(0,Rr.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"BANK"===e.accountType?(null===(r=e.bankDetails)||void 0===r?void 0:r.bankName)||"Bank Account":"UPI"===e.accountType?(null===(n=e.upiDetails)||void 0===n?void 0:n.upiName)||"UPI Account":`${e.accountType} Account`}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"BANK"===e.accountType?null===(a=e.bankDetails)||void 0===a?void 0:a.accountNumber:"UPI"===e.accountType?null===(s=e.upiDetails)||void 0===s?void 0:s.upiId:""})]}),(0,Rr.jsx)("p",{className:"text-sm font-medium text-green-600 whitespace-nowrap",children:PP(e.balance||0)})]})})]})},e._id)})),(0,Rr.jsx)("div",{className:Un("flex items-center justify-between rounded-md border border-muted bg-popover p-3 hover:bg-blue-100/70 hover:border-blue-300 cursor-pointer transition-all duration-200",0===g&&"border-blue-500 bg-blue-100"),onClick:()=>{y(0),k("CHEQUE")},children:(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-purple-100",children:(0,Rr.jsx)(sm,{size:18,className:"text-purple-600"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"Cheque Payment"}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pay by cheque"})]})]})})]})})})}),(0,Rr.jsxs)("div",{className:"grid grid-cols-3 px-2 py-2 text-lg font-semibold text-center bg-pink-100",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm text-gray-500",children:"TOTAL AMOUNT"}),(0,Rr.jsx)("p",{className:"font-bold",children:PP(null===a||void 0===a?void 0:a.grandTotal)})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm text-gray-500",children:"PAYING NOW"}),(0,Rr.jsxs)("p",{children:[!(null!==a&&void 0!==a&&a.isNewInvoice)&&(0,Rr.jsxs)("span",{className:"",children:[PP((null===a||void 0===a?void 0:a.alreadyPaid)||0),"+"]}),(0,Rr.jsxs)("span",{className:"font-bold text-green-600",children:[" ",PP(Number(w.amount||0))," "]})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm text-gray-500",children:"BALANCE DUE"}),(0,Rr.jsx)("p",{className:"font-bold",children:C>0?PP(C):0===C?"-":`-${PP(Math.abs(C))}`})]})]}),(0,Rr.jsx)("div",{className:"p-3 bg-gray-100 border-t",children:(0,Rr.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>n(!1),className:"",children:"Cancel"}),"due"===h?(0,Rr.jsx)(Vn,{size:"sm",onClick:T,className:"bg-blue-600 text-white hover:bg-blue-700",disabled:!m||"loading"===i,ref:e=>b.current.dueSubmitButton=e,children:"loading"===i?"Submitting...":"Submit"}):(0,Rr.jsx)(Vn,{size:"sm",ref:e=>b.current.nextButton=e,onClick:e=>{e.preventDefault(),e.stopPropagation(),A()},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),A())},disabled:1===d&&!w.amount&&"due"!==h||3===d&&!E()||"loading"===i,className:"bg-blue-600 text-white hover:bg-blue-700",children:"loading"===i?"Submitting...":3===d?"Submit":"Next"})]})})]})})}const _Y=e=>Math.round(100*(e+Number.EPSILON))/100,RY=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=e.reduce(((e,t)=>{const r=Number((null===t||void 0===t?void 0:t.quantity)||0),n=Number((null===t||void 0===t?void 0:t.pack)||1),a=Number((null===t||void 0===t?void 0:t.free)||0),s=Number((null===t||void 0===t?void 0:t.discount)||0)+Number((null===t||void 0===t?void 0:t.schemePercent)||0),i=Number((null===t||void 0===t?void 0:t.gstPer)||0),o=Number((null===t||void 0===t?void 0:t.amount)||0);if("return"===t.types)return e.returnAmount+=o,e.grandTotal+=o,e;const l=r*(null===t||void 0===t?void 0:t.mrp)/n,c=(null===t||void 0===t?void 0:t.quantity)*(null===t||void 0===t?void 0:t.mrp)/n*s/100,d=100*(l-c)/(100+i),u=d*i/100;return e.grandTotal=e.grandTotal+d+u,e.productCount+=1,e.totalQuantity+=r+a,e.subtotal=e.subtotal+l,e.discountAmount=e.discountAmount+c,e.taxable=e.taxable+d,e.gstAmount=e.gstAmount+u,e}),{subtotal:0,discountAmount:0,taxable:0,gstAmount:0,productCount:0,totalQuantity:0,grandTotal:0,returnAmount:0});if(t){const e=null===r||void 0===r?void 0:r.grandTotal;r.grandTotal=Math.round(e),r.adjustment=r.grandTotal-e}return r.subtotal=_Y(r.subtotal),r.discountAmount=_Y(r.discountAmount),r.taxable=_Y(r.taxable),r.gstAmount=_Y(r.gstAmount),r.grandTotal=_Y(r.grandTotal),r.returnAmount=_Y(r.returnAmount),r.adjustment=_Y(r.adjustment),r},IY=["customerName","doctorName","product","batchNumber","hsn","pack","expiry","mrp","packs","loose","saleRate","discount","gstPer","add"];function MY(){const e=Z(),r=(0,t.useRef)({}),n=rt(),{createBillStatus:a}=$e((e=>e.bill)),{settings:s,status:i}=$e((e=>e.settings)),{isCollapsed:o}=$e((e=>e.loader)),[l,c]=(0,t.useState)((new Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}).split("/").reverse().join("-")),[d,u]=(0,t.useState)([]),[h,f]=(0,t.useState)(""),{toast:m}=$g(),[p,x]=(0,t.useState)(!1),v=$e((e=>{var t;return null===(t=e.staff)||void 0===t?void 0:t.doctors})),[g,y]=(0,t.useState)(null),[b,w]=(0,t.useState)({per:"",value:""}),[N,j]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=setTimeout((()=>{r.current.customerName&&r.current.customerName.focus()}),100);return()=>clearTimeout(e)}),[]),(0,t.useEffect)((()=>{"idle"===i&&n(Mf())}),[i,s]);const S=v.map(((e,t)=>{var r;return{_id:t+1,name:null!==(r=e.name)&&void 0!==r&&r.includes("Dr")?e.name:`Dr. ${e.name}`}})),[C,k]=(0,t.useState)({saleType:"invoice",customerName:"",customerId:"",invoiceNumber:"",invoiceDate:new Date,doctorName:"",returnInvoiceNumber:""}),[E,T]=(0,t.useState)(!0),D=(0,t.useMemo)((()=>RY(d,null===s||void 0===s?void 0:s.adjustment)),[d,s]),A=(e,t)=>{k((r=>({...r,[e]:t})))},[P,_]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=e=>{(e.altKey||e.metaKey)&&"s"===e.key.toLowerCase()&&(e.preventDefault(),R())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[d,C,l,E,h]),(0,t.useEffect)((()=>{fetch(`${Nu}/api/sales/invoice-number`,{credentials:"include",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>k((t=>({...t,invoiceNumber:e.invoiceNumber})))))}),[]);const R=async()=>{try{if(_(!0),!C.invoiceNumber||!C.saleType||!l||!C.customerName&&!E)throw new Error("Please fill all required fields");if(0===d.length)throw new Error("Please add at least one product");y({invoiceType:"sales",isCashCounter:E,distributorName:E?"Cash/Counter":C.customerName,customerId:E?null:C.customerId,invoiceNumber:C.invoiceNumber,invoiceDate:l,grandTotal:D.grandTotal,alreadyPaid:0,isNewInvoice:!0}),x(!0)}catch(e){m({title:"Error",description:e.message||"Failed to validate invoice",variant:"destructive"})}finally{_(!1)}},I=(e,t)=>{if("Enter"===e.key){e.preventDefault();const n=IY.indexOf(t);if(e.shiftKey){if(n>0){const e=IY[n-1];e&&r.current[e]&&r.current[e].focus()}}else if(n<IY.length-1){const e=IY[n+1];e&&r.current[e]&&r.current[e].focus()}}},M=(e,t)=>{if(null===D||void 0===D||!D.subtotal)return void m({variant:"destructive",message:"Please add alteast on product"});const r=Number(t),n=null===D||void 0===D?void 0:D.subtotal;if("per"===e){const e=_Y(n*r/100);w({per:r,value:e})}else{const e=_Y(r/n*100);w({per:e,value:r})}},O=e=>{const t=Number((null===e||void 0===e?void 0:e.quantity)||0),r=Number((null===e||void 0===e?void 0:e.pack)||1),n=Number((null===e||void 0===e?void 0:e.mrp)||0),a=Number((null===e||void 0===e?void 0:e.discount)||0),s=Number((null===e||void 0===e?void 0:e.gstPer)||0),i=t*n/r,o=100*(i-i*a/100)/(100+s);return _Y(o+o*s/100)};return(0,Rr.jsxs)("div",{className:"relative rounded-lg h-[100vh] pt-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-gray-300",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>e(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-xl font-medium",children:"Add Sale"})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsxs)(Vn,{variant:"outline",className:"gap-2",children:[(0,Rr.jsx)(bm,{className:"w-4 h-4"}),"Settings"]}),(0,Rr.jsx)(Vn,{onClick:R,disabled:P,className:"gap-1",children:P?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)("span",{className:"animate-spin",children:"\u23f3"}),"Saving..."]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(nK,{className:"w-4 h-4"}),"Save (Alt + S)"]})})]})]}),(0,Rr.jsx)("div",{className:"grid gap-2 text-[12px]",children:(0,Rr.jsxs)("div",{className:"grid gap-4 grid-cols-5 w-full",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"SALE TYPE"}),(0,Rr.jsxs)(VG,{value:null===C||void 0===C?void 0:C.saleType,onValueChange:e=>A("saleType",e),className:"grid grid-cols-1 gap-1.5 pt-1",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(HG,{value:"invoice",id:"invoice",className:"peer sr-only"}),(0,Rr.jsxs)(yN,{htmlFor:"invoice",className:"flex items-center gap-3 rounded-md border-2 border-muted bg-popover p-1.5 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[(0,Rr.jsx)(nm,{className:"h-5 w-5 text-blue-500 shrink-0"}),(0,Rr.jsxs)("div",{className:"space-y-0.5",children:[(0,Rr.jsx)("p",{className:"text-sm font-medium leading-none",children:"Invoice"}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"Regular sale invoice"})]})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(HG,{value:"return",id:"return",className:"peer sr-only"}),(0,Rr.jsxs)(yN,{htmlFor:"return",className:"flex items-center gap-3 rounded-md border-2 border-muted bg-popover p-1.5 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[(0,Rr.jsx)(aK,{className:"h-5 w-5 text-orange-500 shrink-0"}),(0,Rr.jsxs)("div",{className:"space-y-0.5",children:[(0,Rr.jsx)("p",{className:"text-sm font-medium leading-none",children:"Sales Return"}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sales return invoice"})]})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(HG,{value:"quotation",id:"quotation",className:"peer sr-only"}),(0,Rr.jsxs)(yN,{htmlFor:"quotation",className:"flex items-center gap-3 rounded-md border-2 border-muted bg-popover p-1.5 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer",children:[(0,Rr.jsx)(sK,{className:"h-5 w-5 text-green-500 shrink-0"}),(0,Rr.jsxs)("div",{className:"space-y-0.5",children:[(0,Rr.jsx)("p",{className:"text-sm font-medium leading-none",children:"Quotation"}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"Price estimate"})]})]})]})]})]}),(0,Rr.jsxs)("div",{className:"col-span-4 grid-cols-4 grid gap-4 font-semibold",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["CUSTOMER NAME",(0,Rr.jsx)("span",{className:"text-rose-500 pl-2 text-xs",children:"*REQUIRED"})]}),(0,Rr.jsx)(NK,{inputRef:r,value:h,setValue:f,onSuggestionSelect:e=>{f(e.name),k({...C,customerId:e._id,customerName:e.name}),T(!1),r&&r.current.doctorName&&r.current.doctorName.focus()},onKeyDown:e=>I(e,"customerName"),ref:e=>r.current.customerName=e}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm font-semibold",children:[(0,Rr.jsx)(C$,{checked:E,onCheckedChange:e=>{e||h?(T(e),e&&(f(""),k((e=>({...e,customerName:"",customerId:""}))))):m({title:"Please select customer to uncheck",variant:"destructive"})}}),"Cash/Counter Sale"]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"DOCTOR NAME"}),(0,Rr.jsx)(cK,{suggestions:S,placeholder:"Enter or select doctor name",value:C.doctorName,setValue:e=>A("doctorName",e),onSuggestionSelect:e=>{A("doctorName",e.name),requestAnimationFrame((()=>{r.current.product&&r.current.product.focus()}))},onKeyDown:e=>I(e,"doctorName"),ref:e=>r.current.doctorName=e})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["INVOICE NO",(0,Rr.jsx)("span",{className:"text-rose-500 pl-2 text-xs",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{value:null===C||void 0===C?void 0:C.invoiceNumber,onChange:e=>A("invoiceNumber",e.target.value),placeholder:"Invoice No"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["INVOICE DATE",(0,Rr.jsx)("span",{className:"text-rose-500 pl-2 text-xs",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{type:"date",value:l,onChange:e=>c(e.target.value),className:"w-full"})]}),"return"===(null===C||void 0===C?void 0:C.saleType)&&(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"OLD INVOICE NUMBER"}),(0,Rr.jsx)(Gf,{type:"text",ref:e=>r.current.returnInvoiceNumber=e,value:C.returnInvoiceNumber,onChange:e=>A("returnInvoiceNumber",e.target.value),className:"w-full ",placeholder:"Enter Old Invoice number",onKeyDown:e=>I(e,"returnInvoiceNumber")})]})]})]})}),(0,Rr.jsx)("div",{className:"my-4",children:(0,Rr.jsx)(gK,{inputRef:r,products:d,setProducts:u,handleKeyDown:I,saleType:null===C||void 0===C?void 0:C.saleType})}),(0,Rr.jsx)("div",{className:"grid grid-cols-4 gap-4 "+(N?"block":"hidden"),children:(0,Rr.jsxs)("div",{className:"p-4 border rounded-lg ",children:[(0,Rr.jsxs)("div",{className:"flex justify-between",children:[(0,Rr.jsx)("h3",{className:"mb-4 text-sm font-medium",children:"OVERALL BILL DISCOUNT"}),(0,Rr.jsx)(Vn,{size:"sm",onClick:()=>{const e=Number((null===b||void 0===b?void 0:b.per)||0);e<=0||(u((t=>t.map((t=>{const r=Number(t.discount||0)+e,n=(Number(t.mrp||0)*(1-r/100)).toFixed(2);return{...t,discount:r,saleRate:n,amount:O({...t,discount:r,saleRate:n})}})))),w({per:"",value:""}))},className:"h-5",children:"Apply"})]}),(0,Rr.jsxs)("div",{className:"flex gap-4",children:[(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{placeholder:"Value",className:"w-24 pr-5",value:null===b||void 0===b?void 0:b.per,onChange:e=>M("per",e.target.value)}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:"%"})]}),(0,Rr.jsx)("span",{className:"px-2 py-1",children:"OR"}),(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-500 z-0",children:"\u20b9"}),(0,Rr.jsx)(Gf,{placeholder:"Value",className:"flex-1 pl-5",value:null===b||void 0===b?void 0:b.value,onChange:e=>M("value",e.target.value)})]})]})]})}),(0,Rr.jsxs)("div",{className:`fixed bottom-0 ${o?"w-[calc(100%-95px)]":"w-[calc(100%-225px)]"} text-sm grid grid-cols-8 gap-4 text-white bg-gray-900 rounded-lg transition-all duration-300 text-center`,children:[(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsxs)("div",{children:["Total Products: ",null===D||void 0===D?void 0:D.productCount]}),(0,Rr.jsxs)("div",{children:["Total Quantity: ",null===D||void 0===D?void 0:D.totalQuantity]})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"Subtotal"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===D||void 0===D?void 0:D.subtotal)})]}),(0,Rr.jsxs)("div",{className:"py-2 flex flex-col items-center",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)("span",{children:"(-) Discount"}),(0,Rr.jsx)(rK,{checked:N,onCheckedChange:j,size:"sm",className:"scale-75"})]}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===D||void 0===D?void 0:D.discountAmount)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"Taxable"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===D||void 0===D?void 0:D.taxable)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"(+) GST Amount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===D||void 0===D?void 0:D.gstAmount)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"return"===C.saleType?"Return Amount":"(+) Custom"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===D||void 0===D?void 0:D.returnAmount)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"(-) Adjustment"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP((null===D||void 0===D?void 0:D.adjustment)||0)})]}),(0,Rr.jsxs)("div",{className:"bg-rose-500 py-2",children:[(0,Rr.jsx)("div",{className:"",children:"Total Amount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===D||void 0===D?void 0:D.grandTotal)})]})]}),(0,Rr.jsx)(PY,{open:p,onOpenChange:x,invoiceData:g,onSubmit:async t=>{try{_(!0);const r=d.map((e=>({types:e.types,inventoryId:e.inventoryId,productName:e.productName,batchNumber:e.batchNumber,batchId:e.batchId,expiry:e.expiry,mfcName:e.mfcName,HSN:e.HSN,mrp:_Y(Number(e.mrp)),quantity:Number(e.quantity),saleRate:_Y(Number(e.saleRate)),pack:Number(e.pack||1),purchaseRate:_Y(Number(e.purchaseRate)),saleRate:_Y(Number(e.saleRate)),discount:_Y(Number(e.discount||0)),gstPer:_Y(Number(e.gstPer)),amount:_Y(Number(e.amount))}))),a={subtotal:_Y(D.subtotal),discountAmount:_Y(D.discountAmount),taxableAmount:_Y(D.taxable),gstAmount:_Y(D.gstAmount),totalQuantity:D.totalQuantity,productCount:D.productCount,grandTotal:_Y(D.grandTotal),returnAmount:_Y(D.returnAmount),adjustment:_Y(null===D||void 0===D?void 0:D.adjustment),gstSummary:{0:{taxable:0,cgst:0,sgst:0,igst:0,total:0},5:{taxable:0,cgst:0,sgst:0,igst:0,total:0},12:{taxable:0,cgst:0,sgst:0,igst:0,total:0},18:{taxable:0,cgst:0,sgst:0,igst:0,total:0},28:{taxable:0,cgst:0,sgst:0,igst:0,total:0}}};d.forEach((e=>{if("return"===e.types)return;const t=Number(e.quantity||0),r=Number(e.pack||1),n=_Y(Number(e.mrp||0)),s=Number(e.discount||0),i=Number(e.gstPer||0),o=_Y(t*n/r),l=_Y(o*s/100),c=_Y(100*(o-l)/(100+i)),d=_Y(c*i/100);a.gstSummary.hasOwnProperty(i)&&(a.gstSummary[i].taxable=_Y(a.gstSummary[i].taxable+c),a.gstSummary[i].cgst=_Y(a.gstSummary[i].cgst+d/2),a.gstSummary[i].sgst=_Y(a.gstSummary[i].sgst+d/2),a.gstSummary[i].total=_Y(a.gstSummary[i].total+d))}));const s=_Y(Number(t.amount||0)),i=s>=_Y(D.grandTotal)?"paid":"due",o={saleType:C.saleType,invoiceNumber:C.invoiceNumber,customerName:E?"Cash/Counter":C.customerName,customerId:E?null:C.customerId,invoiceDate:l,paymentDueDate:"due"===i?t.dueDate:null,products:r,grandTotal:_Y(D.grandTotal),is_cash_customer:E,doctorName:null===C||void 0===C?void 0:C.doctorName,returnInvoiceNumber:null===C||void 0===C?void 0:C.returnInvoiceNumber,billSummary:a,paymentStatus:i,amountPaid:s,payment:0!==s?{amount:s,paymentType:s>0?"Payment In":"Payment Out",paymentMethod:t.paymentMethod,paymentDate:t.chequeDate||new Date,accountId:t.accountId,transactionNumber:t.transactionNumber,chequeNumber:t.chequeNumber,chequeDate:t.chequeDate,micrCode:t.micrCode,status:"CHEQUE"===t.paymentMethod?"PENDING":"COMPLETED",remarks:t.notes}:null};n(Xh(o)).unwrap().then((t=>{m({title:"Sales invoice created successfully",variant:"success"}),n(Mh()),k({saleType:"invoice",customerName:"",invoiceNumber:"",invoiceDate:"",doctorName:"",overallDiscount:""}),f(""),c(null),u([]),x(!1),y(null),e("/sales/invoice-print",{state:{invoiceData:t}})})).catch((e=>{m({title:"Error",description:e.message||"Failed to save invoice",variant:"destructive"})}))}catch(r){m({title:"Error",description:r.message||"Failed to save invoice",variant:"destructive"})}finally{_(!1)}},billStatus:a})]})}const OY=rm("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),FY=rm("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function LY(e){var r,n,a,s;let{open:i,onOpenChange:o,paymentData:l,showStep1:c}=e;const d=rt(),u=Z(),{toast:h}=$g(),{accounts:f,fetchStatus:m}=$e((e=>e.accounts)),{createPaymentStatus:p}=$e((e=>e.payment)),[x,v]=(0,t.useState)(c?1:2),[g,y]=(0,t.useState)(!1),[b,w]=(0,t.useState)(null),[N,j]=(0,t.useState)({amount:(null===l||void 0===l?void 0:l.amount)||"",paymentMethod:"",accountId:"",chequeNumber:"",chequeDate:new Date,micrCode:"",transactionNumber:"",remarks:"",paymentDate:new Date});(0,t.useEffect)((()=>{"idle"===m&&d(kh()).unwrap().catch((e=>w(e.message)))}),[d,m]),(0,t.useEffect)((()=>{i&&(w(null),v(c?1:2),y(!1),j({amount:(null===l||void 0===l?void 0:l.amount)||"",paymentMethod:"",accountId:"",chequeNumber:"",chequeDate:new Date,micrCode:"",transactionNumber:"",remarks:(null===l||void 0===l?void 0:l.remarks)||"",paymentDate:new Date}))}),[i,d,c,l]),(0,t.useEffect)((()=>{i&&(async()=>{const e=await fetch(`${Nu}/api/payment/payment-number`,{credentials:"include"}),t=await e.json();j((e=>({...e,paymentNumber:t.paymentNumber})))})()}),[i]);const S=e=>{let t,r="";if("CHEQUE"===e)t="CHEQUE",r=null;else if(e.startsWith("ACCOUNT_")){r=e.replace("ACCOUNT_","");const n=f.find((e=>e._id===r));switch(null===n||void 0===n?void 0:n.accountType){case"BANK":default:t="BANK";break;case"UPI":t="UPI";break;case"CASH":t="CASH"}}j((e=>({...e,paymentMethod:t,accountId:r,chequeNumber:"CHEQUE"===t?e.chequeNumber:"",chequeDate:"CHEQUE"===t?e.chequeDate:null,micrCode:"CHEQUE"===t?e.micrCode:"",transactionNumber:""}))),y(!0),v(3)},C=()=>{switch(N.paymentMethod){case"CHEQUE":return N.chequeNumber&&""!==N.chequeNumber.trim()&&N.chequeDate;case"BANK":case"UPI":return N.accountId;case"CASH":return N.accountId&&""!==N.accountId.trim();default:return!1}};return(0,Rr.jsx)(WN,{open:i,onOpenChange:o,children:(0,Rr.jsxs)(XN,{className:"max-w-xl p-0 gap-0",children:[(0,Rr.jsx)(QN,{className:"px-4 py-2.5 flex flex-row items-center bg-gray-100 border-b",children:(0,Rr.jsxs)("div",{className:"flex items-center flex-1",children:[(c&&x>1||!c&&x>2)&&(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-8 w-8 mr-2 -ml-2",onClick:()=>{3===x?(y(!1),v(2)):2===x&&c&&(v(1),j((e=>({...e,paymentMethod:"",accountId:""}))))},children:(0,Rr.jsx)(Mw,{className:"h-4 w-4"})}),(0,Rr.jsx)(ZN,{className:"text-base font-semibold",children:1===x?"Add Payment Details":2===x?"Select Payment Method":"Enter Payment Details"})]})}),(0,Rr.jsx)(Hj,{}),b&&(0,Rr.jsx)("div",{className:"p-3 bg-red-50 text-red-600 text-sm",children:b}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsx)(dp,{className:"h-[400px]",children:1===x&&c?(0,Rr.jsxs)("div",{className:"space-y-4 px-1",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-3 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,Rr.jsxs)("div",{className:"col-span-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm text-gray-500",children:["sales"===(null===l||void 0===l?void 0:l.invoiceType)?"Customer":"Distributor"," Name"]}),(0,Rr.jsx)("div",{className:"font-medium",children:null===l||void 0===l?void 0:l.distributorName})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm text-gray-500",children:"Payment Number"}),(0,Rr.jsx)("div",{className:"font-medium",children:N.paymentNumber})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm text-gray-500",children:"Invoice Number"}),(0,Rr.jsx)("div",{className:"font-medium",children:null===l||void 0===l||null===(r=l.bills[0])||void 0===r?void 0:r.billNumber})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm text-gray-500",children:"Total Amount"}),(0,Rr.jsx)("div",{className:"font-medium",children:PP(null===l||void 0===l||null===(n=l.bills[0])||void 0===n?void 0:n.grandTotal)})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm text-gray-500 ",children:"Due Amount"}),(0,Rr.jsx)("div",{className:"font-medium text-rose-500",children:PP((null===l||void 0===l||null===(a=l.bills[0])||void 0===a?void 0:a.grandTotal)-(null===l||void 0===l||null===(s=l.bills[0])||void 0===s?void 0:s.amountPaid))})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)(yN,{children:"Amount Paying"}),(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:"\u20b9"}),(0,Rr.jsx)(Gf,{type:"number",placeholder:"Enter amount",value:N.amount,onChange:e=>j({...N,amount:e.target.value}),className:"pl-7 font-semibold"})]})]}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)(yN,{children:"Payment Date"}),(0,Rr.jsx)(Gf,{type:"date",className:"font-bold",value:N.paymentDate?jc(N.paymentDate,"yyyy-MM-dd"):"",onChange:e=>j({...N,paymentDate:new Date(e.target.value)})})]})]}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)(yN,{children:"Remarks"}),(0,Rr.jsx)(wN,{type:"text",className:"font-semibold",placeholder:"Enter remarks (optional)",value:N.remarks,onChange:e=>j({...N,remarks:e.target.value})})]})]}):(0,Rr.jsx)("div",{className:"space-y-3",children:g&&2!==x?(()=>{if(!N.paymentMethod)return null;if("CASH"===N.paymentMethod)return(0,Rr.jsx)("div",{className:"space-y-4",children:(0,Rr.jsx)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-md",children:(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-green-100",children:(0,Rr.jsx)(DY,{size:18,className:"text-green-600"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"Cash Payment"}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ready to submit"})]})]})})});if("CHEQUE"===N.paymentMethod)return(0,Rr.jsxs)("div",{className:"space-y-4 px-2",children:[(0,Rr.jsx)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-md",children:(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-purple-100",children:(0,Rr.jsx)(sm,{size:18,className:"text-purple-600"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"Cheque Payment"}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter cheque details"})]})]})}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Cheque Number"}),(0,Rr.jsx)(Gf,{placeholder:"Enter cheque number",value:N.chequeNumber,onChange:e=>j({...N,chequeNumber:e.target.value}),required:!0})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"MICR Code"}),(0,Rr.jsx)(Gf,{placeholder:"Enter MICR code",value:N.micrCode,onChange:e=>j({...N,micrCode:e.target.value}),required:!0})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Cheque Date"}),(0,Rr.jsx)(Gf,{type:"date",value:N.chequeDate?jc(N.chequeDate,"yyyy-MM-dd"):"",onChange:e=>j({...N,chequeDate:new Date(e.target.value)}),className:"w-full"})]})]});if("BANK"===N.paymentMethod||"UPI"===N.paymentMethod){var e,t,r,n;const a=f.find((e=>e._id===N.accountId));return a?(0,Rr.jsxs)("div",{className:"space-y-4 px-2",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-md",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-blue-100",children:"BANK"===a.accountType?(0,Rr.jsx)(AY,{size:18,className:"text-blue-600"}):"UPI"===a.accountType?(0,Rr.jsx)(vm,{size:18,className:"text-blue-600"}):(0,Rr.jsx)(Yy,{size:18,className:"text-blue-600"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"BANK"===a.accountType?(null===(e=a.bankDetails)||void 0===e?void 0:e.bankName)||"Bank Account":"UPI"===a.accountType?(null===(t=a.upiDetails)||void 0===t?void 0:t.upiName)||"UPI Account":`${a.accountType} Account`}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"BANK"===a.accountType?null===(r=a.bankDetails)||void 0===r?void 0:r.accountNumber:"UPI"===a.accountType?null===(n=a.upiDetails)||void 0===n?void 0:n.upiId:""})]})]}),(0,Rr.jsxs)("p",{className:"text-sm font-medium text-green-600",children:["\u20b9",a.balance||0]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Transaction Number"}),(0,Rr.jsx)(Gf,{placeholder:"Enter transaction number (optional)",value:N.transactionNumber,onChange:e=>j({...N,transactionNumber:e.target.value})})]})]}):null}})():(0,Rr.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,Rr.jsx)("div",{className:Un("flex items-center justify-between rounded-md border border-muted bg-popover p-3 hover:bg-blue-100/70 hover:border-blue-300 cursor-pointer transition-all duration-200","CHEQUE"===N.paymentMethod&&"border-blue-500 bg-blue-100"),onClick:()=>S("CHEQUE"),children:(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-purple-100",children:(0,Rr.jsx)(sm,{size:18,className:"text-purple-600"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"Cheque Payment"}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pay by cheque"})]})]})}),f.map((e=>{var t,r,n,a;return(0,Rr.jsx)("div",{className:Un("flex items-center justify-between rounded-md border border-muted bg-popover p-3 hover:bg-blue-100/70 hover:border-blue-300 cursor-pointer transition-all duration-200",N.accountId===e._id&&"border-blue-500 bg-blue-100"),onClick:()=>S(`ACCOUNT_${e._id}`),children:(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-blue-100",children:"BANK"===e.accountType?(0,Rr.jsx)(AY,{size:18,className:"text-blue-600"}):"UPI"===e.accountType?(0,Rr.jsx)(vm,{size:18,className:"text-blue-600"}):(0,Rr.jsx)(Yy,{size:18,className:"text-blue-600"})}),(0,Rr.jsx)("div",{className:"flex-1",children:(0,Rr.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"BANK"===e.accountType?(null===(t=e.bankDetails)||void 0===t?void 0:t.bankName)||"Bank Account":"UPI"===e.accountType?(null===(r=e.upiDetails)||void 0===r?void 0:r.upiName)||"UPI Account":`${e.accountType} Account`}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"BANK"===e.accountType?null===(n=e.bankDetails)||void 0===n?void 0:n.accountNumber:"UPI"===e.accountType?null===(a=e.upiDetails)||void 0===a?void 0:a.upiId:""})]}),(0,Rr.jsx)("p",{className:"text-sm font-medium text-green-600 whitespace-nowrap",children:PP(e.balance||0)})]})})]})},e._id)}))]})})})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",className:"px-4 text-[14px]",size:"sm",onClick:()=>o(!1),disabled:"loading"===p,children:"Cancel"}),(0,Rr.jsx)(Vn,{size:"sm",onClick:()=>{1===x?v(2):2===x?N.paymentMethod&&(y(!0),v(3)):3===x&&C()&&(()=>{const e={...l,...N,paymentMethod:N.paymentMethod,accountId:N.accountId};e.amount=Number(e.amount),"CHEQUE"===e.paymentMethod&&(e.accountId=null),d(yf(e)).unwrap().then((e=>{h({title:"Payment added successfully",variant:"success"}),d(ph()),u(`/payment/${null===e||void 0===e?void 0:e._id}`)})).catch((e=>{h({title:"Failed to create payment",variant:"destructive"})}))})()},disabled:(1===x?!N.amount:3===x&&!C())||"loading"===p,className:"bg-blue-600 text-white hover:bg-blue-700 px-4 text-[14px]",children:"loading"===p?(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Processing..."]}):3===x?"Submit":"Next"})]})]})})}const BY=["distributorName","invoiceNo","invoiceDate","dueDate","product","HSN","batchNumber","expiry","pack","quantity","free","mrp","purchaseRate","schemeInput1","schemeInput2","discount","gstPer","addButton"],UY=e=>Math.round(100*(e+Number.EPSILON))/100,zY=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]};function VY(){const e=(0,t.useRef)([]),{toast:r}=$g(),n=Z(),{invoiceId:a}=ee(),s=rt(),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)(),[h,f]=(0,t.useState)(),[m,p]=(0,t.useState)([]),[x,v]=(0,t.useState)(!1),[g,y]=(0,t.useState)(""),[b,w]=(0,t.useState)({}),[N,j]=(0,t.useState)(!1),[S,C]=(0,t.useState)(!1),[k,E]=(0,t.useState)(null),[T,D]=(0,t.useState)(0),[A,P]=(0,t.useState)("due"),[_,R]=(0,t.useState)([]),[I,M]=(0,t.useState)(!1),[O,F]=(0,t.useState)(null),[L,B]=(0,t.useState)(!1),{deleteStatus:U}=$e((e=>e.purchaseBill)),{isCollapsed:z}=$e((e=>e.loader)),[V,H]=(0,t.useState)({}),[$,W]=(0,t.useState)({purchaseType:"invoice",distributorName:"",distributorId:"",invoiceNumber:"",invoiceDate:"",paymentDueDate:"",withGst:"yes",overallDiscount:"",amountType:"exclusive"});(0,t.useEffect)((()=>{a&&(async()=>{try{o(!0);const e=await fetch(`${Nu}/api/purchase/invoice/${a}`,{credentials:"include"});if(!e.ok)throw new Error("Something went wrong");const t=await e.json(),{distributorName:r,distributorId:n,invoiceNumber:s,products:i,invoiceDate:l,paymentDueDate:c,withGst:d,billSummary:h,mob:m,amountCalculationType:x,amountPaid:v,paymentStatus:g,payments:b=[]}=t,N=i.map((e=>({...e,quantity:e.quantity/(e.pack||1),free:e.free/(e.pack||1)})));p(N),u(zY(l)),f(zY(c)),D(v||0),P(g||"due"),R(b),W({...$,distributorName:r,distributorId:n,invoiceNumber:s,withGst:d?"yes":"no",amountType:x||"exclusive",mob:m||""}),h&&w(h),y(r)}catch(e){console.error("Error fetching bill:",e),r({title:"Error",description:"Failed to fetch invoice details",variant:"destructive"})}finally{o(!1)}})()}),[a]);const q=(0,t.useMemo)((()=>EY(m,$.amountType)),[m]),G=(e,t)=>{W((r=>({...r,[e]:t})))},K=(t,r)=>{if("Enter"===t.key)if(t.preventDefault(),t.shiftKey){const t=BY.indexOf(r);if(t>1){const r=BY[t-2];r&&e.current[r]&&e.current[r].focus()}}else r&&e.current[r]&&e.current[r].focus()},Y=e=>{e.altKey&&"s"===e.key&&(e.preventDefault(),X())};(0,t.useEffect)((()=>(document.addEventListener("keydown",Y),()=>{document.removeEventListener("keydown",Y)})),[]);const X=async()=>{try{if(o(!0),!$.distributorName||!$.invoiceNumber||!d)throw new Error("Please fill all required fields");if(0===m.length)throw new Error("Please add at least one product");const e=m.map((e=>({inventoryId:e.inventoryId,productName:e.productName,batchNumber:e.batchNumber,batchId:e.batchId,expiry:e.expiry,HSN:e.HSN||"",mrp:UY(Number(e.mrp)),quantity:Number(e.quantity)*(Number(e.pack)||1),free:Number(e.free)*(Number(e.pack)||1),pack:Number(e.pack),purchaseRate:UY(Number(e.purchaseRate)),schemeInput1:Number(e.schemeInput1||0),schemeInput2:Number(e.schemeInput2||0),discount:UY(Number(e.discount||0)),gstPer:UY(Number(e.gstPer)),amount:UY(Number(e.amount))}))),t=_.map((e=>({_id:e._id,amount:V[e._id]||e.amount}))),i={_id:a,invoiceType:"PURCHASE",invoiceNumber:$.invoiceNumber,distributorName:$.distributorName,distributorId:$.distributorId,invoiceDate:new Date(d),paymentDueDate:q.grandTotal>T?h:null,products:e,withGst:"yes"===$.withGst,billSummary:{subtotal:UY(q.subtotal),discountAmount:UY(q.discountAmount),taxableAmount:UY(q.taxable),gstAmount:UY(q.gstAmount),totalQuantity:q.totalQuantity,productCount:q.productCount,grandTotal:UY(q.grandTotal)},amountCalculationType:$.amountType,status:"active",grandTotal:UY(q.grandTotal),amountPaid:T,payments:t,paymentStatus:T>=q.grandTotal?"paid":"due"},l=await fetch(`${Nu}/api/purchase/edit`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(i)});if(!l.ok){const e=await l.json();throw new Error(e.message||"Failed to save invoice")}await l.json(),r({title:"Purchase invoice updated successfully",variant:"success"}),s(Mh()),n(-1)}catch(e){r({title:"Error",description:e.message||"Failed to save invoice",variant:"destructive"})}finally{o(!1)}};return(0,Rr.jsxs)("div",{className:" relative rounded-lg h-[100vh] pt-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>n(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsxs)("h1",{className:"text-xl font-bold",children:[l?"View":"Edit"," Purchase"]})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsxs)(Vn,{size:"sm",variant:"outline",className:"px-4",onClick:()=>j(!0),children:[(0,Rr.jsx)(jK,{className:"w-4 h-4 mr-2"}),"Column Settings"]}),l?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)(Vn,{size:"sm",variant:"outline",className:"px-4",onClick:()=>n(`/purchase/return/create?distributorId=${$.distributorId}&invoiceNumber=${$.invoiceNumber}&distributorName=${encodeURIComponent($.distributorName)}`),disabled:!$.distributorId||!$.invoiceNumber||!$.distributorName,children:[(0,Rr.jsx)(qy,{className:"w-4 h-4 mr-2"}),"Purchase Return"]}),(0,Rr.jsxs)(Vn,{size:"sm",variant:"destructive",className:"gap-2 px-4",onClick:()=>B(!0),disabled:i,children:[(0,Rr.jsx)(oK,{className:"w-4 h-4"}),"Delete"]}),(0,Rr.jsxs)(Vn,{size:"sm",className:"gap-2 px-4",onClick:()=>c(!1),children:[(0,Rr.jsx)(OY,{className:"w-4 h-3"})," Edit"]})]}):(0,Rr.jsx)(Vn,{size:"sm",className:"gap-2",onClick:X,disabled:i,children:i?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)("span",{className:"animate-spin",children:"\u23f3"}),"Saving..."]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(nK,{className:"w-4 h-4"}),"Save (Alt + S)"]})})]})]}),(0,Rr.jsx)(Hj,{className:"my-2"}),(0,Rr.jsxs)(dp,{className:"h-[calc(100vh-9rem)] pr-4",children:[(0,Rr.jsxs)("div",{className:"grid gap-2",children:[(0,Rr.jsxs)("div",{className:"grid gap-4 grid-cols-5 w-full",children:[(0,Rr.jsxs)("div",{className:"flex gap-8",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"PURCHASE TYPE"}),(0,Rr.jsxs)(VG,{value:null===$||void 0===$?void 0:$.purchaseType,onValueChange:e=>G("purchaseType",e),className:" gap-4 mt-2",disabled:l,children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"invoice",id:"invoice"}),(0,Rr.jsx)(yN,{htmlFor:"invoice",children:"INVOICE"})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"challan",id:"challan"}),(0,Rr.jsx)(yN,{htmlFor:"challan",children:"DELIVERY CHALLAN"})]})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"WITH GST?"}),(0,Rr.jsxs)(VG,{className:" gap-4 mt-2",value:null===$||void 0===$?void 0:$.withGst,onValueChange:e=>G("withGst",e),disabled:l,children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"yes",id:"yes"}),(0,Rr.jsx)(yN,{htmlFor:"yes",children:"YES"})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"no",id:"no"}),(0,Rr.jsx)(yN,{htmlFor:"no",children:"NO"})]})]})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["DISTRIBUTOR NAME",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{ref:t=>e.current.distributorName=t,value:g||"",onChange:e=>{e.preventDefault();const t=e.target.value;1!==t.length||" "!==t?t.length>0&&" "!==t[0]&&(y(t),v(!0)):v(!0)},onKeyDown:e=>K(e,"invoiceNo"),placeholder:"Type or Press space",disabled:l})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["INVOICE NO",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{ref:t=>e.current.invoiceNo=t,value:null===$||void 0===$?void 0:$.invoiceNumber,onChange:e=>G("invoiceNumber",e.target.value),onKeyDown:e=>K(e,"invoiceDate"),placeholder:"Invoice No",disabled:l})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["INVOICE DATE",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{ref:t=>e.current.invoiceDate=t,type:"date",value:d||"",onChange:e=>{u(e.target.value)},onKeyDown:e=>K(e,"dueDate"),disabled:l})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"PAYMENT DUE DATE"}),(0,Rr.jsx)(Gf,{ref:t=>e.current.dueDate=t,type:"date",value:h||"",onChange:e=>{f(e.target.value)},onKeyDown:e=>K(e,"product"),disabled:l})]})]}),(0,Rr.jsxs)("div",{className:"flex justify-end gap-4 text-sm",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)("div",{className:"w-4 h-4 bg-yellow-200 rounded"}),(0,Rr.jsx)("span",{children:"Near Expiry Batches"})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)("div",{className:"w-4 h-4 bg-rose-200 rounded"}),(0,Rr.jsx)("span",{children:"Expired Batches"})]})]})]}),(0,Rr.jsx)("div",{className:"my-4",children:(0,Rr.jsx)(TK,{inputRef:e,products:m,setProducts:p,viewMode:l,gstMode:$.amountType,handleKeyDown:K})}),(0,Rr.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,Rr.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,Rr.jsx)("h3",{className:"mb-4 text-sm font-medium",children:"OVERALL BILL DISCOUNT"}),(0,Rr.jsxs)("div",{className:"flex gap-4",children:[(0,Rr.jsx)(Gf,{placeholder:"Value",className:"w-24",value:null===$||void 0===$?void 0:$.overallDiscount,onChange:e=>G("overallDiscount",e.target.value)}),"%",(0,Rr.jsx)("span",{className:"px-2 py-1",children:"OR"}),(0,Rr.jsx)(Gf,{placeholder:"\u20b9 Value",className:"flex-1"})]})]}),(0,Rr.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,Rr.jsx)("h3",{className:"mb-4 text-sm font-medium",children:"CUSTOM CHARGE"}),(0,Rr.jsxs)("div",{className:"flex gap-4",children:[(0,Rr.jsx)(Gf,{placeholder:"Custom charge"}),(0,Rr.jsx)(Gf,{placeholder:"\u20b9 Value"})]})]}),(0,Rr.jsx)("div",{className:"flex items-center justify-center p-4 border rounded-lg",children:(0,Rr.jsxs)("div",{className:"text-center",children:[(0,Rr.jsx)("div",{className:"mb-1",children:"Click on Save to Add Payment"}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Use 'Alt+S' Key"})]})})]}),(0,Rr.jsx)("div",{className:"pb-20 mt-4",children:(0,Rr.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center p-4 border-b bg-gray-50",children:[(0,Rr.jsx)("h3",{className:"text-lg font-medium",children:"Payment History"}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",disabled:T>=(null===q||void 0===q?void 0:q.grandTotal),onClick:()=>{F({paymentType:"Payment Out",distributorId:$.distributorId,distributorName:$.distributorName,amount:UY((null===q||void 0===q?void 0:q.grandTotal)-T),bills:[{billId:a,billNumber:$.invoiceNumber,grandTotal:UY(null===q||void 0===q?void 0:q.grandTotal),amountPaid:UY(T)}]}),M(!0)},className:"gap-1 px-2",children:[(0,Rr.jsx)(Aw,{className:"h-4 w-4"}),"Add Payment"]})]}),_.length>0?(0,Rr.jsx)("div",{className:"overflow-x-auto",children:(0,Rr.jsxs)("table",{className:"w-full",children:[(0,Rr.jsx)("thead",{children:(0,Rr.jsxs)("tr",{className:"bg-gray-100 text-left",children:[(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Date"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Payment Number"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Amount"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Method"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Status"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Reference"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Remarks"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Actions"})]})}),(0,Rr.jsx)("tbody",{children:_.map(((e,t)=>(0,Rr.jsxs)("tr",{className:"border-t "+(t%2===0?"bg-white":"bg-gray-50"),children:[(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm",children:new Date(e.paymentDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm font-medium",children:e.paymentNumber}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm font-medium",children:l?PP(null===e||void 0===e?void 0:e.amount):(0,Rr.jsx)(Gf,{type:"number",value:V[e._id]||e.amount,onChange:t=>((e,t)=>{H((r=>({...r,[e]:Number(t)})));let r=0;_.forEach((n=>{n._id===e?r+=Number(t):r+=V[n._id]||n.amount})),D(r)})(e._id,t.target.value),className:"w-24 h-8",min:"0",step:"0.01"})}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,Rr.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:e.paymentMethod})}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,Rr.jsx)("span",{className:"px-2 py-1 rounded-full text-xs "+("PENDING"===e.status?"bg-yellow-100 text-yellow-800":"COMPLETED"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:"CHEQUE"===e.paymentMethod?`Cheque: ${e.chequeNumber}`:"BANK"===e.paymentMethod||"UPI"===e.paymentMethod?`Txn: ${e.transactionNumber||"N/A"}`:e.paymentMethod}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.remarks||"-"}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>n(`/payment/${e._id}`),className:"h-6 w-6",children:(0,Rr.jsx)(FY,{className:"h-4 w-4"})})})]},e._id||t)))})]})}):(0,Rr.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,Rr.jsx)("p",{className:"text-sm",children:"No payment records found"}),(0,Rr.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Click 'Add Payment' to record a payment"})]})]})})]}),(0,Rr.jsxs)("div",{className:`fixed bottom-0 text-sm ${z?"w-[calc(100%-95px)]":"w-[calc(100%-225px)]"} grid grid-cols-10 gap-4 text-white bg-gray-900 rounded-lg transition-all duration-300 text-center`,children:[(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsxs)("div",{children:["Products: ",null===q||void 0===q?void 0:q.productCount]}),(0,Rr.jsxs)("div",{children:["Quantity: ",null===q||void 0===q?void 0:q.totalQuantity]})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"Subtotal"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===q||void 0===q?void 0:q.subtotal)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"(-) Discount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===q||void 0===q?void 0:q.discountAmount)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"Taxable"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===q||void 0===q?void 0:q.taxable)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"(+) GST Amount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===q||void 0===q?void 0:q.gstAmount)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"(-) Adjustment"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===b||void 0===b?void 0:b.adjustment)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"(+) Custom"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(0)})]}),(0,Rr.jsxs)("div",{className:"bg-rose-500 py-2",children:[(0,Rr.jsx)("div",{className:"",children:"Total Amount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===q||void 0===q?void 0:q.grandTotal)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"Amount Paid"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(T)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"Due Amount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP((null===q||void 0===q?void 0:q.grandTotal)-T)})]})]}),(0,Rr.jsx)(bY,{open:x,setOpen:v,search:g,setSearch:y,onSelect:e=>{y(e.name),W({...$,distributorId:e._id,distributorName:e.name}),v(!1)}}),(0,Rr.jsx)(jY,{open:N,onOpenChange:j,value:$.amountType,onChange:e=>G("amountType",e),products:m,setProducts:p}),(0,Rr.jsx)(LY,{open:I,onOpenChange:M,paymentData:O,showStep1:!0}),(0,Rr.jsx)(Tj,{open:L,onOpenChange:B,children:(0,Rr.jsxs)(_j,{className:"max-w-xl p-0 gap-0",children:[(0,Rr.jsxs)(Rj,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:[(0,Rr.jsx)(Mj,{className:"text-base font-semibold",children:"Delete Purchase Invoice"}),(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>B(!1),children:(0,Rr.jsx)(jN,{className:"h-4 w-4"})})]}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsx)(Oj,{children:"Are you sure you want to delete this purchase invoice? This action will permanently delete the invoice and revert all associated inventory adjustments and payment records."})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{onClick:()=>B(!1),variant:"outline",size:"sm",disabled:"loading"===U,children:"Cancel"}),(0,Rr.jsx)(Vn,{onClick:async()=>{try{await s(ff(a)).unwrap(),r({title:"Success",description:"Purchase invoice deleted successfully",variant:"success"}),n(-1)}catch(e){r({title:"Error",description:e.message||"Failed to delete invoice",variant:"destructive"})}},size:"sm",disabled:"loading"===U,children:"loading"===U?"Deleting...":"Delete"})]})]})})]})}const HY=e=>Math.round(100*(e+Number.EPSILON))/100,$Y=["customerName","doctorName","product","batchNumber","hsn","pack","expiry","mrp","packs","loose","saleRate","discount","gstPer","add"];function WY(){const e=(0,t.useRef)([]),{toast:r}=$g(),n=Z(),a=rt(),{settings:s,status:i}=$e((e=>e.settings)),{isCollapsed:o}=$e((e=>e.loader)),{invoiceId:l}=ee(),c=$e((e=>{var t;return null===(t=e.staff)||void 0===t?void 0:t.doctors})),[d,u]=(0,t.useState)(!0),[h,f]=(0,t.useState)(),[m,p]=(0,t.useState)(),[x,v]=(0,t.useState)([]),[g,y]=(0,t.useState)(""),[b,w]=(0,t.useState)(!1),[N,j]=(0,t.useState)(null),[S,C]=(0,t.useState)(0),[k,E]=(0,t.useState)([]),[T,D]=(0,t.useState)(null),[A,P]=(0,t.useState)(!1),[_,R]=(0,t.useState)({}),{editBillStatus:I,deleteStatus:M}=$e((e=>e.bill)),[O,F]=(0,t.useState)(!1),L=c.map(((e,t)=>{var r;return{_id:t+1,name:null!==(r=e.name)&&void 0!==r&&r.includes("Dr")?e.name:`Dr. ${e.name}`}})),[B,U]=(0,t.useState)({saleType:"invoice",customerName:"",customerId:"",invoiceNumber:"",invoiceDate:"",paymentDueDate:"",withGst:"yes",overallDiscount:""});(0,t.useEffect)((()=>{"idle"===i&&a(Mf())}),[i,s]),(0,t.useEffect)((()=>{l&&(async()=>{try{const e=await fetch(`${Nu}/api/sales/invoice/${l}`,{credentials:"include"});if(!e.ok)throw new Error("Something went wrong");const t=await e.json();j(t);const{customerName:r,customerId:n,invoiceNumber:a,products:s,invoiceDate:i,paymentDueDate:o,withGst:c,amountPaid:d,payments:u,saleType:h,is_cash_customer:m,doctorName:x}=t,g=s.map((e=>{const t=Eu(e.quantity,e.pack);return{...e,...t}}));v(g),f(i?new Date(i):null),p(o?new Date(o):null),C(d),U({...B,customerName:r,customerId:n,invoiceDate:i,paymentDueDate:o,invoiceNumber:a,saleType:h,withGst:c?"yes":"no",doctorName:x}),y(r),w(m),E(u);const b={};u.forEach((e=>{b[e._id]=e.amount})),R(b)}catch(e){console.error("Error fetching bill:",e),r({title:"Error",description:"Failed to fetch invoice details",variant:"destructive"})}})()}),[l]);const z=(0,t.useMemo)((()=>{var e;return RY(x,null===N||void 0===N||null===(e=N.billSummary)||void 0===e?void 0:e.adjustment)}),[x]),V=(e,t)=>{U((r=>({...r,[e]:t})))},H=(t,r)=>{if("Enter"===t.key){t.preventDefault();const n=$Y.indexOf(r);if(t.shiftKey){if(n>0){const t=$Y[n-1];t&&e.current[t]&&e.current[t].focus()}}else if(n<$Y.length-1){const t=$Y[n+1];t&&e.current[t]&&e.current[t].focus()}}};return(0,Rr.jsxs)("div",{className:"relative rounded-lg h-[100vh] pt-2 ",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-gray-300",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>n(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsxs)("h1",{className:"text-xl font-bold",children:[d?"View":"Edit"," Sale Invoice"]})]}),(0,Rr.jsx)("div",{className:"flex gap-4",children:(0,Rr.jsx)("div",{className:"flex items-center gap-3",children:d?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)(Vn,{className:"gap-2 bg-blue-600",onClick:()=>{n("/sales/invoice-print",{state:{invoiceData:N}})},children:[(0,Rr.jsx)(nm,{className:"w-4 h-4"})," Show Invoice"]}),(0,Rr.jsxs)(Vn,{className:"gap-2 bg-blue-600 px-6",onClick:()=>u(!1),children:[(0,Rr.jsx)(OY,{className:"w-4 h-4"})," Edit"]}),(0,Rr.jsxs)(Vn,{className:"gap-2 bg-rose-600 hover:bg-rose-500",onClick:()=>F(!0),children:[(0,Rr.jsx)(oK,{className:"w-4 h-4"})," Delete"]})]}):(0,Rr.jsx)(Vn,{className:"gap-2",onClick:async()=>{try{if(!B.customerName||!B.invoiceNumber||!h)throw new Error("Please fill all required fields");if(0===x.length)throw new Error("Please add at least one product");const e=x.map((e=>({types:e.types,inventoryId:e.inventoryId,productName:e.productName,batchNumber:e.batchNumber,batchId:e.batchId,HSN:e.HSN,expiry:e.expiry,mrp:Number(e.mrp),quantity:Number(e.quantity),pack:Number(e.pack),saleRate:Number(e.saleRate),purchaseRate:Number(e.purchaseRate),discount:Number(e.discount||0),gstPer:Number(e.gstPer),amount:Number(e.amount)}))),t=k.map((e=>({_id:e._id,amount:_[e._id]||e.amount}))),s={_id:l,invoiceType:"SALE",invoiceNumber:B.invoiceNumber,customerName:b?"Cash/Counter":B.customerName,customerId:b?null:B.customerId,is_cash_customer:b,invoiceDate:h,paymentDueDate:(null===z||void 0===z?void 0:z.grandTotal)>S?m:null,doctorName:B.doctorName,products:e,withGst:"yes"===B.withGst,grandTotal:z.grandTotal,billSummary:{subtotal:z.subtotal,discountAmount:z.discountAmount,taxableAmount:z.taxable,gstAmount:z.gstAmount,totalQuantity:z.totalQuantity,productCount:z.productCount,grandTotal:z.grandTotal,returnAmount:z.returnAmount,gstSummary:{0:{taxable:0,cgst:0,sgst:0,igst:0,total:0},5:{taxable:0,cgst:0,sgst:0,igst:0,total:0},12:{taxable:0,cgst:0,sgst:0,igst:0,total:0},18:{taxable:0,cgst:0,sgst:0,igst:0,total:0},28:{taxable:0,cgst:0,sgst:0,igst:0,total:0}}},paymentStatus:S>=z.grandTotal?"paid":"due",amountPaid:S,payments:t};x.forEach((e=>{const t=Number(e.quantity||0),r=Number(e.pack||1),n=Number(e.mrp||0),a=Number(e.discount||0),i=Number(e.gstPer||0),o=t*n/r,l=100*(o-o*a/100)/(100+i),c=l*i/100;s.billSummary.gstSummary.hasOwnProperty(i)&&(s.billSummary.gstSummary[i].taxable+=Number(l.toFixed(2)),s.billSummary.gstSummary[i].cgst+=Number((c/2).toFixed(2)),s.billSummary.gstSummary[i].sgst+=Number((c/2).toFixed(2)),s.billSummary.gstSummary[i].total+=Number(c.toFixed(2)))}));await a(ef(s)).unwrap();r({title:"Sale invoice saved successfully",variant:"success"}),n(-1)}catch(e){r({title:"Error",description:e.message||"Failed to save invoice",variant:"destructive"})}},disabled:"loading"===I,children:"loading"===I?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)("span",{className:"animate-spin",children:"\u23f3"}),"Saving..."]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(nK,{className:"w-4 h-4"}),"Save (Alt + S)"]})})})})]}),(0,Rr.jsx)("div",{className:"grid gap-2",children:(0,Rr.jsxs)("div",{className:"grid gap-4 grid-cols-6 w-full",children:[(0,Rr.jsxs)("div",{className:"flex gap-8",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"SALE TYPE"}),(0,Rr.jsxs)(VG,{value:null===B||void 0===B?void 0:B.saleType,onValueChange:e=>V("saleType",e),className:" gap-4 mt-2",disabled:d,children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"invoice",id:"invoice"}),(0,Rr.jsx)(yN,{htmlFor:"invoice",children:"INVOICE"})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"return",id:"return"}),(0,Rr.jsx)(yN,{htmlFor:"challan",children:"SALE RETURN"})]})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"WITH GST?"}),(0,Rr.jsxs)(VG,{className:" gap-4 mt-2",value:null===B||void 0===B?void 0:B.withGst,onValueChange:e=>V("withGst",e),disabled:d,children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"yes",id:"yes"}),(0,Rr.jsx)(yN,{htmlFor:"yes",children:"YES"})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"no",id:"no"}),(0,Rr.jsx)(yN,{htmlFor:"no",children:"NO"})]})]})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["CUSTOMER NAME",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(NK,{inputRef:e,value:g,setValue:y,onSuggestionSelect:t=>{y(t.name),U({...B,customerId:t._id,customerName:t.name}),w(!1),e&&e.current.product&&e.current.product.focus()},onKeyDown:e=>H(e,"customerName"),ref:t=>e.current.customerName=t,disabled:d}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm font-semibold",children:[(0,Rr.jsx)(C$,{checked:b,disabled:d,onCheckedChange:e=>{e||g?(w(e),e&&(y(""),U((e=>({...e,customerName:"",customerId:""}))))):r({title:"Please select customer to uncheck",variant:"destructive"})}}),"Cash/Counter Sale"]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"DOCTOR NAME"}),(0,Rr.jsx)(cK,{suggestions:L,placeholder:"Enter or select doctor name",value:B.doctorName,setValue:e=>V("doctorName",e),onSuggestionSelect:t=>{V("doctorName",t.name),e.current.product&&e.current.product.focus()},onKeyDown:e=>H(e,"doctorName"),ref:t=>e.current.doctorName=t,disabled:d})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["INVOICE NO",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{value:null===B||void 0===B?void 0:B.invoiceNumber,onChange:e=>V("invoiceNumber",e.target.value),placeholder:"Invoice No",disabled:d})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["INVOICE DATE",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{type:"date",value:h?jc(h,"yyyy-MM-dd"):"",onChange:e=>f(new Date(e.target.value)),disabled:d,className:"w-full"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"PAYMENT DUE DATE"}),(0,Rr.jsx)(Gf,{type:"date",value:m?jc(m,"yyyy-MM-dd"):"",onChange:e=>p(new Date(e.target.value)),disabled:d,className:"w-full"})]})]})}),(0,Rr.jsx)("div",{className:"my-4",children:(0,Rr.jsx)(gK,{inputRef:e,products:x,setProducts:v,viewMode:d,handleKeyDown:H})}),(0,Rr.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,Rr.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,Rr.jsx)("h3",{className:"mb-4 text-sm font-medium",children:"OVERALL BILL DISCOUNT"}),(0,Rr.jsxs)("div",{className:"flex gap-4",children:[(0,Rr.jsx)(Gf,{placeholder:"Value",className:"w-24",value:null===B||void 0===B?void 0:B.overallDiscount,onChange:e=>V("overallDiscount",e.target.value),disabled:d}),"%",(0,Rr.jsx)("span",{className:"px-2 py-1",children:"OR"}),(0,Rr.jsx)(Gf,{placeholder:"\u20b9 Value",className:"flex-1",disabled:d})]})]}),(0,Rr.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,Rr.jsx)("h3",{className:"mb-4 text-sm font-medium",children:"CUSTOM CHARGE"}),(0,Rr.jsxs)("div",{className:"flex gap-4",children:[(0,Rr.jsx)(Gf,{placeholder:"Custom charge",disabled:d}),(0,Rr.jsx)(Gf,{placeholder:"\u20b9 Value",disabled:d})]})]}),(0,Rr.jsx)("div",{className:"flex items-center justify-center p-4 border rounded-lg",children:(0,Rr.jsxs)("div",{className:"text-center",children:[(0,Rr.jsx)("div",{className:"mb-1",children:"Click on Save to Add Payment"}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Use 'Alt+S' Key"})]})})]}),(0,Rr.jsx)("div",{className:"pb-20 mt-4",children:(0,Rr.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center p-4 border-b bg-gray-50",children:[(0,Rr.jsx)("h3",{className:"text-lg font-medium",children:"Payment History"}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",disabled:S>=(null===z||void 0===z?void 0:z.grandTotal),onClick:()=>{D({invoiceType:"sales",paymentType:"Payment In",distributorId:B.customerId,distributorName:b?"Cash/Counter":B.customerName,amount:HY((null===z||void 0===z?void 0:z.grandTotal)-S),bills:[{billId:l,billNumber:B.invoiceNumber,grandTotal:HY(null===z||void 0===z?void 0:z.grandTotal),amountPaid:HY(S)}]}),P(!0)},className:"gap-1 px-2",children:[(0,Rr.jsx)(Aw,{className:"h-4 w-4"}),"Add Payment"]})]}),k.length>0?(0,Rr.jsx)("div",{className:"overflow-x-auto ",children:(0,Rr.jsxs)("table",{className:"w-full",children:[(0,Rr.jsx)("thead",{children:(0,Rr.jsxs)("tr",{className:"bg-gray-100 text-left",children:[(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Date"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Payment Number"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Amount"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Method"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Status"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Reference"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Remarks"}),(0,Rr.jsx)("th",{className:"px-4 py-3 text-sm font-medium text-gray-600",children:"Actions"})]})}),(0,Rr.jsx)("tbody",{children:k.map(((e,t)=>(0,Rr.jsxs)("tr",{className:"border-t "+(t%2===0?"bg-white":"bg-gray-50"),children:[(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm",children:new Date(e.paymentDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm font-medium",children:e.paymentNumber}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm font-medium",children:d?PP(null===e||void 0===e?void 0:e.amount):(0,Rr.jsx)(Gf,{type:"number",value:_[e._id]||e.amount,onChange:t=>((e,t)=>{R((r=>({...r,[e]:Number(t)})));let r=0;k.forEach((n=>{n._id===e?r+=Number(t):r+=_[n._id]||n.amount})),C(r)})(e._id,t.target.value),className:"w-24 h-8",min:"0",step:"0.01"})}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,Rr.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:e.paymentMethod})}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,Rr.jsx)("span",{className:"px-2 py-1 rounded-full text-xs "+("PENDING"===e.status?"bg-yellow-100 text-yellow-800":"COMPLETED"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:"CHEQUE"===e.paymentMethod?`Cheque: ${e.chequeNumber}`:"BANK"===e.paymentMethod||"UPI"===e.paymentMethod?`Txn: ${e.transactionNumber||"N/A"}`:e.paymentMethod}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.remarks||"-"}),(0,Rr.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>n(`/payment/${e._id}`),className:"h-6 w-6",children:(0,Rr.jsx)(FY,{className:"h-4 w-4"})})})]},e._id||t)))})]})}):(0,Rr.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,Rr.jsx)("p",{className:"text-sm",children:"No payment records found"}),(0,Rr.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Click 'Add New Payment' to record a payment"})]})]})}),(0,Rr.jsxs)("div",{className:`fixed bottom-0 text-sm ${o?"w-[calc(100%-95px)]":"w-[calc(100%-225px)]"} grid grid-cols-10 gap-4 text-white bg-gray-900 rounded-lg transition-all duration-300 text-center`,children:[(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsxs)("div",{children:["Products: ",null===z||void 0===z?void 0:z.productCount]}),(0,Rr.jsxs)("div",{children:["Quantity: ",null===z||void 0===z?void 0:z.totalQuantity]})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"Subtotal"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===z||void 0===z?void 0:z.subtotal)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"(-) Discount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===z||void 0===z?void 0:z.discountAmount)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"Taxable"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===z||void 0===z?void 0:z.taxable)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"(+) GST Amount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===z||void 0===z?void 0:z.gstAmount)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"return"===(null===B||void 0===B?void 0:B.saleType)?"Return Amount":"(+) Custom"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===z||void 0===z?void 0:z.returnAmount)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"(-) Adjustment"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP((null===z||void 0===z?void 0:z.adjustment)||0)})]}),(0,Rr.jsxs)("div",{className:"bg-rose-500 py-2",children:[(0,Rr.jsx)("div",{className:"",children:"Total Amount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(null===z||void 0===z?void 0:z.grandTotal)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"Amount Paid"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP(S)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"Due Amount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP((null===z||void 0===z?void 0:z.grandTotal)-S)})]})]}),(0,Rr.jsx)(LY,{open:A,onOpenChange:P,paymentData:T,showStep1:!0}),(0,Rr.jsx)(Tj,{open:O,onOpenChange:F,children:(0,Rr.jsxs)(_j,{className:"max-w-xl p-0 gap-0",children:[(0,Rr.jsxs)(Rj,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:[(0,Rr.jsx)(Mj,{className:"text-base font-semibold",children:"Delete Sale Invoice"}),(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>F(!1),children:(0,Rr.jsx)(jN,{className:"h-4 w-4"})})]}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsx)(Oj,{children:"Are you sure you want to delete this sale invoice? This action will permanently delete the invoice and revert all associated inventory adjustments and payment records."})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{onClick:()=>F(!1),variant:"outline",size:"sm",disabled:"loading"===M,className:"px-4",children:"Cancel"}),(0,Rr.jsx)(Vn,{onClick:async()=>{try{await a(Qh(l)).unwrap(),r({title:"Success",description:"Sale invoice deleted successfully",variant:"success"}),n(-1)}catch(e){r({title:"Error",description:e.message||"Failed to delete invoice",variant:"destructive"})}},size:"sm",disabled:"loading"===M,className:"bg-destructive text-white hover:bg-destructive/90 px-4",children:"loading"===M?"Deleting...":"Delete"})]})]})})]})}const qY=rm("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),GY=rm("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);function KY(e){let{isActive:r,distributorId:n,customerId:a}=e;const[s,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(!1),f=rt();(0,t.useEffect)((()=>{(async()=>{if(r){l(!0),d(null);try{let e;if(n)e=await f(xh(n)).unwrap();else{if(!a)throw new Error("Either distributorId or customerId must be provided");e=await f($h(a)).unwrap()}i(e)}catch(c){console.error("Error fetching ledger entries:",c),d(c.toString())}finally{l(!1)}}})()}),[n,a,r,f]);const m={Date:e=>new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),Credit:e=>e||0,Debit:e=>e||0,Balance:e=>e||0,"Invoice No.":e=>e||"-"};return o?(0,Rr.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,Rr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):c?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-red-600",children:[(0,Rr.jsx)($N,{className:"h-12 w-12 mb-3"}),(0,Rr.jsx)("p",{className:"text-lg font-medium",children:"Error Loading Ledger"}),(0,Rr.jsx)("p",{className:"text-sm",children:c})]}):s&&0!==s.length?(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsx)("div",{className:"flex justify-end",children:(0,Rr.jsxs)(Vn,{onClick:()=>h(!0),disabled:!s||0===s.length,variant:"outline",size:"sm",children:[(0,Rr.jsx)(GY,{className:"mr-2 h-4 w-4"}),"Export"]})}),(0,Rr.jsx)("div",{className:"border rounded-lg",children:(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{className:"bg-muted/50",children:[(0,Rr.jsx)(Tw,{className:"font-medium",children:"Date"}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Description"}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Invoice No."}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Credit"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Debit"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Balance"})]})}),(0,Rr.jsx)(Cw,{className:"font-semibold",children:s.map(((e,t)=>(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Dw,{children:new Date(e.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}),(0,Rr.jsx)(Dw,{children:e.description}),(0,Rr.jsx)(Dw,{children:e.invoiceNumber}),(0,Rr.jsx)(Dw,{className:"text-right",children:e.credit?`\u20b9 ${e.credit.toLocaleString()}`:"-"}),(0,Rr.jsx)(Dw,{className:"text-right",children:e.debit?`\u20b9 ${e.debit.toLocaleString()}`:"-"}),(0,Rr.jsx)(Dw,{className:"text-right",children:(0,Rr.jsxs)("span",{className:e.balance>=0?"text-green-600":"text-red-600",children:["\u20b9 ",Math.abs(e.balance).toLocaleString()]})})]},e._id||t)))})]})}),(0,Rr.jsx)(k$,{open:u,onOpenChange:h,data:s,columns:[{header:"Date",field:"createdAt",width:15,format:"date"},{header:"Description",field:"description",width:40},{header:"Invoice No.",field:"invoiceNumber",width:15},{header:"Credit",field:"credit",width:15,format:"currency",addTotal:!0},{header:"Debit",field:"debit",width:15,format:"currency",addTotal:!0},{header:"Balance",field:"balance",width:15,format:"currency"}],formatters:m,fileName:`ledger_${n||a}`,title:"Export Ledger Data"})]}):(0,Rr.jsx)("div",{className:"border rounded-lg",children:(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{className:"bg-muted/50",children:[(0,Rr.jsx)(Tw,{className:"font-medium",children:"Date"}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Description"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Debit"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Credit"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Balance"})]})}),(0,Rr.jsx)(Cw,{children:(0,Rr.jsx)(Ew,{children:(0,Rr.jsx)(Dw,{colSpan:5,children:(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[(0,Rr.jsx)($N,{className:"h-12 w-12 mb-3 text-gray-400"}),(0,Rr.jsx)("p",{className:"text-lg font-medium mb-1",children:"No Ledger Entries Found"}),(0,Rr.jsx)("p",{className:"text-sm",children:"There are no ledger entries available."})]})})})})]})})}function YY(){var e,r;const n=Z(),{distributorId:a}=ee(),s=rt(),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),{toast:d}=$g(),{details:u,status:h,invoicesStatus:f,paymentsStatus:m,tabName:p,invoices:x,payments:v,deleteDistributorStatus:g}=$e((e=>e.distributor.currentDistributor));(0,t.useEffect)((()=>{a&&(null===u||void 0===u?void 0:u._id)!==a&&s(vh(a))}),[a,s,null===u||void 0===u?void 0:u._id]),(0,t.useEffect)((()=>{a&&(null===u||void 0===u?void 0:u._id)===a&&("invoices"===p&&a?s(gh(a)):"payments"===p&&a&&s(yh(a)))}),[a,p,s,null===u||void 0===u?void 0:u._id]);if(!u||"loading"===h)return(0,Rr.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Rr.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})});if("failed"===h)return(0,Rr.jsx)("div",{className:"h-screen flex items-center justify-center",children:(0,Rr.jsx)("p",{className:"text-lg text-red-700",children:"Failed to load distributor data."})});return(0,Rr.jsxs)("div",{className:"flex flex-col min-h-screen font-semibold",children:[(0,Rr.jsxs)("header",{className:"flex items-center justify-between px-6 py-3 border-b",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>n(-1),children:(0,Rr.jsx)(Mw,{className:"h-4 w-4"})}),(0,Rr.jsx)("h1",{className:"text-xl font-semibold",children:u.name})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsxs)(Vn,{variant:"outline",onClick:()=>n(`/payment/create-payment/${a}`),children:[(0,Rr.jsx)(Aw,{className:"h-4 w-4"})," Add Payment"]}),(0,Rr.jsx)(Vn,{variant:"outline",size:"icon",onClick:()=>o(!0),children:(0,Rr.jsx)(iK,{className:"h-4 w-4"})}),(0,Rr.jsx)(Vn,{variant:"outline",size:"icon",className:"bg-red-500 text-white hover:bg-red-600",onClick:()=>c(!0),children:(0,Rr.jsx)(oK,{className:"h-4 w-4"})})]})]}),(0,Rr.jsxs)(uN,{defaultValue:p,className:"flex-1",onValueChange:e=>s(jh(e)),children:[(0,Rr.jsx)("div",{className:"border-b",children:(0,Rr.jsx)("div",{className:"px-6",children:(0,Rr.jsxs)(hN,{className:"h-12 p-0 bg-transparent border-b-0",children:[(0,Rr.jsx)(fN,{value:"profile",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none",children:"Profile"}),(0,Rr.jsx)(fN,{value:"invoices",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none",children:"Invoices"}),(0,Rr.jsx)(fN,{value:"payments",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none",children:"Payments"}),(0,Rr.jsx)(fN,{value:"ledger",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none",children:"Ledger"})]})})}),(0,Rr.jsxs)("div",{className:"flex-1 p-6",children:[(0,Rr.jsx)(mN,{value:"profile",className:"m-0",children:(0,Rr.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,Rr.jsxs)(Kf,{children:[(0,Rr.jsx)(Yf,{children:(0,Rr.jsx)(Xf,{className:"text-base font-medium",children:"General Details"})}),(0,Rr.jsxs)(Jf,{className:"grid gap-4",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Distributor Name"}),(0,Rr.jsx)("div",{children:u.name})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Mobile Number"}),(0,Rr.jsx)("div",{children:u.mob||"-"})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Email"}),(0,Rr.jsx)("div",{children:u.email||"-"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Opening Balance"}),(0,Rr.jsxs)("div",{className:u.openBalance>0?"text-green-600":"text-red-600",children:[0!==u.openBalance&&(u.openBalance>0?"\u2193 ":"\u2191 "),"\u20b9"," ",Math.abs(u.openBalance).toLocaleString(),(0,Rr.jsxs)("span",{className:"text-gray-500 text-sm ml-1",children:["(",u.openBalance>0?"To Collect":"To Pay",")"]})]})]})]}),(0,Rr.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Current Balance"}),(0,Rr.jsxs)("div",{className:u.currentBalance>0?"text-green-600":"text-red-600",children:[0!==u.currentBalance&&(u.currentBalance>0?"\u2193 ":"\u2191 "),"\u20b9"," ",Math.abs(u.currentBalance).toLocaleString(),(0,Rr.jsxs)("span",{className:"text-gray-500 text-sm ml-1",children:["(",u.currentBalance>0?"To Collect":"To Pay",")"]})]})]})})]})]}),(0,Rr.jsxs)(Kf,{children:[(0,Rr.jsx)(Yf,{children:(0,Rr.jsx)(Xf,{className:"text-base font-medium",children:"Business Details"})}),(0,Rr.jsxs)(Jf,{className:"grid gap-4",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"GSTIN"}),(0,Rr.jsx)("div",{children:u.gstin||"-"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Drug License Number"}),(0,Rr.jsx)("div",{children:u.DLNumber||"-"})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Bank Account Number"}),(0,Rr.jsx)("div",{children:(null===u||void 0===u||null===(e=u.bankDetails)||void 0===e?void 0:e.accountNumber)||"-"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"IFSC Code"}),(0,Rr.jsx)("div",{className:"uppercase",children:(null===u||void 0===u||null===(r=u.bankDetails)||void 0===r?void 0:r.ifsc)||"-"})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Billing Address"}),(0,Rr.jsx)("div",{children:u.address||"-"})]})]})]}),(0,Rr.jsxs)(Kf,{children:[(0,Rr.jsx)(Yf,{children:(0,Rr.jsx)(Xf,{className:"text-base font-medium",children:"Credit Details"})}),(0,Rr.jsx)(Jf,{className:"grid gap-4",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Credit Period"}),(0,Rr.jsxs)("div",{children:[u.credit_period||0," Days"]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Credit Limit"}),(0,Rr.jsx)("div",{children:u.credit_limit?`\u20b9 ${u.credit_limit}`:"-"})]})]})})]})]})}),(0,Rr.jsxs)(mN,{value:"invoices",className:"m-0",children:["loading"===f&&(0,Rr.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,Rr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-gray-900"})}),"failed"===f&&(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-red-700",children:[(0,Rr.jsx)($N,{className:"h-12 w-12 mb-3"}),(0,Rr.jsx)("p",{className:"text-lg font-medium",children:"Failed to load invoices."})]}),"succeeded"===f&&!x.length&&(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[(0,Rr.jsx)($N,{className:"h-12 w-12 mb-3 text-gray-400"}),(0,Rr.jsx)("p",{className:"text-lg font-medium mb-1",children:"No Invoices Found"}),(0,Rr.jsx)("p",{className:"text-sm",children:"There are no invoices available for this distributor."})]}),"succeeded"===f&&x.length>0&&(0,Rr.jsx)("div",{className:"border rounded-lg",children:(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{className:"bg-muted/50",children:[(0,Rr.jsx)(Tw,{className:"font-medium",children:(0,Rr.jsxs)(Vn,{variant:"ghost",className:"p-0 h-auto font-medium hover:bg-transparent",children:["Date",(0,Rr.jsx)(qY,{className:"ml-2 h-4 w-4"})]})}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Invoice Type"}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Invoice Number"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Items"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Grand Total"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Due Amount"}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Due Date"}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Status"})]})}),(0,Rr.jsx)(Cw,{children:(e=>e?e.map((e=>{var t,r,n;if(!e)return null;const a=(null===e||void 0===e||null===(t=e.billSummary)||void 0===t?void 0:t.grandTotal)||0,s=e.amountPaid||0,i=(null===e||void 0===e||null===(r=e.billSummary)||void 0===r?void 0:r.productCount)||0,o=(null===e||void 0===e||null===(n=e.billSummary)||void 0===n?void 0:n.totalQuantity)||0,l=Math.max(0,a-s);return{date:e.invoiceDate?new Date(e.invoiceDate).toLocaleDateString():"-",type:"SALE"===e.invoiceType?"Sales Invoice":"Purchase Invoice",number:e.invoiceNumber||"-",items:`${i} (${o} units)`,grandTotal:`\u20b9 ${a.toLocaleString()}`,dueAmount:l>0?`\u20b9 ${l.toLocaleString()}`:"-",status:s>=a?"Paid":s>0?"Partial Paid":"Unpaid",paymentDue:e.paymentDueDate?new Date(e.paymentDueDate).toLocaleDateString():"-",id:e._id}})).filter(Boolean):[])(x).map(((e,t)=>(0,Rr.jsxs)(Ew,{onClick:()=>(e=>{"Sales Invoice"===e.type?n(`/sales/${e.id}`):"Purchase Invoice"===e.type&&n(`/purchase/${e.id}`)})(e),className:"cursor-pointer hover:bg-muted/50",children:[(0,Rr.jsx)(Dw,{children:new Date(e.date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)("span",{className:"text-blue-600",children:e.type})}),(0,Rr.jsx)(Dw,{children:e.number}),(0,Rr.jsx)(Dw,{className:"text-right",children:e.items}),(0,Rr.jsx)(Dw,{className:"text-right font-medium",children:e.grandTotal}),(0,Rr.jsx)(Dw,{className:"text-right",children:(0,Rr.jsx)("span",{className:"-"!==e.dueAmount?"text-red-600":"",children:e.dueAmount})}),(0,Rr.jsx)(Dw,{children:e.paymentDue}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)(qw,{variant:"Paid"===e.status?"success":"Unpaid"===e.status?"destructive":"warning",children:e.status})})]},t)))})]})})]}),(0,Rr.jsxs)(mN,{value:"payments",className:"m-0",children:["loading"===m&&(0,Rr.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,Rr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-gray-900"})}),"failed"===m&&(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-red-700",children:[(0,Rr.jsx)($N,{className:"h-12 w-12 mb-3"}),(0,Rr.jsx)("p",{className:"text-lg font-medium",children:"Failed to load payments."})]}),"succeeded"===m&&!v.length&&(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[(0,Rr.jsx)($N,{className:"h-12 w-12 mb-3 text-gray-400"}),(0,Rr.jsx)("p",{className:"text-lg font-medium mb-1",children:"No Payments Found"}),(0,Rr.jsx)("p",{className:"text-sm",children:"There are no payment records available for this distributor."})]}),"succeeded"===m&&v.length>0&&(0,Rr.jsx)("div",{className:"border rounded-lg",children:(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{className:"bg-muted/50",children:[(0,Rr.jsx)(Tw,{className:"font-medium",children:(0,Rr.jsxs)(Vn,{variant:"ghost",className:"p-0 h-auto font-medium hover:bg-transparent",children:["Date",(0,Rr.jsx)(qY,{className:"ml-2 h-4 w-4"})]})}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Payment Type"}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Payment Number"}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Payment Method"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Amount"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Status"})]})}),(0,Rr.jsx)(Cw,{children:v.map((e=>(0,Rr.jsxs)(Ew,{onClick:()=>{n(`/payment/${e._id}`)},className:"cursor-pointer hover:bg-muted/50",children:[(0,Rr.jsx)(Dw,{children:new Date(e.paymentDate).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)("span",{className:"Payment In"===e.paymentType?"text-green-600":"text-red-600",children:e.paymentType})}),(0,Rr.jsx)(Dw,{children:e.paymentNumber||"-"}),(0,Rr.jsx)(Dw,{children:e.paymentMethod}),(0,Rr.jsxs)(Dw,{className:"text-right",children:["\u20b9 ",e.amount.toLocaleString()]}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)(qw,{variant:"COMPLETED"===e.status?"success":"PENDING"===e.status?"warning":"destructive",children:e.status})})]},e._id)))})]})})]}),(0,Rr.jsx)(mN,{value:"ledger",className:"m-0",children:(0,Rr.jsx)(KY,{isActive:"ledger"===p,distributorId:a})})]})]}),(0,Rr.jsx)(P$,{open:i,onOpenChange:o,onSuccess:()=>{s(vh(a))},distributorToEdit:u}),(0,Rr.jsx)(Tj,{open:l,onOpenChange:c,children:(0,Rr.jsxs)(_j,{className:"max-w-xl p-0 gap-0",children:[(0,Rr.jsxs)(Rj,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:[(0,Rr.jsx)(Mj,{className:"text-base font-semibold",children:"Delete Distributor"}),(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>c(!1),children:(0,Rr.jsx)(jN,{className:"h-4 w-4"})})]}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsx)(Oj,{children:"Are you sure you want to delete this distributor? This action will permanently delete all associated records and cannot be undone."})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{onClick:()=>c(!1),variant:"outline",size:"sm",disabled:"loading"===g,className:"px-4",children:"Cancel"}),(0,Rr.jsx)(Vn,{onClick:async()=>{try{await s(wh(a)).unwrap(),d({title:"Distributor deleted successfully",variant:"success"}),n(-1)}catch(e){d({title:"Failed to delete distributor",description:e.message,variant:"destructive"})}},size:"sm",className:"px-4 bg-red-500 text-white hover:bg-red-600",disabled:"loading"===g,children:"loading"===g?"Deleting...":"Delete"})]})]})})]})}const XY=rm("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]),QY=e=>{let{isLoadingBills:t,pendingInvoices:r,selectedBills:n,onBillSelection:a}=e;return t?(0,Rr.jsx)("div",{className:"border rounded-md",children:(0,Rr.jsxs)("div",{className:"h-[400px] flex flex-col items-center justify-center text-muted-foreground",children:[(0,Rr.jsx)("div",{className:"h-6 w-6 animate-spin rounded-full border-b-2 border-[#6366F1]"}),(0,Rr.jsx)("span",{className:"mt-2",children:"Loading invoices..."})]})}):0===r.length?(0,Rr.jsx)("div",{className:"border rounded-md",children:(0,Rr.jsxs)("div",{className:"h-[400px] flex flex-col items-center justify-center text-muted-foreground",children:[(0,Rr.jsx)(XY,{className:"h-12 w-12 mb-4"}),(0,Rr.jsx)("p",{className:"text-lg",children:"No pending invoices found"})]})}):(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:"w-12 font-semibold",children:(0,Rr.jsx)(C$,{checked:n.length===r.length&&r.length>0,onCheckedChange:e=>{e?r.forEach((e=>a(e,!0))):r.forEach((e=>a(e,!1)))}})}),(0,Rr.jsx)(Tw,{className:"font-semibold",children:"Date"}),(0,Rr.jsx)(Tw,{className:"font-semibold",children:"Due Date"}),(0,Rr.jsx)(Tw,{className:"font-semibold",children:"Invoice Number"}),(0,Rr.jsx)(Tw,{className:"text-right font-semibold",children:"Invoice Amount"}),(0,Rr.jsx)(Tw,{className:"text-right font-semibold",children:"Amount Settled"})]})}),(0,Rr.jsx)(Cw,{children:r.map((e=>(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)(C$,{checked:n.some((t=>t._id===e._id)),onCheckedChange:t=>a(e,t)})}),(0,Rr.jsx)(Dw,{className:"font-semibold",children:new Date(e.invoiceDate).toLocaleDateString()}),(0,Rr.jsx)(Dw,{className:"font-semibold",children:e.paymentDueDate?new Date(e.paymentDueDate).toLocaleDateString():"-"}),(0,Rr.jsx)(Dw,{className:"font-semibold",children:e.invoiceNumber}),(0,Rr.jsxs)(Dw,{className:"text-right font-semibold",children:["\u20b9",e.grandTotal.toLocaleString()," ",(0,Rr.jsxs)("span",{className:"text-red-500 ml-1 font-semibold",children:["(\u20b9",JY(e.grandTotal-e.amountPaid).toLocaleString()," ","pending)"]})]}),(0,Rr.jsxs)(Dw,{className:"text-right font-semibold",children:["\u20b9",e.amountPaid.toLocaleString()]})]},e._id)))}),(0,Rr.jsx)(kw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Dw,{colSpan:4,className:"font-semibold",children:"Total"}),(0,Rr.jsxs)(Dw,{className:"text-right font-semibold",children:["\u20b9",JY(r.reduce(((e,t)=>e+t.grandTotal),0)).toLocaleString()]}),(0,Rr.jsxs)(Dw,{className:"text-right font-semibold",children:["\u20b9",JY(r.reduce(((e,t)=>e+t.amountPaid),0)).toLocaleString()]})]})})]})},JY=e=>Math.round(100*(e+Number.EPSILON))/100;function ZY(){const e=Z(),{distributors:r,fetchStatus:n}=$e((e=>e.distributor)),[a,s]=(0,t.useState)([]),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(""),d=(0,t.useRef)(null),u=rt(),{toast:h}=$g(),{distributorId:f}=ee(),[m,p]=(0,t.useState)((()=>new Intl.DateTimeFormat("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date).split("/").reverse().join("-"))),[x,v]=(0,t.useState)(!1),[g,y]=(0,t.useState)([]),[b,w]=(0,t.useState)(),[N,j]=(0,t.useState)(""),[S,C]=(0,t.useState)(""),[k,E]=(0,t.useState)(!1);(0,t.useEffect)((()=>{"idle"===n&&u(ph())}),[n,u]);const T=(0,t.useCallback)((async e=>{v(!0);try{const t=await fetch(`${Nu}/api/payment/pending-invoices/${e}?bill_type=purchase`,{credentials:"include"}),r=await t.json();s(r)}catch(t){}finally{v(!1)}}),[v,s]);(0,t.useEffect)((()=>{if(f&&r.length>0){const e=r.find((e=>e._id===f));e&&(o(e),c(e.name),T(e._id))}}),[f,r,T,o,c]),(0,t.useEffect)((()=>{(async()=>{const e=await fetch(`${Nu}/api/payment/payment-number`,{credentials:"include"}),t=await e.json();C(t.paymentNumber)})()}),[]);return(0,Rr.jsxs)("div",{className:"w-full max-w-7xl mx-auto p-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>e(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-xl font-semibold",children:"Create Payment"})]}),(0,Rr.jsx)("div",{className:"flex items-center gap-2",children:(0,Rr.jsxs)(Vn,{onClick:async()=>{i?b<=0?h({title:"Payment amount must be greater than 0",variant:"destructive"}):S?E(!0):h({title:"Please enter a payment out number",variant:"destructive"}):h({title:"Select distributor",variant:"destructive"})},children:[(0,Rr.jsx)(Aw,{className:"h-4 w-4"}),"Create Payment"]})})]}),(0,Rr.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[(0,Rr.jsxs)(Kf,{className:"p-4 space-y-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("label",{className:"text-sm text-muted-foreground font-semibold",children:"Distributor Name"}),(0,Rr.jsx)("div",{className:"relative",children:(0,Rr.jsx)(lK,{suggestions:r,placeholder:"Search distributor by name",value:l,setValue:c,onSuggestionSelect:e=>{o(e),c(e.name),T(e._id)},ref:d,showAmount:!0})})]}),i&&(0,Rr.jsxs)("div",{className:"text-sm text-muted-foreground font-semibold",children:["Current Balance:"," ",PP(null===i||void 0===i?void 0:i.currentBalance)]}),(0,Rr.jsxs)("div",{className:"space-y-2 font-semibold",children:[(0,Rr.jsx)("label",{className:"text-sm text-muted-foreground ",children:"Payment Amount"}),(0,Rr.jsx)(Gf,{type:"number",value:b||"",disabled:0!==g.length,onChange:e=>{const t=e.target.value;w(""===t?"":Number(t))},placeholder:"0"})]})]}),(0,Rr.jsxs)(Kf,{className:"p-4 space-y-4 font-semibold",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("label",{className:"text-sm text-muted-foreground font-semibold",children:"Payment Date"}),(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Bw,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,Rr.jsx)(Gf,{type:"date",value:m,onChange:e=>p(e.target.value),className:"pl-8"})]})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("label",{className:"text-sm text-muted-foreground ",children:"Payment Out Number"}),(0,Rr.jsx)(Gf,{value:S,onChange:e=>C(e.target.value),placeholder:"Enter..."})]})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("label",{className:"text-sm text-muted-foreground font-semibold",children:"Remarks"}),(0,Rr.jsx)(wN,{placeholder:"Enter Remarks",className:"resize-none",value:N,onChange:e=>j(e.target.value)})]})]})]}),(0,Rr.jsxs)("div",{className:"space-y-4 font-semibold",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rr.jsx)("h2",{className:"text-lg font-semibold",children:"Settle invoices with this payment"}),i&&a.length>0&&(0,Rr.jsxs)("div",{className:"relative w-64",children:[(0,Rr.jsx)(VN,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,Rr.jsx)(Gf,{className:"pl-8",placeholder:"Search Invoice Number"})]})]}),i?(0,Rr.jsx)(QY,{isLoadingBills:x,pendingInvoices:a,selectedBills:g,onBillSelection:(e,t)=>{if(t){const t=[...g,e];y(t);const r=JY(t.reduce(((e,t)=>e+(t.grandTotal-t.amountPaid)),0));w(r)}else{const t=g.filter((t=>t._id!==e._id));y(t);const r=JY(t.reduce(((e,t)=>e+(t.grandTotal-t.amountPaid)),0));w(r)}}}):(0,Rr.jsx)("div",{className:"border rounded-md",children:(0,Rr.jsxs)("div",{className:"h-[400px] flex flex-col items-center justify-center text-muted-foreground",children:[(0,Rr.jsx)(XY,{className:"h-12 w-12 mb-4"}),(0,Rr.jsx)("p",{className:"text-lg font-semibold",children:"Select a distributor to view pending invoices"})]})})]}),(0,Rr.jsx)(LY,{open:k,onOpenChange:E,paymentData:{paymentType:"Payment Out",distributorId:null===i||void 0===i?void 0:i._id,paymentDate:m,amount:JY(b),remarks:N,paymentNumber:S,bills:g.map((e=>({billId:e._id,amount:JY(e.grandTotal-e.amountPaid),billNumber:e.invoiceNumber})))}})]})}const eX=rm("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);function tX(){var e,r;const n=Z(),{paymentId:a}=ee(),{toast:s}=$g(),[i,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)(!1),h=rt(),{deletePaymentStatus:f}=$e((e=>e.payment));(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch(`${Nu}/api/payment/details/${a}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch payment details");const t=await e.json();o(t)}catch(e){console.error("Error fetching payment details:",e)}finally{c(!1)}})()}),[a]);return l?(0,Rr.jsxs)("div",{className:"h-screen flex items-center justify-center",children:[(0,Rr.jsx)(um,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,Rr.jsx)("span",{className:"ml-2 text-lg text-gray-700",children:"Loading invoice..."})]}):i?(0,Rr.jsxs)("div",{className:"container mx-auto p-4 space-y-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>n(-1),children:(0,Rr.jsx)(Mw,{className:"h-4 w-4"})}),(0,Rr.jsx)("div",{className:"flex items-center",children:(0,Rr.jsx)("h1",{className:"text-xl font-semibold",children:"Payment Details"})})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",className:"text-sm gap-2 px-4",onClick:()=>n("/payment/invoice-print",{state:{paymentData:i}}),children:[(0,Rr.jsx)(eX,{className:"h-4 w-4"}),"Print Receipt"]}),(0,Rr.jsxs)(Tj,{open:d,onOpenChange:u,children:[(0,Rr.jsx)(Dj,{asChild:!0,children:(0,Rr.jsx)(Vn,{variant:"outline",size:"icon",className:"text-destructive",children:(0,Rr.jsx)(oK,{className:"h-4 w-4"})})}),(0,Rr.jsxs)(_j,{className:"max-w-xl p-0 gap-0",children:[(0,Rr.jsxs)(Rj,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:[(0,Rr.jsx)(Mj,{className:"text-base font-semibold",children:"Delete Payment"}),(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>u(!1),children:(0,Rr.jsx)(jN,{className:"h-4 w-4"})})]}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsx)(Oj,{children:"Are you sure you want to delete this payment? This action will revert all associated transactions and cannot be undone."})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{disabled:"loading"===f,onClick:()=>u(!1),variant:"outline",size:"sm",className:"px-4",children:"Cancel"}),(0,Rr.jsx)(Vn,{onClick:async()=>{try{await h(bf(a)).unwrap(),u(!1),s({title:"Payment deleted successfully",variant:"success"}),n(-1)}catch(e){s({title:"Failed to delete payment",variant:"destructive"})}},size:"sm",disabled:"loading"===f,className:"bg-destructive text-white hover:bg-destructive/90 px-4",children:"loading"===f?"Deleting...":"Delete"})]})]})]})]})]}),(0,Rr.jsxs)(Kf,{children:[(0,Rr.jsxs)(Yf,{className:"flex flex-row items-center gap-4",children:[(0,Rr.jsx)(Xf,{className:"text-base font-medium",children:"Payment Details"}),(0,Rr.jsx)(qw,{variant:"COMPLETED"===i.status?"success":"PENDING"===i.status?"warning":"FAILED"===i.status?"destructive":"secondary",children:i.status})]}),(0,Rr.jsx)(Jf,{className:"space-y-6",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"DISTRIBUTOR NAME"}),(0,Rr.jsx)("p",{className:"font-medium",children:(null===i||void 0===i?void 0:i.distributorName)||(null===i||void 0===i?void 0:i.customerName)||"-"})]}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"PAYMENT DATE"}),(0,Rr.jsxs)("p",{className:"font-medium",children:[jc(new Date(i.paymentDate),"dd-MM-yyyy")," ",jc(new Date(i.createdAt),"hh:mm a")]})]}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"PAYMENT AMOUNT"}),(0,Rr.jsx)("p",{className:"font-medium",children:PP(i.amount)})]}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"PAYMENT NUMBER"}),(0,Rr.jsx)("p",{className:"font-medium",children:i.paymentNumber})]}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"PAYMENT TYPE"}),(0,Rr.jsx)("p",{className:"font-medium",children:i.paymentType})]}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"PAYMENT METHOD"}),(0,Rr.jsx)("p",{className:"font-medium",children:i.paymentMethod})]}),"CHEQUE"===i.paymentMethod&&(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"CHEQUE NUMBER"}),(0,Rr.jsx)("p",{className:"font-medium",children:i.chequeNumber})]}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"CHEQUE DATE"}),(0,Rr.jsxs)("p",{className:"font-medium",children:[i.chequeDate&&jc(new Date(i.chequeDate),"dd-MM-yyyy")," ",jc(new Date(i.chequeDate),"hh:mm a")]})]}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"MICR CODE"}),(0,Rr.jsx)("p",{className:"font-medium",children:i.micrCode||"N/A"})]})]}),("UPI"===i.paymentMethod||"BANK"===i.paymentMethod)&&(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"TRANSACTION NUMBER"}),(0,Rr.jsx)("p",{className:"font-medium",children:i.transactionNumber})]}),(0,Rr.jsxs)("div",{className:"space-y-1",children:[(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"REMARKS"}),(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:i.remarks||"No remarks added"})]})]})})]}),(0,Rr.jsxs)(Kf,{children:[(0,Rr.jsx)(Yf,{children:(0,Rr.jsx)(Xf,{className:"text-base font-medium",children:"Invoices settled with this payment"})}),(0,Rr.jsx)(Jf,{children:0===i.bills.length&&0===(null===(e=i.salesBills)||void 0===e?void 0:e.length)?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[(0,Rr.jsx)($N,{className:"h-12 w-12 mb-2"}),(0,Rr.jsx)("p",{children:"No invoices have been settled with this payment"})]}):(0,Rr.jsxs)("div",{className:"space-y-6",children:[i.bills.length>0&&(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Purchase Bills"}),(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{children:"Date"}),(0,Rr.jsx)(Tw,{children:"Invoice Number"}),(0,Rr.jsx)(Tw,{children:"Invoice Type"}),(0,Rr.jsx)(Tw,{children:"Grand Total"}),(0,Rr.jsx)(Tw,{children:"Amount Paid"}),(0,Rr.jsx)(Tw,{children:"Due Amount"}),(0,Rr.jsx)(Tw,{children:"Payment Status"})]})}),(0,Rr.jsx)(Cw,{children:i.bills.map((e=>{var t,r,a;return(0,Rr.jsxs)(Ew,{onClick:()=>n(`/purchase/${e._id}`),className:"cursor-pointer",children:[(0,Rr.jsx)(Dw,{children:new Date(e.invoiceDate).toLocaleDateString()}),(0,Rr.jsx)(Dw,{children:e.invoiceNumber}),(0,Rr.jsx)(Dw,{children:e.invoiceType}),(0,Rr.jsxs)(Dw,{children:["\u20b9",null===(t=e.grandTotal)||void 0===t?void 0:t.toLocaleString("en-IN")]}),(0,Rr.jsxs)(Dw,{children:["\u20b9",null===(r=e.amountPaid)||void 0===r?void 0:r.toLocaleString("en-IN")]}),(0,Rr.jsxs)(Dw,{children:["\u20b9",null===(a=e.grandTotal-e.amountPaid)||void 0===a?void 0:a.toLocaleString("en-IN")]}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)(qw,{variant:"paid"===e.paymentStatus?"success":"destructive",className:"capitalize",children:e.paymentStatus})})]},e._id)}))})]})]}),(null===(r=i.salesBills)||void 0===r?void 0:r.length)>0&&(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Sales Bills"}),(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{children:"Date"}),(0,Rr.jsx)(Tw,{children:"Invoice Number"}),(0,Rr.jsx)(Tw,{children:"Sale Type"}),(0,Rr.jsx)(Tw,{children:"Grand Total"}),(0,Rr.jsx)(Tw,{children:"Amount Paid"}),(0,Rr.jsx)(Tw,{children:"Due Amount"}),(0,Rr.jsx)(Tw,{children:"Payment Status"})]})}),(0,Rr.jsx)(Cw,{children:i.salesBills.map((e=>{var t,r,a;return(0,Rr.jsxs)(Ew,{onClick:()=>n(`/sales/${e._id}`),className:"cursor-pointer",children:[(0,Rr.jsx)(Dw,{children:new Date(e.invoiceDate).toLocaleDateString()}),(0,Rr.jsx)(Dw,{children:e.invoiceNumber}),(0,Rr.jsx)(Dw,{className:"capitalize",children:e.saleType}),(0,Rr.jsxs)(Dw,{children:["\u20b9",null===(t=e.grandTotal)||void 0===t?void 0:t.toLocaleString("en-IN")]}),(0,Rr.jsxs)(Dw,{children:["\u20b9",null===(r=e.amountPaid)||void 0===r?void 0:r.toLocaleString("en-IN")]}),(0,Rr.jsxs)(Dw,{children:["\u20b9",null===(a=e.grandTotal-e.amountPaid)||void 0===a?void 0:a.toLocaleString("en-IN")]}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)(qw,{variant:"paid"===e.paymentStatus?"success":"destructive",className:"capitalize",children:e.paymentStatus})})]},e._id)}))})]})]})]})})]})]}):(0,Rr.jsx)("div",{children:"Payment not found"})}const rX=rm("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);function nX(e){let{open:r,onOpenChange:n,refundData:a,onSubmit:s,loadingStatus:i}=e;const o=rt(),{accounts:l,fetchStatus:c}=$e((e=>e.accounts)),[d,u]=(0,t.useState)(1),[h,f]=(0,t.useState)(1),m=(0,t.useRef)({}),[p,x]=(0,t.useState)(null),[v,g]=(0,t.useState)({amount:"",method:"CASH",accountId:"",chequeNumber:"",chequeDate:new Date,micrCode:"",transactionNumber:""});(0,t.useEffect)((()=>{"idle"===c&&o(kh()).unwrap().catch((e=>x("Failed to fetch accounts: "+e.message)))}),[o,c]),(0,t.useEffect)((()=>{if(r&&a){if(x(null),u(1),f(1),g({amount:a.refundableAmount||0,method:"CASH",accountId:"",chequeNumber:"",chequeDate:new Date,micrCode:"",transactionNumber:""}),l&&l.length>0){const e=l.find((e=>"CASH"===e.accountType));e&&f(l.indexOf(e)+1)}setTimeout((()=>{null!==m&&void 0!==m&&m.current.nextButton&&(null===m||void 0===m||m.current.nextButton.focus())}),100)}}),[r,a,l]);const y=e=>{let t,r="";if("CHEQUE"===e)t="CHEQUE",r=null;else if(e.startsWith("ACCOUNT_")){r=e.replace("ACCOUNT_","");const n=l.find((e=>e._id===r));switch(null===n||void 0===n?void 0:n.accountType){case"BANK":default:t="BANK";break;case"UPI":t="UPI";break;case"CASH":t="CASH"}}g((e=>({...e,method:t,accountId:r,chequeNumber:"CHEQUE"===t?e.chequeNumber:"",chequeDate:"CHEQUE"===t?e.chequeDate:null,micrCode:"CHEQUE"===t?e.micrCode:"",transactionNumber:""}))),u(2),"CHEQUE"===t&&setTimeout((()=>{m.current.chequeNumber&&m.current.chequeNumber.focus()}),100)},b=()=>{switch(v.method){case"CHEQUE":return v.chequeNumber&&""!==v.chequeNumber.trim()&&v.chequeDate;case"BANK":case"UPI":return v.accountId;case"CASH":return v.accountId&&""!==v.accountId.trim();default:return!1}},w=(e,t)=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),"nextButton"===t?m.current.nextButton&&m.current.nextButton.focus():t&&m.current[t]&&m.current[t].focus())};return(0,t.useEffect)((()=>{const e=e=>{if(1!==d)return;const t=l.length+1;switch(e.key){case"ArrowUp":e.preventDefault(),f((e=>(e-1+t)%t));break;case"ArrowDown":e.preventDefault(),f((e=>(e+1)%t));break;case"Enter":if(e.preventDefault(),0===h)y("CHEQUE");else{const e=l[h-1];y(`ACCOUNT_${e._id}`)}}};if(1===d)return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[d,h,l]),(0,Rr.jsx)(WN,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(XN,{className:"max-w-[450px] p-0 gap-0 font-semibold",children:[(0,Rr.jsx)(QN,{className:"px-4 py-2.5 flex flex-row items-center bg-gray-100 border-b",children:(0,Rr.jsxs)("div",{className:"flex items-center flex-1",children:[d>1&&(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-8 w-8 mr-2 -ml-2",onClick:()=>{2===d&&(u(1),g((e=>({...e,method:"CASH",accountId:""}))))},children:(0,Rr.jsx)(Mw,{className:"h-4 w-4"})}),(0,Rr.jsx)(ZN,{className:"text-base font-semibold",children:1===d?"Process Refund":"Enter Refund Details"})]})}),(0,Rr.jsx)(Hj,{}),p&&(0,Rr.jsx)("div",{className:"p-3 bg-red-50 text-red-600 text-sm",children:p}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(dp,{className:"h-[400px]",children:1===d?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-2 py-3 px-4 bg-gray-50 rounded-lg",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm",children:"Distributor"}),(0,Rr.jsx)(Gf,{value:(null===a||void 0===a?void 0:a.distributorName)||"N/A",disabled:!0,className:"font-bold border-gray-500 bg-white"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm",children:"Refundable Amount"}),(0,Rr.jsx)(Gf,{value:PP((null===a||void 0===a?void 0:a.refundableAmount)||0),disabled:!0,className:"font-bold border-gray-500 text-green-600 bg-white"})]})]}),(0,Rr.jsx)("div",{className:"space-y-3 px-4 mt-0",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[l.map(((e,t)=>{var r,n,a,s;return(0,Rr.jsx)("div",{className:Un("flex items-center justify-between rounded-md border border-muted bg-popover p-3 hover:bg-blue-100/70 hover:border-blue-600 cursor-pointer transition-all duration-200",h===t+1&&"border-blue-500 bg-blue-100 hover:border-blue-500 hover:bg-blue-100"),onClick:()=>{f(t+1),y(`ACCOUNT_${e._id}`)},children:(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-blue-100",children:"BANK"===e.accountType?(0,Rr.jsx)(AY,{size:18,className:"text-blue-600"}):"UPI"===e.accountType?(0,Rr.jsx)(vm,{size:18,className:"text-blue-600"}):(0,Rr.jsx)(Yy,{size:18,className:"text-blue-600"})}),(0,Rr.jsx)("div",{className:"flex-1",children:(0,Rr.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"BANK"===e.accountType?(null===(r=e.bankDetails)||void 0===r?void 0:r.bankName)||"Bank Account":"UPI"===e.accountType?(null===(n=e.upiDetails)||void 0===n?void 0:n.upiName)||"UPI Account":`${e.accountType} Account`}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"BANK"===e.accountType?null===(a=e.bankDetails)||void 0===a?void 0:a.accountNumber:"UPI"===e.accountType?null===(s=e.upiDetails)||void 0===s?void 0:s.upiId:""})]}),(0,Rr.jsx)("p",{className:"text-sm font-medium text-green-600 whitespace-nowrap",children:PP(e.balance||0)})]})})]})},e._id)})),(0,Rr.jsx)("div",{className:Un("flex items-center justify-between rounded-md border border-muted bg-popover p-3 hover:bg-blue-100/70 hover:border-blue-300 cursor-pointer transition-all duration-200",0===h&&"border-blue-500 bg-blue-100"),onClick:()=>{f(0),y("CHEQUE")},children:(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-purple-100",children:(0,Rr.jsx)(sm,{size:18,className:"text-purple-600"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"Cheque Refund"}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"Refund by cheque"})]})]})})]})})]}):(0,Rr.jsx)("div",{className:"space-y-3 px-4 mt-2",children:(()=>{if(!v.method)return null;if("CASH"===v.method)return(0,Rr.jsx)("div",{className:"space-y-4",children:(0,Rr.jsx)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-md",children:(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-green-100",children:(0,Rr.jsx)(DY,{size:18,className:"text-green-600"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"Cash Refund"}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ready to submit"})]})]})})});if("CHEQUE"===v.method)return(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsx)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-md",children:(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-purple-100",children:(0,Rr.jsx)(sm,{size:18,className:"text-purple-600"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"Cheque Refund"}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter cheque details"})]})]})}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Cheque Number"}),(0,Rr.jsx)(Gf,{placeholder:"Enter cheque number",value:v.chequeNumber,onChange:e=>g({...v,chequeNumber:e.target.value}),onKeyDown:e=>w(e,"micrCode"),ref:e=>m.current.chequeNumber=e,required:!0})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"MICR Code (Optional)"}),(0,Rr.jsx)(Gf,{placeholder:"Enter MICR code",value:v.micrCode,onChange:e=>g({...v,micrCode:e.target.value}),onKeyDown:e=>w(e,"chequeDate"),ref:e=>m.current.micrCode=e})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Cheque Date"}),(0,Rr.jsx)(Gf,{type:"date",value:v.chequeDate?jc(v.chequeDate,"yyyy-MM-dd"):"",onChange:e=>g({...v,chequeDate:new Date(e.target.value)}),className:"w-full",onKeyDown:e=>w(e,"nextButton"),ref:e=>m.current.chequeDate=e,required:!0})]})]});if("BANK"===v.method||"UPI"===v.method){var e,t,r,n;const a=l.find((e=>e._id===v.accountId));return a?(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-100 rounded-md",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsx)("div",{className:"p-1.5 rounded-full bg-blue-100",children:"BANK"===a.accountType?(0,Rr.jsx)(AY,{size:18,className:"text-blue-600"}):"UPI"===a.accountType?(0,Rr.jsx)(vm,{size:18,className:"text-blue-600"}):(0,Rr.jsx)(Yy,{size:18,className:"text-blue-600"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"BANK"===a.accountType?(null===(e=a.bankDetails)||void 0===e?void 0:e.bankName)||"Bank Account":"UPI"===a.accountType?(null===(t=a.upiDetails)||void 0===t?void 0:t.upiName)||"UPI Account":`${a.accountType} Account`}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground",children:"BANK"===a.accountType?null===(r=a.bankDetails)||void 0===r?void 0:r.accountNumber:"UPI"===a.accountType?null===(n=a.upiDetails)||void 0===n?void 0:n.upiId:""})]})]}),(0,Rr.jsx)("p",{className:"text-sm font-medium text-green-600",children:PP(a.balance||0)})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Transaction Number (Optional)"}),(0,Rr.jsx)(Gf,{placeholder:"Enter transaction number",value:v.transactionNumber,onChange:e=>g({...v,transactionNumber:e.target.value}),onKeyDown:e=>w(e,"nextButton"),ref:e=>m.current.transactionNumber=e})]})]}):null}})()})})}),(0,Rr.jsx)("div",{className:"p-3 bg-gray-100 border-t",children:(0,Rr.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>n(!1),disabled:"loading"===i,children:"Cancel"}),(0,Rr.jsx)(Vn,{size:"sm",ref:e=>m.current.nextButton=e,onClick:()=>{if(1===d){if(0===h)y("CHEQUE");else if(h>0&&l[h-1]){const e=l[h-1];y(`ACCOUNT_${e._id}`)}}else 2===d&&b()&&(()=>{if(!b()){let e="Please complete the required refund details.";return"CHEQUE"!==v.method||v.chequeNumber&&v.chequeDate?["CASH","BANK","UPI"].includes(v.method)&&!v.accountId&&(e="Please select an account for the refund."):e="Please enter both Cheque Number and Cheque Date.",void x(e)}const e={amount:v.amount,method:v.method,accountId:"CHEQUE"!==v.method?v.accountId:null,chequeNumber:"CHEQUE"===v.method?v.chequeNumber:null,chequeDate:"CHEQUE"===v.method?v.chequeDate:null,micrCode:"CHEQUE"===v.method?v.micrCode:null,transactionNumber:v.transactionNumber||null};s(e)})()},disabled:2===d&&!b()||"loading"===i,className:"bg-blue-600 text-white hover:bg-blue-700",children:"loading"===i?"Processing...":2===d?"Submit Refund":"Next"})]})})]})})}const aX=()=>{const[e,r]=(0,t.useState)([]),n=Z(),{toast:a}=$g(),[s,i]=(0,t.useState)((new Date).toLocaleDateString("en-IN",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")),[o,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)(!0),[u,h]=(0,t.useState)(!1),[f,m]=(0,t.useState)(""),[p,x]=(0,t.useState)({}),[v,g]=(0,t.useState)({distributorName:"",distributorId:"",invoiceNumber:"",invoiceId:"",invoiceDate:""}),y=rt(),[b,w]=(0,t.useState)(!1),[N,j]=(0,t.useState)({title:"",description:""}),[S,C]=(0,t.useState)(!1),[k,E]=(0,t.useState)(null),[T,D]=(0,t.useState)(!1),[A,P]=(0,t.useState)(null),[_,R]=(0,t.useState)(""),I=(0,t.useRef)({}),M=Q(),O=["itemName","batchNo","pack","expiry","mrp","qty","pricePerItem","discount","effPurRate","gst"],F=(0,t.useCallback)(((t,r,n)=>{var a;if("Enter"!==t.key||0===e.length)return;t.preventDefault();let s=r,i=O.indexOf(n);t.shiftKey?(i--,i<0&&(i=O.length-1,s--,s<0&&(s=e.length-1))):(i++,i>=O.length&&(i=0,s++,s>=e.length&&(s=0)));const o=null===(a=e[s])||void 0===a?void 0:a.id;if(void 0===o)return;const l=O[i],c=document.querySelector(`[data-row-id="${o}"] [data-field="${l}"]`);null===c||void 0===c||c.focus()}),[e,O]),L=(e,t,n)=>{r((r=>r.map((r=>{if(r.id===e){let a={...r,[t]:n};if("productSelection"===t&&(a={...a,itemName:n.name,inventoryId:n._id,batchNo:"",batchId:"",expiry:"",mrp:"",pack:"",pricePerItem:"",gst:"",effPurRate:"",amount:"0"},delete a.productSelection),"batchSelection"===t){const e=n;a={...a,batchNo:e.batchNumber,batchId:e._id,expiry:e.expiry,mrp:e.mrp||"",pack:e.pack||"",discount:e.discount||"",pricePerItem:e.purchaseRate||"",gst:e.gstPer||""},delete a.batchSelection;const t=parseFloat(a.pricePerItem)||0,r=parseFloat(a.discount)||0;a.effPurRate=c?t-t*r/100:t;const s=parseFloat(a.qty)||0,i=(parseFloat(a.effPurRate)||0)*s;a.amount=i.toFixed(2)}if("expiry"===t){const t=(e=>e?/^(0[1-9]|1[0-2])\/([0-9]{2})$/.test(e)?{valid:!0,message:""}:{valid:!1,message:"Use MM/YY format"}:{valid:!0,message:""})(n);x((r=>{const n={...r};var a;t.valid?(null===(a=n[e])||void 0===a||delete a.expiry,0===Object.keys(n[e]||{}).length&&delete n[e]):n[e]={...n[e],expiry:t.message};return n}))}if(("pricePerItem"===t||"discount"===t)&&"batchSelection"!==t){const e=parseFloat("pricePerItem"===t?n:r.pricePerItem)||0,s=parseFloat("discount"===t?n:r.discount)||0;a.effPurRate=c?e-e*s/100:e}if(("qty"===t||"pricePerItem"===t||"effPurRate"===t||"pack"===t||"gst"===t)&&"batchSelection"!==t){const e=parseFloat("qty"===t?n:a.qty)||0,r=(parseFloat(a.effPurRate)||0)*e;a.amount=r.toFixed(2)}return"itemName"===t&&!a.inventoryId&&a.isManual&&(a={...a,inventoryId:"",batchNo:"",batchId:"",expiry:"",mrp:"",pack:"",pricePerItem:"",gst:"",effPurRate:"",amount:"0"}),"batchNo"===t&&!a.batchId&&a.isManual&&(a={...a,batchId:"",expiry:"",mrp:"",pack:"",pricePerItem:"",gst:"",effPurRate:"",amount:"0"}),a}return r}))))},B=(e,t)=>{const r=e.target.value;L(t,"itemName",r),R(r),P(t),1===r.length&&" "===r?(e.preventDefault(),R(""),D(!0)):r.length>0&&" "!==r[0]?D(!0):(D(!1),L(t,"itemName",""))};(0,t.useEffect)((()=>{const e=new URLSearchParams(M.search),t=e.get("distributorId"),r=e.get("invoiceNumber"),n=e.get("distributorName");t&&r&&n&&(m(n),g({...v,distributorId:t,invoiceNumber:r,distributorName:n}),U(t,r))}),[M.search]);const U=async(e,t)=>{const n=v.distributorId||e,s=v.invoiceNumber||t;if(n&&s)try{const e=await y(mf({distributorId:n,invoiceNumber:s})).unwrap(),{invoiceDetails:t,products:a}=e;g((e=>({...e,invoiceId:t._id,distributorName:t.distributorName,distributorId:t.distributorId,invoiceNumber:t.invoiceNumber,invoiceDate:t.invoiceDate})));const i=a.map(((e,t)=>{var r;const n=parseFloat(e.purchaseRate)||0,a=parseFloat(e.discount)||0,s=c?n-n*a/100:n,i=parseFloat(e.pack)||1,o=(parseFloat(e.quantity)||0)/i,l=s*o;return{id:e._id||`inv-${t}`,inventoryId:(null===(r=e.inventoryId)||void 0===r?void 0:r._id)||e.inventoryId,itemName:e.productName,batchId:e.batchId,batchNo:e.batchNumber,pack:i,expiry:e.expiry||"",mrp:e.mrp||"",qty:o,pricePerItem:n,discount:a,effPurRate:s,gst:e.gstPer||"",amount:l.toFixed(2),isManual:!1}}));r(i),x({})}catch(i){a({title:"Failed to search invoice",description:i.message||"An unexpected error occurred.",variant:"destructive"})}else a({title:"Please select distributor and enter invoice number",variant:"destructive"})};(0,t.useEffect)((()=>{r((e=>e.map((e=>{const t=parseFloat(e.pricePerItem)||0,r=parseFloat(e.discount)||0;let n=c?t-t*r/100:t;const a=n*(parseFloat(e.qty)||0);return Math.abs(n-e.effPurRate)>.001?{...e,effPurRate:n,amount:a.toFixed(2)}:e}))))}),[c,o]);const z=()=>{const t=e.reduce(((e,t)=>{const r=parseFloat(t.qty)||0,n=r*(parseFloat(t.effPurRate)||0),a=parseFloat(t.gst)||0,s=o?n*a/100:0,i=n+s;parseFloat(t.pack);return{products:e.products+1,totalQuantity:e.totalQuantity+r,discount:e.discount,taxableAmount:e.taxableAmount+n,cgstSgst:e.cgstSgst+s,total:e.total+i}}),{products:0,totalQuantity:0,discount:0,taxableAmount:0,cgstSgst:0,total:0}),r=Math.round(t.total),n=(r-t.total).toFixed(2);return{...t,total:r,refundableAmt:r,roundOff:parseFloat(n)}},V=async()=>{if(e.some((e=>{var t;return null===(t=p[e.id])||void 0===t?void 0:t.expiry})))return void a({title:"Invalid Expiry Date Format",description:"Please correct the highlighted expiry dates (MM/YY).",variant:"destructive"});if(0===e.length)return void a({title:"No Items Added",description:"Please add items to the return.",variant:"destructive"});if(e.some((e=>e.isManual&&(!e.inventoryId||!e.batchId||!e.qty||isNaN(parseFloat(e.qty))||parseFloat(e.qty)<=0))))return void a({title:"Incomplete Manual Items",description:"Please ensure all manually added items have a product, batch, and a valid quantity (> 0).",variant:"destructive"});const t=z();t.refundableAmt>0?(E({refundableAmount:t.refundableAmt,distributorName:v.distributorName||"Selected Distributor",distributorId:v.distributorId}),C(!0)):await(async()=>{try{const t=z(),r=e.map((e=>({inventoryId:e.inventoryId,batchId:e.batchId,productName:e.itemName,batchNumber:e.batchNo,expiry:e.expiry,HSN:e.HSN||"",mrp:parseFloat(e.mrp)||0,quantity:parseFloat(e.qty)||0,pack:parseFloat(e.pack)||1,purchaseRate:parseFloat(e.pricePerItem)||0,discount:parseFloat(e.discount)||0,gstPer:parseFloat(e.gst)||0,amount:parseFloat(e.amount)||0,reason:e.reason||"other"}))),i={subtotal:t.taxableAmount,discountAmount:t.discount,taxableAmount:t.taxableAmount,gstAmount:t.cgstSgst,totalQuantity:t.totalQuantity,productCount:t.products,grandTotal:t.total,roundOff:t.roundOff,gstSummary:H(e)},l={returnDate:s,distributorId:v.distributorId||null,...v.invoiceId&&v.invoiceNumber&&{originalInvoice:v.invoiceId,originalInvoiceNumber:v.invoiceNumber,originalInvoiceDate:v.invoiceDate},products:r,claimGSTInReturn:o,adjustRateForDisc:c,billSummary:i,refundDetails:null};await y(sf(l)).unwrap(),a({title:"Purchase return created successfully",variant:"success"}),n("/purchase/return")}catch(t){a({title:"Failed to create purchase return",description:t.message||"An unexpected error occurred.",variant:"destructive"})}})()},H=e=>{const t=[0,5,12,18,28],r={};return t.forEach((e=>{r[e]={taxable:0,cgst:0,sgst:0,igst:0,total:0}})),e.forEach((e=>{const n=parseFloat(e.gst),a=(parseFloat(e.qty)||0)*(parseFloat(e.effPurRate)||0);if(!isNaN(n)&&t.includes(n))if(r[n].taxable+=a,o){const e=a*n/100;r[n].cgst+=e/2,r[n].sgst+=e/2,r[n].total+=a+e}else r[n].total+=a})),Object.keys(r).forEach((e=>{r[e].taxable=parseFloat(r[e].taxable.toFixed(2)),r[e].cgst=parseFloat(r[e].cgst.toFixed(2)),r[e].sgst=parseFloat(r[e].sgst.toFixed(2)),r[e].igst=parseFloat(r[e].igst.toFixed(2)),r[e].total=parseFloat(r[e].total.toFixed(2))})),r},$=z(),{isCollapsed:W}=$e((e=>e.loader)),{createPurchaseReturnStatus:q}=$e((e=>e.purchaseBill)),{searchByInvoiceStatus:G}=$e((e=>e.purchaseBill));return(0,Rr.jsxs)("div",{className:"relative h-screen flex flex-col",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-gray-300 px-4 pt-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>n(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-xl font-bold",children:"Create Purchase Return"})]}),(0,Rr.jsx)("div",{className:"flex items-center ",children:(0,Rr.jsx)(Vn,{onClick:()=>{const e=!v.distributorId,t=!v.invoiceNumber;if(e||t){let r="";r=e&&t?"Distributor and Invoice Number are not selected. This return will not be linked to an original purchase.":e?"Distributor is not selected. This return will not be linked to an original purchase.":"Invoice Number is not provided. This return may not be correctly linked to the original purchase.",j({title:"Proceed Without Linking?",description:`${r} Do you want to continue?`}),w(!0)}else V()},disabled:"loading"===q,size:"sm",className:"gap-2 px-2",children:"loading"===q?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)("span",{className:"animate-spin",children:"\u23f3"}),"Saving..."]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(nK,{className:"w-4 h-4"}),"Save (Alt + S)"]})})})]}),(0,Rr.jsx)(dp,{className:"flex-1 px-4 pb-20",children:(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,Rr.jsx)("div",{className:"col-span-3 border rounded-lg p-4 font-semibold",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,Rr.jsxs)("div",{className:"col-span-7",children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium mb-2 block",children:"DISTRIBUTOR"}),(0,Rr.jsx)(Gf,{type:"text",placeholder:"Type or Press space",value:f,onChange:e=>{e.preventDefault();const t=e.target.value;m(t),1===t.length&&(" "===t||" "!==t[0]&&0===f.length)&&h(!0)},className:"w-full"})]}),(0,Rr.jsxs)("div",{className:"col-span-3",children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium mb-2 block",children:"INVOICE NO"}),(0,Rr.jsx)(Gf,{type:"text",placeholder:"Enter Invoice No.",value:v.invoiceNumber,onChange:e=>g({...v,invoiceNumber:e.target.value})})]}),(0,Rr.jsx)("div",{className:"col-span-2 flex items-end",children:(0,Rr.jsx)(Vn,{className:"w-full h-10",onClick:U,disabled:"loading"===G,children:"loading"===G?(0,Rr.jsx)("span",{className:"animate-spin",children:"\u23f3"}):"Search"})})]})}),(0,Rr.jsx)("div",{className:"border rounded-lg p-4",children:(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium mb-2 block",children:["RETURN DATE",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,Rr.jsx)(Gf,{type:"date",value:s,onChange:e=>i(e.target.value),className:"w-full"})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(C$,{id:"claim-gst",checked:o,onCheckedChange:l}),(0,Rr.jsx)(yN,{htmlFor:"claim-gst",className:"text-sm",children:"Claim GST in Debit Note"})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(C$,{id:"adjust-rate",checked:c,onCheckedChange:d}),(0,Rr.jsx)(yN,{htmlFor:"adjust-rate",className:"text-sm",children:"Adjust Rate for Disc, Scheme, Free Qty"})]})]})]})})]}),(0,Rr.jsxs)("div",{className:"w-full border-[1px] border-inherit py-4 rounded-sm space-y-2",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-[3fr_2fr_0.75fr_1fr_1fr_0.75fr_1fr_0.5fr_1fr_0.5fr_1fr_50px] w-full gap-1 px-4 items-center",children:[(0,Rr.jsx)("div",{children:(0,Rr.jsx)("p",{className:"text-xs font-semibold ",children:"PRODUCT"})}),(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"BATCH NO"})}),(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"PACK"})}),(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"EXPIRY"})}),(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"MRP"})}),(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"QTY"})}),(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"PUR RATE"})}),(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"DISC %"})}),(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"EFF PUR RATE"})}),(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"GST"})}),(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"AMOUNT"})}),(0,Rr.jsx)("div",{className:"",children:(0,Rr.jsx)("p",{className:"text-xs font-semibold",children:"ACTION"})})]}),(0,Rr.jsx)("div",{className:"w-full space-y-2 px-4",children:e.map(((e,t)=>{var n,a;return(0,Rr.jsxs)("div",{"data-row-id":e.id,className:"grid grid-cols-[3fr_2fr_0.75fr_1fr_1fr_0.75fr_1fr_0.5fr_1fr_0.5fr_1fr_50px] w-full gap-1 items-start relative font-semibold",children:[(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{type:"text",value:e.id===A?_:e.itemName,placeholder:"Type or Press Space","data-row-index":t,"data-field":"itemName",onKeyDown:t=>{" "===t.key&&0===t.target.value.length&&(t.preventDefault(),B(t,e.id))},onChange:t=>B(t,e.id),className:"h-8 w-full border-[1px] border-gray-300 px-1"})}),(0,Rr.jsxs)("div",{"data-field":"batchNo",children:[" ",(0,Rr.jsx)(vK,{inventoryId:e.inventoryId,value:e.batchNo,setValue:t=>L(e.id,"batchNo",t),onSuggestionSelect:t=>((e,t)=>{L(t,"batchSelection",e),setTimeout((()=>{const e=document.querySelector(`[data-row-id="${t}"] [data-field="qty"]`);null===e||void 0===e||e.focus()}),0)})(t,e.id),inputRef:I,disabled:!e.inventoryId})]}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs",children:"1 x"}),(0,Rr.jsx)(Gf,{type:"text",value:e.pack,"data-row-index":t,"data-field":"pack",onKeyDown:e=>F(e,t,"pack"),onChange:t=>L(e.id,"pack",t.target.value),className:"h-8 w-full border-[1px] border-gray-300 px-1 pl-6",readOnly:!e.isManual&&e.batchId})]})}),(0,Rr.jsxs)("div",{className:"relative",children:[" ",(0,Rr.jsx)(Gf,{type:"text",value:e.expiry,placeholder:"MM/YY","data-row-index":t,"data-field":"expiry",onKeyDown:e=>F(e,t,"expiry"),onChange:t=>L(e.id,"expiry",t.target.value),className:"h-8 w-full border-[1px] px-1 "+(null!==(n=p[e.id])&&void 0!==n&&n.expiry?"border-red-500":"border-gray-300"),readOnly:!e.isManual&&e.batchId}),(null===(a=p[e.id])||void 0===a?void 0:a.expiry)&&(0,Rr.jsx)("p",{className:"text-xs text-red-500 absolute -bottom-4 left-0",children:p[e.id].expiry})]}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs",children:"\u20b9"}),(0,Rr.jsx)(Gf,{type:"text",value:e.mrp,"data-row-index":t,"data-field":"mrp",onKeyDown:e=>F(e,t,"mrp"),onChange:t=>L(e.id,"mrp",t.target.value),className:"h-8 w-full border-[1px] border-gray-300 px-1 pl-5",step:"any",readOnly:!e.isManual&&e.batchId})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)(Gf,{type:"text",value:e.qty,placeholder:"Units","data-row-index":t,"data-field":"qty",onKeyDown:e=>F(e,t,"qty"),onChange:t=>L(e.id,"qty",t.target.value),className:"h-8 w-full border-[1px] border-gray-300 px-1",step:"any","data-row-id":e.id})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs",children:"\u20b9"}),(0,Rr.jsx)(Gf,{type:"text",value:e.pricePerItem,"data-row-index":t,"data-field":"pricePerItem",onKeyDown:e=>F(e,t,"pricePerItem"),onChange:t=>L(e.id,"pricePerItem",t.target.value),className:"h-8 w-full border-[1px] border-gray-300 px-1 pl-5",step:"any",readOnly:!e.isManual&&e.batchId})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsx)("div",{className:"relative",children:(0,Rr.jsx)(Gf,{type:"text",value:e.discount,"data-row-index":t,"data-field":"discount",onKeyDown:e=>F(e,t,"discount"),onChange:t=>L(e.id,"discount",t.target.value),className:"h-8 w-full border-[1px] border-gray-300 px-1 pr-5",step:"any"})})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs",children:"\u20b9"}),(0,Rr.jsx)(Gf,{type:"text",value:e.effPurRate,readOnly:!0,className:"h-8 w-full border-[1px] border-gray-300 px-1 pl-5 bg-gray-100",tabIndex:-1,step:"any"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{type:"text",value:e.gst,"data-row-index":t,"data-field":"gst",onKeyDown:e=>F(e,t,"gst"),onChange:t=>L(e.id,"gst",t.target.value),className:"h-8 w-full border-[1px] border-gray-300 px-1 pr-5",step:"any",readOnly:!e.isManual&&e.batchId}),(0,Rr.jsx)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs",children:"%"})]})}),(0,Rr.jsx)("div",{children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-xs",children:"\u20b9"}),(0,Rr.jsx)(Gf,{type:"text",value:e.amount,readOnly:!0,className:"h-8 w-full border-[1px] border-gray-300 px-1 pl-5 bg-gray-100",tabIndex:-1})]})}),(0,Rr.jsx)("div",{className:"flex items-center justify-center",children:(0,Rr.jsx)("button",{onClick:()=>(e=>{r((t=>t.filter((t=>t.id!==e)))),x((t=>{const r={...t};return delete r[e],r}))})(e.id),className:"hover:text-red-500",tabIndex:-1,children:(0,Rr.jsx)(oK,{className:"h-4 w-4"})})})]},e.id)}))}),(0,Rr.jsx)("div",{className:"px-4 pt-2",children:(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>{r((e=>[...e,{id:`new-${Date.now()}-${Math.random().toString(16).slice(2)}`,inventoryId:"",itemName:"",batchId:"",batchNo:"",pack:"",expiry:"",mrp:"",qty:"",pricePerItem:"",discount:0,effPurRate:"",gst:"",amount:"0",isManual:!0}])),setTimeout((()=>{e.length&&e[e.length-1].id;const t=e.find((e=>e.isManual&&!e.inventoryId)),r=t?t.id:null;if(r){const e=document.querySelector(`[data-row-id="${r}"] [data-field="itemName"]`);null===e||void 0===e||e.focus()}}),100)},children:[(0,Rr.jsx)(rX,{size:16})," Add Item"]})})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Rr.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium mb-4 block",children:"DISCOUNT"}),(0,Rr.jsxs)("div",{className:"flex gap-4",children:[(0,Rr.jsx)(Gf,{placeholder:"Value",className:"w-24"}),(0,Rr.jsx)("span",{className:"flex items-center",children:"%"}),(0,Rr.jsx)("span",{className:"flex items-center px-2",children:"OR"}),(0,Rr.jsx)(Gf,{placeholder:"\u20b9 Value",className:"flex-1"})]})]}),(0,Rr.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium mb-4 block",children:"REFUNDABLE AMOUNT"}),(0,Rr.jsx)(Gf,{placeholder:"\u20b9 Value"})]}),(0,Rr.jsx)("div",{className:"flex items-center justify-center p-4 border rounded-lg",children:(0,Rr.jsxs)("div",{className:"text-center",children:[(0,Rr.jsx)("div",{className:"mb-1",children:"Click on Save to Process Return"}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Use 'Alt+S' Key"})]})})]})]})}),(0,Rr.jsxs)("div",{className:`fixed bottom-0 ${W?"w-[calc(100%-95px)]":"w-[calc(100%-225px)]"} text-sm grid grid-cols-8 gap-4 text-white bg-gray-900 rounded-lg transition-all duration-300 text-center`,children:[(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsxs)("div",{children:["Total Products: ",$.products]}),(0,Rr.jsxs)("div",{children:["Total Quantity: ",$.totalQuantity]})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{children:"Taxable"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP($.taxableAmount)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"(-) Discount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP($.discount)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"(+) GST Amount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP($.cgstSgst)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"Round Off"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP($.roundOff)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"Refundable Amt"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP($.refundableAmt)})]}),(0,Rr.jsxs)("div",{className:"py-2",children:[(0,Rr.jsx)("div",{className:"",children:"Balance"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP($.total)})]}),(0,Rr.jsxs)("div",{className:"bg-rose-500 py-2",children:[(0,Rr.jsx)("div",{className:"",children:"Total Amount"}),(0,Rr.jsx)("div",{className:"text-lg",children:PP($.total)})]})]}),(0,Rr.jsx)(CK,{open:T,onOpenChange:D,onSelect:e=>{null!==A&&(L(A,"productSelection",e),setTimeout((()=>{const e=document.querySelector(`[data-row-id="${A}"] [data-field="batchNo"] input#batch-number-input`);null===e||void 0===e||e.focus()}),0)),D(!1),P(null),R("")},search:_,setSearch:R}),(0,Rr.jsx)(bY,{open:u,setOpen:h,search:f,setSearch:m,onSelect:e=>{m(e.name),g({...v,distributorId:e._id,distributorName:e.name}),h(!1)}}),(0,Rr.jsx)(nX,{open:S,onOpenChange:C,refundData:k,onSubmit:async t=>{try{const r=z(),i=e.map((e=>({inventoryId:e.inventoryId,batchId:e.batchId,productName:e.itemName,batchNumber:e.batchNo,expiry:e.expiry,HSN:e.HSN||"",mrp:parseFloat(e.mrp)||0,quantity:parseFloat(e.qty*(e.pack||1))||0,pack:parseFloat(e.pack)||1,purchaseRate:parseFloat(e.pricePerItem)||0,discount:parseFloat(e.discount)||0,gstPer:parseFloat(e.gst)||0,amount:parseFloat(e.amount)||0,reason:e.reason||"other"}))),l={subtotal:r.taxableAmount,discountAmount:r.discount,taxableAmount:r.taxableAmount,gstAmount:r.cgstSgst,totalQuantity:r.totalQuantity,productCount:r.products,grandTotal:r.total,roundOff:r.roundOff,gstSummary:H(e)},d={returnDate:s,distributorId:v.distributorId||null,...v.invoiceId&&v.invoiceNumber&&{originalInvoice:v.invoiceId,originalInvoiceNumber:v.invoiceNumber,originalInvoiceDate:v.invoiceDate},products:i,claimGSTInReturn:o,adjustRateForDisc:c,billSummary:l,refundDetails:t};await y(sf(d)).unwrap(),a({title:"Purchase return created successfully",variant:"success"}),n("/purchase/return")}catch(r){a({title:"Failed to create purchase return",description:r.message||"An unexpected error occurred.",variant:"destructive"})}finally{C(!1)}},loadingStatus:q}),(0,Rr.jsx)(Tj,{open:b,onOpenChange:w,children:(0,Rr.jsxs)(_j,{children:[(0,Rr.jsxs)(Rj,{children:[(0,Rr.jsx)(Mj,{children:N.title}),(0,Rr.jsx)(Oj,{children:N.description})]}),(0,Rr.jsxs)(Ij,{children:[(0,Rr.jsx)(Lj,{children:"No, Cancel"}),(0,Rr.jsx)(Fj,{onClick:V,children:"Yes, Continue"})]})]})})]})},sX={inventoryId:"",batchNumber:"",expiryMonth:"",expiryYear:"",mrp:"",HSN:"",gstPer:"",purchaseRate:"",purchaseGstType:"Excl gst",saleRate:"",saleGstType:"Incl gst",pack:"",packs:"",loose:""},iX=["productName","batchNumber","expiryMonth","expiryYear","mrp","HSN","gstPer","purchaseRate","purchaseGstType","saleRate","saleGstType","pack","packs","loose","submitButton"];function oX(e){let{open:r,onOpenChange:n,inventoryDetails:a,setItemDetails:s,batchDetails:i,setUpdateBatchDetails:o}=e;const l=rt(),{toast:c}=$g(),d=(0,t.useRef)([]),[u,h]=(0,t.useState)(!1),[f,m]=(0,t.useState)(sX);(0,t.useEffect)((()=>{a&&r?(m({...f,inventoryId:null===a||void 0===a?void 0:a._id,pack:(null===a||void 0===a?void 0:a.pack)||""}),g(null===a||void 0===a?void 0:a.name),setTimeout((()=>{var e;null!==d&&void 0!==d&&null!==(e=d.current)&&void 0!==e&&e.batchNumber&&d.current.batchNumber.focus()}),100)):setTimeout((()=>{var e;null!==d&&void 0!==d&&null!==(e=d.current)&&void 0!==e&&e.productName&&d.current.productName.focus()}),100)}),[a,r]),(0,t.useEffect)((()=>{var e,t,n,s;i&&r&&(m({inventoryId:null===i||void 0===i?void 0:i.inventoryId,batchNumber:null===i||void 0===i?void 0:i.batchNumber,expiryMonth:null===i||void 0===i||null===(e=i.expiry)||void 0===e||null===(t=e.split("/"))||void 0===t?void 0:t[0],expiryYear:null===i||void 0===i||null===(n=i.expiry)||void 0===n||null===(s=n.split("/"))||void 0===s?void 0:s[1],mrp:null===i||void 0===i?void 0:i.mrp,HSN:null===i||void 0===i?void 0:i.HSN,gstPer:null===i||void 0===i?void 0:i.gstPer,purchaseRate:null===i||void 0===i?void 0:i.purchaseRate,purchaseGstType:"Excl gst",saleRate:null===i||void 0===i?void 0:i.saleRate,saleGstType:"Incl gst",pack:null===i||void 0===i?void 0:i.pack,packs:Math.floor(Number(null===i||void 0===i?void 0:i.quantity)/Number((null===i||void 0===i?void 0:i.pack)||1)),loose:Number(null===i||void 0===i?void 0:i.quantity)%Number((null===i||void 0===i?void 0:i.pack)||1)}),a&&g(null===a||void 0===a?void 0:a.name))}),[i,r]),(0,t.useEffect)((()=>{r||(m(sX),g(""),o&&o(null))}),[r,o]);const[p,x]=(0,t.useState)(!1),[v,g]=(0,t.useState)(""),y=e=>{const{name:t,value:r}=e.target;m((e=>({...e,[t]:r})))},b=(e,t)=>{if("Enter"===e.key){e.preventDefault();const a=iX.indexOf(t);if(["gstPer","purchaseGstType","saleGstType"].includes(t)){const e=d.current[t];return void(e&&e.click())}if(e.shiftKey){if(a>0){var r;const e=iX[a-1];null===(r=d.current[e])||void 0===r||r.focus()}}else if(a<iX.length-1){var n;const e=iX[a+1];null===(n=d.current[e])||void 0===n||n.focus()}}},w=async e=>{if(e.preventDefault(),!f.batchNumber)return void c({title:"Enter batch number",variant:"destructive"});if(p)return;const t=`${f.expiryMonth}/${f.expiryYear}`,r="Excl gst"===f.purchaseGstType?f.purchaseRate:f.purchaseRate/(1+f.gstPer/100),a="Excl gst"===f.saleGstType?f.saleRate*(1+f.gstPer/100):f.saleRate,o=Number(f.packs)*Number(f.pack)+Number(f.loose),d={inventoryId:f.inventoryId,batchNumber:f.batchNumber,expiry:t,mrp:Number(f.mrp),HSN:f.HSN,gstPer:Number(f.gstPer),purchaseRate:Number(parseFloat(r).toFixed(2)),saleRate:Number(parseFloat(a).toFixed(2)),pack:parseInt(f.pack),quantity:o};null!==i&&void 0!==i&&i._id&&(d._id=i._id),h(!0);try{const e=await fetch(`${Nu}/api/inventory/manage-batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d),credentials:"include"});if(!e.ok)return void c({title:"Error",variant:"destructive"});await e.json();s&&s(),l(Fh()),n(!1),c({title:"Batch Added",variant:"success"})}catch(u){c({title:"Error",description:u.message})}finally{h(!1)}};return(0,Rr.jsx)(Iy,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(By,{className:"w-full sm:max-w-[500px] overflow-y-auto p-0 gap-0",children:[(0,Rr.jsx)("div",{className:"flex justify-between items-center pr-4 px-4 py-2.5 bg-gray-100 border-b",children:(0,Rr.jsx)(Uy,{className:"p-0",children:(0,Rr.jsx)(zy,{className:"text-base font-semibold",children:"Add New Batch"})})}),(0,Rr.jsxs)("form",{onSubmit:w,className:"p-6 space-y-5",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"productName",className:"text-sm font-medium text-gray-700",children:["PRODUCT NAME",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{id:"productName",placeholder:"Type to search products",value:v,onChange:e=>{const t=e.target.value;t.length>0&&" "!==t[0]&&(g(t),x(!0))},onKeyDown:e=>b(e,"productName"),ref:e=>d.current.productName=e,className:"h-9"}),(0,Rr.jsx)(CK,{open:p,onOpenChange:x,onSelect:e=>{m((t=>({...t,inventoryId:null===e||void 0===e?void 0:e._id,pack:(null===e||void 0===e?void 0:e.pack)||""}))),g(null===e||void 0===e?void 0:e.name),setTimeout((()=>{var e;null!==d&&void 0!==d&&null!==(e=d.current)&&void 0!==e&&e.batchNumber&&d.current.batchNumber.focus()}),100)},search:v,setSearch:g})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"batchNumber",className:"text-sm font-medium text-gray-700",children:["BATCH NUMBER",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{id:"batchNumber",name:"batchNumber",placeholder:"Batch Number",value:f.batchNumber,onChange:y,className:"h-9",onKeyDown:e=>b(e,"batchNumber"),ref:e=>d.current.batchNumber=e})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"expiryDate",className:"text-sm font-medium text-gray-700",children:["BATCH EXPIRY DATE",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsxs)("div",{className:"flex gap-2",children:[(0,Rr.jsx)(Gf,{id:"expiryMonth",name:"expiryMonth",placeholder:"MM",value:f.expiryMonth,onChange:y,className:"h-9",onKeyDown:e=>b(e,"expiryMonth"),ref:e=>d.current.expiryMonth=e}),(0,Rr.jsx)(Gf,{id:"expiryYear",name:"expiryYear",placeholder:"YY",value:f.expiryYear,onChange:y,className:"h-9",onKeyDown:e=>b(e,"expiryYear"),ref:e=>d.current.expiryYear=e})]})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"mrp",className:"text-sm font-medium text-gray-700",children:["MRP (INCL GST)",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{id:"mrp",name:"mrp",placeholder:"MRP (incl gst)",value:f.mrp,onChange:y,className:"h-9",onKeyDown:e=>b(e,"mrp"),ref:e=>d.current.mrp=e})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"HSN",className:"text-sm font-medium text-gray-700",children:["HSN CODE WITH GST RATE",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsxs)("div",{className:"flex gap-2",children:[(0,Rr.jsx)(Gf,{id:"HSN",name:"HSN",placeholder:"Ex. 3004",value:f.HSN,onChange:y,className:"h-9",onKeyDown:e=>b(e,"HSN"),ref:e=>d.current.HSN=e}),(0,Rr.jsxs)(fw,{name:"gstPer",value:f.gstPer,onValueChange:e=>{y({target:{name:"gstPer",value:e}})},onOpenChange:e=>{if(!e){const e=iX.indexOf("gstPer");if(e<iX.length-1){const t=iX[e+1];setTimeout((()=>{var e;null===(e=d.current[t])||void 0===e||e.focus()}),100)}}},children:[(0,Rr.jsx)(pw,{className:"w-24 h-9",ref:e=>d.current.gstPer=e,onKeyDown:e=>b(e,"gstPer"),children:(0,Rr.jsx)(mw,{placeholder:"gst %"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"0",children:"0%"}),(0,Rr.jsx)(yw,{value:"5",children:"5%"}),(0,Rr.jsx)(yw,{value:"12",children:"12%"}),(0,Rr.jsx)(yw,{value:"18",children:"18%"}),(0,Rr.jsx)(yw,{value:"28",children:"28%"})]})]})]})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:"purchaseRate",className:"text-sm font-medium text-gray-700",children:"PURCHASE RATE"}),(0,Rr.jsxs)("div",{className:"flex gap-2",children:[(0,Rr.jsx)(Gf,{id:"purchaseRate",name:"purchaseRate",placeholder:"Purch Rate",value:f.purchaseRate,onChange:y,className:"h-9",onKeyDown:e=>b(e,"purchaseRate"),ref:e=>d.current.purchaseRate=e}),(0,Rr.jsxs)(fw,{name:"purchaseGstType",value:f.purchaseGstType,onValueChange:e=>{y({target:{name:"purchaseGstType",value:e}})},onOpenChange:e=>{if(!e){const e=iX.indexOf("purchaseGstType");if(e<iX.length-1){const t=iX[e+1];setTimeout((()=>{var e;null===(e=d.current[t])||void 0===e||e.focus()}),100)}}},children:[(0,Rr.jsx)(pw,{className:"w-24 h-9",ref:e=>d.current.purchaseGstType=e,onKeyDown:e=>b(e,"purchaseGstType"),children:(0,Rr.jsx)(mw,{placeholder:"Excl gst"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"Excl gst",children:"Excl gst"}),(0,Rr.jsx)(yw,{value:"Incl gst",children:"Incl gst"})]})]})]})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)(yN,{htmlFor:"saleRate",className:"text-sm font-medium text-gray-700",children:"SALE RATE"}),(0,Rr.jsxs)("div",{className:"flex gap-2",children:[(0,Rr.jsx)(Gf,{id:"saleRate",name:"saleRate",placeholder:"Sale Rate",value:f.saleRate,onChange:y,className:"h-9",onKeyDown:e=>b(e,"saleRate"),ref:e=>d.current.saleRate=e}),(0,Rr.jsxs)(fw,{name:"saleGstType",value:f.saleGstType,onValueChange:e=>{y({target:{name:"saleGstType",value:e}})},onOpenChange:e=>{if(!e){const e=iX.indexOf("saleGstType");if(e<iX.length-1){const t=iX[e+1];setTimeout((()=>{var e;null===(e=d.current[t])||void 0===e||e.focus()}),100)}}},children:[(0,Rr.jsx)(pw,{className:"w-24 h-9",ref:e=>d.current.saleGstType=e,onKeyDown:e=>b(e,"saleGstType"),children:(0,Rr.jsx)(mw,{placeholder:"Incl gst"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"Excl gst",children:"Excl gst"}),(0,Rr.jsx)(yw,{value:"Incl gst",children:"Incl gst"})]})]})]})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"pack",className:"text-sm font-medium text-gray-700",children:["UNITS PER PACK",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{id:"pack",name:"pack",placeholder:"Ex. Tablets or Capsule per Strip",value:f.pack,onChange:y,className:"h-9",onKeyDown:e=>b(e,"pack"),ref:e=>d.current.pack=e})]}),(0,Rr.jsx)("div",{className:"space-y-2",children:(0,Rr.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-500 h-full",children:[(0,Rr.jsx)("div",{className:"bg-pink-500 rounded-full p-1 w-6 h-6 flex items-center justify-center text-white",children:"\ud83d\udc8a"}),(0,Rr.jsx)("p",{children:"For a strip of 10 tablets, the Units per Pack will be 10"})]})})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{htmlFor:"packs",className:"text-sm font-medium text-gray-700",children:["QUANTITY IN STOCK",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,Rr.jsx)(Gf,{id:"packs",name:"packs",placeholder:"No of Packs",value:f.packs,onChange:y,className:"h-9",onKeyDown:e=>b(e,"packs"),ref:e=>d.current.packs=e}),(0,Rr.jsx)(Gf,{id:"loose",name:"loose",placeholder:"Loose Units",value:f.loose||"",onChange:y,className:"h-9",onKeyDown:e=>b(e,"loose"),ref:e=>d.current.loose=e})]})]})]}),(0,Rr.jsxs)("div",{className:"p-3  flex items-center justify-end gap-2 b-0",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>n(!1),children:"Cancel"}),(0,Rr.jsx)(Vn,{type:"submit",size:"sm",disabled:u,onClick:w,ref:e=>d.current.submitButton=e,className:"bg-blue-600 text-white hover:bg-blue-700",children:u?"Saving...":"Save"})]})]})})}const lX=[{header:"Name",field:"name",width:30,required:!0},{header:"Pack",field:"pack",width:15},{header:"Unit",field:"unit",width:15},{header:"Code",field:"code",width:15},{header:"Category",field:"category",width:20},{header:"Manufacturer",field:"mfcName",width:25},{header:"Composition",field:"composition",width:30},{header:"Location",field:"location",width:20},{header:"Batch Number",field:"batchNumber",width:20},{header:"HSN",field:"HSN",width:15},{header:"Quantity",field:"quantity",width:15},{header:"Expiry",field:"expiry",width:15},{header:"MRP",field:"mrp",width:15,format:"currency"},{header:"GST",field:"gstPer",width:15},{header:"Purchase Rate",field:"purchaseRate",width:20,format:"currency"},{header:"Sale Rate",field:"saleRate",width:20,format:"currency"}],cX={MRP:e=>`\u20b9${e}`,"Purchase Rate":e=>`\u20b9${e}`,"Sale Rate":e=>`\u20b9${e}`},dX=e=>{let{onItemSelect:r,selectedItemId:n,setHasItems:a}=e;const[s,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),u=rt(),h=Z(),{items:f}=$e((e=>e.inventory)),[m,p]=(0,t.useState)(!1),{importStatus:x}=$e((e=>e.exportImport));(0,t.useEffect)((()=>{u(Mh())}),[u]),(0,t.useEffect)((()=>{"succeeded"===x&&u(Mh())}),[x,u]),(0,t.useEffect)((()=>{f.length>0&&!n&&r(f[0]._id)}),[f,n,r]),(0,t.useEffect)((()=>{a(f.length>0)}),[f,a]);const v=f.filter((e=>{var t,r,n,a,i;const o=s.toLowerCase();return(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(o))||(null===e||void 0===e||null===(r=e.mfcName)||void 0===r?void 0:r.toLowerCase().includes(o))||(null===e||void 0===e||null===(n=e.expiry)||void 0===n?void 0:n.toLowerCase().includes(o))||(null===e||void 0===e||null===(a=e.mrp)||void 0===a?void 0:a.toString().includes(o))||(null===e||void 0===e||null===(i=e.pack)||void 0===i?void 0:i.toString().includes(o))})).sort(((e,t)=>e.quantity<=0&&t.quantity<=0||e.quantity>0&&t.quantity>0?0:e.quantity<=0?1:-1));return(0,Rr.jsxs)("div",{className:"flex flex-col h-full p-2",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>h(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-xl font-medium",children:"Inventory"})]}),(0,Rr.jsxs)("div",{className:"mb-4 flex flex-row gap-4 items-center",children:[(0,Rr.jsxs)("div",{className:"relative w-[95%]",children:[(0,Rr.jsx)(Gf,{placeholder:"Search...",value:s,onChange:e=>i(e.target.value),className:"w-full pr-8"}),(0,Rr.jsx)(VN,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"})]}),(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",children:(0,Rr.jsx)(EP,{className:"h-4 w-4"})})}),(0,Rr.jsxs)(_g,{align:"end",children:[(0,Rr.jsxs)(Rg,{onClick:()=>p(!0),children:[(0,Rr.jsx)(Aw,{className:"h-4 w-4 mr-2"}),"Create"]}),(0,Rr.jsxs)(Rg,{onClick:()=>d(!0),children:[(0,Rr.jsx)(NN,{className:"h-4 w-4 mr-2"}),"Import"]}),(0,Rr.jsxs)(Rg,{onClick:()=>l(!0),children:[(0,Rr.jsx)(TP,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})]}),(0,Rr.jsx)(dp,{className:"flex-1 -mx-4",children:(0,Rr.jsx)("div",{className:"px-4 space-y-2",children:0===v.length?(0,Rr.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No items found matching your search."}):v.map((e=>(0,Rr.jsx)(Kf,{className:"p-3 cursor-pointer hover:bg-blue-50 transition-colors rounded-none "+(n===(null===e||void 0===e?void 0:e._id)?"bg-accent hover:bg-accent":""),onClick:()=>r(null===e||void 0===e?void 0:e._id),children:(0,Rr.jsxs)("div",{className:"flex gap-3",children:[(0,Rr.jsx)("div",{className:"w-14 h-14 bg-muted flex items-center justify-center shrink-0",children:(0,Rr.jsx)("div",{className:"text-red-500 text-sm",children:"Rx"})}),(0,Rr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Rr.jsx)("div",{className:"flex items-center gap-1 mb-0.5",children:(0,Rr.jsx)("span",{className:"font-medium truncate capitalize",children:null===e||void 0===e?void 0:e.name})}),(0,Rr.jsx)("p",{className:"text-xs text-muted-foreground truncate font-semibold",children:null===e||void 0===e?void 0:e.mfcName}),(0,Rr.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,Rr.jsxs)("p",{className:"text-xs truncate",children:["Pack of ",null===e||void 0===e?void 0:e.pack]})})]}),(0,Rr.jsxs)("div",{className:"text-right shrink-0 justify-center",children:[(0,Rr.jsx)(qw,{variant:(null===e||void 0===e?void 0:e.quantity)>0?"success":"destructive",children:(null===e||void 0===e?void 0:e.quantity)>0?"In Stock":"Out of Stock"}),(0,Rr.jsx)("p",{className:"text-sm font-medium",children:null!==e&&void 0!==e&&e.quantity?ku(e.quantity,e.pack):""})]})]})},null===e||void 0===e?void 0:e._id)))})}),(0,Rr.jsx)(oX,{open:m,onOpenChange:p,inventoryDetails:null,setItemDetails:()=>{u(Mh())},batchDetails:null,setUpdateBatchDetails:null}),(0,Rr.jsx)(k$,{open:o,onOpenChange:l,columns:lX,fileName:"inventory_report",title:"Export Inventory",formatters:cX,fetchData:zf,isFetchData:!0}),(0,Rr.jsx)(mG,{open:c,onOpenChange:d,importFunction:Uf,title:"Import Inventory",columns:lX,customValidation:e=>Array.isArray(e)&&0!==e.length?null:"No data found in the Excel file"})]})},uX=rm("ClipboardX",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m15 11-6 6",key:"1toa9n"}],["path",{d:"m9 11 6 6",key:"wlibny"}]]),hX=rm("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function fX(e){let{inventoryId:r}=e;const{toast:n}=$g(),a=(0,t.useRef)(null),[s,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(1),[c,d]=(0,t.useState)(1),[u,h]=(0,t.useState)(!1);(0,t.useEffect)((()=>{r&&(async()=>{h(!0);try{const e=await fetch(`${Nu}/api/inventory/timeline/${r}?type=all&page=${o}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch timeline");const t=await e.json();i(t.timeline),d(t.totalPages),a.current&&a.current.scrollIntoView({behavior:"smooth",block:"start"})}catch(e){n({title:"Failed to fetch timeline",variant:"destructive"})}finally{h(!1)}})()}),[r,o]);const f=e=>{e>=1&&e<=c&&l(e)};return(0,Rr.jsx)("div",{className:"w-full",ref:a,children:(0,Rr.jsx)("div",{className:"border rounded-lg min-h-[400px] relative",children:0===s.length?(0,Rr.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500",children:u?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(um,{className:"h-10 w-10 animate-spin text-primary"}),(0,Rr.jsx)("p",{className:"text-sm font-medium mt-4",children:"Loading transactions..."})]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(uX,{className:"w-10 h-10 mb-4"}),(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"No transaction history available"})]})}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)("div",{className:"relative",children:[u&&(0,Rr.jsx)("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-10",children:(0,Rr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Rr.jsx)(um,{className:"h-10 w-10 animate-spin text-primary"}),(0,Rr.jsx)("p",{className:"text-sm font-medium mt-2 text-gray-600",children:"Loading..."})]})}),(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{children:"TXN DATE"}),(0,Rr.jsx)(Tw,{children:"TXN TYPE"}),(0,Rr.jsx)(Tw,{children:"TXN NO"}),(0,Rr.jsx)(Tw,{children:"DISTRIBUTOR/CUSTOMER"}),(0,Rr.jsx)(Tw,{children:"BATCH NO"}),(0,Rr.jsx)(Tw,{className:"text-right",children:"CREDIT"}),(0,Rr.jsx)(Tw,{className:"text-right",children:"DEBIT"}),(0,Rr.jsx)(Tw,{className:"text-right",children:"BALANCE"}),(0,Rr.jsx)(Tw,{className:"w-8"})]})}),(0,Rr.jsx)(Cw,{children:s.map(((e,t)=>(0,Rr.jsxs)(Ew,{className:"cursor-pointer",children:[(0,Rr.jsxs)(Dw,{children:[(0,Rr.jsx)("div",{className:"text-sm font-medium",children:new Date(e.createdAt).toLocaleDateString()}),(0,Rr.jsxs)("div",{className:"text-xs text-gray-500",children:["Time:"," ",new Date(e.createdAt).toLocaleTimeString()]})]}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)(qw,{className:`font-medium\n                            ${"PURCHASE"===e.type&&"bg-green-600 hover:bg-green-700"}\n                            ${"SALE"===e.type&&"bg-blue-600 hover:bg-blue-700"}\n                            ${"PURCHASE_RETURN"===e.type&&"bg-orange-600 hover:bg-orange-700"}\n                            ${"SALE_RETURN"===e.type&&"bg-red-600 hover:bg-red-700"}\n                            ${"Adjustment"===e.type&&"bg-purple-600 hover:bg-purple-700"}\n                            ${"SALE_EDIT"===e.type&&"bg-yellow-600 hover:bg-yellow-700"}\n                            ${"PURCHASE_EDIT"===e.type&&"bg-indigo-600 hover:bg-indigo-700"}\n                            ${("PURCHASE_DELETE"===e.type||"SALE_DELETE"===e.type)&&"bg-rose-600 hover:bg-rose-700"}\n                          `,children:e.type})}),(0,Rr.jsxs)(Dw,{children:[(0,Rr.jsx)("div",{className:"text-sm",children:(null===e||void 0===e?void 0:e.invoiceNumber)||"-"}),(0,Rr.jsxs)("div",{className:"text-xs text-gray-500",children:["User: ",(null===e||void 0===e?void 0:e.createdByName)||"-"]})]}),(0,Rr.jsxs)(Dw,{children:[(0,Rr.jsx)("div",{className:"text-sm",children:e.name||(null===e||void 0===e?void 0:e.distributorName)||(null===e||void 0===e?void 0:e.customerName)||"-"}),(0,Rr.jsxs)("div",{className:"text-xs text-gray-500",children:["Mob: ",(null===e||void 0===e?void 0:e.mob)||(null===e||void 0===e?void 0:e.distributorMob)||(null===e||void 0===e?void 0:e.customerMob)||"-"]})]}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)("div",{className:"text-sm font-medium",children:(null===e||void 0===e?void 0:e.batchNumber)||"-"})}),(0,Rr.jsx)(Dw,{className:"text-right",children:(0,Rr.jsx)("span",{className:"text-green-600 font-medium",children:(null===e||void 0===e?void 0:e.credit)||"-"})}),(0,Rr.jsx)(Dw,{className:"text-right",children:(0,Rr.jsx)("span",{className:"text-red-600 font-medium",children:(null===e||void 0===e?void 0:e.debit)||"-"})}),(0,Rr.jsx)(Dw,{className:"text-right font-medium",children:(null===e||void 0===e?void 0:e.balance)||"-"}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsxs)(Qo,{children:[(0,Rr.jsx)(Jo,{children:(0,Rr.jsx)(FY,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),(0,Rr.jsx)(Zo,{className:"w-50",align:"end",sideOffset:5,alignOffset:-20,children:(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsx)("h4",{className:"font-medium",children:"Transaction Remarks"}),(0,Rr.jsx)("div",{className:"text-sm text-gray-500",children:((null===e||void 0===e?void 0:e.remarks)||"No remarks available").split("\n").map(((e,t)=>(0,Rr.jsx)("p",{children:e||"\xa0"},t)))})]})})]})})]},t)))})]})]}),(0,Rr.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t",children:[(0,Rr.jsxs)("div",{className:"text-sm text-gray-500",children:["Page ",o," of ",c]}),(0,Rr.jsxs)("div",{className:"flex space-x-2",children:[(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",onClick:()=>f(o-1),disabled:1===o||u,children:[(0,Rr.jsx)(hX,{className:"w-4 h-4"}),"Previous"]}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",onClick:()=>f(o+1),disabled:o===c||u,children:["Next",(0,Rr.jsx)(FY,{className:"w-4 h-4"})]})]})]})]})})})}function mX(e){let{inventoryId:r}=e;const{toast:n}=$g(),[a,s]=(0,t.useState)([]),i=Z(),[o,l]=(0,t.useState)(1),[c,d]=(0,t.useState)(1),[u,h]=(0,t.useState)(!1),f=(0,t.useRef)(null);(0,t.useEffect)((()=>{r&&(async()=>{h(!0);try{const e=await fetch(`${Nu}/api/sales/inventory/${r}?page=${o}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch sales history");const t=await e.json();s(t.sales),d(t.totalPages),f.current&&f.current.scrollIntoView({behavior:"smooth",block:"start"})}catch(e){n({title:"Failed to fetch sales history",description:e.message,variant:"destructive"})}finally{h(!1)}})()}),[r,o]);const m=e=>{e>=1&&e<=c&&l(e)},p=e=>{if(!e.purchaseRate||!e.saleRate)return 0;return((e.saleRate*(1+e.gstPer/100)-e.purchaseRate)/e.purchaseRate*100).toFixed(2)};return(0,Rr.jsx)("div",{className:"w-full",ref:f,children:(0,Rr.jsx)("div",{className:"border rounded-lg min-h-[400px] relative",children:0===a.length?(0,Rr.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500",children:u?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(um,{className:"h-10 w-10 animate-spin text-primary"}),(0,Rr.jsx)("p",{className:"text-sm font-medium mt-4",children:"Loading sales data..."})]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(SK,{className:"w-10 h-10 mb-4"}),(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"No sales data available"})]})}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)("div",{className:"relative",children:[u&&(0,Rr.jsx)("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-10",children:(0,Rr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Rr.jsx)(um,{className:"h-10 w-10 animate-spin text-primary"}),(0,Rr.jsx)("p",{className:"text-sm font-medium mt-2 text-gray-600",children:"Loading..."})]})}),(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{children:"INVOICE DATE"}),(0,Rr.jsx)(Tw,{children:"SOLD TO"}),(0,Rr.jsx)(Tw,{children:"BATCH NO"}),(0,Rr.jsx)(Tw,{className:"text-right",children:"MRP"}),(0,Rr.jsx)(Tw,{className:"text-right",children:"SALE RATE"}),(0,Rr.jsx)(Tw,{className:"text-right",children:"MARGIN"}),(0,Rr.jsx)(Tw,{className:"text-right",children:"SALE QTY"}),(0,Rr.jsx)(Tw,{className:"w-8"})]})}),(0,Rr.jsx)(Cw,{children:a.map((e=>{var t;return(0,Rr.jsxs)(Ew,{className:"cursor-pointer",onClick:()=>{i(`/sales/${e.invoiceId}`)},children:[(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)("div",{className:"text-sm font-medium",children:new Date(e.createdAt).toLocaleDateString()})}),(0,Rr.jsxs)(Dw,{children:[(0,Rr.jsx)("div",{className:"text-sm font-medium flex items-center gap-2",children:e.distributorName||"--"}),e.distributorMob&&(0,Rr.jsxs)("div",{className:"text-xs text-gray-500",children:["Mobile: ",e.distributorMob]})]}),(0,Rr.jsxs)(Dw,{children:[(0,Rr.jsx)("div",{className:"text-sm font-medium",children:e.batchNumber}),(0,Rr.jsxs)("div",{className:"text-xs text-gray-500",children:["Expiry: ",e.expiry]})]}),(0,Rr.jsxs)(Dw,{className:"text-right",children:["\u20b9",null===(t=e.mrp)||void 0===t?void 0:t.toFixed(2)]}),(0,Rr.jsxs)(Dw,{className:"text-right",children:[(0,Rr.jsxs)("div",{className:"text-sm font-medium",children:["\u20b9",Cu(e.saleRate*(1+e.gstPer/100))]}),(0,Rr.jsxs)("div",{className:"text-xs text-gray-500",children:[e.gstPer,"% GST"]})]}),(0,Rr.jsx)(Dw,{className:"text-right",children:(0,Rr.jsxs)("span",{className:"text-green-600 font-medium",children:[p(e),"%"]})}),(0,Rr.jsxs)(Dw,{className:"text-right",children:[(0,Rr.jsxs)("div",{className:"text-sm ",children:["Packs:"," ",Eu(e.debit,e.pack).packs]}),(0,Rr.jsxs)("div",{className:"text-xs font-semibold",children:["Loose:"," ",Eu(e.debit,e.pack).loose]})]}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)(FY,{className:"w-4 h-4 text-gray-400"})})]},e._id)}))})]})]}),(0,Rr.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t",children:[(0,Rr.jsxs)("div",{className:"text-sm text-gray-500",children:["Page ",o," of ",c]}),(0,Rr.jsxs)("div",{className:"flex space-x-2",children:[(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",onClick:()=>m(o-1),disabled:1===o||u,children:[(0,Rr.jsx)(hX,{className:"w-4 h-4"}),"Previous"]}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",onClick:()=>m(o+1),disabled:o===c||u,children:["Next",(0,Rr.jsx)(FY,{className:"w-4 h-4"})]})]})]})]})})})}function pX(e){let{inventoryId:r}=e;const{toast:n}=$g(),[a,s]=(0,t.useState)([]),i=Z(),[o,l]=(0,t.useState)(1),[c,d]=(0,t.useState)(1),[u,h]=(0,t.useState)(!1),f=(0,t.useRef)(null);(0,t.useEffect)((()=>{r&&(async()=>{h(!0);try{const e=await fetch(`${Nu}/api/purchase/inventory/${r}?page=${o}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch purchase history");const t=await e.json();s(t.purchases),d(t.totalPages),f.current&&f.current.scrollIntoView({behavior:"smooth",block:"start"})}catch(e){n({title:"Failed to fetch purchase history",description:e.message,variant:"destructive"})}finally{h(!1)}})()}),[r,o]);const m=e=>{e>=1&&e<=c&&l(e)};return(0,Rr.jsx)("div",{className:"w-full",ref:f,children:(0,Rr.jsx)("div",{className:"border rounded-lg min-h-[400px] relative",children:0===a.length?(0,Rr.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500",children:u?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(um,{className:"h-10 w-10 animate-spin text-primary"}),(0,Rr.jsx)("p",{className:"text-sm font-medium mt-4",children:"Loading purchases..."})]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(SK,{className:"w-10 h-10 mb-4"}),(0,Rr.jsx)("p",{className:"text-sm font-medium",children:"No purchase history found"})]})}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)("div",{className:"relative",children:[u&&(0,Rr.jsx)("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-10",children:(0,Rr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Rr.jsx)(um,{className:"h-10 w-10 animate-spin text-primary"}),(0,Rr.jsx)("p",{className:"text-sm font-medium mt-2 text-gray-600",children:"Loading..."})]})}),(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50",children:[(0,Rr.jsx)(Tw,{children:"INVOICE DATE"}),(0,Rr.jsx)(Tw,{children:"PURCHASED FROM"}),(0,Rr.jsx)(Tw,{children:"BATCH NO"}),(0,Rr.jsx)(Tw,{className:"text-right",children:"MRP"}),(0,Rr.jsx)(Tw,{className:"text-right",children:"NET PURC RATE"}),(0,Rr.jsx)(Tw,{className:"text-right",children:"MARGIN"}),(0,Rr.jsx)(Tw,{className:"text-right",children:"PURC QTY"}),(0,Rr.jsx)(Tw,{className:"w-8"})]})}),(0,Rr.jsx)(Cw,{children:a.map((e=>{var t;return(0,Rr.jsxs)(Ew,{className:"cursor-pointer",onClick:()=>{i(`/purchase/${e.invoiceId}`)},children:[(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)("div",{className:"text-sm font-medium",children:new Date(e.createdAt).toLocaleDateString()})}),(0,Rr.jsxs)(Dw,{children:[(0,Rr.jsx)("div",{className:"text-sm font-medium flex items-center gap-2",children:e.distributorName}),e.distributorMob&&(0,Rr.jsxs)("div",{className:"text-xs text-gray-500",children:["Mobile: ",e.distributorMob]})]}),(0,Rr.jsxs)(Dw,{children:[(0,Rr.jsx)("div",{className:"text-sm font-medium",children:e.batchNumber}),(0,Rr.jsxs)("div",{className:"text-xs text-gray-500",children:["Expiry: ",e.expiry]})]}),(0,Rr.jsxs)(Dw,{className:"text-right",children:["\u20b9",null===(t=e.mrp)||void 0===t?void 0:t.toFixed(2)]}),(0,Rr.jsxs)(Dw,{className:"text-right",children:[(0,Rr.jsx)("p",{children:PP(e.purchaseRate*(1+(e.gstPer||0)/100)*(1-(e.discount||0)/100))}),(0,Rr.jsxs)("p",{className:"text-xs font-normal",children:["Dis: ",e.discount||0,"% | GST:",e.gstPer,"%"]})]}),(0,Rr.jsx)(Dw,{className:"text-right",children:(0,Rr.jsxs)("span",{className:"text-green-600 font-medium",children:[((e.mrp-e.purchaseRate*(1+(e.gstPer||0)/100)*(1-(e.discount||0)/100))/e.mrp*100).toFixed(2),"%"]})}),(0,Rr.jsx)(Dw,{className:"text-right",children:(0,Rr.jsx)("div",{className:"text-sm font-medium",children:ku(e.credit,e.pack)})}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)(FY,{className:"w-4 h-4 text-gray-400"})})]},e._id)}))})]})]}),(0,Rr.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t",children:[(0,Rr.jsxs)("div",{className:"text-sm text-gray-500",children:["Page ",o," of ",c]}),(0,Rr.jsxs)("div",{className:"flex space-x-2",children:[(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",onClick:()=>m(o-1),disabled:1===o||u,children:[(0,Rr.jsx)(hX,{className:"w-4 h-4"}),"Previous"]}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",onClick:()=>m(o+1),disabled:o===c||u,children:["Next",(0,Rr.jsx)(FY,{className:"w-4 h-4"})]})]})]})]})})})}function xX(e){let{inventoryId:r}=e;const[n,a]=(0,t.useState)(null),[s,i]=(0,t.useState)(!0),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(null),[f,m]=(0,t.useState)(null),[p,x]=(0,t.useState)(!1),{items:v}=$e((e=>e.inventory)),{toast:g}=(rt(),$g());(0,t.useEffect)((()=>{r&&(async()=>{try{i(!0);const e=await fetch(`${Nu}/api/inventory/${r}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch item details");const t=await e.json();a(t)}catch(e){g({title:e.message,variant:"destructive"})}finally{i(!1)}})()}),[r,v]);if(s)return(0,Rr.jsx)("div",{className:"h-[100vh] flex items-center justify-center",children:(0,Rr.jsx)(um,{className:"h-8 w-8 animate-spin text-primary"})});return(0,Rr.jsxs)(dp,{className:"h-[100vh] pr-4 pt-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rr.jsxs)("div",{className:"flex gap-6",children:[(0,Rr.jsx)(Kf,{className:"w-48",children:(0,Rr.jsx)(Jf,{className:"p-2 flex items-center justify-center",children:(0,Rr.jsx)("img",{src:(null===n||void 0===n?void 0:n.imgUri)||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAA51BMVEX///901tDM9/X09PTgOQUGq6T/hUbg4OCE3NbR+ff28/Pm9fTl4eHj4+OS2NTI9vT/iUnlSBUApZ3/fjflKQDY1ciLuq7jLwBv29WvkX/y/Pv93dLiRhu73NqZ1tPvqZy96ufW9PKs5eJfwLvod2DE7Omo5ODrjHr/gT3yua/+6ODe+vjlKgDsk4L9up/+oXjlXT79kV7ytqv9xrD9zbr+mGr0xLv/7+nlaFDjUCzpgm39s5Ttm4z+eCn2z8fqOwCGua3Fy8I6tq92yMSTs6Wmn5K1h3TKZEm7fmnVTy2ExLqbqZxdwLs9/a7LAAAGeElEQVR4nO3da3vaNhQHcMiULsCWi+NVrkMSTMhogKwkXaGkWdqF3pbl+3+emawtF1vSkXVkCZ7zf5VXjn7P0cUIZFcqoPT+ePVMlv0DJsnBsHtRh/0jRzm6OnwpBSqEjHHOux4bX/0l5wGEM2R47RoiyHhfUT+gkLHw0rUlN/VnACBMyMKua01eriBAoJCFF6452bw+hAChQsb9m25AFdQQejcU/4SVECxk3LVoNW+Qa8gGI9eklQCBGjX0bDodAzspXMjeujYtp4cvnLg2LecIX9h0bVoOCUlIQvchIQlJ6D4kJCEJ3YeEJCSh+5CQhCR0n80Xbv5u4ubvCNfxd/VvXJtWcoUu9O07UuAXpHBhOHZNWkld/TMMLSHvuBZl8g42EqHCsOcalA1qDfmta05OYEsiTMg9Wyq+5QgyFEFCPnRtEaS3ry4jRBj6thQu5N2h6S/3GA8nd64ZstRfvzmU5uX7UJpm12vf/xn/JstzcT783fPvl1C5SfbEqe1EVVGiluuWQ5NsiVPbEQKr1ZbrlkNDQhL6HxKS0P+QUJi265ZDUysq3HXdcmj2igqrrlsOTFxc2HDddlj6EqBCuCYDUVZChbAau248JH0T4e+uWw+IdBQqhdXEdfuVUQCVQu8nGxVQLfS8ivIxCBP6PBYbW0ogRJguGp511XiWRr+2p/YBhbNCtlvn5+dJ4nr5iPu1re+7aACehnCenZazisZ9sMtEOEvLRSljWK/EEaa9tnSjetbEFZb98bhR0GcirO6UWMaiBTQTlngzUCsONBNWW+UAi/OMheUQjYCmwjKIsm2mEoSR9bFoMMmgCK1vAyg/HdkX7tgVmgIRhNVzm0DTPooitLqragxEEVrcc5TuhJYntFhE8xLiCK2NxOL328hCa9Op7FuzUoXW1kSEEiIJLXVT49UeT2jpi0bzxRBNaGk2xRiGWEI7AxEDiCW0s8GI0UmxhHY+Q22+EAOIJbSzXJCQhCQkIQlJSEISknAthJLjTOB4Layj5Je87Poh/Aklv/6cDQlJSEISkpCEJCwibJGQhCQkIQlJSEISkpCEJCQhCUlIQhKSkIQkJCEJSbghQjtHn0hIQhKSkIQkJCEJSVi2MI71T/CtjTBuT++DWe6nbS3mmggb0yDY/p4gmGocVVwP4XTO+4acbpQw2V4FpsRt6GnFNRC2s74nI3Dq9V8oAKbEk80QnouAUKLvwljogxJ9F57JhCCi58JE3EehRM+Fj3IghOi3sKEoIYTokzD7NOUTtVBJxBJinHvKCpWdFEBsoOQ4L9oH2rK9FAJUEX06nZepYQzopEqi4TMhUU9YZoSqtQJE3AyhjLghQgnRayFgOVQTvRYC51I50W/hPQLRb+GujlBA9FuoMdUIiX4LtQaigOi58FiviHlEz4V6c00u0Xeh5kjMIfokzN1rg3xElBJ9ErbyhNkdfU0iwnOSbT+95cyMWPbzSyNJ+vlCQ2Kpz6CNounHTy+EOc3ketQzJ5YnjB4+TwYDrpeQde4MiRhTDUQYPf8SclYgPDy4NiJiDESAMPpazPeUcNLTJ7YxB6JSGE3/Ke57Mo6q2sQEsZuqhNEDMwOmxFNt4jZiEVXCqTEwJV7rdtTgxwPC7ddwYg5MiXfaxBitiHJh9BUDmE6qujPqfD41Holy4YcQBch4V3vRQFv1pcLoC04J03461iTOp1PTfioVPiCVMC3ipebdDd6yLxNGn7FKmEb3HvVsfu+WGBGlwiYeMDzSJN4v3ICbvDpPKpyiddK0m55qftJYFBpVUSKMPg4QhR3dz4uLQktveIw+IQ5DNqzoEZdqOJtRixplwheYwmZFj7gitPKmVVwhq+gRc36FmmC/LRe3l05+NPQRQgyOs8LZ5hvqG4+jfxFnGvZ23k5IFQPBD8LjfqL5W4wtiRDvlubpznQeQBUzw3CJiZRKBVN4sdhEZRXzOyl+bvAGYnrrvRhlFcsBVkZ4RRyuXFpexcDqezEXg3ZjGo5WLy0jBmd5jbGSa6zZtJm9toxYGhCtiOFdzrXFxDLfTH+EMhL5Te7FRV++lQlM+ykCkU8EF887jxE8lupLc2lM5KwuunhjddUIti2+mFaUW0MinwiBaZKz+cm29C/YWRrsjLjJwh92FJefnU58Aj6eWH+LuSjjTuEvnwYssxDmpsgJU9T0ulwfyXk4hPn8yN1tZ6Ljaw67o7H6spL8B8Mo5PnksMqsAAAAAElFTkSuQmCC",alt:null===n||void 0===n?void 0:n.name,width:80,height:60,className:"object-contain"})})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("h1",{className:"text-2xl font-semibold capitalize",children:null===n||void 0===n?void 0:n.name}),(0,Rr.jsx)("p",{className:"text-muted-foreground",children:null===n||void 0===n?void 0:n.mfcName}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,Rr.jsx)("div",{className:"bg-orange-500 text-white p-1 rounded-full",children:"Rx"}),(0,Rr.jsx)("div",{className:"bg-red-500 text-white p-1 rounded-full",children:"H"}),(0,Rr.jsx)("span",{children:null===n||void 0===n?void 0:n.composition})]})]})]}),(0,Rr.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,Rr.jsxs)("div",{className:"text-end text-lg",children:[(0,Rr.jsx)("p",{children:(null===n||void 0===n?void 0:n.location)||"-"}),(0,Rr.jsx)("p",{className:"text-xs text-gray-500",children:"Location"})]}),(0,Rr.jsxs)("div",{className:"flex gap-4",children:[(0,Rr.jsxs)(Vn,{variant:"outline",className:"gap-2",onClick:()=>d(!0),children:[(0,Rr.jsx)(OY,{className:"w-4 h-4"}),"Edit Item"]}),(0,Rr.jsxs)(Vn,{variant:"default",className:"gap-2",onClick:()=>l(!0),children:[(0,Rr.jsx)(Aw,{className:"w-4 h-4"}),"Add Batch"]})]})]})]}),(0,Rr.jsxs)(uN,{defaultValue:"batches",children:[(0,Rr.jsx)("div",{className:"flex items-center justify-between border-b mt-2",children:(0,Rr.jsxs)(hN,{children:[(0,Rr.jsx)(fN,{value:"batches",className:"relative",children:"BATCHES"}),(0,Rr.jsx)(fN,{value:"purchases",children:"PURCHASES"}),(0,Rr.jsx)(fN,{value:"sales",children:"SALES"}),(0,Rr.jsx)(fN,{value:"timeline",children:"TIMELINE"})]})}),(0,Rr.jsx)(mN,{value:"batches",className:"mt-2",children:null!==n&&void 0!==n&&n.batch&&0!==n.batch.length?(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:"pl-4",children:"BATCH NO"}),(0,Rr.jsx)(Tw,{children:"PACK"}),(0,Rr.jsx)(Tw,{children:"EXPIRY"}),(0,Rr.jsx)(Tw,{className:"text-center",children:"STATUS"}),(0,Rr.jsx)(Tw,{className:"text-center",children:"MRP"}),(0,Rr.jsx)(Tw,{className:"text-center",children:"PURC RATE"}),(0,Rr.jsx)(Tw,{className:"text-center",children:"NET PURC RATE"}),(0,Rr.jsx)(Tw,{className:"text-center",children:"SALE RATE"}),(0,Rr.jsx)(Tw,{className:"text-center",children:"QUANTITY"}),(0,Rr.jsx)(Tw,{className:"text-center",children:"ACTION"})]})}),(0,Rr.jsx)(Cw,{className:"border",children:n.batch.map((e=>(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Dw,{className:"font-medium pl-6",children:null===e||void 0===e?void 0:e.batchNumber}),(0,Rr.jsx)(Dw,{children:e.pack}),(0,Rr.jsx)(Dw,{children:e.expiry}),(0,Rr.jsx)(Dw,{className:"text-center",children:(0,Rr.jsx)(qw,{variant:e.quantity>0?"success":"destructive",children:e.quantity>0?"In Stock":"Out of Stock"})}),(0,Rr.jsx)(Dw,{className:"text-center",children:PP(null===e||void 0===e?void 0:e.mrp)}),(0,Rr.jsx)(Dw,{className:"text-center",children:PP(null===e||void 0===e?void 0:e.purchaseRate)}),(0,Rr.jsxs)(Dw,{className:"text-center",children:[(0,Rr.jsx)("p",{children:PP((null===e||void 0===e?void 0:e.purchaseRate)*(1+((null===e||void 0===e?void 0:e.gstPer)||0)/100)*(1-((null===e||void 0===e?void 0:e.discount)||0)/100))}),(0,Rr.jsxs)("p",{className:"text-xs font-normal",children:["Dis: ",(null===e||void 0===e?void 0:e.discount)||0,"% | GST:",null===e||void 0===e?void 0:e.gstPer,"%"]})]}),(0,Rr.jsxs)(Dw,{className:"text-center",children:[(0,Rr.jsx)("p",{children:e.saleRate?PP(null===e||void 0===e?void 0:e.saleRate):PP(null===e||void 0===e?void 0:e.mrp)}),(0,Rr.jsxs)("p",{className:"text-xs font-normal",children:["inc ",null===e||void 0===e?void 0:e.gstPer,"% GST"]})]}),(0,Rr.jsx)(Dw,{className:"text-center",children:ku(null===e||void 0===e?void 0:e.quantity,null===e||void 0===e?void 0:e.pack)}),(0,Rr.jsx)(Dw,{className:"text-center",children:(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsx)(Vn,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,Rr.jsx)(FY,{className:"h-4 w-4"})})}),(0,Rr.jsxs)(_g,{align:"end",children:[(0,Rr.jsxs)(Rg,{className:"cursor-pointer flex items-center gap-2",onClick:()=>(e=>{l(!0),h(e)})(e),children:[(0,Rr.jsx)(OY,{className:"h-4 w-4"}),"Edit"]}),(0,Rr.jsxs)(Rg,{className:"cursor-pointer flex items-center gap-2 text-red-600",onClick:()=>m(e),children:[(0,Rr.jsx)(oK,{className:"h-4 w-4"}),"Delete"]})]})]})})]},null===e||void 0===e?void 0:e._id)))})]}):(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[(0,Rr.jsx)(SK,{className:"h-12 w-12 mb-2"}),(0,Rr.jsx)("p",{children:"No batches found for this item"})]})}),(0,Rr.jsx)(mN,{value:"purchases",children:(0,Rr.jsx)(pX,{inventoryId:null===n||void 0===n?void 0:n._id})}),(0,Rr.jsx)(mN,{value:"sales",children:(0,Rr.jsx)(mX,{inventoryId:null===n||void 0===n?void 0:n._id})}),(0,Rr.jsx)(mN,{value:"timeline",children:(0,Rr.jsx)(fX,{inventoryId:null===n||void 0===n?void 0:n._id})})]}),(0,Rr.jsx)(oX,{open:o,onOpenChange:l,inventoryDetails:n,setItemDetails:a,batchDetails:u,setUpdateBatchDetails:h}),(0,Rr.jsx)(fK,{open:c,onOpenChange:d,inventoryDetails:n}),(0,Rr.jsx)(Tj,{open:!!f,onOpenChange:()=>m(null),children:(0,Rr.jsxs)(_j,{className:"max-w-xl p-0 gap-0",children:[(0,Rr.jsxs)(Rj,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:[(0,Rr.jsx)(Mj,{className:"text-base font-semibold",children:"Delete Batch"}),(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>m(null),disabled:p,children:(0,Rr.jsx)(jN,{className:"h-4 w-4"})})]}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsxs)(Oj,{children:["This will permanently delete the batch ",null===f||void 0===f?void 0:f.batchNumber,". This action cannot be undone."]})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{onClick:()=>m(null),variant:"outline",size:"sm",disabled:p,children:"Cancel"}),(0,Rr.jsx)(Vn,{onClick:()=>(async e=>{try{x(!0);const t=await fetch(`${Nu}/api/inventory/delete-batch/${e}`,{method:"DELETE",credentials:"include"});if(!t.ok)throw new Error("Failed to delete batch");const r=await t.json();a(r),g({title:"Batch deleted successfully",variant:"destructive"}),m(null)}catch(t){g({title:"Something went wrong",variant:"destructive"})}finally{x(!1)}})(f._id),size:"sm",disabled:p,children:p?"Deleting...":"Delete"})]})]})})]})}const vX=()=>{const[e,r]=(0,t.useState)(null),[n,a]=(0,t.useState)(!0);return(0,Rr.jsxs)("div",{className:"grid grid-cols-7 gap-4 h-[100vh]",children:[(0,Rr.jsx)("div",{className:"col-span-2 h-[100vh]",children:(0,Rr.jsx)(dX,{onItemSelect:r,selectedItemId:e,setHasItems:a})}),(0,Rr.jsx)("div",{className:"col-span-5 h-[100vh]",children:n?(0,Rr.jsx)(xX,{inventoryId:e}):(0,Rr.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-muted-foreground",children:[(0,Rr.jsx)(SK,{className:"h-12 w-12 mb-2"}),(0,Rr.jsx)("p",{className:"text-lg",children:"No items in inventory"})]})})]})};var gX=r(141);const yX=()=>{var e,r,n,a,s,i,o;const l=Q(),c=Z(),d=(0,t.useRef)(),[u,h]=(0,t.useState)("A4"),f=null===(e=l.state)||void 0===e?void 0:e.invoiceData,m=$e((e=>e.pharmacy.pharmacyInfo)),p={pack:!0,hsn:!0,batch:!0,exp:!0,qty:!0,mrp:!0,rate:!0,discount:!0,gst:!0},[x,v]=(0,t.useState)((()=>{const e=localStorage.getItem("invoiceFieldVisibility");if(e)try{return JSON.parse(e)}catch(t){return console.error("Error parsing field visibility from localStorage:",t),p}return p}));(0,t.useEffect)((()=>{localStorage.setItem("invoiceFieldVisibility",JSON.stringify(x))}),[x]),(0,t.useEffect)((()=>{const e=e=>{((e.ctrlKey||e.metaKey)&&"p"===e.key||"Enter"===e.key)&&(e.preventDefault(),g())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[u,f,m]);const g=(0,gX.useReactToPrint)({content:()=>d.current,pageStyle:`\n      @page {\n        size: ${u};\n        margin: 0;\n      }\n      @media print {\n        html, body {\n          height: 100%;\n          margin: 0 !important;\n          padding: 0 !important;\n          overflow: hidden;\n        }\n        body * {\n          visibility: hidden;\n        }\n        #print-content,\n        #print-content * {\n          visibility: visible;\n        }\n        #print-content {\n          position: absolute;\n          left: 0;\n          top: 0;\n        }\n      }\n    `,onBeforeGetContent:()=>{},onAfterPrint:()=>{}});if(!f)return(0,Rr.jsx)("div",{children:"No invoice data found"});const y=()=>{h((e=>"A4"===e?"A5":"A4"))};return(0,Rr.jsxs)("div",{className:"p-4 font-semibold",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between mb-4 print:hidden border-b-[1px] border-gray-400 pb-2",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>c(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-xl font-medium",children:"Invoice Preview"})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-1 bg-gray-100 p-1 rounded-full",children:[(0,Rr.jsx)("button",{onClick:y,className:"rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium transition-all "+("A4"===u?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"A4"}),(0,Rr.jsx)("button",{onClick:y,className:"rounded-full w-8 h-8 flex items-center justify-center text-sm font-medium transition-all "+("A5"===u?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"A5"})]}),(0,Rr.jsxs)(Vn,{variant:"outline",className:"gap-2",onClick:g,size:"sm",children:[(0,Rr.jsx)(eX,{className:"w-4 h-4"}),"Print Now (Ctrl + P)"]}),(0,Rr.jsx)("div",{className:"flex gap-2",children:(0,Rr.jsxs)(Qo,{children:[(0,Rr.jsx)(Jo,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"outline",className:"gap-2",size:"sm",children:[(0,Rr.jsx)(bm,{className:"w-4 h-4"}),"Field Settings"]})}),(0,Rr.jsxs)(Zo,{className:"w-64 p-0 print:hidden ",side:"bottom",align:"end",children:[(0,Rr.jsx)("div",{className:"px-4 py-3 bg-gray-50 border-b",children:(0,Rr.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"Customize Fields"})}),(0,Rr.jsx)("div",{className:"p-3 space-y-2",children:Object.keys(x).map((e=>(0,Rr.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,Rr.jsx)("span",{className:"capitalize text-xs font-medium text-gray-600",children:e.replace(/([A-Z])/g," $1")}),(0,Rr.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,Rr.jsx)("input",{type:"checkbox",checked:x[e],onChange:()=>(e=>{v((t=>({...t,[e]:!t[e]})))})(e),className:"sr-only peer"}),(0,Rr.jsx)("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-500 peer-checked:bg-blue-500"})]})]},e)))})]})]})})]})]}),(0,Rr.jsxs)("div",{id:"print-content",className:"bg-white mx-auto shadow-lg print:shadow-none",style:{...{A4:{width:"220mm",minHeight:"297mm",padding:"8mm"},A5:{width:"215mm",minHeight:"148",padding:"5mm"}}[u],marginBottom:"10mm",fontSize:"A5"===u?"0.75rem":"0.875rem"},ref:d,children:[(0,Rr.jsx)("div",{className:"border-x-[1px] border-t-[1px]  border-gray-800",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-7 gap-3",children:[(0,Rr.jsxs)("div",{className:"border-r-[1px] border-gray-800",children:[(0,Rr.jsx)("div",{className:"w-full border-b-[1px] border-gray-800 p-1",style:{backgroundColor:"#e5e7eb"},children:"TAX INVOICE"}),(null===m||void 0===m?void 0:m.logoUsable)&&(0,Rr.jsx)("div",{className:"w-auto h-[78px] p-1",children:(0,Rr.jsx)("img",{src:m.logoUsable,alt:"Logo",className:"w-full h-full object-contain"})})]}),(0,Rr.jsxs)("div",{className:"col-span-3  gap-2 py-1 ",children:[(0,Rr.jsx)("h2",{className:"font-semibold uppercase text-xl",children:(null===m||void 0===m?void 0:m.name)||"Your Pharmacy Name"}),(0,Rr.jsx)("p",{className:"text-sm  leading-snug",children:(null===m||void 0===m?void 0:m.address)||"Pharmacy Address"}),(0,Rr.jsxs)("div",{className:"text-sm  space-x-6",children:[(0,Rr.jsxs)("span",{children:["Mob No: ",null===m||void 0===m?void 0:m.contactNumber]}),(0,Rr.jsxs)("span",{children:["DL: ",null===m||void 0===m?void 0:m.drugLicenceNumber]})]}),(0,Rr.jsx)("div",{className:"text-sm ",children:(0,Rr.jsxs)("span",{children:["GSTIN: ",null===m||void 0===m?void 0:m.gstNumber]})})]}),(0,Rr.jsxs)("div",{className:"col-span-3  border-l-[1px] border-gray-800",children:[(0,Rr.jsxs)("div",{className:"bg-gray-200 px-3 py-1 border-b-[1px] border-gray-800 flex justify-between gap-8 text-sm",children:[(0,Rr.jsx)("span",{className:"font-medium",children:f.invoiceNumber}),(0,Rr.jsxs)("span",{className:"font-medium",children:[jc(new Date(f.invoiceDate),"dd-MM-yyyy")," ",jc(new Date(f.createdAt),"hh:mm a")]})]}),(0,Rr.jsxs)("div",{className:"text-xs font-medium p-2 space-y-1",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-5",children:[(0,Rr.jsx)("span",{className:"",children:"Name:"}),(0,Rr.jsx)("span",{className:"col-span-4 capitalize",children:f.customerName})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-5",children:[(0,Rr.jsx)("span",{className:"",children:"Mob No:"}),(0,Rr.jsx)("span",{className:"col-span-4",children:f.customerMob||f.mob||"---"})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-5",children:[(0,Rr.jsx)("span",{className:"",children:"Doctor:"}),(0,Rr.jsx)("span",{className:"col-span-4",children:f.doctorName||"---"})]})]})]})]})}),(0,Rr.jsx)("div",{className:"min-h-[156px] border-[1px] border-gray-800",children:(0,Rr.jsxs)("table",{className:"w-full text-xs",children:[(0,Rr.jsx)("thead",{children:(0,Rr.jsxs)("tr",{className:"bg-gray-200 border-b-[1px] border-gray-800",children:[(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5"}),(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5",children:"Description"}),x.pack&&(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5 text-center",children:"Pack"}),x.hsn&&(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5 text-center",children:"HSN"}),x.batch&&(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5 text-center",children:"Batch"}),x.exp&&(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5 text-center",children:"Exp"}),x.qty&&(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5 text-center",children:"Qty"}),x.mrp&&(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5 text-center",children:"MRP"}),x.rate&&(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5 text-center",children:"Rate"}),x.discount&&(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5 text-center",children:"Dis%"}),x.gst&&(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5 text-center",children:"GST%"}),(0,Rr.jsx)("th",{className:" font-medium p-1.5 text-right",children:"Amount"})]})}),(0,Rr.jsxs)("tbody",{className:"min-h-[180px]",children:[f.products.map(((e,t)=>(0,Rr.jsxs)("tr",{className:"",children:[(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center px-1.5",children:t+1}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 px-1.5",children:e.productName}),x.pack&&(0,Rr.jsxs)("td",{className:"border-r-[1px] border-gray-800 text-center px-1.5",children:["1*",e.pack]}),x.hsn&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center px-1.5",children:e.HSN}),x.batch&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center px-1.5",children:e.batchNumber}),x.exp&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center px-1.5",children:e.expiry}),x.qty&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center px-1.5",children:(()=>{const t=e.pack||1;if(t<=1)return e.quantity;const r=Math.floor(e.quantity/t),n=e.quantity%t;return 0===n?`${r}`:`${r} : ${n}`})()}),x.mrp&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center px-1.5",children:e.mrp}),x.rate&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center px-1.5",children:e.saleRate}),x.discount&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center px-1.5",children:(null===e||void 0===e?void 0:e.discount)||0}),x.gst&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center px-1.5",children:(null===e||void 0===e?void 0:e.gstPer)||0}),(0,Rr.jsxs)("td",{className:" text-right px-1.5",children:[e.amount," ","return"===e.types&&(0,Rr.jsx)("span",{className:"text-red-500",children:"R"})]})]},t))),[...Array(Math.max(0,18-f.products.length))].map(((e,t)=>(0,Rr.jsxs)("tr",{children:[(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 pl-2 p-1.5"}),x.pack&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"}),x.hsn&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"}),x.batch&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"}),x.exp&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"}),x.qty&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"}),x.mrp&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"}),x.rate&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"}),x.discount&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"}),x.gst&&(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"})]},`empty-${t}`)))]})]})}),(0,Rr.jsxs)("div",{className:"grid grid-cols-7 border-b-[1px] border-l-[1px] border-r-[1px] border-gray-800",children:[(0,Rr.jsx)("div",{className:" flex items-end justify-center pb-3 col-span-2",children:(0,Rr.jsx)("div",{className:" inline-block",children:(0,Rr.jsx)("p",{className:"font-medium text-xs text-gray-700",children:"Authorized Signatory"})})}),(0,Rr.jsxs)("div",{className:"col-span-3 border-r-[1px] border-l-[1px] border-gray-800 px-3",children:[(0,Rr.jsxs)("table",{className:"w-full text-xs ",children:[(0,Rr.jsx)("thead",{className:"border-b-[1px] py-2",children:(0,Rr.jsxs)("tr",{className:"",children:[(0,Rr.jsx)("th",{className:"text-left font-medium",children:"GST"}),(0,Rr.jsx)("th",{className:"text-right font-medium",children:"Taxable"}),(0,Rr.jsx)("th",{className:"text-right font-medium",children:"CGST"}),(0,Rr.jsx)("th",{className:"text-right font-medium",children:"SGST"})]})}),(0,Rr.jsxs)("tbody",{children:[Object.entries(f.billSummary.gstSummary).filter((e=>{let[t,r]=e;return r.taxable>0})).map((e=>{let[t,r]=e;return(0,Rr.jsxs)("tr",{children:[(0,Rr.jsxs)("td",{children:[t,"%"]}),(0,Rr.jsx)("td",{className:"text-right",children:r.taxable.toFixed(2)}),(0,Rr.jsxs)("td",{className:"text-right",children:[r.cgst.toFixed(2)," (",Number(t)/2,"%)"]}),(0,Rr.jsxs)("td",{className:"text-right",children:[r.sgst.toFixed(2)," (",Number(t)/2,"%)"]})]},t)})),(0,Rr.jsxs)("tr",{className:"font-medium border-t-[1px]",children:[(0,Rr.jsx)("td",{children:"Total"}),(0,Rr.jsxs)("td",{className:"text-right",children:["\u20b9",f.billSummary.taxableAmount.toFixed(2)]}),(0,Rr.jsxs)("td",{className:"text-right border-b",children:["\u20b9",(f.billSummary.gstAmount/2).toFixed(2)]}),(0,Rr.jsxs)("td",{className:"text-right border-b",children:["\u20b9",(f.billSummary.gstAmount/2).toFixed(2)]})]})]})]}),(0,Rr.jsxs)("div",{className:"text-right col-span-2 text-xs",children:["GST : ",PP(f.billSummary.gstAmount)]})]}),(0,Rr.jsx)("div",{className:"col-span-2",children:(0,Rr.jsxs)("div",{className:"space-y-1 text-xs py-1",children:[(0,Rr.jsxs)("div",{className:"flex justify-between px-2",children:[(0,Rr.jsx)("span",{className:"",children:"Subtotal:"}),(0,Rr.jsx)("span",{children:PP(null===f||void 0===f||null===(r=f.billSummary)||void 0===r?void 0:r.subtotal)})]}),(0,Rr.jsxs)("div",{className:"flex justify-between px-2",children:[(0,Rr.jsx)("span",{className:"",children:"Discount:"}),(0,Rr.jsxs)("span",{children:[0!==(null===f||void 0===f||null===(n=f.billSummary)||void 0===n?void 0:n.discountAmount)&&"-"," ",PP(null===f||void 0===f||null===(a=f.billSummary)||void 0===a?void 0:a.discountAmount)]})]}),0!==(null===f||void 0===f||null===(s=f.billSummary)||void 0===s?void 0:s.adjustment)&&(0,Rr.jsxs)("div",{className:"flex justify-between px-2",children:[(0,Rr.jsx)("span",{className:"",children:"Adjustment:"}),(0,Rr.jsx)("span",{children:PP(null===f||void 0===f||null===(i=f.billSummary)||void 0===i?void 0:i.adjustment)})]}),"return"===(null===f||void 0===f?void 0:f.saleType)&&(0,Rr.jsxs)("div",{className:"flex justify-between px-2",children:[(0,Rr.jsx)("span",{className:"",children:"Return Value:"}),(0,Rr.jsx)("span",{children:PP(null===f||void 0===f||null===(o=f.billSummary)||void 0===o?void 0:o.returnAmount)})]}),(0,Rr.jsxs)("div",{className:"flex justify-between border-t-[1px] border-b-[1px] border-gray-800 font-medium bg-gray-200 py-1 px-2 text-sm box-border",children:[(0,Rr.jsx)("span",{children:"Total Amount:"}),(0,Rr.jsx)("span",{children:PP(null===f||void 0===f?void 0:f.grandTotal)})]}),(0,Rr.jsxs)("div",{className:"flex justify-between px-2",children:[(0,Rr.jsx)("span",{className:"",children:"Paid/Due:"}),(0,Rr.jsxs)("span",{children:[PP(null===f||void 0===f?void 0:f.amountPaid),"/",PP(Number(f.grandTotal)-Number(f.amountPaid))]})]})]})})]})]}),(0,Rr.jsx)("style",{children:`\n          @media print {\n            @page {\n              size: ${u};\n              margin: 0;\n            }\n            body {\n              margin: 0;\n              padding: 0;\n              -webkit-print-color-adjust: exact !important;\n              print-color-adjust: exact !important;\n              color-adjust: exact !important;\n            }\n            .print\\:hidden {\n              display: none !important;\n            }\n          }\n        `})]})},bX=rm("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),wX=e=>{try{if(!e)return"-";const t=new Date(e);return isNaN(t.getTime())?"-":jc(t,"dd/MM/yyyy")}catch(t){return"-"}},NX=e=>{try{if(!e)return"-";const t=new Date(e);return isNaN(t.getTime())?"-":jc(t,"dd/MM/yyyy HH:mm")}catch(t){return"-"}};function jX(){const e=rt(),r=Z(),{accounts:n,error:a,fetchStatus:s,createAccountStatus:i,updateAccountStatus:o}=$e((e=>e.accounts)),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(!1),[h,f]=(0,t.useState)(null),{toast:m}=$g(),[p,x]=(0,t.useState)({accountType:"",bankDetails:{bankName:"",accountNumber:"",ifscCode:"",accountHolderName:"",type:"SAVINGS",openingBalance:"",openingBalanceDate:new Date},upiDetails:{upiId:"",upiName:"",openingBalance:"",openingBalanceDate:new Date},cashDetails:{openingBalance:"",openingBalanceDate:new Date},otherDetails:{openingBalance:"",openingBalanceDate:new Date}});(0,t.useEffect)((()=>{"idle"===s&&e(kh())}),[e,s]),(0,t.useEffect)((()=>{a&&m({title:"Error",description:a,variant:"destructive"})}),[a,m]);return(0,Rr.jsxs)("div",{className:"w-full mx-auto py-4",children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>window.history.back(),children:(0,Rr.jsx)(Mw,{className:"w-5 h-5"})}),(0,Rr.jsx)("h1",{className:"text-2xl font-bold",children:"Account Details"})]}),(0,Rr.jsxs)(WN,{open:l,onOpenChange:c,children:[(0,Rr.jsx)(qN,{asChild:!0,children:(0,Rr.jsxs)(Vn,{className:"gap-2",children:[(0,Rr.jsx)(Aw,{className:"w-4 h-4"})," Add Account"]})}),(0,Rr.jsxs)(XN,{className:"max-w-2xl p-0 gap-0",children:[(0,Rr.jsx)(QN,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:(0,Rr.jsx)(ZN,{className:"text-base font-semibold",children:"Add New Account"})}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Account Type",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsxs)(fw,{value:p.accountType,onValueChange:e=>x({...p,accountType:e}),children:[(0,Rr.jsx)(pw,{className:"h-9",children:(0,Rr.jsx)(mw,{placeholder:"Select account type"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"CASH",children:"Cash"}),(0,Rr.jsx)(yw,{value:"BANK",children:"Bank"}),(0,Rr.jsx)(yw,{value:"UPI",children:"UPI"}),(0,Rr.jsx)(yw,{value:"OTHERS",children:"Others"})]})]})]}),(()=>{switch(p.accountType){case"BANK":return(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Bank Name",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{className:"h-9",value:p.bankDetails.bankName,onChange:e=>x({...p,bankDetails:{...p.bankDetails,bankName:e.target.value}})})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Account Number",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{className:"h-9",value:p.bankDetails.accountNumber,onChange:e=>x({...p,bankDetails:{...p.bankDetails,accountNumber:e.target.value}})})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["IFSC Code",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{className:"h-9",value:p.bankDetails.ifscCode,onChange:e=>x({...p,bankDetails:{...p.bankDetails,ifscCode:e.target.value}})})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Account Holder Name",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{className:"h-9",value:p.bankDetails.accountHolderName,onChange:e=>x({...p,bankDetails:{...p.bankDetails,accountHolderName:e.target.value}})})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Account Type",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsxs)(fw,{value:p.bankDetails.type,onValueChange:e=>x({...p,bankDetails:{...p.bankDetails,type:e}}),children:[(0,Rr.jsx)(pw,{className:"h-9",children:(0,Rr.jsx)(mw,{})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"SAVINGS",children:"Savings"}),(0,Rr.jsx)(yw,{value:"CURRENT",children:"Current"})]})]})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Opening Balance",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{type:"number",className:"h-9",value:p.bankDetails.openingBalance,onChange:e=>x({...p,bankDetails:{...p.bankDetails,openingBalance:Number(e.target.value)}})})]})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Opening Balance Date",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{type:"date",className:"h-9",value:p.bankDetails.openingBalanceDate?jc(p.bankDetails.openingBalanceDate,"yyyy-MM-dd"):"",onChange:e=>x({...p,bankDetails:{...p.bankDetails,openingBalanceDate:new Date(e.target.value)}})})]})]});case"UPI":return(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["UPI ID",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{className:"h-9",value:p.upiDetails.upiId,onChange:e=>x({...p,upiDetails:{...p.upiDetails,upiId:e.target.value}})})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["UPI Name",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{className:"h-9",value:p.upiDetails.upiName,onChange:e=>x({...p,upiDetails:{...p.upiDetails,upiName:e.target.value}})})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Opening Balance",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{type:"number",className:"h-9",value:p.upiDetails.openingBalance,onChange:e=>x({...p,upiDetails:{...p.upiDetails,openingBalance:Number(e.target.value)}})})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Opening Balance Date",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{type:"date",className:"h-9",value:p.upiDetails.openingBalanceDate?jc(p.upiDetails.openingBalanceDate,"yyyy-MM-dd"):"",onChange:e=>x({...p,upiDetails:{...p.upiDetails,openingBalanceDate:new Date(e.target.value)}})})]})]})]});case"CASH":return(0,Rr.jsx)("div",{className:"space-y-4",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Opening Balance",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{type:"number",className:"h-9",value:p.cashDetails.openingBalance,onChange:e=>x({...p,cashDetails:{...p.cashDetails,openingBalance:Number(e.target.value)}})})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Opening Balance Date",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{type:"date",className:"h-9",value:p.cashDetails.openingBalanceDate?jc(p.cashDetails.openingBalanceDate,"yyyy-MM-dd"):"",onChange:e=>x({...p,cashDetails:{...p.cashDetails,openingBalanceDate:new Date(e.target.value)}})})]})]})});case"OTHERS":return(0,Rr.jsx)("div",{className:"space-y-4",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Opening Balance",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{type:"number",className:"h-9",value:p.openingBalance,onChange:e=>x({...p,openingBalance:Number(e.target.value)})})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Opening Balance Date",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{type:"date",className:"h-9",value:p.openingBalanceDate?jc(p.openingBalanceDate,"yyyy-MM-dd"):"",onChange:e=>x({...p,openingBalanceDate:new Date(e.target.value)})})]})]})});default:return null}})()]})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>c(!1),children:"Cancel"}),(0,Rr.jsx)(Vn,{type:"submit",size:"sm",onClick:async()=>{try{await e(Eh(p)).unwrap();m({title:"Success",description:"Account added successfully",variant:"success"}),c(!1),x({accountType:"",bankDetails:{bankName:"",accountNumber:"",ifscCode:"",accountHolderName:"",type:"SAVINGS",openingBalance:"",openingBalanceDate:new Date},upiDetails:{upiId:"",upiName:"",openingBalance:"",openingBalanceDate:new Date},cashDetails:{openingBalance:"",openingBalanceDate:new Date},otherDetails:{openingBalance:"",openingBalanceDate:new Date}})}catch(a){m({title:"Error",description:a.message||"Failed to add account",variant:"destructive"})}},className:"bg-blue-600 text-white hover:bg-blue-700",disabled:"loading"===i,children:"loading"===i?"Adding...":"Add Account"})]})]})]})]}),"loading"===s?(0,Rr.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Rr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):(0,Rr.jsx)(Rr.Fragment,{children:0===n.length?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,Rr.jsx)(bX,{className:"w-16 h-16 mb-4"}),(0,Rr.jsx)("p",{className:"text-lg",children:"No accounts found. Add your first account to get started!"})]}):(0,Rr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((e=>{var t,n,a,s,i,o,l,c,d,h;return(0,Rr.jsxs)(Kf,{children:[(0,Rr.jsx)(Yf,{children:(0,Rr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(Xf,{children:e.accountType}),(0,Rr.jsxs)(Qf,{children:["Last updated: ",NX(e.lastUpdated)]})]}),(0,Rr.jsxs)("div",{className:"flex gap-2",children:[("BANK"===e.accountType||"UPI"===e.accountType)&&(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>{f(e),u(!0)},className:"text-sm",children:"Edit"}),(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>r(`/accounts/transactions/${e._id}`),className:"text-sm",children:"View Transactions"})]})]})}),(0,Rr.jsxs)(Jf,{children:["BANK"===e.accountType&&(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Bank Name"}),(0,Rr.jsx)("div",{children:(null===(t=e.bankDetails)||void 0===t?void 0:t.bankName)||"-"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Account Number"}),(0,Rr.jsx)("div",{children:(null===(n=e.bankDetails)||void 0===n?void 0:n.accountNumber)||"-"})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Opening Balance"}),(0,Rr.jsxs)("div",{children:["\u20b9",(null===(a=e.bankDetails)||void 0===a?void 0:a.openingBalance)||0]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Opening Date"}),(0,Rr.jsx)("div",{children:wX(null===(s=e.bankDetails)||void 0===s?void 0:s.openingBalanceDate)})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Current Balance"}),(0,Rr.jsx)("div",{className:"text-lg font-semibold "+(e.balance<0?"text-red-600":""),children:PP(e.balance)})]})]}),"UPI"===e.accountType&&(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"UPI ID"}),(0,Rr.jsx)("div",{children:(null===(i=e.upiDetails)||void 0===i?void 0:i.upiId)||"-"})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"UPI Name"}),(0,Rr.jsx)("div",{children:(null===(o=e.upiDetails)||void 0===o?void 0:o.upiName)||"-"})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Opening Balance"}),(0,Rr.jsxs)("div",{children:["\u20b9",(null===(l=e.upiDetails)||void 0===l?void 0:l.openingBalance)||0]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Opening Date"}),(0,Rr.jsx)("div",{children:wX(null===(c=e.upiDetails)||void 0===c?void 0:c.openingBalanceDate)})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Current Balance"}),(0,Rr.jsx)("div",{className:"text-lg font-semibold "+(e.balance<0?"text-red-600":""),children:PP(e.balance)})]})]}),("CASH"===e.accountType||"OTHERS"===e.accountType)&&(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Opening Balance"}),(0,Rr.jsxs)("div",{children:["\u20b9",(null===(d=e.cashDetails)||void 0===d?void 0:d.openingBalance)||0]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Opening Date"}),(0,Rr.jsx)("div",{children:wX(null===(h=e.cashDetails)||void 0===h?void 0:h.openingBalanceDate)})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{children:"Current Balance"}),(0,Rr.jsx)("div",{className:"text-lg font-semibold "+(e.balance<0?"text-red-600":""),children:PP(e.balance)})]})]})]})]},e._id)}))})}),(0,Rr.jsx)(WN,{open:d,onOpenChange:u,children:(0,Rr.jsxs)(XN,{className:"max-w-2xl p-0 gap-0",children:[(0,Rr.jsx)(QN,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:(0,Rr.jsx)(ZN,{className:"text-base font-semibold",children:"Edit Account"})}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsx)("div",{className:"space-y-4",children:(()=>{var e,t,r,n,a,s,i;if(!h)return null;switch(h.accountType){case"BANK":return(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Bank Name",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{className:"h-9",value:null===(e=h.bankDetails)||void 0===e?void 0:e.bankName,onChange:e=>f({...h,bankDetails:{...h.bankDetails,bankName:e.target.value}})})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Account Number",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{className:"h-9",value:null===(t=h.bankDetails)||void 0===t?void 0:t.accountNumber,onChange:e=>f({...h,bankDetails:{...h.bankDetails,accountNumber:e.target.value}})})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["IFSC Code",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{className:"h-9",value:null===(r=h.bankDetails)||void 0===r?void 0:r.ifscCode,onChange:e=>f({...h,bankDetails:{...h.bankDetails,ifscCode:e.target.value}})})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Account Holder Name",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{className:"h-9",value:null===(n=h.bankDetails)||void 0===n?void 0:n.accountHolderName,onChange:e=>f({...h,bankDetails:{...h.bankDetails,accountHolderName:e.target.value}})})]})]}),(0,Rr.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["Account Type",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsxs)(fw,{value:null===(a=h.bankDetails)||void 0===a?void 0:a.type,onValueChange:e=>f({...h,bankDetails:{...h.bankDetails,type:e}}),children:[(0,Rr.jsx)(pw,{className:"h-9",children:(0,Rr.jsx)(mw,{})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"SAVINGS",children:"Savings"}),(0,Rr.jsx)(yw,{value:"CURRENT",children:"Current"})]})]})]})})]});case"UPI":return(0,Rr.jsx)("div",{className:"space-y-4",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["UPI ID",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{className:"h-9",value:null===(s=h.upiDetails)||void 0===s?void 0:s.upiId,onChange:e=>f({...h,upiDetails:{...h.upiDetails,upiId:e.target.value}})})]}),(0,Rr.jsxs)("div",{className:"space-y-2",children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium text-gray-700",children:["UPI Name",(0,Rr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rr.jsx)(Gf,{className:"h-9",value:null===(i=h.upiDetails)||void 0===i?void 0:i.upiName,onChange:e=>f({...h,upiDetails:{...h.upiDetails,upiName:e.target.value}})})]})]})});default:return null}})()})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"sm",onClick:()=>{u(!1),f(null)},children:"Cancel"}),(0,Rr.jsx)(Vn,{type:"submit",size:"sm",onClick:async()=>{try{await e(Th({id:h._id,data:h})).unwrap();m({title:"Success",description:"Account updated successfully",variant:"success"}),u(!1),f(null)}catch(a){m({title:"Error",description:a.message||"Failed to update account",variant:"destructive"})}},className:"bg-blue-600 text-white hover:bg-blue-700",disabled:"loading"===o,children:"loading"===o?"Updating...":"Update Account"})]})]})})]})}const SX=[{header:"Customer Name",field:"name",width:30,required:!0},{header:"Mobile Number",field:"mob",width:15},{header:"Address",field:"address",width:40},{header:"Open Balance",field:"openBalance",width:15,format:"currency"},{header:"Balance",field:"currentBalance",width:15,format:"currency"}],CX=()=>{const e=rt(),r=Z(),n=$e((e=>e.customers.customers)),a=$e((e=>e.customers.status)),{currentPage:s,totalPages:i}=$e((e=>e.customers.pagination)),{query:o,type:l}=$e((e=>e.customers.search)),{importStatus:c}=$e((e=>e.exportImport)),{toast:d}=$g(),[u,h]=(0,t.useState)(!1),[f,m]=(0,t.useState)(null),[p,x]=(0,t.useState)(o),[v,g]=(0,t.useState)(!1),[y,b]=(0,t.useState)(!1),[w,N]=(0,t.useState)(!1),[j,S]=(0,t.useState)(null),[C,k]=(0,t.useState)("idle");(0,t.useEffect)((()=>{"idle"!==a&&"succeeded"!==c||e(Bh({page:s,searchQuery:o,searchType:l}))}),[e,s,o,l,a,c]);const E=()=>{h(!1),m(null)},T=t=>{e(Kh({query:t,type:l})),e(Gh())},D=t=>{t>=1&&t<=i&&(e(Gh()),e(Bh({page:t,searchQuery:o,searchType:l})))};return"loading"===a?(0,Rr.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Rr.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})}):(0,Rr.jsxs)("div",{className:"relative p-2 space-y-4",children:[(0,Rr.jsx)("div",{className:"flex justify-between items-center",children:(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>r(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-2xl font-semibold",children:"Customers"})]})}),(0,Rr.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,Rr.jsxs)("div",{className:"flex gap-2",children:[(0,Rr.jsxs)(fw,{value:l,onValueChange:t=>{e(Kh({query:o,type:t})),e(Gh())},children:[(0,Rr.jsx)(pw,{className:"w-[100px] focus:ring-0",children:(0,Rr.jsx)(mw,{placeholder:"Search by"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"name",children:"Name"}),(0,Rr.jsx)(yw,{value:"mobile",children:"Mobile"})]})]}),(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(Gf,{className:"w-[250px] pl-8",placeholder:`Search ${"name"===l?"customer name":"mobile number"}...`,value:p,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&T(p)}}),(0,Rr.jsx)(VN,{className:"h-4 w-4 absolute left-2.5 top-1/2 -translate-y-1/2 text-muted-foreground"}),p&&(0,Rr.jsx)(Vn,{variant:"ghost",size:"sm",className:"h-full aspect-square absolute right-0 top-0 hover:bg-transparent",onClick:()=>{x(""),T("")},children:(0,Rr.jsx)(jN,{className:"h-4 w-4 text-muted-foreground"})})]})]}),(0,Rr.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,Rr.jsxs)(Vn,{onClick:()=>h(!0),children:[(0,Rr.jsx)(ww,{className:"h-4 w-4 mr-2"}),"Add Customer"]}),(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsx)(Vn,{variant:"outline",size:"icon",children:(0,Rr.jsx)(EP,{className:"h-4 w-4"})})}),(0,Rr.jsxs)(_g,{align:"end",children:[(0,Rr.jsxs)(Rg,{onClick:()=>b(!0),disabled:"loading"===c,children:[(0,Rr.jsx)(NN,{className:"h-4 w-4 mr-2"}),"Import"]}),(0,Rr.jsxs)(Rg,{onClick:()=>g(!0),disabled:0===n.length,children:[(0,Rr.jsx)(GY,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})]})]}),"loading"===c&&(0,Rr.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:(0,Rr.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:(0,Rr.jsx)(Hy,{text:"Importing customers..."})})}),(0,Rr.jsx)(bK,{open:u,onOpenChange:E,editingCustomer:f,onSuccess:()=>{E(),e(Bh())}}),(0,Rr.jsx)(k$,{open:v,onOpenChange:g,data:n,columns:SX,formatters:{Balance:e=>e||0},fileName:"customers",title:"Export Customers Data"}),(0,Rr.jsx)(mG,{open:y,onOpenChange:b,importFunction:Bf,title:"Import Customers",columns:SX}),(0,Rr.jsx)(Tj,{open:w,onOpenChange:N,children:(0,Rr.jsxs)(_j,{className:"max-w-xl p-0 gap-0",children:[(0,Rr.jsxs)(Rj,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:[(0,Rr.jsx)(Mj,{className:"text-base font-semibold",children:"Delete Customer"}),(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>N(!1),children:(0,Rr.jsx)(jN,{className:"h-4 w-4"})})]}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsx)(Oj,{children:"Are you sure you want to delete this customer? This action will permanently delete all associated records and cannot be undone."})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{onClick:()=>N(!1),variant:"outline",size:"sm",disabled:"loading"===C,className:"px-4",children:"Cancel"}),(0,Rr.jsx)(Vn,{onClick:async()=>{if(j){k("loading");try{await e(Hh(j)).unwrap(),d({title:"Success",description:"Customer deleted successfully",variant:"success"}),N(!1),S(null)}catch(t){d({title:"Error",description:t.message||"An error occurred",variant:"destructive"})}finally{k("idle")}}},size:"sm",className:"px-4 bg-red-500 text-white hover:bg-red-600",disabled:"loading"===C,children:"loading"===C?"Deleting...":"Delete"})]})]})}),(0,Rr.jsx)("div",{className:"relative overflow-x-auto",children:0===n.length?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-muted-foreground",children:[(0,Rr.jsx)(am,{className:"h-12 w-12 mb-4"}),(0,Rr.jsx)("p",{className:"text-lg",children:"No customers found"}),(0,Rr.jsx)("p",{className:"text-sm",children:o?"Try adjusting your search terms":"Create a new customer to get started"}),(0,Rr.jsx)(Vn,{className:"mt-4",onClick:()=>h(!0),children:"Add Customer"})]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:"h-8",children:"CUSTOMER NAME"}),(0,Rr.jsx)(Tw,{className:"h-8",children:"MOBILE NUMBER "}),(0,Rr.jsx)(Tw,{className:"h-8",children:"ADDRESS"}),(0,Rr.jsx)(Tw,{className:"text-right h-8",children:"BALANCE (\u20b9)"}),(0,Rr.jsx)(Tw,{className:"text-right h-8",children:"ACTIONS"})]})}),(0,Rr.jsx)(Cw,{className:"border",children:n.map((e=>(0,Rr.jsxs)(Ew,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>r(`/customers/${e._id}`),children:[(0,Rr.jsx)(Dw,{className:"font-medium capitalize h-8",children:e.name}),(0,Rr.jsx)(Dw,{className:"h-8",children:(0,Rr.jsx)("div",{className:"flex items-center gap-2",children:e.mob})}),(0,Rr.jsx)(Dw,{className:"h-8",children:(0,Rr.jsx)("div",{className:"flex items-center gap-2",children:e.address})}),(0,Rr.jsx)(Dw,{className:"text-right h-8",children:(0,Rr.jsxs)("span",{className:(e.currentBalance>0?"text-green-600":e.currentBalance<0?"text-red-600":"")+" font-semibold text-right",children:[e.currentBalance>0?"\u2193 ":e.currentBalance<0?"\u2191 ":"",Math.abs(e.currentBalance||0)]})}),(0,Rr.jsx)(Dw,{className:"text-right h-8",children:(0,Rr.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:t=>{t.stopPropagation(),(e=>{m(e),h(!0)})(e)},children:(0,Rr.jsx)(OY,{className:"h-3 w-3"})}),(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:t=>{t.stopPropagation(),(async e=>{S(e),N(!0)})(e._id)},children:(0,Rr.jsx)(oK,{className:"h-3 w-3"})})]})})]},e._id)))})]}),(0,Rr.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,Rr.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Page ",s," of ",i]}),(0,Rr.jsxs)("div",{className:"flex gap-2",children:[(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",onClick:()=>D(s-1),disabled:1===s,children:[(0,Rr.jsx)(hX,{className:"h-4 w-4 mr-1"}),"Previous"]}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",onClick:()=>D(s+1),disabled:s===i,children:["Next",(0,Rr.jsx)(FY,{className:"h-4 w-4 ml-1"})]})]})]})]})})]})},kX=()=>{const e=Q();return(0,t.useEffect)((()=>{window.scrollTo({left:0,top:window.scrollY,behavior:"smooth"})}),[e.key]),null},EX=["distributorName","debitNoteNumber","returnDate","originalInvoiceNumber","originalInvoiceDate","product","HSN","batchNumber","expiry","pack","quantity","purchaseRate","discount","gstPer","addButton"],TX=e=>Math.round(100*(e+Number.EPSILON))/100,DX=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]},AX=e=>{if(!e)return null;const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()};function PX(){const e=(0,t.useRef)([]),{toast:r}=$g(),n=Z(),{returnId:a}=ee(),s=rt(),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)(),[h,f]=(0,t.useState)(),[m,p]=(0,t.useState)([]),[x,v]=(0,t.useState)(!1),[g,y]=(0,t.useState)(""),[b,w]=(0,t.useState)({}),[N,j]=(0,t.useState)(!1),[S,C]=(0,t.useState)(!1),[k,E]=(0,t.useState)({distributorName:"",distributorId:"",debitNoteNumber:"",returnDate:"",originalInvoiceNumber:"",originalInvoiceDate:"",originalInvoice:"",claimGSTInReturn:!0,adjustRateForDisc:!0});(0,t.useEffect)((()=>{a&&(async()=>{try{o(!0);const e=await fetch(`${Nu}/api/purchase/return/${a}`,{credentials:"include"});if(!e.ok)throw new Error("Something went wrong");const t=await e.json(),{distributorName:r,distributorId:n,debitNoteNumber:s,returnDate:i,originalInvoiceNumber:l,originalInvoiceDate:c,originalInvoice:d,products:h,claimGSTInReturn:m,adjustRateForDisc:x,billSummary:v,mob:g}=t,b=h.map((e=>({...e,quantity:e.quantity/(e.pack||1),reason:e.reason||"other"})));p(b),u(DX(i)),f(DX(c)),E({...k,distributorName:r,distributorId:n,debitNoteNumber:s,originalInvoiceNumber:l,originalInvoiceDate:c,originalInvoice:d,claimGSTInReturn:m,adjustRateForDisc:x,mob:g||""}),v&&w(v),y(r)}catch(e){console.error("Error fetching return:",e),r({title:"Error",description:"Failed to fetch return details",variant:"destructive"})}finally{o(!1)}})()}),[a]);const T=(0,t.useMemo)((()=>EY(m)),[m]),D=(e,t)=>{E((r=>({...r,[e]:t})))},A=(t,r)=>{if("Enter"===t.key)if(t.preventDefault(),t.shiftKey){const t=EX.indexOf(r);if(t>1){const r=EX[t-2];r&&e.current[r]&&e.current[r].focus()}}else r&&e.current[r]&&e.current[r].focus()},P=e=>{e.altKey&&"s"===e.key&&(e.preventDefault(),_())};(0,t.useEffect)((()=>(document.addEventListener("keydown",P),()=>{document.removeEventListener("keydown",P)})),[]);const _=async()=>{try{if(o(!0),!k.distributorName||!k.debitNoteNumber||!d||!k.originalInvoiceNumber||!h)throw new Error("Please fill all required fields");if(0===m.length)throw new Error("Please add at least one product");if(m.some((e=>!e.reason)))throw new Error("Please specify a reason for all returned products");const e=m.map((e=>({inventoryId:e.inventoryId,productName:e.productName,batchNumber:e.batchNumber,batchId:e.batchId,expiry:e.expiry,HSN:e.HSN||"",mrp:TX(Number(e.mrp)),quantity:Number(e.quantity)*(Number(e.pack)||1),pack:Number(e.pack),purchaseRate:TX(Number(e.purchaseRate)),discount:TX(Number(e.discount||0)),gstPer:TX(Number(e.gstPer)),amount:TX(Number(e.amount)),reason:e.reason||"other"}))),t={_id:a,debitNoteNumber:k.debitNoteNumber,returnDate:AX(d),distributorName:k.distributorName,distributorId:k.distributorId,mob:k.mob||"",originalInvoiceNumber:k.originalInvoiceNumber,originalInvoiceDate:AX(h),originalInvoice:k.originalInvoice,products:e,claimGSTInReturn:k.claimGSTInReturn,adjustRateForDisc:k.adjustRateForDisc,billSummary:{subtotal:TX(T.subtotal),discountAmount:TX(T.discountAmount),taxableAmount:TX(T.taxable),gstAmount:TX(T.gstAmount),totalQuantity:T.totalQuantity,productCount:T.productCount,grandTotal:TX(T.grandTotal)}},i=await fetch(`${Nu}/api/purchase/return/edit`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(!i.ok){const e=await i.json();throw new Error(e.message||"Failed to save return")}await i.json(),r({title:"Purchase return updated successfully",variant:"success"}),s(Mh()),n(-1)}catch(e){r({title:"Error",description:e.message||"Failed to save return",variant:"destructive"})}finally{o(!1)}};return(0,Rr.jsxs)("div",{className:"relative rounded-lg h-[100vh] pt-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>n(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsxs)("h1",{className:"text-xl font-medium",children:[l?"View":"Edit"," Purchase Return"]})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Rr.jsxs)(Vn,{size:"sm",variant:"outline",onClick:()=>j(!0),children:[(0,Rr.jsx)(jK,{className:"w-4 h-4 mr-2"}),"Column Settings"]}),l?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)(Vn,{size:"sm",variant:"destructive",className:"gap-2",onClick:()=>C(!0),disabled:i,children:[(0,Rr.jsx)(oK,{className:"w-4 h-4"}),"Delete"]}),(0,Rr.jsxs)(Vn,{size:"sm",className:"gap-2",onClick:()=>c(!1),children:[(0,Rr.jsx)(OY,{className:"w-4 h-4"})," Edit"]})]}):(0,Rr.jsx)(Vn,{size:"sm",className:"gap-2",onClick:_,disabled:i,children:i?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)("span",{className:"animate-spin",children:"\u23f3"}),"Saving..."]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(nK,{className:"w-4 h-4"}),"Save (Alt + S)"]})})]})]}),(0,Rr.jsx)(Hj,{className:"my-2"}),(0,Rr.jsxs)(dp,{className:"h-[calc(100vh-9rem)] pr-4",children:[(0,Rr.jsxs)("div",{className:"grid gap-4",children:[(0,Rr.jsxs)("div",{className:"grid gap-4 grid-cols-5",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["DISTRIBUTOR NAME",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{ref:t=>e.current.distributorName=t,value:g||"",onChange:e=>{e.preventDefault();const t=e.target.value;1!==t.length||" "!==t?t.length>0&&" "!==t[0]&&(y(t),v(!0)):v(!0)},onKeyDown:e=>A(e,"debitNoteNumber"),placeholder:"Type or Press space",disabled:l})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["DEBIT NOTE NO",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{ref:t=>e.current.debitNoteNumber=t,value:null===k||void 0===k?void 0:k.debitNoteNumber,onChange:e=>D("debitNoteNumber",e.target.value),onKeyDown:e=>A(e,"returnDate"),placeholder:"Debit Note No",disabled:l})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["RETURN DATE",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{ref:t=>e.current.returnDate=t,type:"date",value:d||"",onChange:e=>{u(e.target.value)},onKeyDown:e=>A(e,"originalInvoiceNumber"),disabled:l})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["ORIGINAL INVOICE NO",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{ref:t=>e.current.originalInvoiceNumber=t,value:null===k||void 0===k?void 0:k.originalInvoiceNumber,onChange:e=>D("originalInvoiceNumber",e.target.value),onKeyDown:e=>A(e,"originalInvoiceDate"),placeholder:"Original Invoice No",disabled:l})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)(yN,{className:"text-sm font-medium",children:["ORIGINAL INVOICE DATE",(0,Rr.jsx)("span",{className:"text-rose-500",children:"*REQUIRED"})]}),(0,Rr.jsx)(Gf,{ref:t=>e.current.originalInvoiceDate=t,type:"date",value:h||"",onChange:e=>{f(e.target.value)},onKeyDown:e=>A(e,"product"),disabled:l})]})]}),(0,Rr.jsxs)("div",{className:"flex gap-8",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"CLAIM GST IN RETURN?"}),(0,Rr.jsxs)(VG,{value:null!==k&&void 0!==k&&k.claimGSTInReturn?"yes":"no",onValueChange:e=>D("claimGSTInReturn","yes"===e),className:"gap-4 mt-2",disabled:l,children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"yes",id:"claim_gst_yes"}),(0,Rr.jsx)(yN,{htmlFor:"claim_gst_yes",children:"YES"})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"no",id:"claim_gst_no"}),(0,Rr.jsx)(yN,{htmlFor:"claim_gst_no",children:"NO"})]})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{className:"text-sm font-medium",children:"ADJUST RATE FOR DISCOUNT?"}),(0,Rr.jsxs)(VG,{value:null!==k&&void 0!==k&&k.adjustRateForDisc?"yes":"no",onValueChange:e=>D("adjustRateForDisc","yes"===e),className:"gap-4 mt-2",disabled:l,children:[(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"yes",id:"adjust_rate_yes"}),(0,Rr.jsx)(yN,{htmlFor:"adjust_rate_yes",children:"YES"})]}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rr.jsx)(HG,{value:"no",id:"adjust_rate_no"}),(0,Rr.jsx)(yN,{htmlFor:"adjust_rate_no",children:"NO"})]})]})]})]})]}),(0,Rr.jsxs)("div",{className:"my-4",children:[(0,Rr.jsxs)("div",{className:"mb-4",children:[(0,Rr.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Return Items"}),(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Add items to return. Each item must have a return reason."})]}),(0,Rr.jsx)(TK,{inputRef:e,products:m,setProducts:p,viewMode:l,gstMode:"exclusive",handleKeyDown:A,isReturn:!0,extraColumns:[{header:"Return Reason",cell:(e,t)=>(0,Rr.jsxs)(fw,{value:e.reason||"other",onValueChange:e=>{const r=[...m];r[t]={...r[t],reason:e},p(r)},disabled:l,children:[(0,Rr.jsx)(pw,{className:"w-[180px]",children:(0,Rr.jsx)(mw,{placeholder:"Select reason"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"damaged",children:"Damaged"}),(0,Rr.jsx)(yw,{value:"expired",children:"Expired"}),(0,Rr.jsx)(yw,{value:"wrong_item",children:"Wrong Item"}),(0,Rr.jsx)(yw,{value:"excess_stock",children:"Excess Stock"}),(0,Rr.jsx)(yw,{value:"other",children:"Other"})]})]})}]})]})]}),(0,Rr.jsxs)("div",{className:"fixed bottom-0 w-[cal(100%-200px)] grid grid-cols-7 gap-4 p-4 text-sm text-white bg-gray-800 rounded-lg",children:[(0,Rr.jsxs)("div",{className:"text-center",children:[(0,Rr.jsxs)("div",{className:"mb-1 text-gray-400",children:["Total Products: ",null===T||void 0===T?void 0:T.productCount]}),(0,Rr.jsxs)("div",{className:"text-gray-400",children:["Total Quantity: ",null===T||void 0===T?void 0:T.totalQuantity]})]}),(0,Rr.jsxs)("div",{className:"text-center",children:[(0,Rr.jsx)("div",{className:"mb-1 text-gray-400",children:"Subtotal"}),(0,Rr.jsx)("div",{children:PP(null===T||void 0===T?void 0:T.subtotal)})]}),(0,Rr.jsxs)("div",{className:"text-center",children:[(0,Rr.jsx)("div",{className:"mb-1 text-gray-400",children:"(-) Discount"}),(0,Rr.jsx)("div",{children:PP(null===T||void 0===T?void 0:T.discountAmount)})]}),(0,Rr.jsxs)("div",{className:"text-center",children:[(0,Rr.jsx)("div",{className:"mb-1 text-gray-400",children:"Taxable"}),(0,Rr.jsx)("div",{children:PP(null===T||void 0===T?void 0:T.taxable)})]}),(0,Rr.jsxs)("div",{className:"text-center",children:[(0,Rr.jsx)("div",{className:"mb-1 text-gray-400",children:"(+) GST Amount"}),(0,Rr.jsx)("div",{children:PP(null===T||void 0===T?void 0:T.gstAmount)})]}),(0,Rr.jsxs)("div",{className:"text-center",children:[(0,Rr.jsx)("div",{className:"mb-1 text-gray-400",children:"(-) Adjustment"}),(0,Rr.jsx)("div",{children:"\u20b90"})]}),(0,Rr.jsxs)("div",{className:"bg-rose-500 -m-4 p-4 rounded-r-lg text-center",children:[(0,Rr.jsx)("div",{className:"mb-1",children:"Total Amount"}),(0,Rr.jsx)("div",{children:PP(null===T||void 0===T?void 0:T.grandTotal)})]})]}),(0,Rr.jsx)(bY,{open:x,setOpen:v,search:g,setSearch:y,onSelect:e=>{y(e.name),E({...k,distributorId:e._id,distributorName:e.name}),v(!1)}}),(0,Rr.jsx)(jY,{open:N,onOpenChange:j,value:"exclusive",onChange:()=>{},products:m,setProducts:p}),(0,Rr.jsx)(Tj,{open:S,onOpenChange:C,children:(0,Rr.jsxs)(_j,{className:"max-w-xl p-0 gap-0",children:[(0,Rr.jsxs)(Rj,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:[(0,Rr.jsx)(Mj,{className:"text-base font-semibold",children:"Delete Purchase Return"}),(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>C(!1),children:(0,Rr.jsx)(jN,{className:"h-4 w-4"})})]}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsx)(Oj,{children:"Are you sure you want to delete this purchase return? This action will permanently delete the return and revert all associated inventory adjustments."})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{onClick:()=>C(!1),variant:"outline",size:"sm",disabled:i,children:"Cancel"}),(0,Rr.jsx)(Vn,{onClick:async()=>{try{o(!0);const e=await fetch(`${Nu}/api/purchase/return/delete/${a}`,{method:"DELETE",credentials:"include"});if(!e.ok){const t=await e.json();throw new Error(t.message||"Failed to delete return")}r({title:"Success",description:"Purchase return deleted successfully",variant:"success"}),s(Mh()),n(-1)}catch(e){r({title:"Error",description:e.message||"Failed to delete return",variant:"destructive"})}finally{o(!1),C(!1)}},size:"sm",disabled:i,children:i?"Deleting...":"Delete"})]})]})})]})}function _X(){const e=Z(),{customerId:r}=ee(),n=rt(),[a,s]=(0,t.useState)(!1),[i,o]=(0,t.useState)(!1),{toast:l}=$g(),{details:c,status:d,tabName:u,invoices:h,payments:f,deleteCustomerStatus:m}=$e((e=>e.customers.currentCustomer));if((0,t.useEffect)((()=>{r&&n(Uh(r))}),[r,n]),!c||"loading"===d)return(0,Rr.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,Rr.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900"})});if("failed"===d)return(0,Rr.jsx)("div",{className:"h-screen flex items-center justify-center",children:(0,Rr.jsx)("p",{className:"text-lg text-red-700",children:"Failed to load customer data."})});const p=e=>e?e.map((e=>{var t;if(!e)return null;const r=(null===e||void 0===e?void 0:e.totalAmount)||0,n=(null===e||void 0===e?void 0:e.amountPaid)||0,a=Math.max(0,r-n);return{date:e.createdAt?new Date(e.createdAt).toLocaleDateString():"-",type:"Sales Invoice",number:e.invoiceNumber||"-",items:`${(null===(t=e.items)||void 0===t?void 0:t.length)||0} items`,grandTotal:`\u20b9 ${r.toLocaleString()}`,dueAmount:a>0?`\u20b9 ${a.toLocaleString()}`:"-",status:n>=r?"Paid":n>0?"Partial Paid":"Unpaid",id:e._id}})).filter(Boolean):[];return(0,Rr.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,Rr.jsxs)("header",{className:"flex items-center justify-between px-6 py-3 border-b",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>e(-1),children:(0,Rr.jsx)(Mw,{className:"h-4 w-4"})}),(0,Rr.jsx)("h1",{className:"text-xl font-semibold uppercase",children:c.name})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"outline",size:"icon",children:(0,Rr.jsx)(nm,{className:"h-4 w-4"})}),(0,Rr.jsx)(Vn,{variant:"outline",size:"icon",className:"bg-red-500 text-white hover:bg-red-600",onClick:()=>o(!0),children:(0,Rr.jsx)(oK,{className:"h-4 w-4"})}),(0,Rr.jsx)(Vn,{variant:"outline",size:"icon",onClick:()=>s(!0),children:(0,Rr.jsx)(iK,{className:"h-4 w-4"})})]})]}),(0,Rr.jsx)(bK,{open:a,onOpenChange:s,editingCustomer:c,onSuccess:()=>{n(Uh(r))}}),(0,Rr.jsx)(Tj,{open:i,onOpenChange:o,children:(0,Rr.jsxs)(_j,{className:"max-w-xl p-0 gap-0",children:[(0,Rr.jsxs)(Rj,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:[(0,Rr.jsx)(Mj,{className:"text-base font-semibold",children:"Delete Customer"}),(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>o(!1),children:(0,Rr.jsx)(jN,{className:"h-4 w-4"})})]}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsx)(Oj,{children:"Are you sure you want to delete this customer? This action will permanently delete all associated records and cannot be undone."})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 border-t flex items-center justify-end gap-2",children:[(0,Rr.jsx)(Vn,{onClick:()=>o(!1),variant:"outline",size:"sm",disabled:"loading"===m,className:"px-4",children:"Cancel"}),(0,Rr.jsx)(Vn,{onClick:async()=>{try{await n(Hh(r)).unwrap(),l({title:"Customer deleted successfully",variant:"success"}),e(-1)}catch(t){l({title:"Failed to delete customer",description:t.message,variant:"destructive"})}},size:"sm",className:"px-4 bg-red-500 text-white hover:bg-red-600",disabled:"loading"===m,children:"loading"===m?"Deleting...":"Delete"})]})]})}),(0,Rr.jsxs)(uN,{defaultValue:u,className:"flex-1",onValueChange:e=>n(qh(e)),children:[(0,Rr.jsx)("div",{className:"border-b",children:(0,Rr.jsx)("div",{className:"px-6",children:(0,Rr.jsxs)(hN,{className:"h-12 p-0 bg-transparent border-b-0",children:[(0,Rr.jsx)(fN,{value:"profile",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none",children:"Profile"}),(0,Rr.jsx)(fN,{value:"invoices",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none",children:"Invoices"}),(0,Rr.jsx)(fN,{value:"payments",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none",children:"Payments"}),(0,Rr.jsx)(fN,{value:"ledger",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none",children:"Ledger"})]})})}),(0,Rr.jsxs)("div",{className:"flex-1 p-6",children:[(0,Rr.jsx)(mN,{value:"profile",className:"m-0",children:(0,Rr.jsx)("div",{className:"grid gap-6 md:grid-cols-2",children:(0,Rr.jsxs)(Kf,{children:[(0,Rr.jsx)(Yf,{children:(0,Rr.jsx)(Xf,{className:"text-base font-medium",children:"General Details"})}),(0,Rr.jsxs)(Jf,{className:"grid gap-4 font-semibold",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Customer Name"}),(0,Rr.jsx)("div",{className:"capitalize",children:c.name})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Mobile Number"}),(0,Rr.jsx)("div",{children:c.mob||"-"})]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Address"}),(0,Rr.jsx)("div",{children:c.address||"-"})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Opening Balance"}),(0,Rr.jsxs)("div",{className:c.currentBalance>0?"text-green-600":c.currentBalance<0?"text-red-600":"",children:[c.currentBalance>0?"\u2193 ":c.currentBalance<0?"\u2191 ":"","\u20b9 ",Math.abs(c.openBalance||0).toLocaleString()]})]}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("div",{className:"text-sm text-muted-foreground",children:"Current Balance"}),(0,Rr.jsxs)("div",{className:c.currentBalance>0?"text-green-600":c.currentBalance<0?"text-red-600":"",children:[c.currentBalance>0?"\u2193 ":c.currentBalance<0?"\u2191 ":"","\u20b9 ",Math.abs(c.currentBalance||0).toLocaleString()]})]})]})]})]})})}),(0,Rr.jsx)(mN,{value:"invoices",className:"m-0",children:(0,Rr.jsx)("div",{className:"border rounded-lg",children:(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{className:"bg-muted/50",children:[(0,Rr.jsx)(Tw,{className:"font-semibold",children:(0,Rr.jsxs)(Vn,{variant:"ghost",className:"p-0 h-auto font-semibold hover:bg-transparent",children:["Date",(0,Rr.jsx)(qY,{className:"ml-2 h-4 w-4"})]})}),(0,Rr.jsx)(Tw,{className:"font-semibold",children:"Invoice Type"}),(0,Rr.jsx)(Tw,{className:"font-semibold",children:"Invoice Number"}),(0,Rr.jsx)(Tw,{className:"font-semibold text-right",children:"Items"}),(0,Rr.jsx)(Tw,{className:"font-semibold text-right",children:"Grand Total"}),(0,Rr.jsx)(Tw,{className:"font-semibold text-right",children:"Due Amount"}),(0,Rr.jsx)(Tw,{className:"font-semibold text-right",children:"Status"})]})}),(0,Rr.jsx)(Cw,{className:"font-semibold",children:p(h).length>0?p(h).map(((t,r)=>(0,Rr.jsxs)(Ew,{onClick:()=>e(`/sales/${t.id}`),className:"cursor-pointer hover:bg-muted/50",children:[(0,Rr.jsx)(Dw,{children:new Date(t.date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)("span",{className:"text-blue-600",children:t.type})}),(0,Rr.jsx)(Dw,{children:t.number}),(0,Rr.jsx)(Dw,{className:"text-right",children:t.items}),(0,Rr.jsx)(Dw,{className:"text-right font-medium",children:t.grandTotal}),(0,Rr.jsx)(Dw,{className:"text-right",children:(0,Rr.jsx)("span",{className:"-"!==t.dueAmount?"text-red-600":"",children:t.dueAmount})}),(0,Rr.jsx)(Dw,{className:"text-right",children:(0,Rr.jsx)(qw,{variant:"Paid"===t.status?"success":"Unpaid"===t.status?"destructive":"secondary",children:t.status})})]},r))):(0,Rr.jsx)(Ew,{children:(0,Rr.jsx)(Dw,{colSpan:7,children:(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[(0,Rr.jsx)($N,{className:"h-12 w-12 mb-3 text-gray-400"}),(0,Rr.jsx)("p",{className:"text-lg font-medium mb-1",children:"No Invoices Found"}),(0,Rr.jsx)("p",{className:"text-sm",children:"There are no invoices available for this customer."})]})})})})]})})}),(0,Rr.jsx)(mN,{value:"payments",className:"m-0",children:(0,Rr.jsx)("div",{className:"border rounded-lg",children:(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{className:"bg-muted/50",children:[(0,Rr.jsx)(Tw,{className:"font-semibold",children:(0,Rr.jsxs)(Vn,{variant:"ghost",className:"p-0 h-auto font-semibold hover:bg-transparent",children:["Date",(0,Rr.jsx)(qY,{className:"ml-2 h-4 w-4"})]})}),(0,Rr.jsx)(Tw,{className:"font-semibold",children:"Payment Number"}),(0,Rr.jsx)(Tw,{className:"font-semibold",children:"Payment Method"}),(0,Rr.jsx)(Tw,{className:"font-semibold text-right",children:"Amount (\u20b9)"}),(0,Rr.jsx)(Tw,{className:"font-semibold text-right",children:"Status"})]})}),(0,Rr.jsx)(Cw,{className:"font-semibold",children:f&&f.length>0?f.map((t=>(0,Rr.jsxs)(Ew,{onClick:()=>e(`/payment/${t._id}`),className:"cursor-pointer hover:bg-muted/50",children:[(0,Rr.jsx)(Dw,{children:new Date(t.paymentDate).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})}),(0,Rr.jsx)(Dw,{children:t.paymentNumber||"-"}),(0,Rr.jsx)(Dw,{children:t.paymentMethod}),(0,Rr.jsx)(Dw,{className:"text-right",children:t.amount}),(0,Rr.jsx)(Dw,{className:"text-right",children:(0,Rr.jsx)(qw,{variant:"COMPLETED"===t.status?"success":"destructive",children:t.status})})]},t._id))):(0,Rr.jsx)(Ew,{children:(0,Rr.jsx)(Dw,{colSpan:5,children:(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[(0,Rr.jsx)($N,{className:"h-12 w-12 mb-3 text-gray-400"}),(0,Rr.jsx)("p",{className:"text-lg font-medium mb-1",children:"No Payments Found"}),(0,Rr.jsx)("p",{className:"text-sm",children:"There are no payment records available for this customer."})]})})})})]})})}),(0,Rr.jsx)(mN,{value:"ledger",className:"m-0",children:(0,Rr.jsx)(KY,{isActive:"ledger"===u,customerId:r})})]})]})]})}const RX=rm("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),IX=()=>{const e=Z(),[r,n]=Pe(),{toast:a}=$g(),s=rt(),i=(0,t.useRef)(!0),{payments:o}=$e((e=>e.payment)),l=r.get("dateFilter")||"today",c=r.get("from"),d=r.get("to"),[u,h]=(0,t.useState)("all"),[f,m]=(0,t.useState)(l),[p,x]=(0,t.useState)({from:c?new Date(c):new Date,to:d?new Date(d):new Date}),[v,g]=(0,t.useState)(""),[y,b]=(0,t.useState)(""),[w,N]=(0,t.useState)("invoice");(0,t.useEffect)((()=>{const e=setTimeout((()=>{b(v)}),500);return()=>clearTimeout(e)}),[v]);const j=(0,t.useCallback)((async e=>{try{await s(gf({startDate:jc(e.startDate,"yyyy-MM-dd"),endDate:jc(e.endDate,"yyyy-MM-dd"),filter:"all"!==u?u:void 0})).unwrap()}catch(eZ){a({title:"Error fetching payments",description:eZ.message,variant:"destructive"})}}),[s,u,a]);(0,t.useEffect)((()=>{if(!y.trim())return void(i.current||j({startDate:p.from,endDate:p.to}));(async()=>{try{await s(wf({query:y,searchType:w})).unwrap()}catch(eZ){a({title:"Error",description:"Failed to search payments",variant:"destructive"})}})(),i.current=!1}),[y,w,s]),(0,t.useEffect)((()=>{const e=r.get("from"),t=r.get("to"),s=r.get("dateFilter");if(!e||!t){const e=new Date,t=jc(e,"yyyy-MM-dd");return n((e=>(e.set("from",t),e.set("to",t),e.set("dateFilter","today"),e))),x({from:e,to:e}),m("today"),void j({startDate:e,endDate:e})}try{const r=new Date(e),n=new Date(t);if(isNaN(r.getTime())||isNaN(n.getTime()))throw new Error("Invalid date in URL parameters");x({from:r,to:n}),s&&m(s),j({startDate:r,endDate:n})}catch(eZ){const t=new Date,r=jc(t,"yyyy-MM-dd");n((e=>(e.set("from",r),e.set("to",r),e.set("dateFilter","today"),e))),x({from:t,to:t}),m("today"),j({startDate:t,endDate:t}),a({title:"Invalid date parameters",description:"Reset to today's date",variant:"destructive"})}}),[]);const S=(0,t.useCallback)((e=>{if(null!==e&&void 0!==e&&e.from&&null!==e&&void 0!==e&&e.to)try{const t=new Date(e.from),r=new Date(e.to);if(isNaN(t.getTime())||isNaN(r.getTime()))throw new Error("Invalid date selection");const a=jc(t,"yyyy-MM-dd"),s=jc(r,"yyyy-MM-dd");x({from:t,to:r}),m("custom"),n((e=>(e.set("from",a),e.set("to",s),e.set("dateFilter","custom"),e))),j({startDate:t,endDate:r})}catch(eZ){a({title:"Error",description:"Invalid date selection",variant:"destructive"})}}),[j,n]),C=(0,t.useCallback)((e=>{if(m(e),"custom"===e)return;let t={from:new Date,to:new Date};try{switch(e){case"today":t={from:new Date,to:new Date};break;case"yesterday":{const e=Lc(new Date,1);t={from:e,to:e};break}case"thisWeek":t={from:zl(new Date,{weekStartsOn:1}),to:zc(new Date,{weekStartsOn:1})};break;case"thisMonth":t={from:Cc(new Date),to:kc(new Date)}}const r=jc(t.from,"yyyy-MM-dd"),a=jc(t.to,"yyyy-MM-dd");x(t),n((t=>(t.set("from",r),t.set("to",a),t.set("dateFilter",e),t))),j({startDate:t.from,endDate:t.to})}catch(eZ){a({title:"Error",description:"Error setting date range",variant:"destructive"})}}),[j,n]),k=(0,t.useCallback)((e=>{h(e),j({startDate:p.from,endDate:p.to})}),[j,p]),E=(0,t.useMemo)((()=>o?"all"===u?o:o.filter((e=>e.paymentType===u)):[]),[o,u]),T=(0,t.useMemo)((()=>E.filter((e=>"Payment In"===e.paymentType)).reduce(((e,t)=>e+(t.amount||0)),0)),[E]),D=(0,t.useMemo)((()=>E.filter((e=>"Payment Out"===e.paymentType)).reduce(((e,t)=>e+(t.amount||0)),0)),[E]),A=(0,t.useMemo)((()=>T-D),[T,D]),P=(0,t.useCallback)((e=>e.reduce(((e,t)=>{const r=t.paymentMethod||"Other";return e[r]=(e[r]||0)+(t.amount||0),e}),{})),[]),_=(0,t.useMemo)((()=>P(E.filter((e=>"Payment In"===e.paymentType)))),[E,P]),R=(0,t.useMemo)((()=>P(E.filter((e=>"Payment Out"===e.paymentType)))),[E,P]),I=(0,t.useMemo)((()=>Object.keys({..._,...R}).reduce(((e,t)=>(e[t]=(_[t]||0)-(R[t]||0),e)),{})),[_,R]),[M,O]=(0,t.useState)(!1);return(0,Rr.jsxs)("div",{className:"w-full p-4 space-y-2",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>e("/"),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-2xl font-semibold",children:"All Payments"})]}),(0,Rr.jsx)("div",{className:"flex items-center gap-2"})]}),(0,Rr.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,Rr.jsxs)("div",{className:"relative flex items-center bg-white rounded-lg border border-slate-200 hover:border-slate-300 transition-colors overflow-hidden",children:[(0,Rr.jsx)("div",{className:"relative flex items-center border-r border-slate-200",children:(0,Rr.jsxs)(Ag,{children:[(0,Rr.jsx)(Pg,{asChild:!0,children:(0,Rr.jsx)(Vn,{variant:"ghost",className:"h-9 w-[120px] border-0 bg-transparent hover:bg-slate-100 focus:ring-0 focus:ring-offset-0 justify-start px-3",children:"invoice"===w?"Payment No":"Name"})}),(0,Rr.jsxs)(_g,{align:"start",className:"w-[120px]",children:[(0,Rr.jsx)(Rg,{onSelect:()=>N("invoice"),children:"Payment No"}),(0,Rr.jsx)(Rg,{onSelect:()=>N("name"),children:"Name"})]})]})}),(0,Rr.jsxs)("div",{className:"flex-1 relative flex items-center",children:[(0,Rr.jsx)("div",{className:"absolute left-3 flex items-center pointer-events-none",children:(0,Rr.jsx)(VN,{className:"h-4 w-4 text-slate-400"})}),(0,Rr.jsx)(Gf,{className:"w-full h-9 pl-10 pr-10 border-0 focus-visible:ring-0 placeholder:text-slate-400",placeholder:`Search by ${"invoice"===w?"payment number":"name"}...`,value:v,onChange:e=>g(e.target.value)}),v&&(0,Rr.jsx)("div",{className:"absolute right-3 flex items-center",children:(0,Rr.jsx)(Vn,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-slate-100 rounded-full",onClick:()=>{g(""),j({startDate:p.from,endDate:p.to})},children:(0,Rr.jsx)(jN,{className:"h-4 w-4 text-blue-500"})})})]})]}),(0,Rr.jsxs)(fw,{value:u,onValueChange:k,children:[(0,Rr.jsx)(pw,{className:"w-[130px]",children:(0,Rr.jsx)(mw,{placeholder:"Filter by type"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"all",children:"All Payments"}),(0,Rr.jsx)(yw,{value:"Payment In",children:"Payment In"}),(0,Rr.jsx)(yw,{value:"Payment Out",children:"Payment Out"})]})]}),(0,Rr.jsxs)(fw,{value:f,onValueChange:C,children:[(0,Rr.jsx)(pw,{className:"w-[120px]",children:(0,Rr.jsx)(mw,{placeholder:"Select date filter"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"today",children:"Today"}),(0,Rr.jsx)(yw,{value:"yesterday",children:"Yesterday"}),(0,Rr.jsx)(yw,{value:"thisWeek",children:"This Week"}),(0,Rr.jsx)(yw,{value:"thisMonth",children:"This Month"}),(0,Rr.jsx)(yw,{value:"custom",children:"Custom"})]})]}),"custom"===f&&(0,Rr.jsx)("div",{className:"relative w-[300px]",children:(0,Rr.jsx)(AP,{from:p.from,to:p.to,onSelect:S,onSearch:S,onCancel:()=>{x({from:new Date,to:new Date}),m("today")},className:"border border-slate-200 rounded-md hover:border-slate-300 transition-colors"})})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsxs)(Vn,{variant:"outline",onClick:()=>O(!0),disabled:0===E.length,children:[(0,Rr.jsx)(DP,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,Rr.jsxs)(Vn,{variant:"outline",onClick:()=>e("/payment/create-payment"),children:[(0,Rr.jsx)(Aw,{className:"mr-2 h-4 w-4"}),"Create Payment"]})]})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Rr.jsx)(Kf,{children:(0,Rr.jsxs)(Jf,{className:"pt-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Gy,{className:"h-4 w-4 text-green-500"}),(0,Rr.jsxs)("div",{className:"flex flex-col",children:[(0,Rr.jsx)("span",{className:"text-sm font-medium",children:"Total Payment In"}),(0,Rr.jsxs)("span",{className:"text-xs text-muted-foreground font-semibold",children:[E.filter((e=>"Payment In"===e.paymentType)).length," ","payments"]})]})]}),(0,Rr.jsxs)("span",{className:"text-2xl font-bold text-green-600",children:["+\u20b9 ",T.toLocaleString("en-IN")]})]}),(0,Rr.jsx)("div",{className:"mt-2 flex items-center gap-3 overflow-x-auto font-semibold",children:Object.entries(_).map((e=>{let[t,r]=e;return(0,Rr.jsxs)("div",{className:"flex items-center gap-2 text-sm whitespace-nowrap",children:[(0,Rr.jsxs)("span",{className:"text-muted-foreground",children:[t,":"]}),(0,Rr.jsxs)("span",{className:"font-medium text-green-600",children:["+\u20b9 ",r.toLocaleString("en-IN")]})]},t)}))})]})}),(0,Rr.jsx)(Kf,{children:(0,Rr.jsxs)(Jf,{className:"pt-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Ky,{className:"h-4 w-4 text-red-500"}),(0,Rr.jsxs)("div",{className:"flex flex-col",children:[(0,Rr.jsx)("span",{className:"text-sm font-medium",children:"Total Payment Out"}),(0,Rr.jsxs)("span",{className:"text-xs text-muted-foreground font-semibold",children:[E.filter((e=>"Payment Out"===e.paymentType)).length," ","payments"]})]})]}),(0,Rr.jsxs)("span",{className:"text-2xl font-bold text-red-600",children:["-\u20b9 ",D.toLocaleString("en-IN")]})]}),(0,Rr.jsx)("div",{className:"mt-2 flex items-center gap-3 overflow-x-auto font-semibold",children:Object.entries(R).map((e=>{let[t,r]=e;return(0,Rr.jsxs)("div",{className:"flex items-center gap-2 text-sm whitespace-nowrap",children:[(0,Rr.jsxs)("span",{className:"text-muted-foreground",children:[t,":"]}),(0,Rr.jsxs)("span",{className:"font-medium text-red-600",children:["-\u20b9 ",r.toLocaleString("en-IN")]})]},t)}))})]})}),(0,Rr.jsx)(Kf,{children:(0,Rr.jsxs)(Jf,{className:"pt-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(RX,{className:"h-4 w-4 text-blue-500"}),(0,Rr.jsxs)("div",{className:"flex flex-col",children:[(0,Rr.jsx)("span",{className:"text-sm font-medium",children:"Net Total"}),(0,Rr.jsxs)("span",{className:"text-xs text-muted-foreground font-semibold",children:[E.length," total payments"]})]})]}),(0,Rr.jsxs)("span",{className:"text-2xl font-bold "+(A>=0?"text-green-600":"text-red-600"),children:[A>=0?"+":"-","\u20b9"," ",Math.abs(A).toLocaleString("en-IN")]})]}),(0,Rr.jsx)("div",{className:"mt-2 flex items-center gap-3 overflow-x-auto font-semibold",children:Object.entries(I).map((e=>{let[t,r]=e;return(0,Rr.jsxs)("div",{className:"flex items-center gap-2 text-sm whitespace-nowrap",children:[(0,Rr.jsxs)("span",{className:"text-muted-foreground",children:[t,":"]}),(0,Rr.jsxs)("span",{className:"font-medium "+(r>=0?"text-green-600":"text-red-600"),children:[r>=0?"+":"-","\u20b9"," ",Math.abs(r).toLocaleString("en-IN")]})]},t)}))})]})})]}),(0,Rr.jsx)("div",{className:"border rounded-lg",children:(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:"pl-3",children:"S.NO"}),(0,Rr.jsx)(Tw,{className:"w-[150px]",children:"Date & Time"}),(0,Rr.jsx)(Tw,{children:"Payment Number"}),(0,Rr.jsx)(Tw,{children:"Name"}),(0,Rr.jsx)(Tw,{children:"Payment Type"}),(0,Rr.jsx)(Tw,{children:"Payment Method"}),(0,Rr.jsx)(Tw,{children:"Remarks"}),(0,Rr.jsx)(Tw,{className:"text-right",children:"Amount"})]})}),(0,Rr.jsxs)(Cw,{children:[E.map(((t,r)=>{var n;return(0,Rr.jsxs)(Ew,{className:"cursor-pointer hover:bg-muted/50 px-10 h-12",onClick:()=>e(`/payment/${t._id}`),children:[(0,Rr.jsx)(Dw,{className:"pl-5",children:r+1}),(0,Rr.jsxs)(Dw,{className:"uppercase",children:[jc(new Date(t.paymentDate),"MM MMM")," ",jc(new Date(t.paymentDate),"hh:mm a")]}),(0,Rr.jsx)(Dw,{children:null===t||void 0===t?void 0:t.paymentNumber}),(0,Rr.jsx)(Dw,{className:"font-semibold",children:(null===t||void 0===t?void 0:t.distributorName)||(null===t||void 0===t?void 0:t.customerName)||"--"}),(0,Rr.jsx)(Dw,{children:(0,Rr.jsx)(qw,{variant:"Payment In"===(null===t||void 0===t?void 0:t.paymentType)?"success":"destructive",children:null===t||void 0===t?void 0:t.paymentType})}),(0,Rr.jsx)(Dw,{children:null===t||void 0===t?void 0:t.paymentMethod}),(0,Rr.jsx)(Dw,{children:(null===t||void 0===t?void 0:t.remarks)||"-"}),(0,Rr.jsxs)(Dw,{className:"text-right font-bold "+("Payment In"===(null===t||void 0===t?void 0:t.paymentType)?"text-green-600":"text-red-600"),children:["Payment In"===(null===t||void 0===t?void 0:t.paymentType)?"+":"-","\u20b9"," ",null===t||void 0===t||null===(n=t.amount)||void 0===n?void 0:n.toLocaleString("en-IN")]})]},t._id)})),0===E.length&&(0,Rr.jsx)(Ew,{children:(0,Rr.jsx)(Dw,{colSpan:7,className:"text-center text-muted-foreground",children:"No payments found"})})]})]})}),(0,Rr.jsx)(k$,{open:M,onOpenChange:O,data:E,columns:[{header:"Date",field:"paymentDate",width:15},{header:"Payment Number",field:"paymentNumber",width:20},{header:"Name",field:"distributorName",width:25},{header:"Payment Type",field:"paymentType",width:15},{header:"Payment Method",field:"paymentMethod",width:15},{header:"Remarks",field:"remarks",width:30},{header:"Amount",field:"amount",width:15,format:"currency",addTotal:!0}],formatters:{Date:e=>new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),Name:e=>e||"-",Remarks:e=>e||"-",Amount:e=>e||0},fileName:"payments",title:"Export Payments Data"})]})},MX=rm("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),OX=rm("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),FX=()=>{const e=Z(),t=[{title:"Create Sale Invoice",description:"Create a new sales invoice",icon:DP,action:()=>e("/sales/create-sell-invoice"),color:"bg-blue-300 text-blue-900 hover:bg-blue-400"},{title:"Sales List",description:"View all sales invoices",icon:MX,action:()=>e("/sales"),color:"bg-blue-200 text-blue-900 hover:bg-blue-300"},{title:"Create Purchase Invoice",description:"Create a new purchase invoice",icon:DP,action:()=>e("/purchase/create-purchase-invoice"),color:"bg-green-300 text-green-900 hover:bg-green-400"},{title:"Purchase List",description:"View all purchase invoices",icon:fm,action:()=>e("/purchase"),color:"bg-green-200 text-green-900 hover:bg-green-300"},{title:"Inventory",description:"View and manage inventory",icon:pm,action:()=>e("/inventory"),color:"bg-purple-200 text-purple-900 hover:bg-purple-300"},{title:"Payments",description:"Track all payments",icon:vm,action:()=>e("/payments"),color:"bg-indigo-200 text-indigo-900 hover:bg-indigo-300"},{title:"Create Purchase Return",description:"Create new purchase return",icon:OX,action:()=>e("/purchase/return/create"),color:"bg-cyan-300 text-cyan-900 hover:bg-cyan-400"},{title:"Purchase Return List",description:"View all purchase returns",icon:qy,action:()=>e("/purchase/return"),color:"bg-cyan-200 text-cyan-900 hover:bg-cyan-300"},{title:"Distributors",description:"Manage distributors",icon:XY,action:()=>e("/distributors"),color:"bg-yellow-200 text-yellow-900 hover:bg-yellow-300"},{title:"Customers",description:"View and manage customers",icon:am,action:()=>e("/customers"),color:"bg-pink-200 text-pink-900 hover:bg-pink-300"},{title:"Expenses",description:"Track and manage expenses",icon:sm,action:()=>e("/expenses"),color:"bg-rose-200 text-rose-900 hover:bg-rose-300"},{title:"Reports",description:"View financial reports",icon:nm,action:()=>e("/reports"),color:"bg-lime-200 text-lime-900 hover:bg-lime-300"},{title:"Dashboard",description:"View business dashboard",icon:ym,action:()=>e("/dashboard"),color:"bg-teal-200 text-teal-900 hover:bg-teal-300"},{title:"Staff",description:"Manage staff members",icon:ww,action:()=>e("/staff"),color:"bg-amber-200 text-amber-900 hover:bg-amber-300"},{title:"Settings",description:"Configure system settings",icon:bm,action:()=>e("/settings"),color:"bg-slate-200 text-slate-900 hover:bg-slate-300"}];return(0,Rr.jsx)("div",{className:"p-4 space-y-6",children:(0,Rr.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-3 gap-4",children:t.map(((e,t)=>(0,Rr.jsx)(Kf,{className:`cursor-pointer transition-all duration-300 rounded-xl hover:shadow-lg ${e.color}`,onClick:e.action,children:(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rr.jsx)("div",{className:"p-3 rounded-full bg-white",children:(0,Rr.jsx)(e.icon,{className:"h-6 w-6"})}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("h2",{className:"text-lg  font-semibold",children:e.title}),(0,Rr.jsx)("p",{className:"text-sm opacity-90",children:e.description})]})]})})},t)))})})},LX=rm("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);function BX(){return Ml(Date.now())}function UX(){return Object.assign({},_l())}function zX(e,t){const r=t instanceof Date?Ll(t,0):new t(0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}class VX{subPriority=0;validate(e,t){return!0}}class HX extends VX{constructor(e,t,r,n,a){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=n,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class $X extends VX{priority=10;subPriority=-1;set(e,t){return t.timestampIsSet?e:Ll(e,zX(e,Date))}}class WX{run(e,t,r,n){const a=this.parse(e,t,r,n);return a?{setter:new HX(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,r){return!0}}const qX=/^(1[0-2]|0?\d)/,GX=/^(3[0-1]|[0-2]?\d)/,KX=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,YX=/^(5[0-3]|[0-4]?\d)/,XX=/^(2[0-3]|[0-1]?\d)/,QX=/^(2[0-4]|[0-1]?\d)/,JX=/^(1[0-1]|0?\d)/,ZX=/^(1[0-2]|0?\d)/,eQ=/^[0-5]?\d/,tQ=/^[0-5]?\d/,rQ=/^\d/,nQ=/^\d{1,2}/,aQ=/^\d{1,3}/,sQ=/^\d{1,4}/,iQ=/^-?\d+/,oQ=/^-?\d/,lQ=/^-?\d{1,2}/,cQ=/^-?\d{1,3}/,dQ=/^-?\d{1,4}/,uQ=/^([+-])(\d{2})(\d{2})?|Z/,hQ=/^([+-])(\d{2})(\d{2})|Z/,fQ=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,mQ=/^([+-])(\d{2}):(\d{2})|Z/,pQ=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function xQ(e,t){return e?{value:t(e.value),rest:e.rest}:e}function vQ(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function gQ(e,t){const r=t.match(e);if(!r)return null;if("Z"===r[0])return{value:0,rest:t.slice(1)};return{value:("+"===r[1]?1:-1)*(36e5*(r[2]?parseInt(r[2],10):0)+6e4*(r[3]?parseInt(r[3],10):0)+1e3*(r[5]?parseInt(r[5],10):0)),rest:t.slice(r[0].length)}}function yQ(e){return vQ(iQ,e)}function bQ(e,t){switch(e){case 1:return vQ(rQ,t);case 2:return vQ(nQ,t);case 3:return vQ(aQ,t);case 4:return vQ(sQ,t);default:return vQ(new RegExp("^\\d{1,"+e+"}"),t)}}function wQ(e,t){switch(e){case 1:return vQ(oQ,t);case 2:return vQ(lQ,t);case 3:return vQ(cQ,t);case 4:return vQ(dQ,t);default:return vQ(new RegExp("^-?\\d{1,"+e+"}"),t)}}function NQ(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function jQ(e,t){const r=t>0,n=r?t:1-t;let a;if(n<=50)a=e||100;else{const t=n+50;a=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return r?a:1-a}function SQ(e){return e%400===0||e%4===0&&e%100!==0}function CQ(e,t,r){const n=Il(e),a=Kl(n,r)-t;return n.setDate(n.getDate()-7*a),n}function kQ(e,t){const r=Il(e),n=Wl(r)-t;return r.setDate(r.getDate()-7*n),r}const EQ=[31,28,31,30,31,30,31,31,30,31,30,31],TQ=[31,29,31,30,31,30,31,31,30,31,30,31];function DQ(e,t,r){const n=_l(),a=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Il(e),i=s.getDay(),o=7-a;return Mc(s,t<0||t>6?t-(i+o)%7:((t%7+7)%7+o)%7-(i+o)%7)}function AQ(e){let t=Il(e).getDay();return 0===t&&(t=7),t}function PQ(e,t){const r=Il(e);return Mc(r,t-AQ(r))}const _Q={G:new class extends WX{priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]},y:new class extends WX{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){const n=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return xQ(bQ(4,e),n);case"yo":return xQ(r.ordinalNumber(e,{unit:"year"}),n);default:return xQ(bQ(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const n=e.getFullYear();if(r.isTwoDigitYear){const t=jQ(r.year,n);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const a="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}},Y:new class extends WX{priority=130;parse(e,t,r){const n=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return xQ(bQ(4,e),n);case"Yo":return xQ(r.ordinalNumber(e,{unit:"year"}),n);default:return xQ(bQ(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,n){const a=ql(e,n);if(r.isTwoDigitYear){const t=jQ(r.year,a);return e.setFullYear(t,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),zl(e,n)}const s="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(s,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),zl(e,n)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:new class extends WX{priority=130;parse(e,t){return wQ("R"===t?4:t.length,e)}set(e,t,r){const n=Ll(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Vl(n)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:new class extends WX{priority=130;parse(e,t){return wQ("u"===t?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},Q:new class extends WX{priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return bQ(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth(3*(r-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:new class extends WX{priority=120;parse(e,t,r){switch(t){case"q":case"qq":return bQ(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth(3*(r-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:new class extends WX{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){const n=e=>e-1;switch(t){case"M":return xQ(vQ(qX,e),n);case"MM":return xQ(bQ(2,e),n);case"Mo":return xQ(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}},L:new class extends WX{priority=110;parse(e,t,r){const n=e=>e-1;switch(t){case"L":return xQ(vQ(qX,e),n);case"LL":return xQ(bQ(2,e),n);case"Lo":return xQ(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:new class extends WX{priority=100;parse(e,t,r){switch(t){case"w":return vQ(YX,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return bQ(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,n){return zl(CQ(e,r,n),n)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:new class extends WX{priority=100;parse(e,t,r){switch(t){case"I":return vQ(YX,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return bQ(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return Vl(kQ(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:new class extends WX{priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return vQ(GX,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return bQ(t.length,e)}}validate(e,t){const r=SQ(e.getFullYear()),n=e.getMonth();return r?t>=1&&t<=TQ[n]:t>=1&&t<=EQ[n]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:new class extends WX{priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return vQ(KX,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return bQ(t.length,e)}}validate(e,t){return SQ(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:new class extends WX{priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=DQ(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]},e:new class extends WX{priority=90;parse(e,t,r,n){const a=e=>{const t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return xQ(bQ(t.length,e),a);case"eo":return xQ(r.ordinalNumber(e,{unit:"day"}),a);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=DQ(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:new class extends WX{priority=90;parse(e,t,r,n){const a=e=>{const t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return xQ(bQ(t.length,e),a);case"co":return xQ(r.ordinalNumber(e,{unit:"day"}),a);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=DQ(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:new class extends WX{priority=90;parse(e,t,r){const n=e=>0===e?7:e;switch(t){case"i":case"ii":return bQ(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return xQ(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return xQ(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return xQ(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);default:return xQ(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return(e=PQ(e,r)).setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:new class extends WX{priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(NQ(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]},b:new class extends WX{priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(NQ(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]},B:new class extends WX{priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(NQ(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]},h:new class extends WX{priority=70;parse(e,t,r){switch(t){case"h":return vQ(ZX,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return bQ(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):n||12!==r?e.setHours(r,0,0,0):e.setHours(0,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]},H:new class extends WX{priority=70;parse(e,t,r){switch(t){case"H":return vQ(XX,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return bQ(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]},K:new class extends WX{priority=70;parse(e,t,r){switch(t){case"K":return vQ(JX,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return bQ(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]},k:new class extends WX{priority=70;parse(e,t,r){switch(t){case"k":return vQ(QX,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return bQ(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]},m:new class extends WX{priority=60;parse(e,t,r){switch(t){case"m":return vQ(eQ,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return bQ(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]},s:new class extends WX{priority=50;parse(e,t,r){switch(t){case"s":return vQ(tQ,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return bQ(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]},S:new class extends WX{priority=30;parse(e,t){return xQ(bQ(t.length,e),(e=>Math.trunc(e*Math.pow(10,3-t.length))))}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]},X:new class extends WX{priority=10;parse(e,t){switch(t){case"X":return gQ(uQ,e);case"XX":return gQ(hQ,e);case"XXXX":return gQ(fQ,e);case"XXXXX":return gQ(pQ,e);default:return gQ(mQ,e)}}set(e,t,r){return t.timestampIsSet?e:Ll(e,e.getTime()-Ol(e)-r)}incompatibleTokens=["t","T","x"]},x:new class extends WX{priority=10;parse(e,t){switch(t){case"x":return gQ(uQ,e);case"xx":return gQ(hQ,e);case"xxxx":return gQ(fQ,e);case"xxxxx":return gQ(pQ,e);default:return gQ(mQ,e)}}set(e,t,r){return t.timestampIsSet?e:Ll(e,e.getTime()-Ol(e)-r)}incompatibleTokens=["t","T","X"]},t:new class extends WX{priority=40;parse(e){return yQ(e)}set(e,t,r){return[Ll(e,1e3*r),{timestampIsSet:!0}]}incompatibleTokens="*"},T:new class extends WX{priority=20;parse(e){return yQ(e)}set(e,t,r){return[Ll(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}},RQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,IQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MQ=/^'([^]*?)'?$/,OQ=/''/g,FQ=/\S/,LQ=/[a-zA-Z]/;function BQ(e,t,r,n){const a=UX(),s=n?.locale??a.locale??Al,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0;if(""===t)return""===e?Il(r):Ll(r,NaN);const l={firstWeekContainsDate:i,weekStartsOn:o,locale:s},c=[new $X],d=t.match(IQ).map((e=>{const t=e[0];if(t in cc){return(0,cc[t])(e,s.formatLong)}return e})).join("").match(RQ),u=[];for(let p of d){!n?.useAdditionalWeekYearTokens&&mc(p)&&pc(p,t,e),!n?.useAdditionalDayOfYearTokens&&fc(p)&&pc(p,t,e);const a=p[0],i=_Q[a];if(i){const{incompatibleTokens:t}=i;if(Array.isArray(t)){const e=u.find((e=>t.includes(e.token)||e.token===a));if(e)throw new RangeError(`The format string mustn't contain \`${e.fullToken}\` and \`${p}\` at the same time`)}else if("*"===i.incompatibleTokens&&u.length>0)throw new RangeError(`The format string mustn't contain \`${p}\` and any other token at the same time`);u.push({token:a,fullToken:p});const n=i.run(e,p,s.match,l);if(!n)return Ll(r,NaN);c.push(n.setter),e=n.rest}else{if(a.match(LQ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");if("''"===p?p="'":"'"===a&&(p=p.match(MQ)[1].replace(OQ,"'")),0!==e.indexOf(p))return Ll(r,NaN);e=e.slice(p.length)}}if(e.length>0&&FQ.test(e))return Ll(r,NaN);const h=c.map((e=>e.priority)).sort(((e,t)=>t-e)).filter(((e,t,r)=>r.indexOf(e)===t)).map((e=>c.filter((t=>t.priority===e)).sort(((e,t)=>t.subPriority-e.subPriority)))).map((e=>e[0]));let f=Il(r);if(isNaN(f.getTime()))return Ll(r,NaN);const m={};for(const p of h){if(!p.validate(f,l))return Ll(r,NaN);const e=p.set(f,m,l);Array.isArray(e)?(f=e[0],Object.assign(m,e[1])):f=e}return Ll(r,f)}function UQ(e,t){const r=Il(e.start),n=Il(e.end);let a=+r>+n;const s=a?+r:+n,i=a?n:r;i.setHours(0,0,0,0),i.setDate(1);let o=t?.step??1;if(!o)return[];o<0&&(o=-o,a=!a);const l=[];for(;+i<=s;)l.push(Il(i)),i.setMonth(i.getMonth()+o);return a?l.reverse():l}function zQ(e){const t=Il(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function VQ(e,t){const{years:r=0,months:n=0,weeks:a=0,days:s=0,hours:i=0,minutes:o=0,seconds:l=0}=t,c=Il(e),d=n||r?_c(c,n+12*r):c,u=1e3*(l+60*(o+60*i));return Ll(e,(s||a?Mc(d,s+7*a):d).getTime()+u)}function HQ(e,t){return+Il(e)===+Il(t)}function $Q(e){let{currentMonth:r,onMonthChange:n}=e;const[a,s]=(0,t.useState)(jc(r,"yyyy")),i=BQ(a,"yyyy",new Date),o=UQ({start:i,end:zQ(i)});return(0,Rr.jsx)("div",{className:"p-3",children:(0,Rr.jsx)("div",{className:"flex flex-col space-y-4 sm:flex-row sm:space-x-4 sm:space-y-0",children:(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"relative flex items-center justify-center pt-1",children:[(0,Rr.jsx)("div",{className:"text-sm font-medium","aria-live":"polite",role:"presentation",id:"month-picker",children:jc(i,"yyyy")}),(0,Rr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Rr.jsx)("button",{name:"previous-year","aria-label":"Go to previous year",className:Un(zn({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100","absolute left-1"),type:"button",onClick:function(){const e=VQ(i,{years:-1});s(jc(e,"yyyy"))},children:(0,Rr.jsx)(hX,{className:"h-4 w-4"})}),(0,Rr.jsx)("button",{name:"next-year","aria-label":"Go to next year",className:Un(zn({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100","absolute right-1 disabled:bg-slate-100"),type:"button",onClick:function(){const e=VQ(i,{years:1});s(jc(e,"yyyy"))},children:(0,Rr.jsx)(FY,{className:"h-4 w-4"})})]})]}),(0,Rr.jsx)("div",{className:"grid w-full grid-cols-3 gap-2",role:"grid","aria-labelledby":"month-picker",children:o.map((e=>(0,Rr.jsx)("div",{className:"relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-slate-100 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md dark:[&:has([aria-selected])]:bg-slate-800",role:"presentation",children:(0,Rr.jsx)("button",{name:"day",className:Un("inline-flex h-9 w-16 items-center justify-center rounded-md p-0 text-sm font-normal ring-offset-white transition-colors hover:bg-slate-100 hover:text-slate-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 aria-selected:opacity-100 dark:ring-offset-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50 dark:focus-visible:ring-slate-800",HQ(e,r)&&"bg-slate-900 text-slate-50 hover:bg-slate-900 hover:text-slate-50 focus:bg-slate-900 focus:text-slate-50 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50 dark:hover:text-slate-900 dark:focus:bg-slate-50 dark:focus:text-slate-900",!HQ(e,r)&&HQ(e,Cc(BX()))&&"bg-slate-100 text-slate-900 dark:bg-slate-800 dark:text-slate-50"),role:"gridcell",tabIndex:-1,type:"button",onClick:()=>n(e),children:(0,Rr.jsx)("time",{dateTime:jc(e,"yyyy-MM-dd"),children:jc(e,"MMM")})})},e.toString())))})]})})})}function WQ(e){let{open:r,onOpenChange:n,onSelect:a,search:s,setSearch:i}=e;const[o,l]=(0,t.useState)(null),{items:c,itemsStatus:d}=$e((e=>e.inventory)),u=rt(),h=(0,t.useRef)();(0,t.useEffect)((()=>{"idle"===d&&u(Mh())}),[u,d]);const f=(0,t.useMemo)((()=>{const e=new Set;return null===c||void 0===c||c.forEach((t=>{t.mfcName&&e.add(t.mfcName)})),Array.from(e).sort()}),[c]).filter((e=>e.toLowerCase().includes(null===s||void 0===s?void 0:s.toLowerCase())));(0,t.useEffect)((()=>{f.length>0?l(f[0]):l(null)}),[s,r,f]);const m=e=>{null===a||void 0===a||a(e),n(!1),i("")};return(0,Rr.jsx)(WN,{open:r,onOpenChange:n,children:(0,Rr.jsxs)(XN,{className:"max-w-3xl p-0 gap-0",onKeyDown:e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key){var t;e.preventDefault();const r=f.indexOf(o);let n;n="ArrowDown"===e.key?r<f.length-1?r+1:0:r>0?r-1:f.length-1;const a=f[n];l(a),null===(t=document.getElementById(a))||void 0===t||t.scrollIntoView({behavior:"smooth",block:"nearest"})}else"Enter"===e.key&&o?(m(o),n(!1),i("")):"Escape"===e.key&&(n(!1),i(""))},children:[(0,Rr.jsx)(QN,{className:"px-4 py-2.5 flex flex-row items-center justify-between bg-gray-100 border-b",children:(0,Rr.jsx)("div",{children:(0,Rr.jsx)(ZN,{className:"text-base font-semibold",children:"Select a Manufacturer"})})}),(0,Rr.jsx)(Hj,{}),(0,Rr.jsx)("div",{className:"py-2 px-4",children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)(VN,{className:"absolute left-2.5 top-2 h-4 w-4 text-gray-400"}),(0,Rr.jsx)(Gf,{autoFocus:!0,placeholder:"Search manufacturers...",className:"pl-8 h-8 text-sm border rounded-md focus:ring-2 focus:ring-blue-500",value:s,onChange:e=>i(e.target.value),ref:h})]})}),(0,Rr.jsx)("div",{className:"px-2",children:(0,Rr.jsx)(dp,{className:"h-[400px] pr-2 py-1",children:(0,Rr.jsx)(jw,{children:(0,Rr.jsx)(Cw,{children:f.map((e=>(0,Rr.jsxs)(Ew,{id:e,className:Un("cursor-pointer hover:bg-blue-50 transition-colors",o===e&&"bg-blue-200"),onClick:()=>m(e),children:[(0,Rr.jsx)(Dw,{className:"py-3",children:(0,Rr.jsxs)("div",{className:"flex items-center",children:[(0,Rr.jsx)(XY,{className:"h-4 w-4 mr-2 text-gray-500"}),(0,Rr.jsx)("div",{className:"font-medium",children:e})]})}),(0,Rr.jsxs)(Dw,{className:"text-right text-sm text-gray-500",children:[c.filter((t=>t.mfcName===e)).length," ","products"]})]},e)))})})})}),(0,Rr.jsxs)("div",{className:"p-3 bg-gray-100 text-xs text-gray-600 flex items-center justify-center gap-3",children:[(0,Rr.jsx)("span",{children:"Navigate - \u2191\u2193"}),(0,Rr.jsx)("span",{children:"|"}),(0,Rr.jsx)("span",{children:"Select - Enter"}),(0,Rr.jsx)("span",{children:"|"}),(0,Rr.jsx)("span",{children:"Close - ESC"})]})]})})}const qQ=e=>{let{activeTab:t,reportTypes:r,selectedReportType:n,handleReportTypeChange:a}=e;const s=r[t]||[];return(0,Rr.jsx)("div",{className:"flex gap-2",children:s.map((e=>{const r=n[t]===e.id;return(0,Rr.jsx)(Kf,{className:Un("cursor-pointer transition-all duration-200 overflow-hidden group flex-1","hover:shadow-lg hover:border-pink-300",r?"ring-2 ring-pink-400 bg-pink-400 text-white shadow-md":"bg-white border border-gray-200 hover:bg-gray-50 shadow-sm"),onClick:()=>a(e.id),children:(0,Rr.jsx)("div",{className:"flex flex-col items-center justify-center text-center p-3 h-full",children:(0,Rr.jsx)("h3",{className:Un("text-xs font-semibold whitespace-nowrap overflow-hidden text-ellipsis max-w-full transition-colors duration-200",r?"text-white":"text-pink-600 group-hover:text-pink-700"),children:e.name})})},e.id)}))})},GQ=e=>{let{isFilterRequired:t,selectedReportType:r,activeTab:n,localDateRange:a,handleDateRangeChange:s,localSingleDate:i,dispatch:o,setReduxSingleDate:l,localSelectedMonth:c,setReduxSelectedMonth:d,filters:u,handleFilterChange:h,distributors:f,customers:m,setIsProductDialogOpen:p,clearProductSelection:x,setIsManufacturerDialogOpen:v,clearManufacturerSelection:g,generateReport:y,reportStatus:b}=e;const w=t("dateRange"),N=t("singleDate"),j=t("month"),S=t("customer"),C=t("distributor"),k=t("manufacturer"),E=t("product"),T=t("expiryRange"),D="low-stock"===r[n];return w||N||j||S||C||k||E||T||D?(0,Rr.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-2 shadow-sm font-semibold",children:(0,Rr.jsx)("div",{className:" flex items-center align-middle",children:(0,Rr.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 lg:items-end items-center justify-center",children:[(0,Rr.jsxs)("div",{className:"flex flex-wrap gap-3 flex-grow items-center justify-center align-middle",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2 justify-center align-middle",children:[(0,Rr.jsx)(HN,{className:"h-5 w-5 text-gray-600"}),(0,Rr.jsx)("h3",{className:"text-md font-semibold text-gray-800",children:"Filters"})]}),w&&(0,Rr.jsxs)("div",{className:"flex flex-col gap-1 col-span-1 md:col-span-2 lg:col-span-1",children:[(0,Rr.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Date Range"}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Gf,{type:"date",value:a.from?jc(a.from,"yyyy-MM-dd"):"",onChange:e=>s("from",e.target.value),className:"h-9 text-sm flex-1 shadow-sm",placeholder:"From"}),(0,Rr.jsx)("span",{className:"text-gray-500 text-sm",children:"to"}),(0,Rr.jsx)(Gf,{type:"date",value:a.to?jc(a.to,"yyyy-MM-dd"):"",onChange:e=>s("to",e.target.value),className:"h-9 text-sm flex-1 shadow-sm",placeholder:"To"})]})]}),N&&(0,Rr.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,Rr.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Select Date"}),(0,Rr.jsx)(Qo,{children:e=>{let{open:t,setOpen:r}=e;return(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(Jo,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",className:"h-9 px-3 text-sm w-full justify-start font-normal shadow-sm",children:[(0,Rr.jsx)(Bw,{className:"mr-2 h-4 w-4 text-gray-600"}),i?jc(i,"PPP"):(0,Rr.jsx)("span",{className:"text-gray-500",children:"Pick a date"})]})}),(0,Rr.jsx)(Zo,{className:"w-auto p-0",align:"start",children:(0,Rr.jsx)(bu,{mode:"single",selected:i,onSelect:e=>{o(l(e)),r(!1)},initialFocus:!0})})]})}})]}),j&&(0,Rr.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,Rr.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Select Month"}),(0,Rr.jsx)(Qo,{children:e=>{let{open:t,setOpen:r}=e;return(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(Jo,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",className:"h-9 px-3 text-sm w-full justify-start font-normal shadow-sm",children:[(0,Rr.jsx)(Bw,{className:"mr-2 h-4 w-4 text-gray-600"}),c?jc(c,"MMMM yyyy"):(0,Rr.jsx)("span",{className:"text-gray-500",children:"Select month"})]})}),(0,Rr.jsx)(Zo,{className:"w-auto p-0",align:"start",children:(0,Rr.jsx)($Q,{currentMonth:c||Cc(new Date),onMonthChange:e=>{o(d(e)),r(!1)}})})]})}})]}),C&&(0,Rr.jsxs)("div",{className:"flex flex-col gap-1 font-semibold",children:[(0,Rr.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Distributor"}),(0,Rr.jsxs)(fw,{value:u.distributor,onValueChange:e=>h("distributor",e),children:[(0,Rr.jsx)(pw,{className:"h-9 text-sm w-full font-normal shadow-sm",children:(0,Rr.jsx)(mw,{placeholder:"Select distributor"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"all",children:"All Distributors"}),null===f||void 0===f?void 0:f.map((e=>(0,Rr.jsx)(yw,{value:e._id,children:e.name},e._id)))]})]})]}),S&&(0,Rr.jsxs)("div",{className:"flex flex-col gap-1 font-semibold",children:[(0,Rr.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Customer"}),(0,Rr.jsxs)(fw,{value:u.customer,onValueChange:e=>h("customer",e),children:[(0,Rr.jsx)(pw,{className:"h-9 text-sm w-full font-normal shadow-sm",children:(0,Rr.jsx)(mw,{placeholder:"Select customer"})}),(0,Rr.jsxs)(gw,{children:[(0,Rr.jsx)(yw,{value:"all",children:"All Customers"}),null===m||void 0===m?void 0:m.map((e=>(0,Rr.jsx)(yw,{value:e._id,children:e.name},e._id)))]})]})]}),E&&(0,Rr.jsxs)("div",{className:"flex flex-col gap-1 font-semibold",children:[(0,Rr.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Product"}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",className:"h-9 px-3 text-sm w-full justify-between  shadow-sm",onClick:()=>p(!0),children:[(0,Rr.jsxs)("span",{className:"flex items-center truncate",children:[(0,Rr.jsx)(pm,{className:"mr-2 h-4 w-4 text-gray-600"}),u.product||(0,Rr.jsx)("span",{className:"text-gray-500",children:"Select product"})]}),u.product&&(0,Rr.jsx)(jN,{className:"h-4 w-4 text-gray-500 hover:text-gray-700",onClick:e=>{e.stopPropagation(),x(e)}})]})]}),k&&(0,Rr.jsxs)("div",{className:"flex flex-col gap-1 font-semibold",children:[(0,Rr.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Manufacturer"}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",className:"h-9 px-3 text-sm w-full justify-between  shadow-sm",onClick:()=>v(!0),children:[(0,Rr.jsxs)("span",{className:"flex items-center truncate",children:[(0,Rr.jsx)(XY,{className:"mr-2 h-4 w-4 text-gray-600"}),u.manufacturer||(0,Rr.jsx)("span",{className:"text-gray-500",children:"Select manufacturer"})]}),u.manufacturer&&(0,Rr.jsx)(jN,{className:"h-4 w-4 text-gray-500 hover:text-gray-700",onClick:e=>{e.stopPropagation(),g(e)}})]})]}),T&&(0,Rr.jsxs)("div",{className:"flex flex-col gap-1 font-semibold",children:[(0,Rr.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Expiry Month"}),(0,Rr.jsxs)(Qo,{children:[(0,Rr.jsx)(Jo,{asChild:!0,children:(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",className:"h-9 px-3 text-sm w-full flex items-center justify-start font-normal gap-2 shadow-sm",children:[(0,Rr.jsx)(Bw,{className:"h-4 w-4 text-gray-600"}),u.expiryRange.selectedMonth?jc(new Date(u.expiryRange.selectedMonth),"MMMM yyyy"):(0,Rr.jsx)("span",{className:"text-gray-500",children:"Select expiry month"})]})}),(0,Rr.jsx)(Zo,{className:"w-auto p-0",align:"start",children:(0,Rr.jsx)($Q,{currentMonth:u.expiryRange.selectedMonth||new Date,onMonthChange:e=>{h("expiryRange",{selectedMonth:e})}})})]})]}),D&&(0,Rr.jsxs)("div",{className:"flex flex-col gap-1 font-semibold",children:[(0,Rr.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Low Stock Threshold"}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Gf,{type:"number",min:"1",value:u.threshold,onChange:e=>h("threshold",e.target.value),className:"h-9 text-sm w-24 shadow-sm",placeholder:"e.g. 10"}),(0,Rr.jsx)("span",{className:"text-sm text-gray-600",children:"packs"})]})]})]}),(0,Rr.jsx)("div",{className:"w-full lg:w-auto",children:(0,Rr.jsx)(Vn,{onClick:y,className:"h-9  px-4 bg-pink-400 hover:bg-pink-500 text-white text-sm font-medium shadow-sm w-full",disabled:"loading"===b,children:"loading"===b?(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),(0,Rr.jsx)("span",{children:"Generating..."})]}):(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(HN,{className:"mr-2 h-4 w-4"}),(0,Rr.jsx)("span",{children:"Generate Report"})]})})})]})})}):null},KQ=e=>{let{summary:t,activeTab:r}=e;if(!t)return null;const n=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e||0);return(0,Rr.jsxs)("div",{className:"flex flex-row gap-3 w-full",children:[(0,Rr.jsxs)(Kf,{className:"shadow-sm hover:shadow-md transition-shadow duration-200 flex-grow w-0",children:[(0,Rr.jsx)(Yf,{className:"flex flex-row items-center justify-between space-y-0 px-3 pt-3 pb-1",children:(0,Rr.jsx)(Xf,{className:"text-xs font-medium text-gray-600",children:"sales"===r?" Sales Value":" Purchase Amount"})}),(0,Rr.jsx)(Jf,{className:"px-3 pb-3 pt-1",children:(0,Rr.jsx)("div",{className:"text-lg font-bold text-gray-800",children:n("sales"===r?t.totalSales:t.totalPurchases)})})]}),(0,Rr.jsxs)(Kf,{className:"shadow-sm hover:shadow-md transition-shadow duration-200 flex-grow w-0",children:[(0,Rr.jsx)(Yf,{className:"flex flex-row items-center justify-between space-y-0 px-3 pt-3 pb-1",children:(0,Rr.jsx)(Xf,{className:"text-xs font-medium text-gray-600",children:"GST"})}),(0,Rr.jsx)(Jf,{className:"px-3 pb-3 pt-1",children:(0,Rr.jsx)("div",{className:"text-lg font-bold text-gray-800",children:n(t.totalGST)})})]}),(0,Rr.jsxs)(Kf,{className:"shadow-sm hover:shadow-md transition-shadow duration-200 flex-grow w-0",children:[(0,Rr.jsx)(Yf,{className:"flex flex-row items-center justify-between space-y-0 px-3 pt-3 pb-1",children:(0,Rr.jsx)(Xf,{className:"text-xs font-medium text-gray-600",children:"Bills"})}),(0,Rr.jsx)(Jf,{className:"px-3 pb-3 pt-1",children:(0,Rr.jsx)("div",{className:"text-lg font-bold text-gray-800",children:t.totalBills||0})})]}),(0,Rr.jsxs)(Kf,{className:"shadow-sm hover:shadow-md transition-shadow duration-200 flex-grow w-0",children:[(0,Rr.jsx)(Yf,{className:"flex flex-row items-center justify-between space-y-0 px-3 pt-3 pb-1",children:(0,Rr.jsx)(Xf,{className:"text-xs font-medium text-gray-600",children:"sales"===r?"Quantity Sold":"Quantity Purchased"})}),(0,Rr.jsx)(Jf,{className:"px-3 pb-3 pt-1",children:(0,Rr.jsx)("div",{className:"text-lg font-bold text-gray-800",children:t.totalQuantity||0})})]}),"sales"===r&&t.averageBillValue&&(0,Rr.jsxs)(Kf,{className:"shadow-sm hover:shadow-md transition-shadow duration-200 flex-grow w-0",children:[(0,Rr.jsx)(Yf,{className:"flex flex-row items-center justify-between space-y-0 px-3 pt-3 pb-1",children:(0,Rr.jsx)(Xf,{className:"text-xs font-medium text-gray-600",children:"Avg. Bill Value"})}),(0,Rr.jsxs)(Jf,{className:"px-3 pb-3 pt-1",children:[(0,Rr.jsx)("div",{className:"text-lg font-bold text-gray-800",children:n(t.averageBillValue)}),(0,Rr.jsx)("p",{className:"text-xs text-gray-500 pt-1",children:"Average value per bill."})]})]})]})},YQ=e=>{var r;let{reportData:n,reportStatus:a,reportError:s,localError:i,activeTab:o,selectedReportType:l,getSelectedReport:c,isFilterRequired:d,dateRange:u,singleDate:h,selectedMonth:f,generateReport:m,selectedProduct:p,setSelectedProduct:x}=e;const v=c(),[g,y]=(0,t.useState)(null);if(!v)return null;const b=(e,t,r)=>{if(!e)return!0;const n=r[t];switch(t){case"sales":switch(n){case"all-sales":return!e.sales||0===e.sales.length;case"customer-wise":return!e.customerSummary||0===e.customerSummary.length;case"manufacturer-wise":return!e.manufacturerSummary||0===e.manufacturerSummary.length;case"product-wise":return!e.productSummary||0===e.productSummary.length;case"group-wise":return!e.groupSummary||0===e.groupSummary.length;case"daily-sales":return!e.hourlyData||0===e.hourlyData.length;case"monthly-sales":return!e.dailyData||0===e.dailyData.length;default:return 0===Object.keys(e).length}case"purchase":switch(n){case"all-purchases":return!e.purchases||0===e.purchases.length;case"distributor-wise":return!e.distributorSummary||0===e.distributorSummary.length;case"manufacturer-wise":return!e.manufacturerSummary||0===e.manufacturerSummary.length;case"product-wise":return!e.productSummary||0===e.productSummary.length;case"group-wise":return!e.groupSummary||0===e.groupSummary.length;default:return 0===Object.keys(e).length}case"inventory":switch(n){case"stock-status":return!e.items||0===e.items.length;case"low-stock":return!e.lowStockItems||0===e.lowStockItems.length;case"expiry-alert":return!e.expiryAlerts||0===e.expiryAlerts.length;case"stock-movement":return!e.stockMovement||0===e.stockMovement.length;case"fast-moving":return!e.fastMovingItems||0===e.fastMovingItems.length;case"slow-moving":return!e.slowMovingItems||0===e.slowMovingItems.length;default:return 0===Object.keys(e).length}default:return!e||0===Object.keys(e).length}};return(0,Rr.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm mt-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center px-4 py-2 border-b border-gray-200 bg-gray-50/50 gap-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,Rr.jsx)("div",{className:"p-2.5 rounded-lg bg-pink-50 border border-pink-200"}),(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("h3",{className:"text-md font-semibold text-gray-800",children:v.name||"Report"}),d("dateRange")&&u.from&&u.to&&(0,Rr.jsxs)("p",{className:"text-xs text-gray-500",children:[jc(new Date(u.from),"dd MMM, yyyy")," -"," ",jc(new Date(u.to),"dd MMM, yyyy")]}),d("singleDate")&&h&&(0,Rr.jsxs)("p",{className:"text-xs text-gray-500",children:["Date: ",jc(new Date(h),"dd MMM, yyyy")]}),d("month")&&f&&(0,Rr.jsxs)("p",{className:"text-xs text-gray-500",children:["Month: ",jc(new Date(f),"MMMM yyyy")]})]})]}),(0,Rr.jsx)("div",{className:"flex-grow flex justify-center px-2 min-w-0",children:("sales"===o||"purchase"===o)&&(null===n||void 0===n?void 0:n.summary)&&(0,Rr.jsx)(KQ,{summary:n.summary,activeTab:o})}),(0,Rr.jsx)("div",{className:"flex-shrink-0",children:(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",disabled:"loading"===a||!n||b(n,o,l),className:"h-9 px-4 text-sm font-medium shadow-sm hover:bg-gray-100",children:[(0,Rr.jsx)(TP,{className:"mr-2 h-4 w-4"}),"Export"]})})]}),(0,Rr.jsx)("div",{className:"p-0 md:p-2",children:i||s?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-red-600 bg-red-50 m-4 rounded-lg",children:[(0,Rr.jsx)(_$,{className:"h-12 w-12 mb-3 text-red-500"}),(0,Rr.jsx)("p",{className:"text-lg font-semibold",children:"Error Generating Report"}),(0,Rr.jsx)("p",{className:"text-sm text-red-500 mt-1",children:i||s})]}):"loading"===a?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,Rr.jsx)("div",{className:"h-10 w-10 rounded-full border-4 border-gray-300 border-t-pink-400 animate-spin mb-4"}),(0,Rr.jsx)("p",{className:"text-md font-medium text-gray-800",children:"Generating report, please wait..."}),(0,Rr.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"This might take a few moments."})]}):n?b(n,o,l)?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center m-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,Rr.jsx)("div",{className:"p-4 rounded-full bg-yellow-100 mb-4",children:(0,Rr.jsx)(VN,{className:"h-8 w-8 text-yellow-600"})}),(0,Rr.jsx)("p",{className:"text-lg font-semibold text-yellow-800 mb-1",children:"No Data Found"}),(0,Rr.jsx)("p",{className:"text-sm text-yellow-600 max-w-md",children:"There is no data available for the selected criteria. Please try adjusting the filters or changing the date range."})]}):(0,Rr.jsx)("div",{className:"space-y-4 p-2 md:p-0",children:(0,Rr.jsxs)("div",{className:"overflow-x-auto report-table-container rounded-md border border-gray-200",children:["sales"===o&&(()=>{var e,r,a,s,i;if(!n)return null;const c="min-w-full divide-y divide-gray-200",d="px-4  text-left text-xs font-semibold text-gray-600 uppercase tracking-wider bg-gray-100/70",u="px-4  whitespace-nowrap text-sm text-gray-700 font-semibold",h=`${u} text-right`;switch(l[o]){case"all-sales":return(0,Rr.jsxs)(jw,{className:c,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:d,children:"Invoice No"}),(0,Rr.jsx)(Tw,{className:d,children:"Date"}),(0,Rr.jsx)(Tw,{className:d,children:"Customer"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Items"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Subtotal"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"GST"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Total"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Status"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(e=n.sales)||void 0===e?void 0:e.map((e=>(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50/50 transition-colors",children:[(0,Rr.jsx)(Dw,{className:u,children:e.invoiceNumber}),(0,Rr.jsx)(Dw,{className:u,children:jc(new Date(e.invoiceDate),"dd MMM yyyy")}),(0,Rr.jsxs)(Dw,{className:u,children:[(0,Rr.jsx)("div",{className:"font-semibold",children:e.distributorName}),e.mob&&(0,Rr.jsx)("div",{className:"text-xs text-gray-500",children:e.mob})]}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.billSummary.productCount}),(0,Rr.jsx)(Dw,{className:h,children:e.billSummary.subtotal.toFixed(2)}),(0,Rr.jsx)(Dw,{className:h,children:e.billSummary.gstAmount.toFixed(2)}),(0,Rr.jsx)(Dw,{className:`${h} font-semibold`,children:e.billSummary.grandTotal.toFixed(2)}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:(0,Rr.jsx)(qw,{variant:"paid"===e.paymentStatus?"success":"destructive",children:e.paymentStatus.charAt(0).toUpperCase()+e.paymentStatus.slice(1)})})]},e._id)))})]});case"customer-wise":return(0,Rr.jsxs)(jw,{className:c,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:d,children:"Customer"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Total Bills"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Total Amount"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Avg. Bill Value"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(r=n.customerSummary)||void 0===r?void 0:r.map((e=>(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50/50 transition-colors",children:[(0,Rr.jsx)(Dw,{className:u,children:e.customerName}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.totalSales}),(0,Rr.jsx)(Dw,{className:`${h} font-semibold`,children:e.totalAmount.toFixed(2)}),(0,Rr.jsx)(Dw,{className:h,children:(e.totalAmount/e.totalSales||0).toFixed(2)})]},e.customerId)))})]});case"manufacturer-wise":return(0,Rr.jsxs)(jw,{className:c,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:d,children:"Manufacturer"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Products Sold"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Total Quantity"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Total Amount"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(a=n.manufacturerSummary)||void 0===a?void 0:a.map((e=>(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50/50 transition-colors",children:[(0,Rr.jsx)(Dw,{className:u,children:e.manufacturer}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.uniqueProducts}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.totalQuantity}),(0,Rr.jsx)(Dw,{className:`${h} font-semibold`,children:e.totalAmount.toFixed(2)})]},e.manufacturer)))})]});case"group-wise":return(0,Rr.jsxs)(jw,{className:c,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:d,children:"Group Name"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Unique Products Sold"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Total Quantity Sold"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Total Sales Amount"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(s=n.groupSummary)||void 0===s?void 0:s.map((e=>(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50/50 transition-colors",children:[(0,Rr.jsx)(Dw,{className:u,children:e.groupName}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.uniqueProducts}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.totalQuantity}),(0,Rr.jsx)(Dw,{className:`${h} font-semibold`,children:e.totalAmount.toFixed(2)})]},e.groupName)))})]});case"product-wise":return(0,Rr.jsx)("div",{className:"space-y-0",children:(0,Rr.jsxs)(jw,{className:c,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:d,children:"Product"}),(0,Rr.jsx)(Tw,{className:d,children:"Batch"}),(0,Rr.jsx)(Tw,{className:d,children:"Manufacturer"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Qty Sold"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Total Amount"}),(0,Rr.jsx)(Tw,{className:`${d} text-center w-[50px]`,children:"Details"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(i=n.productSummary)||void 0===i?void 0:i.map((e=>{const r=`${e.productName}-${e.batchNumber}`,a=p===r;return(0,Rr.jsxs)(t.Fragment,{children:[(0,Rr.jsxs)(Ew,{className:Un("cursor-pointer hover:bg-pink-50 transition-colors",a&&"bg-pink-100"),onClick:()=>x(a?null:r),children:[(0,Rr.jsx)(Dw,{className:u,children:e.productName}),(0,Rr.jsx)(Dw,{className:u,children:e.batchNumber}),(0,Rr.jsx)(Dw,{className:u,children:e.manufacturer}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.quantitySold}),(0,Rr.jsx)(Dw,{className:`${h} font-semibold`,children:e.totalAmount.toFixed(2)}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-7 w-7 p-0 text-gray-500 hover:text-pink-600 hover:bg-pink-100",onClick:e=>{e.stopPropagation(),x(a?null:r)},children:(0,Rr.jsx)(wm,{className:Un("h-4 w-4 transition-transform duration-200",a&&"transform rotate-180")})})})]}),a&&n.productSales[r]&&(0,Rr.jsx)(Ew,{className:"bg-pink-50 hover:bg-pink-100/80",children:(0,Rr.jsx)(Dw,{colSpan:6,className:"p-0",children:(0,Rr.jsxs)("div",{className:"p-3 m-2 border border-pink-200 rounded-md bg-white shadow-inner",children:[(0,Rr.jsxs)("h4",{className:"text-sm font-semibold text-pink-600 mb-2 pl-1",children:["Sale Details: ",e.productName," (Batch:"," ",e.batchNumber,")"]}),(0,Rr.jsxs)(jw,{className:"min-w-full",children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{className:"border-b border-pink-300",children:[(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-left text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Inv No"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-left text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-left text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-center text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-right text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Rate (GST included)"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-center text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"GST"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-right text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),(0,Rr.jsx)(Cw,{children:n.productSales[r].map(((e,t)=>{var r;return(0,Rr.jsxs)(Ew,{className:"border-b border-gray-200 last:border-b-0 hover:bg-pink-50/50",children:[(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 font-semibold",children:e.invoiceNumber}),(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 font-semibold",children:jc(new Date(e.invoiceDate),"dd/MM/yy")}),(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 font-semibold",children:e.customerName}),(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 text-center font-semibold",children:e.quantity}),(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 text-right font-semibold",children:null===(r=e.rate)||void 0===r?void 0:r.toFixed(2)}),(0,Rr.jsxs)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 text-center font-semibold",children:[e.gst,"%"]}),(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 text-right font-semibold",children:e.amount.toFixed(2)})]},`${e.invoiceNumber}-${t}`)}))})]})]})})})]},r)}))})]})});case"daily-sales":return(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,Rr.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,Rr.jsx)("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Total Sales"}),(0,Rr.jsx)("p",{className:"text-2xl font-semibold",children:n.dailySummary.totalSales.toFixed(2)})]}),(0,Rr.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,Rr.jsx)("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Total Bills"}),(0,Rr.jsx)("p",{className:"text-2xl font-semibold",children:n.dailySummary.totalBills})]}),(0,Rr.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,Rr.jsx)("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Bill Value"}),(0,Rr.jsx)("p",{className:"text-2xl font-semibold",children:n.dailySummary.averageBillValue.toFixed(2)})]})]}),(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{children:"HOUR"}),(0,Rr.jsx)(Tw,{children:"BILLS"}),(0,Rr.jsx)(Tw,{children:"SALES AMOUNT"}),(0,Rr.jsx)(Tw,{children:"TOTAL AMOUNT"})]})}),(0,Rr.jsx)(Cw,{children:n.hourlyData.map((e=>(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Dw,{children:`${e.hour.toString().padStart(2,"0")}:00 - ${(e.hour+1).toString().padStart(2,"0")}:00`}),(0,Rr.jsx)(Dw,{children:e.billCount}),(0,Rr.jsxs)(Dw,{children:["\u20b9",e.totalSales.toFixed(2)]}),(0,Rr.jsxs)(Dw,{children:["\u20b9",e.totalAmount.toFixed(2)]})]},e.hour)))})]})]});case"monthly-sales":return(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[(0,Rr.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,Rr.jsx)("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Total Sales"}),(0,Rr.jsx)("p",{className:"text-2xl font-semibold",children:n.monthlySummary.totalSales.toFixed(2)})]}),(0,Rr.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,Rr.jsx)("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Total Bills"}),(0,Rr.jsx)("p",{className:"text-2xl font-semibold",children:n.monthlySummary.totalBills})]}),(0,Rr.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,Rr.jsx)("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Bill Value"}),(0,Rr.jsx)("p",{className:"text-2xl font-semibold",children:n.monthlySummary.averageBillValue.toFixed(2)})]}),(0,Rr.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,Rr.jsx)("h3",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Daily Sales"}),(0,Rr.jsx)("p",{className:"text-2xl font-semibold",children:n.monthlySummary.averageDailySales.toFixed(2)})]})]}),(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{children:"DATE"}),(0,Rr.jsx)(Tw,{children:"BILLS"}),(0,Rr.jsx)(Tw,{children:"SALES AMOUNT"}),(0,Rr.jsx)(Tw,{children:"TOTAL AMOUNT"})]})}),(0,Rr.jsx)(Cw,{children:n.dailyData.map((e=>(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Dw,{children:jc(new Date(n.monthlySummary.month+`-${e.day.toString().padStart(2,"0")}`),"dd MMM yyyy")}),(0,Rr.jsx)(Dw,{children:e.billCount}),(0,Rr.jsxs)(Dw,{children:["\u20b9",e.totalSales.toFixed(2)]}),(0,Rr.jsxs)(Dw,{children:["\u20b9",e.totalAmount.toFixed(2)]})]},e.day)))})]})]});default:return null}})(),"purchase"===o&&(()=>{var e,r,a,s,i;if(!n)return null;const c="min-w-full divide-y divide-gray-200",d="px-4 py-2.5 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider bg-gray-100/70",u="px-4 py-3 whitespace-nowrap text-sm text-gray-700 font-semibold",h=`${u} text-right`;switch(l[o]){case"all-purchases":return(0,Rr.jsxs)(jw,{className:c,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:d,children:"Invoice No"}),(0,Rr.jsx)(Tw,{className:d,children:"Date"}),(0,Rr.jsx)(Tw,{className:d,children:"Distributor"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Items"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Taxable (\u20b9)"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"GST (\u20b9)"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Total (\u20b9)"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Status"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(e=n.purchases)||void 0===e?void 0:e.map((e=>(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50/50 transition-colors",children:[(0,Rr.jsx)(Dw,{className:u,children:e.invoiceNumber}),(0,Rr.jsx)(Dw,{className:u,children:jc(new Date(e.invoiceDate),"dd MMM yyyy")}),(0,Rr.jsxs)(Dw,{className:u,children:[(0,Rr.jsx)("div",{className:"font-semibold",children:e.distributorName}),e.mob&&(0,Rr.jsx)("div",{className:"text-xs text-gray-500",children:e.mob})]}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.billSummary.productCount}),(0,Rr.jsx)(Dw,{className:h,children:e.billSummary.taxableAmount.toFixed(2)}),(0,Rr.jsx)(Dw,{className:h,children:e.billSummary.gstAmount.toFixed(2)}),(0,Rr.jsx)(Dw,{className:`${h} font-semibold`,children:e.billSummary.grandTotal.toFixed(2)}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:(0,Rr.jsx)(qw,{variant:"paid"===e.paymentStatus?"success":"destructive",children:e.paymentStatus.charAt(0).toUpperCase()+e.paymentStatus.slice(1)})})]},e._id)))})]});case"distributor-wise":return(0,Rr.jsxs)(jw,{className:c,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:d,children:"Distributor"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Total Bills"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Total Amount (\u20b9)"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Avg. Bill Value (\u20b9)"}),(0,Rr.jsx)(Tw,{className:`${d} text-center w-[100px]`,children:"Details"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(r=n.distributorSummary)||void 0===r?void 0:r.map((e=>(0,Rr.jsxs)(t.Fragment,{children:[(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50/50 transition-colors",children:[(0,Rr.jsx)(Dw,{className:u,children:e.distributorName}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.billCount}),(0,Rr.jsx)(Dw,{className:`${h} font-semibold`,children:e.totalAmount.toFixed(2)}),(0,Rr.jsx)(Dw,{className:h,children:(e.totalAmount/e.billCount||0).toFixed(2)}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:(0,Rr.jsxs)(Vn,{variant:"ghost",size:"sm",onClick:()=>y(g===e.distributorId?null:e.distributorId),children:[g===e.distributorId?(0,Rr.jsx)(wm,{className:"h-4 w-4"}):(0,Rr.jsx)(wm,{className:"h-4 w-4 transform rotate-[-90deg]"}),(0,Rr.jsx)("span",{className:"sr-only",children:"Details"})]})})]}),g===e.distributorId&&(0,Rr.jsx)(Ew,{className:"bg-gray-50/30",children:(0,Rr.jsx)(Dw,{colSpan:5,className:"p-0",children:(0,Rr.jsxs)("div",{className:"px-4 py-3",children:[(0,Rr.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:["Invoices for ",e.distributorName]}),e.invoices&&e.invoices.length>0?(0,Rr.jsxs)(jw,{className:"min-w-full bg-white",children:[(0,Rr.jsx)(Sw,{className:"bg-gray-100",children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:"px-3 py-2 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Invoice No"}),(0,Rr.jsx)(Tw,{className:"px-3 py-2 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Rr.jsx)(Tw,{className:"px-3 py-2 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Items"}),(0,Rr.jsx)(Tw,{className:"px-3 py-2 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Taxable (\u20b9)"}),(0,Rr.jsx)(Tw,{className:"px-3 py-2 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"GST (\u20b9)"}),(0,Rr.jsx)(Tw,{className:"px-3 py-2 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Total (\u20b9)"})]})}),(0,Rr.jsx)(Cw,{className:"divide-y divide-gray-200",children:e.invoices.map((e=>{var t,r;return(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50/50",children:[(0,Rr.jsx)(Dw,{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-600 font-semibold",children:e.invoiceNumber}),(0,Rr.jsx)(Dw,{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-600 font-semibold",children:jc(new Date(e.invoiceDate),"dd MMM yyyy")}),(0,Rr.jsx)(Dw,{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-600 text-center font-semibold",children:e.billSummary.productCount}),(0,Rr.jsx)(Dw,{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-600 text-right font-semibold",children:(null===(t=e.billSummary.taxableAmount)||void 0===t?void 0:t.toFixed(2))||"0.00"}),(0,Rr.jsx)(Dw,{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-600 text-right font-semibold",children:(null===(r=e.billSummary.gstAmount)||void 0===r?void 0:r.toFixed(2))||"0.00"}),(0,Rr.jsx)(Dw,{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-600 text-right font-semibold",children:e.billSummary.grandTotal.toFixed(2)})]},e._id)}))})]}):(0,Rr.jsx)("p",{className:"text-xs text-gray-500 px-3 py-2",children:"No invoices found for this distributor within the selected criteria."})]})})})]},e.distributorId)))})]});case"manufacturer-wise":return(0,Rr.jsxs)(jw,{className:c,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:d,children:"Manufacturer"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Products Purchased"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Total Quantity"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Total Amount"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(a=n.manufacturerSummary)||void 0===a?void 0:a.map((e=>(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50/50 transition-colors",children:[(0,Rr.jsx)(Dw,{className:u,children:e.manufacturer}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.uniqueProducts}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.totalQuantity}),(0,Rr.jsx)(Dw,{className:`${h} font-semibold`,children:e.totalAmount.toFixed(2)})]},e.manufacturer)))})]});case"group-wise":return(0,Rr.jsxs)(jw,{className:c,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:d,children:"Group Name"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Unique Products Purchased"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Total Quantity Purchased"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Total Purchase Amount"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(s=n.groupSummary)||void 0===s?void 0:s.map((e=>(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50/50 transition-colors",children:[(0,Rr.jsx)(Dw,{className:u,children:e.groupName}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.uniqueProducts}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.totalQuantity}),(0,Rr.jsx)(Dw,{className:`${h} font-semibold`,children:e.totalAmount.toFixed(2)})]},e.groupName)))})]});case"product-wise":return(0,Rr.jsx)("div",{className:"space-y-0",children:(0,Rr.jsxs)(jw,{className:c,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:d,children:"Product"}),(0,Rr.jsx)(Tw,{className:d,children:"Batch"}),(0,Rr.jsx)(Tw,{className:d,children:"Manufacturer"}),(0,Rr.jsx)(Tw,{className:`${d} text-center`,children:"Qty Purchased"}),(0,Rr.jsx)(Tw,{className:`${d} text-right`,children:"Total Amount"}),(0,Rr.jsx)(Tw,{className:`${d} text-center w-[50px]`,children:"Details"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(i=n.productSummary)||void 0===i?void 0:i.map((e=>{const r=`${e.productName}-${e.batchNumber}`,a=p===r;return(0,Rr.jsxs)(t.Fragment,{children:[(0,Rr.jsxs)(Ew,{className:Un("cursor-pointer hover:bg-pink-50 transition-colors",a&&"bg-pink-100"),onClick:()=>x(a?null:r),children:[(0,Rr.jsx)(Dw,{className:u,children:e.productName}),(0,Rr.jsx)(Dw,{className:u,children:e.batchNumber}),(0,Rr.jsx)(Dw,{className:u,children:e.manufacturer}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:e.quantityPurchased}),(0,Rr.jsx)(Dw,{className:`${h} font-semibold`,children:e.totalAmount.toFixed(2)}),(0,Rr.jsx)(Dw,{className:`${u} text-center`,children:(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",className:"h-7 w-7 p-0 text-gray-500 hover:text-pink-600 hover:bg-pink-100",onClick:e=>{e.stopPropagation(),x(a?null:r)},children:(0,Rr.jsx)(wm,{className:Un("h-4 w-4 transition-transform duration-200",a&&"transform rotate-180")})})})]}),a&&n.productPurchases[r]&&(0,Rr.jsx)(Ew,{className:"bg-pink-50 hover:bg-pink-100/80",children:(0,Rr.jsx)(Dw,{colSpan:6,className:"p-0",children:(0,Rr.jsxs)("div",{className:"p-3 m-2 border border-pink-200 rounded-md bg-white shadow-inner",children:[(0,Rr.jsxs)("h4",{className:"text-sm font-semibold text-pink-600 mb-2 pl-1",children:["Purchase Details: ",e.productName," ","(Batch: ",e.batchNumber,")"]}),(0,Rr.jsxs)(jw,{className:"min-w-full",children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{className:"border-b border-pink-300",children:[(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-left text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Inv No"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-left text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-left text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Distributor"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-center text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-right text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Rate"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-right text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-center text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"GST"}),(0,Rr.jsx)(Tw,{className:"py-1.5 px-2 text-right text-2xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),(0,Rr.jsx)(Cw,{children:n.productPurchases[r].map(((e,t)=>{var r,n,a;return(0,Rr.jsxs)(Ew,{className:"border-b border-gray-200 last:border-b-0 hover:bg-pink-50/50",children:[(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 font-semibold",children:e.invoiceNumber}),(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 font-semibold",children:jc(new Date(e.invoiceDate),"dd/MM/yy")}),(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 font-semibold",children:e.distributorName}),(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 text-center font-semibold",children:e.quantity}),(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 text-right font-semibold",children:null===(r=e.rate)||void 0===r?void 0:r.toFixed(2)}),(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 text-right font-semibold",children:null===(n=e.amount)||void 0===n?void 0:n.toFixed(2)}),(0,Rr.jsxs)(Dw,{className:"py-1.5 px-2 text-xs text-gray-600 text-center font-semibold",children:[e.gst,"%"]}),(0,Rr.jsx)(Dw,{className:"py-1.5 px-2 text-xs text-gray-700 font-semibold text-right",children:null===(a=e.totalAmount)||void 0===a?void 0:a.toFixed(2)})]},`${e.invoiceNumber}-${t}`)}))})]})]})})})]},r)}))})]})});default:return null}})(),"inventory"===o&&(()=>{var e,t,r;if(!n)return null;const a="min-w-full divide-y divide-gray-200",s="px-4 py-2.5 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider bg-gray-100/70",i="px-4 py-3 whitespace-nowrap text-sm text-gray-700 font-semibold",c=`${i} text-right`;switch(l[o]){case"stock-status":return(0,Rr.jsxs)(jw,{className:a,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:s,children:"Product"}),(0,Rr.jsx)(Tw,{className:s,children:"Manufacturer"}),(0,Rr.jsx)(Tw,{className:s,children:"Batch"}),(0,Rr.jsx)(Tw,{className:`${s} text-center`,children:"Quantity"}),(0,Rr.jsx)(Tw,{className:`${s} text-right`,children:"MRP"}),(0,Rr.jsx)(Tw,{className:s,children:"Expiry"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(e=n.items)||void 0===e?void 0:e.map((e=>{var t;return(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50/50 transition-colors",children:[(0,Rr.jsx)(Dw,{className:i,children:e.productName}),(0,Rr.jsx)(Dw,{className:i,children:e.manufacturer}),(0,Rr.jsx)(Dw,{className:i,children:e.batchNumber}),(0,Rr.jsx)(Dw,{className:`${i} text-center`,children:e.quantity}),(0,Rr.jsx)(Dw,{className:c,children:null===(t=e.mrp)||void 0===t?void 0:t.toFixed(2)}),(0,Rr.jsx)(Dw,{className:i,children:e.expiry})]},`${e.productName}-${e.batchNumber}`)}))})]});case"low-stock":return(0,Rr.jsxs)(jw,{className:a,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:s,children:"Product"}),(0,Rr.jsx)(Tw,{className:s,children:"Manufacturer"}),(0,Rr.jsx)(Tw,{className:s,children:"Batch"}),(0,Rr.jsx)(Tw,{className:`${s} text-center`,children:"Current Stock"}),(0,Rr.jsx)(Tw,{className:s,children:"Expiry"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(t=n.lowStockItems)||void 0===t?void 0:t.map((e=>{const t=Math.floor(e.currentStock/(e.pack||1)),r=e.currentStock%(e.pack||1);let n="";return t>0&&(n+=`${t} pack${t>1?"s":""}`),t>0&&r>0&&(n+=" & "),r>0&&(n+=`${r} unit${r>1?"s":""}`),""===n&&(n="0 units"),(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50/50 transition-colors",children:[(0,Rr.jsx)(Dw,{className:i,children:e.productName}),(0,Rr.jsx)(Dw,{className:i,children:e.manufacturer}),(0,Rr.jsx)(Dw,{className:i,children:e.batchNumber}),(0,Rr.jsxs)(Dw,{className:`${i} text-center`,children:[(0,Rr.jsx)("div",{className:"font-semibold",children:n}),(0,Rr.jsxs)("div",{className:"text-xs text-gray-500",children:["(Total: ",e.currentStock," units, Pack:"," ",e.pack||1,")"]})]}),(0,Rr.jsx)(Dw,{className:i,children:e.expiry})]},`${e.productName}-${e.batchNumber}`)}))})]});case"expiry-alert":return(0,Rr.jsxs)(jw,{className:a,children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{children:[(0,Rr.jsx)(Tw,{className:s,children:"Product"}),(0,Rr.jsx)(Tw,{className:s,children:"Manufacturer"}),(0,Rr.jsx)(Tw,{className:s,children:"Batch"}),(0,Rr.jsx)(Tw,{className:`${s} text-center`,children:"Quantity"}),(0,Rr.jsx)(Tw,{className:s,children:"Expiry"}),(0,Rr.jsx)(Tw,{className:`${s} text-right`,children:"MRP"})]})}),(0,Rr.jsx)(Cw,{className:"bg-white divide-y divide-gray-200",children:null===(r=n.expiryAlerts)||void 0===r?void 0:r.map((e=>{var t;return(0,Rr.jsxs)(Ew,{className:"hover:bg-gray-50/50 transition-colors",children:[(0,Rr.jsx)(Dw,{className:i,children:e.productName}),(0,Rr.jsx)(Dw,{className:i,children:e.manufacturer}),(0,Rr.jsx)(Dw,{className:i,children:e.batchNumber}),(0,Rr.jsx)(Dw,{className:`${i} text-center`,children:e.quantity}),(0,Rr.jsx)(Dw,{className:i,children:e.expiry}),(0,Rr.jsx)(Dw,{className:c,children:null===(t=e.mrp)||void 0===t?void 0:t.toFixed(2)})]},`${e.productName}-${e.batchNumber}`)}))})]});default:return null}})()]})}):(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center m-4 bg-gray-50 rounded-lg",children:[(0,Rr.jsx)("div",{className:"p-4 rounded-full bg-pink-50 border border-pink-200 mb-4"}),(0,Rr.jsxs)("p",{className:"text-lg font-semibold text-gray-800 mb-1",children:["Your ",v.name," will appear here."]}),(0,Rr.jsx)("p",{className:"text-sm text-gray-500 mb-4 max-w-md",children:(null===(r=v.filters)||void 0===r?void 0:r.length)>0?"Please select the required filters and click 'Generate Report' to view your data.":"Click 'Generate Report' to view your data."}),(0,Rr.jsxs)(Vn,{onClick:m,size:"sm",className:"bg-pink-400 hover:bg-pink-500 text-white text-sm h-9 px-4",children:[(0,Rr.jsx)(HN,{className:"mr-2 h-4 w-4"}),"Generate Report"]})]})})]})},XQ=()=>{const e=rt(),{data:r,status:n,error:a,dateRange:s,singleDate:i,selectedMonth:o}=$e((e=>e.report)),l={from:s.from?new Date(s.from):null,to:s.to?new Date(s.to):null},c=i?new Date(i):null,d=o?new Date(o):null;(0,t.useEffect)((()=>{if(!s.from&&!s.to){const t=new Date,r=new Date(t);r.setDate(t.getDate()-7),e(Pf({from:r,to:t}))}}),[]);const[u,h]=(0,t.useState)(null),[f,m]=(0,t.useState)("sales"),[p,x]=(0,t.useState)({manufacturer:"",distributor:"all",customer:"all",product:"",expiryRange:{selectedMonth:null},threshold:"10"}),v=($e((e=>e.bill.bills)),$e((e=>e.purchaseBill.bills)),$e((e=>e.inventory.items)),$e((e=>e.distributor.distributors))),g=$e((e=>e.distributor.fetchStatus)),y=$e((e=>e.customers.customers)),[b,w]=(0,t.useState)(null),[N,j]=(0,t.useState)(!1),[S,C]=(0,t.useState)(""),[k,E]=(0,t.useState)(!1),[T,D]=(0,t.useState)(""),A={sales:[{id:"all-sales",name:"All Sales",filters:["dateRange"]},{id:"product-wise",name:"Product Wise",filters:["dateRange","product"]},{id:"manufacturer-wise",name:"Manufacturer Wise",filters:["dateRange","manufacturer"]},{id:"group-wise",name:"Group Wise",filters:["dateRange"]}],purchase:[{id:"all-purchases",name:"All Purchases",filters:["dateRange"]},{id:"distributor-wise",name:"Distributor Wise",filters:["dateRange","distributor"]},{id:"product-wise",name:"Product Wise",filters:["dateRange","product"]},{id:"manufacturer-wise",name:"Manufacturer Wise",filters:["dateRange","manufacturer"]},{id:"group-wise",name:"Group Wise",filters:["dateRange"]}],inventory:[{id:"low-stock",name:"Low Stock Items",filters:[]},{id:"expiry-alert",name:"Near Expiry",filters:["expiryRange"]}]},[P,_]=(0,t.useState)({sales:"all-sales",purchase:"all-purchases",inventory:"stock-status"}),R=()=>{var e;return null===(e=A[f])||void 0===e?void 0:e.find((e=>e.id===P[f]))},I=t=>{_({...P,[f]:t}),x({manufacturer:"",distributor:"all",customer:"all",product:"",expiryRange:{selectedMonth:null},threshold:"10"}),w(null),e(Af()),h(null),"distributor-wise"===t&&"succeeded"!==g&&e(ph())},M=e=>{var t;const r=R();return(null===r||void 0===r||null===(t=r.filters)||void 0===t?void 0:t.includes(e))||!1},O=(e,t)=>{x((r=>({...r,[e]:t})))},F=$e((e=>e.inventory.items)),L=(S&&(null===F||void 0===F||F.filter((e=>e.productName.toLowerCase().includes(S.toLowerCase())))),e=>{e.stopPropagation(),w(null),O("product","")}),B=(t,r)=>{const n={...l,[t]:r?new Date(r):null};e(Pf(n))},U=e=>{e.stopPropagation(),O("manufacturer",""),D("")},z=async()=>{try{R();if(h(null),M("dateRange")&&(!s.from||!s.to))return void h("Please select both From and To dates");if(M("singleDate")&&!i)return void h("Please select a date");if(M("month")&&!o)return void h("Please select a month");if("product-wise"===P[f]&&(!p.product||""===p.product.trim()))return void h("Please select a product to generate product-wise report");if("low-stock"===P[f]){const e=parseInt(p.threshold);if(isNaN(e)||e<=0)return void h("Please enter a valid threshold value greater than 0")}if(p.expiryRange.selectedMonth){const e=new Date(p.expiryRange.selectedMonth);p.expiryRange.preset="custom",p.expiryRange.custom=!0,p.expiryRange.selectedMonth=e}let t={reportType:P[f]};if("low-stock"===P[f]&&(t.threshold=p.threshold),M("dateRange")&&s.from&&s.to&&(t.startDate=jc(new Date(s.from),"yyyy-MM-dd"),t.endDate=jc(new Date(s.to),"yyyy-MM-dd")),M("singleDate")&&i&&(t.date=jc(new Date(i),"yyyy-MM-dd")),M("month")&&o&&(t.month=jc(new Date(o),"yyyy-MM")),p.expiryRange&&p.expiryRange.selectedMonth){const e=new Date(p.expiryRange.selectedMonth);t.targetExpiry=`${String(e.getMonth()+1).padStart(2,"0")}/${String(e.getFullYear()).slice(-2)}`}switch("all"!==p.customer&&(t.customerId=p.customer),"all"!==p.distributor&&(t.distributorId=p.distributor),p.manufacturer&&(t.manufacturer=p.manufacturer),p.product&&(t.product=p.product),f){case"sales":await e(kf(t)).unwrap();break;case"purchase":await e(Ef(t)).unwrap();break;case"inventory":await e(Tf(t)).unwrap();break;default:throw new Error("Invalid report type")}}catch(eZ){h(eZ.message||"Failed to generate report"),console.error("Report generation failed:",eZ)}},V=t=>{m(t),e(Af()),h(null)};return(0,Rr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-100 via-gray-50 to-stone-100 p-4 md:p-6",children:(0,Rr.jsxs)("div",{className:"max-w-full mx-auto space-y-1",children:[(0,Rr.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)("h2",{className:"text-xl md:text-xl font-bold text-gray-800 tracking-tight",children:"Reports Dashboard"}),(0,Rr.jsx)("p",{className:"text-sm md:text-md text-gray-600 mt-1",children:"Analyze sales, purchases, and inventory data."})]}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",className:"h-9 px-4 mt-3 sm:mt-0 text-sm font-medium shadow-sm hover:bg-gray-100 border-gray-300",children:[(0,Rr.jsx)(LX,{className:"mr-2 h-4 w-4 text-gray-600"}),"Refresh Data"]})]}),(0,Rr.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden",children:(0,Rr.jsxs)(uN,{defaultValue:"sales",value:f,onValueChange:V,className:"w-full",children:[(0,Rr.jsxs)(hN,{className:"w-full border-b-2 border-gray-200 rounded-none p-0 h-10 bg-gray-50",children:[(0,Rr.jsxs)(fN,{value:"sales",className:"flex-1 rounded-none data-[state=active]:bg-white data-[state=active]:border-b-2 data-[state=active]:border-pink-400 data-[state=active]:shadow-none h-10 px-6 text-sm font-semibold text-gray-700 data-[state=active]:text-pink-600 transition-all hover:bg-gray-100 data-[state=active]:hover:bg-white",onClick:()=>V("sales"),children:[(0,Rr.jsx)(im,{className:"w-5 h-4 mr-2"}),"Sales Reports"]}),(0,Rr.jsxs)(fN,{value:"purchase",className:"flex-1 rounded-none data-[state=active]:bg-white data-[state=active]:border-b-2 data-[state=active]:border-pink-400 data-[state=active]:shadow-none h-10 px-6 text-sm font-semibold text-gray-700 data-[state=active]:text-pink-600 transition-all hover:bg-gray-100 data-[state=active]:hover:bg-white",onClick:()=>V("purchase"),children:[(0,Rr.jsx)(pm,{className:"w-5 h-4 mr-2"}),"Purchase Reports"]}),(0,Rr.jsxs)(fN,{value:"inventory",className:"flex-1 rounded-none data-[state=active]:bg-white data-[state=active]:border-b-2 data-[state=active]:border-pink-400 data-[state=active]:shadow-none h-10 px-6 text-sm font-semibold text-gray-700 data-[state=active]:text-pink-600 transition-all hover:bg-gray-100 data-[state=active]:hover:bg-white",onClick:()=>V("inventory"),children:[(0,Rr.jsx)(XY,{className:"w-5 h-4 mr-2"}),"Inventory Reports"]})]}),(0,Rr.jsxs)("div",{className:" bg-gray-50/40 ",children:[(0,Rr.jsxs)(mN,{value:"sales",className:"mt-0 space-y-4",children:[(0,Rr.jsx)("div",{className:"bg-white rounded-xl p-2 shadow-sm ",children:(0,Rr.jsx)(qQ,{activeTab:f,reportTypes:A,selectedReportType:P,handleReportTypeChange:I})}),(0,Rr.jsx)(GQ,{isFilterRequired:M,selectedReportType:P,activeTab:f,localDateRange:l,handleDateRangeChange:B,localSingleDate:c,dispatch:e,setReduxSingleDate:_f,localSelectedMonth:d,setReduxSelectedMonth:Rf,filters:p,handleFilterChange:O,distributors:v,customers:y,setIsProductDialogOpen:j,clearProductSelection:L,setIsManufacturerDialogOpen:E,clearManufacturerSelection:U,generateReport:z,reportStatus:n}),(0,Rr.jsx)(YQ,{reportData:r,reportStatus:n,reportError:a,localError:u,activeTab:f,selectedReportType:P,getSelectedReport:R,isFilterRequired:M,dateRange:s,singleDate:i,selectedMonth:o,generateReport:z,selectedProduct:b,setSelectedProduct:w})]}),(0,Rr.jsxs)(mN,{value:"purchase",className:"mt-0 space-y-4",children:[(0,Rr.jsx)("div",{className:"bg-white rounded-xl  p-2 shadow-sm",children:(0,Rr.jsx)(qQ,{activeTab:f,reportTypes:A,selectedReportType:P,handleReportTypeChange:I})}),(0,Rr.jsx)(GQ,{isFilterRequired:M,selectedReportType:P,activeTab:f,localDateRange:l,handleDateRangeChange:B,localSingleDate:c,dispatch:e,setReduxSingleDate:_f,localSelectedMonth:d,setReduxSelectedMonth:Rf,filters:p,handleFilterChange:O,distributors:v,customers:y,setIsProductDialogOpen:j,clearProductSelection:L,setIsManufacturerDialogOpen:E,clearManufacturerSelection:U,generateReport:z,reportStatus:n}),(0,Rr.jsx)(YQ,{reportData:r,reportStatus:n,reportError:a,localError:u,activeTab:f,selectedReportType:P,getSelectedReport:R,isFilterRequired:M,dateRange:s,singleDate:i,selectedMonth:o,generateReport:z,selectedProduct:b,setSelectedProduct:w})]}),(0,Rr.jsxs)(mN,{value:"inventory",className:"mt-0 space-y-4",children:[(0,Rr.jsx)("div",{className:"bg-white rounded-xl p-2 shadow-sm",children:(0,Rr.jsx)(qQ,{activeTab:f,reportTypes:A,selectedReportType:P,handleReportTypeChange:I})}),(0,Rr.jsx)(GQ,{isFilterRequired:M,selectedReportType:P,activeTab:f,localDateRange:l,handleDateRangeChange:B,localSingleDate:c,dispatch:e,setReduxSingleDate:_f,localSelectedMonth:d,setReduxSelectedMonth:Rf,filters:p,handleFilterChange:O,distributors:v,customers:y,setIsProductDialogOpen:j,clearProductSelection:L,setIsManufacturerDialogOpen:E,clearManufacturerSelection:U,generateReport:z,reportStatus:n}),(0,Rr.jsx)(YQ,{reportData:r,reportStatus:n,reportError:a,localError:u,activeTab:f,selectedReportType:P,getSelectedReport:R,isFilterRequired:M,dateRange:s,singleDate:i,selectedMonth:o,generateReport:z,selectedProduct:b,setSelectedProduct:w})]})]})]})}),(0,Rr.jsx)(CK,{open:N,onOpenChange:j,onSelect:e=>{j(!1),w(e),O("product",(null===e||void 0===e?void 0:e.name)||"")},search:S,setSearch:C}),(0,Rr.jsx)(WQ,{open:k,onOpenChange:E,onSelect:e=>{E(!1),O("manufacturer",e),D(e)},search:T,setSearch:D})]})})},QQ=rm("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),JQ=()=>{var e;const r=Q(),n=Z(),a=(0,t.useRef)(),[s,i]=(0,t.useState)("A4"),o=null===(e=r.state)||void 0===e?void 0:e.paymentData,l=$e((e=>e.pharmacy.pharmacyInfo));(0,t.useEffect)((()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"p"===e.key&&(e.preventDefault(),c())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const c=(0,gX.useReactToPrint)({content:()=>a.current,pageStyle:`\n      @page {\n        size: ${s};\n        margin: 0;\n      }\n      @media print {\n        html, body {\n          height: 100%;\n          margin: 0 !important;\n          padding: 0 !important;\n          overflow: hidden;\n        }\n        body * {\n          visibility: hidden;\n        }\n        #print-content,\n        #print-content * {\n          visibility: visible;\n        }\n        #print-content {\n          position: absolute;\n          left: 0;\n          top: 0;\n        }\n      }\n    `,onBeforeGetContent:()=>{},onAfterPrint:()=>{}});if(!o)return(0,Rr.jsx)("div",{children:"No payment data found"});const d=()=>{i((e=>"A4"===e?"A5":"A4"))};return(0,Rr.jsxs)("div",{className:"p-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center justify-between mb-4 print:hidden",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>n(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-xl font-medium",children:"Payment Receipt Preview"})]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-1 bg-gray-100 p-1 rounded-full",children:[(0,Rr.jsx)("button",{onClick:d,className:"rounded-full w-6 h-6 flex items-center justify-center text-sm font-medium transition-all "+("A4"===s?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"A4"}),(0,Rr.jsx)("button",{onClick:d,className:"rounded-full w-8 h-8 flex items-center justify-center text-sm font-medium transition-all "+("A5"===s?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"A5"})]}),(0,Rr.jsxs)("div",{className:"flex gap-2",children:[(0,Rr.jsxs)(Vn,{variant:"outline",className:"gap-2",onClick:c,size:"sm",children:[(0,Rr.jsx)(eX,{className:"w-4 h-4"}),"Print Now (Ctrl + P)"]}),(0,Rr.jsxs)(Vn,{variant:"outline",className:"gap-2",size:"sm",children:[(0,Rr.jsx)(QQ,{className:"w-4 h-4"}),"Send Receipt (F2)"]}),(0,Rr.jsxs)(Vn,{variant:"outline",className:"gap-2",size:"sm",children:[(0,Rr.jsx)(GY,{className:"w-4 h-4"}),"Export as PDF (F4)"]})]})]})]}),(0,Rr.jsxs)("div",{id:"print-content",className:"bg-white mx-auto shadow-lg print:shadow-none",style:{...{A4:{width:"220mm",minHeight:"297mm",padding:"8mm"},A5:{width:"215mm",minHeight:"148",padding:"5mm"}}[s],marginBottom:"10mm",fontSize:"A5"===s?"0.75rem":"0.875rem"},ref:a,children:[(0,Rr.jsx)("div",{className:"border-x-[1px] border-t-[1px] border-gray-800",children:(0,Rr.jsxs)("div",{className:"grid grid-cols-6 gap-3",children:[(0,Rr.jsxs)("div",{className:"border-r-[1px] border-gray-800",children:[(0,Rr.jsx)("div",{className:"w-full border-b-[1px] border-gray-800 p-1 text-xs",style:{backgroundColor:"#e5e7eb"},children:"PAYMENT RECEIPT"}),(null===l||void 0===l?void 0:l.logoUsable)&&(0,Rr.jsx)("div",{className:"w-auto h-[78px] p-1",children:(0,Rr.jsx)("img",{src:l.logoUsable,alt:"Logo",className:"w-full h-full object-contain"})})]}),(0,Rr.jsxs)("div",{className:"col-span-3 gap-2 py-1",children:[(0,Rr.jsx)("h2",{className:"font-semibold uppercase text-xl",children:(null===l||void 0===l?void 0:l.name)||"Your Pharmacy Name"}),(0,Rr.jsx)("p",{className:"text-sm leading-snug",children:(null===l||void 0===l?void 0:l.address)||"Pharmacy Address"}),(0,Rr.jsxs)("div",{className:"text-sm space-x-6",children:[(0,Rr.jsxs)("span",{children:["Mob No: ",null===l||void 0===l?void 0:l.contactNumber]}),(0,Rr.jsxs)("span",{children:["DL: ",null===l||void 0===l?void 0:l.drugLicenceNumber]})]}),(0,Rr.jsx)("div",{className:"text-sm",children:(0,Rr.jsxs)("span",{children:["GSTIN: ",null===l||void 0===l?void 0:l.gstNumber]})})]}),(0,Rr.jsxs)("div",{className:"col-span-2 border-l-[1px] border-gray-800",children:[(0,Rr.jsxs)("div",{className:"bg-gray-200 px-3 py-1 border-b-[1px] border-gray-800 flex justify-between gap-8 text-sm",children:[(0,Rr.jsx)("span",{className:"font-medium",children:o.paymentNumber}),(0,Rr.jsx)("span",{className:"font-medium",children:jc(new Date(o.createdAt),"dd-MM-yyyy")})]}),(0,Rr.jsxs)("div",{className:"text-xs font-medium p-2",children:[(0,Rr.jsxs)("div",{className:"grid grid-cols-3",children:[(0,Rr.jsx)("span",{children:"Name:"}),(0,Rr.jsx)("span",{className:"col-span-2 capitalize",children:o.distributorName})]}),(0,Rr.jsxs)("div",{className:"grid grid-cols-3",children:[(0,Rr.jsx)("span",{children:"Type:"}),(0,Rr.jsx)("span",{className:"col-span-2",children:o.paymentType})]})]})]})]})}),(0,Rr.jsx)("div",{className:"min-h-[160px] border-[1px] border-gray-800",children:(0,Rr.jsxs)("table",{className:"w-full text-xs",children:[(0,Rr.jsx)("thead",{children:(0,Rr.jsxs)("tr",{className:"bg-gray-200 border-b-[1px] border-gray-800",children:[(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5",children:"S.No"}),(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5",children:"Invoice No"}),(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5",children:"Type"}),(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5",children:"Date"}),(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5 text-right",children:"Invoice Amount"}),(0,Rr.jsx)("th",{className:"border-r-[1px] border-gray-800 font-medium p-1.5 text-right",children:"Amount Settled"}),(0,Rr.jsx)("th",{className:"font-medium p-1.5 text-center",children:"Status"})]})}),(0,Rr.jsxs)("tbody",{className:"min-h-[180px]",children:[o.bills.map(((e,t)=>(0,Rr.jsxs)("tr",{className:"",children:[(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5",children:t+1}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 pl-2 p-1.5 text-center",children:e.invoiceNumber}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5",children:e.invoiceType}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5",children:jc(new Date(e.invoiceDate),"dd-MM-yyyy")}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-right p-1.5",children:PP(e.grandTotal)}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-right p-1.5",children:PP(e.amountPaid)}),(0,Rr.jsx)("td",{className:"text-center p-1.5 capitalize",children:e.paymentStatus})]},e._id))),o.salesBills.map(((e,t)=>(0,Rr.jsxs)("tr",{className:"",children:[(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5",children:o.bills.length+t+1}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 pl-2 p-1.5 text-center",children:e.invoiceNumber}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5",children:e.invoiceType}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5",children:jc(new Date(e.invoiceDate),"dd-MM-yyyy")}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-right p-1.5",children:PP(e.grandTotal)}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-right p-1.5",children:PP(e.amountPaid)}),(0,Rr.jsx)("td",{className:"text-center p-1.5 capitalize",children:e.paymentStatus})]},e._id))),[...Array(Math.max(0,10-(o.bills.length+o.salesBills.length)))].map(((e,t)=>(0,Rr.jsxs)("tr",{children:[(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 pl-2 p-1.5"}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-center p-1.5"}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-right p-1.5"}),(0,Rr.jsx)("td",{className:"border-r-[1px] border-gray-800 text-right p-1.5"}),(0,Rr.jsx)("td",{className:"text-right p-1.5"})]},`empty-${t}`)))]})]})}),(0,Rr.jsxs)("div",{className:"grid grid-cols-7 border-b-[1px] border-l-[1px] border-r-[1px] border-gray-800",children:[(0,Rr.jsx)("div",{className:"flex items-end justify-center pb-3 col-span-2",children:(0,Rr.jsx)("div",{className:"inline-block",children:(0,Rr.jsx)("p",{className:"font-medium text-xs text-gray-700",children:"Authorized Signatory"})})}),(0,Rr.jsxs)("div",{className:"col-span-3 border-r-[1px] border-l-[1px] border-gray-800 p-2",children:[(0,Rr.jsx)("p",{className:"text-xs font-medium",children:"Remarks:"}),(0,Rr.jsx)("p",{className:"text-xs",children:o.remarks||""})]}),(0,Rr.jsx)("div",{className:"col-span-2",children:(0,Rr.jsxs)("div",{className:"space-y-1 text-xs py-1",children:[(0,Rr.jsxs)("div",{className:"flex justify-between px-2",children:[(0,Rr.jsx)("span",{children:"Payment Method:"}),(0,Rr.jsx)("span",{children:o.paymentMethod})]}),"CHEQUE"===o.paymentMethod&&(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsxs)("div",{className:"flex justify-between px-2",children:[(0,Rr.jsx)("span",{children:"Cheque No:"}),(0,Rr.jsx)("span",{children:o.chequeNumber})]}),(0,Rr.jsxs)("div",{className:"flex justify-between px-2",children:[(0,Rr.jsx)("span",{children:"Cheque Date:"}),(0,Rr.jsx)("span",{children:o.chequeDate?jc(new Date(o.chequeDate),"dd-MM-yyyy"):""})]})]}),("UPI"===o.paymentMethod||"BANK"===o.paymentMethod)&&(0,Rr.jsxs)("div",{className:"flex justify-between px-2",children:[(0,Rr.jsx)("span",{children:"Transaction No:"}),(0,Rr.jsx)("span",{children:o.transactionNumber||"N/A"})]}),(0,Rr.jsxs)("div",{className:"flex justify-between border-t-[1px] border-b-[1px] border-gray-800 font-medium bg-gray-200 py-1 px-2 text-sm box-border",children:[(0,Rr.jsx)("span",{children:"Total Amount:"}),(0,Rr.jsx)("span",{children:PP(o.amount)})]})]})})]})]}),(0,Rr.jsx)("style",{children:`\n          @media print {\n            @page {\n              size: ${s};\n              margin: 0;\n            }\n            body {\n              margin: 0;\n              padding: 0;\n              -webkit-print-color-adjust: exact !important;\n              print-color-adjust: exact !important;\n              color-adjust: exact !important;\n            }\n            .print\\:hidden {\n              display: none !important;\n            }\n          }\n        `})]})},ZQ=()=>{const e=rt(),r=Z(),{toast:n}=$g(),{settings:a,status:s,updateStatus:i}=$e((e=>e.settings)),[o,l]=(0,t.useState)({adjustment:!1});(0,t.useEffect)((()=>{l({adjustment:null===a||void 0===a?void 0:a.adjustment})}),[a]),(0,t.useEffect)((()=>{"idle"===s&&e(Mf())}),[a]);return(0,Rr.jsxs)("div",{children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-200 px-6 py-3",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>r(-1),children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-2xl font-bold",children:"Billing Config"})]}),(0,Rr.jsx)(Vn,{onClick:async()=>{try{await e(Of(o)).unwrap(),n({title:"Settings saved",description:"Your billing settings have been updated successfully.",variant:"success"})}catch(t){n({title:"Error",description:"Failed to save settings. Please try again.",variant:"destructive"})}},disabled:"loading"===i,size:"sm",children:"loading"===i?"Saving...":"Save changes"})]}),(0,Rr.jsx)("div",{className:"p-6",children:(0,Rr.jsxs)(Kf,{className:"max-w-xl mb-6",children:[(0,Rr.jsxs)(Yf,{children:[(0,Rr.jsx)("h3",{className:"text-lg font-medium",children:"Adjustment Settings"}),(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure billing adjustment options"})]}),(0,Rr.jsx)(Jf,{children:(0,Rr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rr.jsxs)("div",{className:"space-y-0.5",children:[(0,Rr.jsx)("label",{className:"text-sm font-medium",children:"Enable Adjustment"}),(0,Rr.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow adjustments in billing calculations"})]}),(0,Rr.jsx)(rK,{checked:null===o||void 0===o?void 0:o.adjustment,onCheckedChange:e=>{l((t=>({...t,adjustment:e})))},"aria-label":"Toggle adjustment"})]})})]})})]})},eJ=()=>{const e=rt(),r=Z(),{accountId:n}=ee(),{transactions:a,transactionsStatus:s,error:i,accounts:o,pagination:l}=$e((e=>e.accounts));null===o||void 0===o||o.find((e=>e._id===n));(0,t.useEffect)((()=>{n&&e(Ah({accountId:n,page:l.currentPage}))}),[e,n,l.currentPage]);const c=t=>{t>=1&&t<=l.pages&&e(Ah({accountId:n,page:t}))};return n?"loading"===s?(0,Rr.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,Rr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):"failed"===s?(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-red-600",children:[(0,Rr.jsx)($N,{className:"h-12 w-12 mb-3"}),(0,Rr.jsx)("p",{className:"text-lg font-medium",children:"Error Loading Transactions"}),(0,Rr.jsx)("p",{className:"text-sm",children:i})]}):(0,Rr.jsxs)("div",{className:"p-4 space-y-2",children:[(0,Rr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Rr.jsx)(Vn,{variant:"ghost",size:"icon",onClick:()=>r(-1),className:"hover:bg-gray-100",children:(0,Rr.jsx)(Mw,{className:"h-5 w-5"})}),(0,Rr.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Account Transactions"})]}),a&&0!==a.length?(0,Rr.jsxs)("div",{className:"space-y-4",children:[(0,Rr.jsx)("div",{className:"border rounded-lg",children:(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{className:"bg-muted/50",children:[(0,Rr.jsx)(Tw,{className:"font-medium",children:"Date & Time"}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Name"}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Payment Number"}),(0,Rr.jsx)(Tw,{className:"font-medium ",children:"Credit"}),(0,Rr.jsx)(Tw,{className:"font-medium ",children:"Debit"}),(0,Rr.jsx)(Tw,{className:"font-medium ",children:"Balance"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Created By"})]})}),(0,Rr.jsx)(Cw,{children:a.map((e=>{var t,n,a;return(0,Rr.jsxs)(Ew,{className:"hover:bg-muted/50",onClick:()=>r(`/payment/${e._id}`),children:[(0,Rr.jsxs)(Dw,{className:"font-semibold",children:[jc(new Date(e.paymentDate),"dd-MM-yyyy")," ",jc(new Date(e.createdAt),"hh:mm a")]}),(0,Rr.jsx)(Dw,{className:"font-semibold",children:e.customerName||e.distributorName||"N/A"}),(0,Rr.jsx)(Dw,{children:e.paymentNumber||"---"}),(0,Rr.jsx)(Dw,{className:"font-semibold text-green-600",children:"Payment In"===e.paymentType?`\u20b9 ${null===(t=e.amount)||void 0===t?void 0:t.toLocaleString("en-IN")}`:"-"}),(0,Rr.jsx)(Dw,{className:"font-semibold text-red-600",children:"Payment Out"===e.paymentType?`\u20b9 ${null===(n=e.amount)||void 0===n?void 0:n.toLocaleString("en-IN")}`:"-"}),(0,Rr.jsx)(Dw,{className:"font-semibold",children:(0,Rr.jsxs)("span",{className:e.accountBalance>=0?"text-green-600":"text-red-600",children:["\u20b9 ",null===(a=Math.abs(e.accountBalance))||void 0===a?void 0:a.toLocaleString("en-IN")]})}),(0,Rr.jsx)(Dw,{className:"text-right",children:e.createdByName||"---"})]},e._id||`${e.paymentDate}-${e.amount}`)}))})]})}),(0,Rr.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,Rr.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",(l.currentPage-1)*l.limit+1," to ",Math.min(l.currentPage*l.limit,l.total)," of ",l.total," transactions"]}),(0,Rr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",onClick:()=>c(l.currentPage-1),disabled:1===l.currentPage,children:[(0,Rr.jsx)(hX,{className:"h-4 w-4"}),"Previous"]}),(0,Rr.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:l.pages},((e,t)=>t+1)).filter((e=>{const t=l.currentPage;return 1===e||e===l.pages||e>=t-1&&e<=t+1})).map(((e,r,n)=>(0,Rr.jsxs)(t.Fragment,{children:[r>0&&n[r-1]!==e-1&&(0,Rr.jsx)("span",{className:"px-2",children:"..."}),(0,Rr.jsx)(Vn,{variant:l.currentPage===e?"default":"outline",size:"sm",onClick:()=>c(e),className:"min-w-[32px]",children:e})]},e)))}),(0,Rr.jsxs)(Vn,{variant:"outline",size:"sm",onClick:()=>c(l.currentPage+1),disabled:l.currentPage===l.pages,children:["Next",(0,Rr.jsx)(FY,{className:"h-4 w-4"})]})]})]})]}):(0,Rr.jsx)("div",{className:"border rounded-lg",children:(0,Rr.jsxs)(jw,{children:[(0,Rr.jsx)(Sw,{children:(0,Rr.jsxs)(Ew,{className:"bg-muted/50",children:[(0,Rr.jsx)(Tw,{className:"font-medium",children:"Date"}),(0,Rr.jsx)(Tw,{className:"font-medium",children:"Name"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Credit"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Debit"}),(0,Rr.jsx)(Tw,{className:"font-medium text-right",children:"Balance"})]})}),(0,Rr.jsx)(Cw,{children:(0,Rr.jsx)(Ew,{children:(0,Rr.jsx)(Dw,{colSpan:5,children:(0,Rr.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[(0,Rr.jsx)($N,{className:"h-12 w-12 mb-3 text-gray-400"}),(0,Rr.jsx)("p",{className:"text-lg font-medium mb-1",children:"No Transactions Found"}),(0,Rr.jsx)("p",{className:"text-sm",children:"There are no transactions available for this account."})]})})})})]})})]}):(0,Rr.jsx)("div",{className:"p-4",children:"Please select an account to view transactions."})},tJ=()=>{const{toast:e}=$g(),[r,n]=(0,t.useState)([]),[a,s]=(0,t.useState)([]),[i,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(!1),[h,f]=(0,t.useState)(null),[m,p]=(0,t.useState)(""),[x,v]=(0,t.useState)(null),g=async()=>{try{const e=await fetch(`${Nu}/api/inventory/groups/distinct`,{credentials:"include"});if(!e.ok){const t=await e.json().catch((()=>({message:"Failed to fetch distinct groups"})));throw new Error(t.message||"Failed to fetch distinct groups")}const t=await e.json();s(t||[])}catch(t){console.error("Failed to fetch distinct groups:",t),e({title:"Error",description:t.message||"Failed to fetch distinct groups.",variant:"destructive"})}};(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch(`${Nu}/api/inventory`,{credentials:"include"});if(!e.ok){const t=await e.json().catch((()=>({message:"Failed to fetch inventory items"})));throw new Error(t.message||"Failed to fetch inventory items")}const t=await e.json();n(t||[])}catch(t){console.error("Failed to fetch inventory items:",t),e({title:"Error",description:t.message||"Failed to fetch inventory items.",variant:"destructive"})}})(),g()}),[]);const y=async()=>{if(!l.trim())return void e({title:"Validation Error",description:"Group name cannot be empty.",variant:"destructive"});if(0===i.length)return void e({title:"Validation Error",description:"Please select at least one inventory item.",variant:"destructive"});u(!0);const t=l.trim();let n=x||t;const s=t.toLowerCase(),d=a.find((e=>e.toLowerCase()===s));!x&&d&&(n=d);try{if(x){const n=r.filter((e=>e.group&&e.group.includes(x))).map((e=>e._id)),a=i,s=n.filter((e=>!a.includes(e))),o=a.filter((e=>!n.includes(e))),l=n.filter((e=>a.includes(e))),c={oldGroupName:x,newGroupName:t,removeOldGroupIds:s,addNewGroupIds:o};x!==t&&(c.renameGroupIds=l);const d=await fetch(`${Nu}/api/inventory/groups/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c),credentials:"include"}),u=await d.json();if(!d.ok)throw new Error(u.message||"Failed to update group.");e({title:"Success",description:u.message||`Group '${t}' updated successfully.`})}else{const t=await fetch(`${Nu}/api/inventory/groups/assign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:n,inventoryIds:i}),credentials:"include"}),r=await t.json();if(!t.ok)throw new Error(r.message||"Failed to assign group.");e({title:"Success",description:r.message||`Group '${n}' assigned successfully.`})}c(""),o([]),v(null),f(null),g()}catch(h){console.error("Failed to assign group:",h),e({title:"Error",description:h.message||"Failed to assign group.",variant:"destructive"})}finally{u(!1)}},b=(()=>{let e=r.filter((e=>e.name.toLowerCase().includes(m.toLowerCase())));return h&&e.sort(((e,t)=>{const r=e.group&&e.group.includes(h),n=t.group&&t.group.includes(h);return r&&!n?-1:!r&&n?1:0})),e})(),w=a.reduce(((e,t)=>(e[t]=r.filter((e=>e.group&&e.group.includes(t))).length,e)),{});return(0,Rr.jsxs)("div",{className:"p-4 md:p-8 space-y-2 bg-gray-50 min-h-screen",children:[(0,Rr.jsx)("h3",{className:"font-bold text-gray-800",children:"Manage Inventory Groups"}),(0,Rr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Rr.jsx)("div",{className:"lg:col-span-1 space-y-6",children:(0,Rr.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[(0,Rr.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Available Groups"}),a.length>0?(0,Rr.jsx)("div",{className:"flex flex-wrap gap-3",children:a.map((e=>(0,Rr.jsxs)("button",{onClick:()=>(e=>{if(x===e)return v(null),c(""),o([]),void f(null);v(e),c(e);const t=r.filter((t=>t.group&&t.group.includes(e)));o(t.map((e=>e._id))),f(e)})(e),className:"flex items-center text-sm font-medium px-3 py-1.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-150 ease-in-out \n                                "+(h===e||x===e?"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500 shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-indigo-400 border border-gray-200"),children:[e,(0,Rr.jsx)("span",{className:"ml-2 text-xs px-1.5 py-0.5 rounded-full "+(h===e||x===e?"bg-indigo-400 text-white":"bg-gray-300 text-gray-600"),children:w[e]||0})]},e)))}):(0,Rr.jsx)("p",{className:"text-gray-500 italic",children:"No groups created yet."})]})}),(0,Rr.jsxs)("div",{className:"lg:col-span-2 space-y-2",children:[(0,Rr.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[(0,Rr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rr.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Select Inventory Items"}),(0,Rr.jsx)("div",{className:"mb-4",children:(0,Rr.jsx)(Gf,{type:"text",placeholder:"Search items by name...",value:m,onChange:e=>{p(e.target.value),o([]),f(null)},className:"max-w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"})})]}),b.length>0?(0,Rr.jsx)("div",{className:"max-h-[calc(100vh-300px)] min-h-[200px] lg:max-h-[calc(100vh-400px)] overflow-y-auto border border-gray-200 rounded-md p-4 grid grid-cols-1 sm:grid-cols-2 gap-2 bg-gray-50/50",children:b.map((e=>(0,Rr.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded-md hover:bg-gray-100 transition-colors duration-150 border border-gray-200 bg-white",children:[(0,Rr.jsx)(C$,{id:`item-${e._id}`,checked:i.includes(e._id),onCheckedChange:()=>{return t=e._id,void o((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"border-gray-400 data-[state=checked]:bg-indigo-600 data-[state=checked]:border-indigo-600 focus:ring-indigo-500"}),(0,Rr.jsx)(yN,{htmlFor:`item-${e._id}`,className:"cursor-pointer flex-1 text-xs text-gray-700",children:(0,Rr.jsxs)("div",{className:" flex font-medium  text-sm",children:[(0,Rr.jsx)("div",{className:"",children:e.name}),e.group&&e.group.length>0&&(0,Rr.jsx)("div",{className:"ml-2 flex justify-center items-center text-[10px] text-gray-500",children:e.group.join(", ")})]})})]},e._id)))}):(0,Rr.jsx)("p",{className:"text-center text-gray-500 py-8 italic",children:m?`No items match "${m}".`:"No inventory items found."})]}),(0,Rr.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[(0,Rr.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:x?`Edit Group: ${x}`:"Assign Selected Items to Group"}),(0,Rr.jsx)("div",{className:"space-y-4",children:(0,Rr.jsxs)("div",{children:[(0,Rr.jsx)(yN,{htmlFor:"groupName",className:"text-sm font-medium text-gray-700",children:"Group Name"}),(0,Rr.jsx)(Gf,{id:"groupName",type:"text",placeholder:"Enter new or existing group name",value:l,onChange:e=>c(e.target.value),className:"mt-1 block w-full max-w-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"}),x&&(0,Rr.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,Rr.jsx)(Vn,{type:"button",variant:"outline",onClick:()=>{v(null),c(""),o([]),f(null)},children:"Cancel Edit"}),(0,Rr.jsx)(Vn,{onClick:y,disabled:d||0===i.length||!l.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:d?"Updating...":`Update Group Items (${i.length})`})]}),!x&&(0,Rr.jsx)(Vn,{onClick:y,disabled:d||0===i.length||!l.trim(),className:"mt-2 w-full sm:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:d?"Assigning...":`Assign ${i.length} Item(s) to Group`})]})})]})]})]})]})},rJ=()=>{const e=rt(),{isLoading:r,isCollapsed:n}=$e((e=>e.loader)),a=$e((e=>e.user.isAuthenticated)),[s,i]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{e(Ou(!0)),e(zu()).then((()=>{if(a)return Promise.all([e(Du()),e(rh())])})).finally((()=>{e(Ou(!1)),i(!1)}))}),[e,a]),s?(0,Rr.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,Rr.jsxs)("div",{className:"relative",children:[(0,Rr.jsx)("div",{className:"w-24 h-24 rounded-full border-8 border-blue-200"}),(0,Rr.jsx)("div",{className:"absolute top-0 left-0 w-24 h-24 rounded-full border-t-8 border-blue-500 animate-spin"}),(0,Rr.jsx)("div",{className:"absolute top-0 left-0 w-24 h-24 rounded-full border-8 border-transparent animate-pulse"})]})}):(0,Rr.jsxs)("div",{className:"flex relative",children:[r&&(0,Rr.jsx)("div",{className:"youtube-loader"}),a&&(0,Rr.jsx)(Gg,{}),(0,Rr.jsx)("main",{className:(a?n?"md:ml-16":"md:ml-48":"")+" flex-1 px-0 sm:px-4 w-full h-screen overflow-y-auto transition-all duration-300",children:(0,Rr.jsxs)(xe,{children:[(0,Rr.jsx)(me,{path:"/",element:a?(0,Rr.jsx)(FX,{}):(0,Rr.jsx)(Vy,{})}),(0,Rr.jsx)(me,{path:"/about",element:(0,Rr.jsx)(RN,{})}),(0,Rr.jsx)(me,{path:"/contact",element:(0,Rr.jsx)(BN,{})}),a&&(0,Rr.jsxs)(Rr.Fragment,{children:[(0,Rr.jsx)(me,{path:"/staff",element:(0,Rr.jsx)(Rw,{})}),(0,Rr.jsx)(me,{path:"/accounts",element:(0,Rr.jsx)(jX,{})}),(0,Rr.jsx)(me,{path:"/settings",element:(0,Rr.jsx)(Iw,{})}),(0,Rr.jsx)(me,{path:"/staff/:staffId",element:(0,Rr.jsx)(pN,{})}),(0,Rr.jsx)(me,{path:"/addstaff",element:(0,Rr.jsx)(bN,{})}),(0,Rr.jsx)(me,{path:"/dashboard",element:(0,Rr.jsx)(bw,{})}),(0,Rr.jsx)(me,{path:"/editstaff/:staffId",element:(0,Rr.jsx)(bN,{})}),(0,Rr.jsx)(me,{path:"/settings/pharmacy-info",element:(0,Rr.jsx)(EN,{})}),(0,Rr.jsx)(me,{path:"/expenses",element:(0,Rr.jsx)(kP,{})}),(0,Rr.jsx)(me,{path:"/sales",element:(0,Rr.jsx)(E$,{})}),(0,Rr.jsx)(me,{path:"/purchase",element:(0,Rr.jsx)(T$,{})}),(0,Rr.jsx)(me,{path:"/inventory",element:(0,Rr.jsx)(vX,{})}),(0,Rr.jsx)(me,{path:"/distributors",element:(0,Rr.jsx)(xG,{})}),(0,Rr.jsx)(me,{path:"/customers",element:(0,Rr.jsx)(CX,{})}),(0,Rr.jsx)(me,{path:"/payments",element:(0,Rr.jsx)(IX,{})}),(0,Rr.jsx)(me,{path:"/reports",element:(0,Rr.jsx)(XQ,{})}),(0,Rr.jsx)(me,{path:"/customers/:customerId",element:(0,Rr.jsx)(_X,{})}),(0,Rr.jsx)(me,{path:"/sales/create-sell-invoice",element:(0,Rr.jsx)(MY,{})}),(0,Rr.jsx)(me,{path:"/purchase/create-purchase-invoice",element:(0,Rr.jsx)(TY,{})}),(0,Rr.jsx)(me,{path:"/purchase/:invoiceId",element:(0,Rr.jsx)(VY,{})}),(0,Rr.jsx)(me,{path:"/sales/:invoiceId",element:(0,Rr.jsx)(WY,{})}),(0,Rr.jsx)(me,{path:"/distributors/:distributorId",element:(0,Rr.jsx)(YY,{})}),(0,Rr.jsx)(me,{path:"/payment/:paymentId",element:(0,Rr.jsx)(tX,{})}),(0,Rr.jsx)(me,{path:"/payment/create-payment/:distributorId?",element:(0,Rr.jsx)(ZY,{})}),(0,Rr.jsx)(me,{path:"/purchase/return/create",element:(0,Rr.jsx)(aX,{})}),(0,Rr.jsx)(me,{path:"/purchase/return",element:(0,Rr.jsx)(D$,{})}),(0,Rr.jsx)(me,{path:"/purchase/return/:returnId",element:(0,Rr.jsx)(PX,{})}),(0,Rr.jsx)(me,{path:"/sales/invoice-print",element:(0,Rr.jsx)(yX,{})}),(0,Rr.jsx)(me,{path:"/payment/invoice-print",element:(0,Rr.jsx)(JQ,{})}),(0,Rr.jsx)(me,{path:"/settings/config",element:(0,Rr.jsx)(ZQ,{})}),(0,Rr.jsx)(me,{path:"/settings/manage-groups",element:(0,Rr.jsx)(tJ,{})}),(0,Rr.jsx)(me,{path:"/accounts/transactions/:accountId",element:(0,Rr.jsx)(eJ,{})})]})]})})]})},nJ=()=>(0,Rr.jsx)(Qe,{store:qf,children:(0,Rr.jsxs)(Ce,{children:[(0,Rr.jsx)(kX,{}),(0,Rr.jsx)(rJ,{})]})}),aJ=rm("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var sJ="ToastProvider",[iJ,oJ,lJ]=cx("Toast"),[cJ,dJ]=$n("Toast",[lJ]),[uJ,hJ]=cJ(sJ),fJ=e=>{const{__scopeToast:r,label:n="Notification",duration:a=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=e,[l,c]=t.useState(null),[d,u]=t.useState(0),h=t.useRef(!1),f=t.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${sJ}\`. Expected non-empty \`string\`.`),(0,Rr.jsx)(iJ.Provider,{scope:r,children:(0,Rr.jsx)(uJ,{scope:r,label:n,duration:a,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:t.useCallback((()=>u((e=>e+1))),[]),onToastRemove:t.useCallback((()=>u((e=>e-1))),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};fJ.displayName=sJ;var mJ="ToastViewport",pJ=["F8"],xJ="toast.viewportPause",vJ="toast.viewportResume",gJ=t.forwardRef(((e,r)=>{const{__scopeToast:n,hotkey:a=pJ,label:s="Notifications ({hotkey})",...i}=e,o=hJ(mJ,n),l=oJ(n),c=t.useRef(null),d=t.useRef(null),u=t.useRef(null),h=t.useRef(null),f=_r(r,h,o.onViewportChange),m=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;t.useEffect((()=>{const e=e=>{const t=0!==a.length&&a.every((t=>e[t]||e.code===t));t&&h.current?.focus()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[a]),t.useEffect((()=>{const e=c.current,t=h.current;if(p&&e&&t){const r=()=>{if(!o.isClosePausedRef.current){const e=new CustomEvent(xJ);t.dispatchEvent(e),o.isClosePausedRef.current=!0}},n=()=>{if(o.isClosePausedRef.current){const e=new CustomEvent(vJ);t.dispatchEvent(e),o.isClosePausedRef.current=!1}},a=t=>{!e.contains(t.relatedTarget)&&n()},s=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",r),e.addEventListener("focusout",a),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",s),window.addEventListener("blur",r),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",a),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",r),window.removeEventListener("focus",n)}}}),[p,o.isClosePausedRef]);const x=t.useCallback((e=>{let{tabbingDirection:t}=e;const r=l().map((e=>{const r=e.ref.current,n=[r,...FJ(r)];return"forwards"===t?n:n.reverse()}));return("forwards"===t?r.reverse():r).flat()}),[l]);return t.useEffect((()=>{const e=h.current;if(e){const t=t=>{const r=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!r){const r=document.activeElement,n=t.shiftKey;if(t.target===e&&n)return void d.current?.focus();const a=x({tabbingDirection:n?"backwards":"forwards"}),s=a.findIndex((e=>e===r));LJ(a.slice(s+1))?t.preventDefault():n?d.current?.focus():u.current?.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}}),[l,x]),(0,Rr.jsxs)(sa,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&(0,Rr.jsx)(bJ,{ref:d,onFocusFromOutsideViewport:()=>{LJ(x({tabbingDirection:"forwards"}))}}),(0,Rr.jsx)(iJ.Slot,{scope:n,children:(0,Rr.jsx)(qn.ol,{tabIndex:-1,...i,ref:f})}),p&&(0,Rr.jsx)(bJ,{ref:u,onFocusFromOutsideViewport:()=>{LJ(x({tabbingDirection:"backwards"}))}})]})}));gJ.displayName=mJ;var yJ="ToastFocusProxy",bJ=t.forwardRef(((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,s=hJ(yJ,r);return(0,Rr.jsx)(hp,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:e=>{const t=e.relatedTarget;!s.viewport?.contains(t)&&n()}})}));bJ.displayName=yJ;var wJ="Toast",NJ=t.forwardRef(((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:s,...i}=e,[o=!0,l]=Si({prop:n,defaultProp:a,onChange:s});return(0,Rr.jsx)(Ni,{present:r||o,children:(0,Rr.jsx)(CJ,{open:o,...i,ref:t,onClose:()=>l(!1),onPause:Kn(e.onPause),onResume:Kn(e.onResume),onSwipeStart:Hn(e.onSwipeStart,(e=>{e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:Hn(e.onSwipeMove,(e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)})),onSwipeCancel:Hn(e.onSwipeCancel,(e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:Hn(e.onSwipeEnd,(e=>{const{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),l(!1)}))})})}));NJ.displayName=wJ;var[jJ,SJ]=cJ(wJ,{onClose(){}}),CJ=t.forwardRef(((e,r)=>{const{__scopeToast:n,type:a="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...p}=e,x=hJ(wJ,n),[v,g]=t.useState(null),y=_r(r,(e=>g(e))),b=t.useRef(null),w=t.useRef(null),N=s||x.duration,j=t.useRef(0),S=t.useRef(N),C=t.useRef(0),{onToastAdd:k,onToastRemove:E}=x,T=Kn((()=>{const e=v?.contains(document.activeElement);e&&x.viewport?.focus(),o()})),D=t.useCallback((e=>{e&&e!==1/0&&(window.clearTimeout(C.current),j.current=(new Date).getTime(),C.current=window.setTimeout(T,e))}),[T]);t.useEffect((()=>{const e=x.viewport;if(e){const t=()=>{D(S.current),d?.()},r=()=>{const e=(new Date).getTime()-j.current;S.current=S.current-e,window.clearTimeout(C.current),c?.()};return e.addEventListener(xJ,r),e.addEventListener(vJ,t),()=>{e.removeEventListener(xJ,r),e.removeEventListener(vJ,t)}}}),[x.viewport,N,c,d,D]),t.useEffect((()=>{i&&!x.isClosePausedRef.current&&D(N)}),[i,N,x.isClosePausedRef,D]),t.useEffect((()=>(k(),()=>E())),[k,E]);const A=t.useMemo((()=>v?IJ(v):null),[v]);return x.viewport?(0,Rr.jsxs)(Rr.Fragment,{children:[A&&(0,Rr.jsx)(kJ,{__scopeToast:n,role:"status","aria-live":"foreground"===a?"assertive":"polite","aria-atomic":!0,children:A}),(0,Rr.jsx)(jJ,{scope:n,onClose:T,children:ge.createPortal((0,Rr.jsx)(iJ.ItemSlot,{scope:n,children:(0,Rr.jsx)(aa,{asChild:!0,onEscapeKeyDown:Hn(l,(()=>{x.isFocusedToastEscapeKeyDownRef.current||T(),x.isFocusedToastEscapeKeyDownRef.current=!1})),children:(0,Rr.jsx)(qn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...p,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Hn(e.onKeyDown,(e=>{"Escape"===e.key&&(l?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,T()))})),onPointerDown:Hn(e.onPointerDown,(e=>{0===e.button&&(b.current={x:e.clientX,y:e.clientY})})),onPointerMove:Hn(e.onPointerMove,(e=>{if(!b.current)return;const t=e.clientX-b.current.x,r=e.clientY-b.current.y,n=Boolean(w.current),a=["left","right"].includes(x.swipeDirection),s=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,i=a?s(0,t):0,o=a?0:s(0,r),l="touch"===e.pointerType?10:2,c={x:i,y:o},d={originalEvent:e,delta:c};n?(w.current=c,MJ("toast.swipeMove",h,d,{discrete:!1})):OJ(c,x.swipeDirection,l)?(w.current=c,MJ("toast.swipeStart",u,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(r)>l)&&(b.current=null)})),onPointerUp:Hn(e.onPointerUp,(e=>{const t=w.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),w.current=null,b.current=null,t){const r=e.currentTarget,n={originalEvent:e,delta:t};OJ(t,x.swipeDirection,x.swipeThreshold)?MJ("toast.swipeEnd",m,n,{discrete:!0}):MJ("toast.swipeCancel",f,n,{discrete:!0}),r.addEventListener("click",(e=>e.preventDefault()),{once:!0})}}))})})}),x.viewport)})]}):null})),kJ=e=>{const{__scopeToast:r,children:n,...a}=e,s=hJ(wJ,r),[i,o]=t.useState(!1),[l,c]=t.useState(!1);return function(){const e=Kn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{});ya((()=>{let t=0,r=0;return t=window.requestAnimationFrame((()=>r=window.requestAnimationFrame(e))),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}}),[e])}((()=>o(!0))),t.useEffect((()=>{const e=window.setTimeout((()=>c(!0)),1e3);return()=>window.clearTimeout(e)}),[]),l?null:(0,Rr.jsx)(wi,{asChild:!0,children:(0,Rr.jsx)(hp,{...a,children:i&&(0,Rr.jsxs)(Rr.Fragment,{children:[s.label," ",n]})})})},EJ=t.forwardRef(((e,t)=>{const{__scopeToast:r,...n}=e;return(0,Rr.jsx)(qn.div,{...n,ref:t})}));EJ.displayName="ToastTitle";var TJ=t.forwardRef(((e,t)=>{const{__scopeToast:r,...n}=e;return(0,Rr.jsx)(qn.div,{...n,ref:t})}));TJ.displayName="ToastDescription";var DJ="ToastAction",AJ=t.forwardRef(((e,t)=>{const{altText:r,...n}=e;return r.trim()?(0,Rr.jsx)(RJ,{altText:r,asChild:!0,children:(0,Rr.jsx)(_J,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${DJ}\`. Expected non-empty \`string\`.`),null)}));AJ.displayName=DJ;var PJ="ToastClose",_J=t.forwardRef(((e,t)=>{const{__scopeToast:r,...n}=e,a=SJ(PJ,r);return(0,Rr.jsx)(RJ,{asChild:!0,children:(0,Rr.jsx)(qn.button,{type:"button",...n,ref:t,onClick:Hn(e.onClick,a.onClose)})})}));_J.displayName=PJ;var RJ=t.forwardRef(((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return(0,Rr.jsx)(qn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})}));function IJ(e){const t=[];return Array.from(e.childNodes).forEach((e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const r=e.ariaHidden||e.hidden||"none"===e.style.display,n=""===e.dataset.radixToastAnnounceExclude;if(!r)if(n){const r=e.dataset.radixToastAnnounceAlt;r&&t.push(r)}else t.push(...IJ(e))}})),t}function MJ(e,t,r,n){let{discrete:a}=n;const s=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),a?Gn(s,i):s.dispatchEvent(i)}var OJ=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=Math.abs(e.x),a=Math.abs(e.y),s=n>a;return"left"===t||"right"===t?s&&n>r:!s&&a>r};function FJ(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function LJ(e){const t=document.activeElement;return e.some((e=>e===t||(e.focus(),document.activeElement!==t)))}var BJ=gJ,UJ=NJ,zJ=EJ,VJ=TJ,HJ=AJ,$J=_J;const WJ=fJ,qJ=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(BJ,{ref:t,className:Un("fixed top-0 left-1/2 -translate-x-1/2 z-[100] flex max-h-screen w-full flex-col-reverse p-0 sm:max-w-[380px]",r),...n})}));qJ.displayName=BJ.displayName;const GJ=Hr("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-2 pr-6 pl-4 shadow-lg transition-all data-[swipe=cancel]:translate-y-0 data-[swipe=end]:translate-y-[var(--radix-toast-swipe-end-y)] data-[swipe=move]:translate-y-[var(--radix-toast-swipe-move-y)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-top-full data-[state=open]:slide-in-from-top-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground font-Roboto",success:"border-green-500 bg-[#28a745] text-white font-Roboto"}},defaultVariants:{variant:"default"}}),KJ=t.forwardRef(((e,t)=>{let{className:r,variant:n,...a}=e;return(0,Rr.jsx)(UJ,{ref:t,className:Un(GJ({variant:n}),r),...a,children:(0,Rr.jsxs)("div",{className:"flex items-center",children:["success"===n&&(0,Rr.jsx)(aJ,{className:"h-6 w-6 mr-2 flex-shrink-0"}),"destructive"===n&&(0,Rr.jsx)(bl,{className:"h-6 w-6 mr-2 flex-shrink-0"}),(0,Rr.jsx)("div",{children:a.children})]})})}));KJ.displayName=UJ.displayName;t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(HJ,{ref:t,className:Un("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...n})})).displayName=HJ.displayName;const YJ=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)($J,{ref:t,className:Un("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...n,children:(0,Rr.jsx)(xl,{className:"h-4 w-4"})})}));YJ.displayName=$J.displayName;const XJ=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(zJ,{ref:t,className:Un("text-sm font-semibold [&+div]:text-xs",r),...n})}));XJ.displayName=zJ.displayName;const QJ=t.forwardRef(((e,t)=>{let{className:r,...n}=e;return(0,Rr.jsx)(VJ,{ref:t,className:Un("text-sm opacity-90",r),...n})}));function JJ(){const{toasts:e}=$g();return(0,Rr.jsxs)(WJ,{children:[e.map((function(e){let{id:t,title:r,description:n,action:a,...s}=e;return(0,Rr.jsxs)(KJ,{...s,children:[(0,Rr.jsxs)("div",{className:"grid gap-1",children:[r&&(0,Rr.jsx)(XJ,{children:r}),n&&(0,Rr.jsx)(QJ,{children:n})]}),a,(0,Rr.jsx)(YJ,{})]},t)})),(0,Rr.jsx)(qJ,{})]})}QJ.displayName=VJ.displayName;a.createRoot(document.getElementById("root")).render((0,Rr.jsxs)(Qe,{store:qf,children:[(0,Rr.jsx)(nJ,{}),(0,Rr.jsx)(JJ,{})]}))})()})();
//# sourceMappingURL=main.fcca7706.js.map